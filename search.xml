<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Hadoop 常用命令]]></title>
      <url>http://liu2lin600.github.io/2018/06/22/Hadoop-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<p>&#x8BB0;&#x5F55;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684; hadoop &#x76F8;&#x5173;&#x7684;&#x547D;&#x4EE4;<br><a id="more"></a></p>
<h3 id="hadoop"><a href="#hadoop" class="headerlink" title="hadoop"></a>hadoop</h3><blockquote>
<p><code>distcp</code><br><code>version</code>&#xFF1A;&#x7248;&#x672C;&#x53F7;<br><code>fs</code>&#xFF1A;&#x7531; <code>hdfs dfs</code> &#x4EE3;&#x66FF;<br><code>job</code>&#xFF1A;&#x7531; <code>mapred job</code> &#x4EE3;&#x66FF;<br><code>fsck</code>&#xFF1A;&#x7531; <code>hdfs fsck</code> &#x4EE3;&#x66FF;<br><code>balancer</code>&#xFF1A;&#x7531; <code>hdfs balancer</code> &#x4EE3;&#x66FF;<br><code>datanode</code>&#xFF1A;&#x7531; <code>hdfs datanode</code> &#x4EE3;&#x66FF;<br><code>namenode</code>&#xFF1A;&#x7531; <code>hdfs namenode</code> &#x4EE3;&#x66FF;<br><code>dfsadmin</code>&#xFF1A;&#x7531; <code>hdfs dfsadmin</code> &#x4EE3;&#x66FF;<br><code>secondarynamenode</code>&#xFF1A;&#x7531; <code>hdfs secondarynamenode</code> &#x4EE3;&#x66FF;  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop version</span><br></pre></td></tr></table></figure>
<h3 id="hdfs"><a href="#hdfs" class="headerlink" title="hdfs"></a>hdfs</h3><blockquote>
<p><code>dfs</code><br><code>fsck</code><br><code>dfsadmin</code><br><code>datanode</code><br><code>balancer</code>  </p>
</blockquote>
<ul>
<li><code>dfs</code></li>
</ul>
<blockquote>
<p>&#x4EE5;&#x4E0B;&#x4F8B;&#x5B50;&#x4E2D; /hdfs&#x3001;hdfs://xx &#x4E3A;hdfs&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x8DEF;&#xFF0C;/tmp&#x4E3A;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x8DEF;&#x5F84;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -ls -h /hdfs/a hdfs://10.0.0.1:8020/hdfs</span><br><span class="line">hdfs dfs -get /hdfs/a.log /tmp</span><br><span class="line">hdfs dfs -put ./local.conf hdfs://10.0.0.1:8020:/hdfs</span><br><span class="line">hdfs dfs -cat /hdfs/a.log /hdfs/b.conf</span><br><span class="line">hdfs dfs -cp -f -p /hdfs/dir1/aa /hdfs/dir2/</span><br><span class="line">hdfs dfs -mv /hdfs/dir1 /hdfs/dir2 /hdfs/tmp</span><br><span class="line">hdfs dfs -rm -r -f -skipTrash /hdfs/a</span><br><span class="line">hdfs dfs -count -v /hdfs/*</span><br><span class="line">hdfs dfs -du -s -h /hdfs/*</span><br><span class="line">hdfs dfs -df -h /hdfs</span><br><span class="line">hdfs dfs -mkdir -p /hdfs/a/b/c</span><br><span class="line">hdfs dfs -expunge</span><br><span class="line">hdfs dfs -chmod 640 /hdfs/a.log</span><br><span class="line">hdfs dfs -chown liulin /hdfs/b.conf</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<ul>
<li><code>fsck</code></li>
</ul>
<p><code>-delete</code>&#xFF1A;&#x5220;&#x9664;&#x635F;&#x574F;&#x7684;&#x6587;&#x4EF6;<br><code>-move</code>&#xFF1A;&#x79FB;&#x52A8;&#x635F;&#x574F;&#x7684;&#x6587;&#x4EF6;&#x5230;/lost+found&#x76EE;&#x5F55;<br><code>-files</code>&#xFF1A;&#x6253;&#x5370;&#x88AB;&#x8BCA;&#x65AD;&#x7684;&#x6587;&#x4EF6;<br><code>-files -blocks</code>&#xFF1A;&#x6253;&#x5370;&#x88AB;&#x8BCA;&#x65AD;&#x7684;&#x6587;&#x4EF6;&#x7684;&#x5757;&#x4FE1;&#x606F;<br><code>-files -blocks -locations</code>&#xFF1A;&#x6253;&#x5370;&#x6BCF;&#x4E2A;&#x5757;&#x7684;&#x4F4D;&#x7F6E;&#x4FE1;&#x606F;<br><code>-files -blocks -racks</code>&#xFF1A;&#x6253;&#x5370;&#x6570;&#x636E;&#x5757;&#x7684;&#x7F51;&#x7EDC;&#x62D3;&#x6251;&#x7ED3;&#x6784;<br><code>-includeSnapshots</code>&#xFF1A;&#x5982;&#x679C;&#x7ED9;&#x5B9A;&#x7684;&#x8DEF;&#x5F84;&#x5305;&#x542B;&#x5FEB;&#x7167;&#x7684;&#x8DEF;&#x5F84;&#x6216;&#x8005;&#x5FEB;&#x7167;&#x5728;&#x8BE5;&#x8DEF;&#x5F84;&#x4E0B;&#xFF0C;&#x5219;&#x5305;&#x542B;&#x5FEB;&#x7167;&#x7684;&#x6570;&#x636E;<br><code>-list-corruptfileblocks</code>&#xFF1A;&#x6253;&#x5370;&#x4E22;&#x5931;&#x7684;&#x5757;&#x5217;&#x8868;&#x4EE5;&#x53CA;&#x5757;&#x6240;&#x5C5E;&#x7684;&#x6587;&#x4EF6;<br><code>-openforwrite</code>&#xFF1A;&#x6253;&#x5370;&#x6B63;&#x5728;&#x88AB;&#x5199;&#x5165;&#x7684;&#x6587;&#x4EF6;  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hdfs fsck /hdfs</span><br><span class="line">hdfs fsck -delete /hdfs</span><br><span class="line">hdfs fsck -move /hdfs</span><br></pre></td></tr></table></figure>
<ul>
<li><code>dfsadmin</code></li>
</ul>
<p><code>-safemode enter|leave|get|wait</code>&#xFF1A;&#x5B89;&#x5168;&#x6A21;&#x5F0F;&#x7EF4;&#x62A4;&#x547D;&#x4EE4;<br><code>-setBalancerBandwidth</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x5747;&#x8861;&#x7684;&#x901F;&#x5EA6;<br><code>-report [-live] [-dead] [-decommissioning]</code>&#xFF1A;&#x62A5;&#x544A;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x4FE1;&#x606F;&#x548C;&#x7EDF;&#x8BA1;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x8FC7;&#x6EE4;&#x8282;&#x70B9;<br><code>-printTopology</code>&#xFF1A;&#x6253;&#x5370;&#x54EA;&#x4E9B;&#x6709;&#x5728;Namenode&#x62A5;&#x544A;&#x7684;&#x8282;&#x70B9;&#x7684;&#x7F51;&#x7EDC;&#x62D3;&#x6251;&#x7ED3;&#x6784;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfsadmin -safemode get</span><br><span class="line">hdfs dfsadmin -setBalancerBandwidth 104550400 	# &#x8BBE;&#x7F6E;&#x4E3A;100M/s</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>datanode</code></p>
</li>
<li><p><code>balancer</code></p>
</li>
</ul>
<p><code>-threshold</code>&#xFF1A;&#x9ED8;&#x8BA4;&#x5747;&#x8861;&#x7684;&#x9600;&#x503C;<br><code>-policy</code>&#xFF1A;<br><code>-include -f host1,host2</code>&#xFF1A;&#x6307;&#x5B9A;datanode<br><code>-exclude -f host3,host4</code>&#xFF1A;&#x6392;&#x9664;  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdfs balancer -threshold 1 -policy datanode</span><br></pre></td></tr></table></figure>
<ul>
<li><code>getconf</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hdfs getconf -namenodes</span><br><span class="line">hdfs getconf -nnRpcAddresses</span><br></pre></td></tr></table></figure>
<ul>
<li><code>oev</code><br><code>hadoop edit&#x6587;&#x4EF6;&#x79BB;&#x7EBF;&#x67E5;&#x770B;&#x5668;</code></li>
</ul>
<ul>
<li><code>oiv</code><br><code>hadoop image&#x6587;&#x4EF6;&#x67E5;&#x770B;&#x5668;</code></li>
</ul>
<h3 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h3><blockquote>
<p><code>application</code><br><code>applicationattempt</code><br><code>container</code><br><code>logs</code><br><code>node</code>  </p>
</blockquote>
<ul>
<li><code>application</code></li>
</ul>
<p><code>-list</code>               &#xFF1A;&#x4ECE;RM&#x67E5;&#x770B;application&#x5217;&#x8868;<br><code>-kill &lt;AppId&gt;</code>       &#xFF1A;&#x6740;&#x6B7B;application<br><code>-status &lt;AppId&gt;</code>     &#xFF1A;&#x6253;&#x5370;&#x6307;&#x5B9A;application&#x72B6;&#x6001;<br><code>-appTypes &lt;Types&gt;</code>   &#xFF1A;&#x4E0E;-list&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x57FA;&#x4E8E;&#x4F20;&#x5165;&#x7684;&#x9017;&#x53F7;&#x5206;&#x9694;&#x7684;application types&#x5217;&#x8868;&#x8FC7;&#x6EE4;<br><code>-appStates &lt;States&gt;</code> &#xFF1A;&#x4E0E;-list&#x4E00;&#x8D77;&#xFF0C;&#x53EF;&#x53D6;ALL, NEW, NEW_SAVING, SUBMITTED, ACCEPTED, RUNNING, FINISHED, FAILED, KILLED&#xFF0C;&#x53EF;&#x591A;&#x4E2A;&#x7528;&#x9017;&#x53F7;&#x9694;&#x5F00;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn application -list</span><br><span class="line">yarn application -list -appStates FAILED,NEW</span><br><span class="line">yarn application -status application_1534006015382_0379</span><br></pre></td></tr></table></figure>
<ul>
<li><code>applicationattempt</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn applicationattempt -list application_1530168666576_3446336</span><br><span class="line">yarn applicationattempt -status appattempt_1437364567082_0106_000001</span><br></pre></td></tr></table></figure>
<ul>
<li><code>container</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn container -list appattempt_1501040274955_1945_000001</span><br><span class="line">yarn container -status container_1501040274955_1945_01_000002</span><br></pre></td></tr></table></figure>
<ul>
<li><code>logs</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn logs -applicationId application_1491808105321_22924 [-appOwner hadoop]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>node</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yarn node -list</span><br><span class="line">yarn node -list -all</span><br><span class="line">yarn node -list -states NEW,RUNNING</span><br><span class="line">yarn node -status data01.liulin.com:8041</span><br></pre></td></tr></table></figure>
<h3 id="mapred"><a href="#mapred" class="headerlink" title="mapred"></a>mapred</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mapred job -list</span><br><span class="line">mapred job -logs job_xxx</span><br><span class="line">mapred job -kill job_xxx</span><br><span class="line">mapred job -status job_xxx</span><br></pre></td></tr></table></figure>
<h2 id="&#x76F8;&#x5173;&#x6587;&#x7AE0;"><a href="#&#x76F8;&#x5173;&#x6587;&#x7AE0;" class="headerlink" title="&#x76F8;&#x5173;&#x6587;&#x7AE0;"></a>&#x76F8;&#x5173;&#x6587;&#x7AE0;</h2><p><a href="https://blog.csdn.net/qianshangding0708/article/details/47423585" target="_blank" rel="noopener">https://blog.csdn.net/qianshangding0708/article/details/47423585</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[bash编程备忘]]></title>
      <url>http://liu2lin600.github.io/2017/09/14/bash%E7%BC%96%E7%A8%8B%E5%A4%87%E5%BF%98/</url>
      <content type="html"><![CDATA[<p>bash&#x7F16;&#x7A0B;&#x5907;&#x5FD8;</p>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash -n test.sh 		# &#x68C0;&#x6D4B;&#x8BED;&#x6CD5;</span><br><span class="line">bash -x test.sh 		# &#x8C03;&#x8BD5;&#x6267;&#x884C;</span><br></pre></td></tr></table></figure>
<h2 id="&#x8BF4;&#x660E;"><a href="#&#x8BF4;&#x660E;" class="headerlink" title="&#x8BF4;&#x660E;"></a>&#x8BF4;&#x660E;</h2><blockquote>
<p>&#x82E5;&#x4ECE;&#x6280;&#x672F;&#x7684;&#x7EC6;&#x8282;&#x6765;&#x770B;&#xFF0C;shell&#x4F1A;&#x4F9D;&#x636E;IFS(Internal Field Seperator) &#x5C06;&#x547D;&#x4EE4;&#x884C;&#x6240;&#x8F93;&#x5165;&#x7684;&#x6587;&#x5B57;&#x62C6;&#x89E3;&#x4E3A;&#x201D;&#x5B57;&#x6BB5;&#x201D;(word/field)&#x3002; &#x7136;&#x540E;&#x518D;&#x9488;&#x5BF9;&#x7279;&#x6B8A;&#x5B57;&#x7B26;(meta)&#x5148;&#x4F5C;&#x5904;&#x7406;&#xFF0C;&#x6700;&#x540E;&#x91CD;&#x7EC4;&#x6574;&#x884C;&#x547D;&#x4EE4;&#x884C;</p>
</blockquote>
<ul>
<li><code>IFS</code>&#xFF1A;&#x6709;<code>space</code>&#x6216;&#x8005;<code>tab</code>&#x6216;&#x8005;<code>Enter</code>&#x4E09;&#x8005;&#x4E4B;&#x4E00;&#x7EC4;&#x6210;(&#x6211;&#x4EEC;&#x5E38;&#x7528;space)</li>
<li><code>CR</code>: &#x7531;<code>Enter</code>&#x4EA7;&#x751F;&#xFF1B;</li>
</ul>
<p><code>IFS</code>(Internal Field Seperator)&#x662F;&#x7528;&#x6765;&#x62C6;&#x89E3;<code>command line</code>&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;&#x8BCD;(word)&#x7528;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;<code>shell command line</code>&#x662F;&#x6309;&#x8BCD;&#x6765;&#x5904;&#x7406;&#x7684;&#x3002;<br>&#x800C;<code>CR</code>&#x5219;&#x662F;&#x7528;&#x6765;&#x7ED3;&#x675F;<code>command line</code>&#x7528;&#x7684;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4F55;&#x6211;&#x4EEC;&#x6572;<code>Enter</code>&#x952E;&#xFF0C;&#x547D;&#x4EE4;&#x5C31;&#x4F1A;&#x8DD1;&#x7684;&#x539F;&#x56E0;&#x3002;</p>
<p>&#x9664;&#x4E86;&#x5E38;&#x7528;&#x7684;<code>IFS</code>&#x4E0E;<code>CR</code>, &#x5E38;&#x7528;&#x7684;meta&#x8FD8;&#x6709;&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:center">meta&#x5B57;&#x7B26;</th>
<th>meta&#x5B57;&#x7B26;&#x4F5C;&#x7528;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">=</td>
<td>&#x8BBE;&#x5B9A;&#x53D8;&#x91CF;</td>
</tr>
<tr>
<td style="text-align:center">$</td>
<td>&#x4F5C;&#x53D8;&#x91CF;&#x6216;&#x8FD0;&#x7B97;&#x66FF;&#x6362;(&#x8BF7;&#x4E0D;&#x8981;&#x4E0E;<code>shell prompt</code>&#x6DF7;&#x6DC6;)</td>
</tr>
<tr>
<td style="text-align:center">&gt;</td>
<td>&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;(&#x91CD;&#x5B9A;&#x5411;stdout)</td>
</tr>
<tr>
<td style="text-align:center">&lt;</td>
<td>&#x8F93;&#x5165;&#x91CD;&#x5B9A;&#x5411;(&#x91CD;&#x5B9A;&#x5411;stdin)</td>
</tr>
<tr>
<td style="text-align:center">&amp;</td>
<td>&#x91CD;&#x5B9A;&#x5411;file descriptor&#x6216;&#x5C06;&#x547D;&#x4EE4;&#x81F3;&#x4E8E;&#x540E;&#x53F0;(bg)&#x8FD0;&#x884C;</td>
</tr>
<tr>
<td style="text-align:center">()</td>
<td>&#x5C06;&#x5176;&#x5185;&#x90E8;&#x7684;&#x547D;&#x4EE4;&#x7F6E;&#x4E8E;nested subshell&#x6267;&#x884C;&#xFF0C;&#x6216;&#x7528;&#x4E8E;&#x8FD0;&#x7B97;&#x6216;&#x53D8;&#x91CF;&#x66FF;&#x6362;</td>
</tr>
<tr>
<td style="text-align:center">{}</td>
<td>&#x5C06;&#x671F;&#x5185;&#x7684;&#x547D;&#x4EE4;&#x7F6E;&#x4E8E;non-named function&#x4E2D;&#x6267;&#x884C;&#xFF0C;&#x6216;&#x7528;&#x5728;&#x53D8;&#x91CF;&#x66FF;&#x6362;&#x7684;&#x754C;&#x5B9A;&#x8303;&#x56F4;</td>
</tr>
<tr>
<td style="text-align:center">;</td>
<td>&#x5728;&#x524D;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x7ED3;&#x675F;&#x65F6;&#xFF0C;&#x800C;&#x5FFD;&#x7565;&#x5176;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;</td>
</tr>
<tr>
<td style="text-align:center">&amp;&amp;</td>
<td>&#x5728;&#x524D;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x7ED3;&#x675F;&#x65F6;&#xFF0C;&#x82E5;&#x8FD4;&#x56DE;&#x503C;&#x4E3A;true&#xFF0C;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;</td>
</tr>
<tr>
<td style="text-align:center">!</td>
<td>&#x6267;&#x884C;histroy&#x5217;&#x8868;&#x4E2D;&#x7684;&#x547D;&#x4EE4;</td>
</tr>
<tr>
<td style="text-align:center">&#x2026;</td>
<td>&#x2026;</td>
</tr>
</tbody>
</table>
<h2 id="&#x53D8;&#x91CF;"><a href="#&#x53D8;&#x91CF;" class="headerlink" title="&#x53D8;&#x91CF;"></a>&#x53D8;&#x91CF;</h2><h3 id="&#x547D;&#x540D;&#x89C4;&#x5219;"><a href="#&#x547D;&#x540D;&#x89C4;&#x5219;" class="headerlink" title="&#x547D;&#x540D;&#x89C4;&#x5219;"></a>&#x547D;&#x540D;&#x89C4;&#x5219;</h3><ul>
<li>&#x7B49;&#x53F7;&#x5DE6;&#x53F3;&#x4E24;&#x8FB9;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#x5206;&#x9694;&#x7B26;&#x53F7;(IFS),&#x4E5F;&#x5E94;&#x907F;&#x514D;&#x4F7F;&#x7528;shell&#x7684;&#x4FDD;&#x7559;&#x5143;&#x5B57;&#x7B26;(meta charactor)</li>
<li>&#x53D8;&#x91CF;&#x7684;&#x540D;&#x79F0;(name)&#x4E0D;&#x80FD;&#x4F7F;&#x7528;$&#x7B26;&#x53F7;</li>
<li>&#x53D8;&#x91CF;&#x7684;&#x540D;&#x79F0;(name)&#x7684;&#x9996;&#x5B57;&#x7B26;&#x4E0D;&#x80FD;&#x662F;&#x6570;&#x5B57;(number)</li>
<li>&#x53D8;&#x91CF;&#x7684;&#x540D;&#x79F0;(name)&#x7684;&#x957F;&#x5EA6;&#x4E0D;&#x53EF;&#x8D85;&#x8FC7;256&#x4E2A;&#x5B57;&#x7B26;</li>
<li>&#x53D8;&#x91CF;&#x7684;&#x540D;&#x79F0;(name)&#x53CA;&#x53D8;&#x91CF;&#x7684;&#x503C;&#x7684;&#x5927;&#x5C0F;&#x5199;&#x662F;&#x6709;&#x533A;&#x522B;&#x7684;&#x3001;&#x654F;&#x611F;&#x7684;(case sensitive&#xFF0C;)</li>
</ul>
<h3 id="&#x7279;&#x6B8A;&#x53D8;&#x91CF;"><a href="#&#x7279;&#x6B8A;&#x53D8;&#x91CF;" class="headerlink" title="&#x7279;&#x6B8A;&#x53D8;&#x91CF;"></a>&#x7279;&#x6B8A;&#x53D8;&#x91CF;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$0      : &#x5F53;&#x524D;&#x811A;&#x672C;&#x7684;&#x6587;&#x4EF6;&#x540D;</span><br><span class="line">$#      : &#x4F20;&#x9012;&#x7ED9;&#x811A;&#x672C;&#x6216;&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;&#x4E2A;&#x6570;</span><br><span class="line">$*      : &#x4F20;&#x9012;&#x7ED9;&#x811A;&#x672C;&#x6216;&#x51FD;&#x6570;&#x7684;&#x6240;&#x6709;&#x53C2;&#x6570;</span><br><span class="line">$@      : &#x4F20;&#x9012;&#x7ED9;&#x811A;&#x672C;&#x6216;&#x51FD;&#x6570;&#x7684;&#x6240;&#x6709;&#x53C2;&#x6570;&#x3002;&#x88AB;&#x53CC;&#x5F15;&#x53F7;&#x5305;&#x542B;&#x65F6;&#xFF0C;&#x4E0E;$*&#x7A0D;&#x6709;&#x4E0D;&#x540C;</span><br><span class="line">$?      : &#x4E0A;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x9000;&#x51FA;&#x72B6;&#x6001;&#xFF0C;&#x6216;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;</span><br><span class="line">$$      : &#x5F53;&#x524D;&#x8FDB;&#x7A0B;&#x7684;ID</span><br><span class="line">$n      : &#x4F20;&#x9012;&#x7ED9;&#x811A;&#x672C;&#x6216;&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;&#x3002;n&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#xFF0C;&#x8868;&#x793A;&#x7B2C;&#x51E0;&#x4E2A;&#x53C2;&#x6570;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;$1</span><br><span class="line">shift N : &#x66FF;&#x9664;&#x7B2C;N&#x4E2A;&#x53C2;&#x6570;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>$* &#x548C; $@ &#x90FD;&#x8868;&#x793A;&#x4F20;&#x9012;&#x7ED9;&#x51FD;&#x6570;&#x6216;&#x811A;&#x672C;&#x7684;&#x6240;&#x6709;&#x53C2;&#x6570;&#xFF0C;&#x4E0D;&#x88AB;&#x53CC;&#x5F15;&#x53F7;&#x5305;&#x542B;&#x65F6;&#xFF0C;&#x90FD;&#x4EE5;&#x201D;$1&#x201D; &#x201C;$2&#x201D; &#x2026; &#x7684;&#x5F62;&#x5F0F;&#x8F93;&#x51FA;&#x6240;&#x6709;&#x53C2;&#x6570;&#xFF0C;&#x4F46;&#x662F;&#x5F53;&#x5B83;&#x4EEC;&#x88AB;&#x53CC;&#x5F15;&#x53F7;&#x5305;&#x542B;&#x65F6;&#xFF0C;&#x201D;$*&#x201C; &#x4F1A;&#x5C06;&#x6240;&#x6709;&#x7684;&#x53C2;&#x6570;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#xFF0C;&#x4EE5;&#x201D;$1 $2 &#x2026;&#x201D;&#x7684;&#x5F62;&#x5F0F;&#x8F93;&#x51FA;&#x6240;&#x6709;&#x53C2;&#x6570;&#xFF1B;&#x201D;$@&#x201D; &#x4F1A;&#x5C06;&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x5206;&#x5F00;&#xFF0C;&#x4EE5;&#x201D;$1&#x201D; &#x201C;$2&#x201D; &#x2026; &#x7684;&#x5F62;&#x5F0F;&#x8F93;&#x51FA;&#x6240;&#x6709;&#x53C2;&#x6570;</p>
</blockquote>
<h3 id="&#x5B57;&#x7B26;&#x4E32;&#x64CD;&#x4F5C;"><a href="#&#x5B57;&#x7B26;&#x4E32;&#x64CD;&#x4F5C;" class="headerlink" title="&#x5B57;&#x7B26;&#x4E32;&#x64CD;&#x4F5C;"></a>&#x5B57;&#x7B26;&#x4E32;&#x64CD;&#x4F5C;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">${#str}                    : str&#x7684;&#x957F;&#x5EA6;</span><br><span class="line">${str:pos}                 : &#x5728;str&#x4E2D;, &#x4ECE;&#x4F4D;&#x7F6E;pos&#x5F00;&#x59CB;&#x63D0;&#x53D6;&#x5B50;&#x4E32;</span><br><span class="line">${str:pos:len}             : &#x5728;str&#x4E2D;, &#x4ECE;&#x4F4D;&#x7F6E;pos&#x5F00;&#x59CB;&#x63D0;&#x53D6;&#x957F;&#x5EA6;&#x4E3A;len&#x7684;&#x5B50;&#x4E32;</span><br><span class="line">${str#substr}              : &#x4ECE;str&#x7684;&#x5F00;&#x5934;, &#x5220;&#x9664;&#x6700;&#x77ED;&#x5339;&#x914D;substr&#x7684;&#x5B50;&#x4E32;</span><br><span class="line">${str##substr}             : &#x4ECE;str&#x7684;&#x5F00;&#x5934;, &#x5220;&#x9664;&#x6700;&#x957F;&#x5339;&#x914D;substr&#x7684;&#x5B50;&#x4E32;</span><br><span class="line">${str%substr}              : &#x4ECE;str&#x7684;&#x7ED3;&#x5C3E;, &#x5220;&#x9664;&#x6700;&#x77ED;&#x5339;&#x914D;substr&#x7684;&#x5B50;&#x4E32;</span><br><span class="line">${str%%substr}             : &#x4ECE;str&#x7684;&#x7ED3;&#x5C3E;, &#x5220;&#x9664;&#x6700;&#x957F;&#x5339;&#x914D;substr&#x7684;&#x5B50;&#x4E32;</span><br><span class="line">${str/substr/replacement}  : &#x4F7F;&#x7528;replacement, &#x6765;&#x4EE3;&#x66FF;&#x7B2C;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x7684;substr</span><br><span class="line">${str//substr/replacement} : &#x4F7F;&#x7528;replacement, &#x4EE3;&#x66FF;&#x6240;&#x6709;&#x5339;&#x914D;&#x7684;substr</span><br><span class="line">${str/#substr/replacement} : &#x5982;&#x679C;str&#x7684;&#x524D;&#x7F00;&#x5339;&#x914D;substr, &#x90A3;&#x4E48;&#x5C31;&#x7528;replacement&#x6765;&#x4EE3;&#x66FF;&#x5339;&#x914D;&#x5230;&#x7684;substr</span><br><span class="line">${str/%substr/replacement} : &#x5982;&#x679C;str&#x7684;&#x540E;&#x7F00;&#x5339;&#x914D;substr, &#x90A3;&#x4E48;&#x5C31;&#x7528;replacement&#x6765;&#x4EE3;&#x66FF;&#x5339;&#x914D;&#x5230;&#x7684;substr</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">str=&apos;/var/log/messages&apos;</span><br><span class="line"></span><br><span class="line">echo ${str#*/} 			# var/log/messages</span><br><span class="line">echo ${str##*/} 		# messages</span><br><span class="line">echo ${str%/*} 			# /var/log</span><br><span class="line">echo ${str/s/S} 		# /var/log/meSsages</span><br><span class="line">echo ${str//s/S} 		# /var/log/meSSageS</span><br></pre></td></tr></table></figure>
<h3 id="&#x53D8;&#x91CF;&#x8D4B;&#x503C;"><a href="#&#x53D8;&#x91CF;&#x8D4B;&#x503C;" class="headerlink" title="&#x53D8;&#x91CF;&#x8D4B;&#x503C;"></a>&#x53D8;&#x91CF;&#x8D4B;&#x503C;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">${arg:-word} &#xFF1A;&#x5047;&#x5982;arg&#x4E3A;unset&#x6216;&#x8005;null&#xFF0C;&#x8F93;&#x51FA;word&#x7684;&#x503C;&#x4F46;&#x4E0D;&#x8D4B;&#x503C;</span><br><span class="line">${arg:=word} &#xFF1A;&#x5047;&#x5982;arg&#x4E3A;unset&#x6216;&#x8005;null&#xFF0C;&#x5C06;word&#x8D4B;&#x503C;&#x7ED9;arg</span><br><span class="line">${arg:?word} &#xFF1A;&#x5047;&#x5982;arg&#x4E3A;unset&#x6216;&#x8005;null&#xFF0C;&#x5219;&#x5C06;word&#x4F5C;&#x4E3A;&#x9519;&#x8BEF;&#x8F93;&#x51FA;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;</span><br><span class="line">${arg:+word} &#xFF1A;&#x5047;&#x5982;arg&#x4E3A;unset&#x6216;&#x8005;null&#xFF0C;&#x5219;&#x4E0D;&#x505A;&#x5C55;&#x5F00;&#xFF0C;&#x8FD4;&#x56DE;&#x4E3A;&#x7A7A;&#xFF1B;&#xFF08;&#x521A;&#x597D;&#x4E0E;:-&#x76F8;&#x53CD;&#xFF09;</span><br><span class="line"></span><br><span class="line">${arg-word}  &#xFF1A;&#x5047;&#x5982;arg&#x4E3A;unset&#xFF0C;&#x8F93;&#x51FA;word&#x7684;&#x503C;&#x4F46;&#x4E0D;&#x8D4B;&#x503C;</span><br><span class="line">${arg=word}  &#xFF1A;&#x5047;&#x5982;arg&#x4E3A;unset&#xFF0C;&#x5C06;word&#x8D4B;&#x503C;&#x7ED9;arg</span><br><span class="line">${arg?word}  &#xFF1A;&#x5047;&#x5982;arg&#x4E3A;unset&#xFF0C;&#x5219;&#x5C06;word&#x4F5C;&#x4E3A;&#x9519;&#x8BEF;&#x8F93;&#x51FA;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;</span><br><span class="line">${arg+word}  &#xFF1A;&#x5047;&#x5982;arg&#x4E3A;unset&#xFF0C;&#x5219;&#x4E0D;&#x505A;&#x5C55;&#x5F00;&#xFF0C;&#x8FD4;&#x56DE;&#x4E3A;&#x7A7A;&#xFF1B;&#xFF08;&#x521A;&#x597D;&#x4E0E;-&#x76F8;&#x53CD;&#xFF09;</span><br></pre></td></tr></table></figure>
<h2 id="&#x8868;&#x8FBE;&#x5F0F;"><a href="#&#x8868;&#x8FBE;&#x5F0F;" class="headerlink" title="&#x8868;&#x8FBE;&#x5F0F;"></a>&#x8868;&#x8FBE;&#x5F0F;</h2><h3 id="&#x7B97;&#x672F;&#x8FD0;&#x7B97;"><a href="#&#x7B97;&#x672F;&#x8FD0;&#x7B97;" class="headerlink" title="&#x7B97;&#x672F;&#x8FD0;&#x7B97;"></a>&#x7B97;&#x672F;&#x8FD0;&#x7B97;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a=11;b=22</span><br><span class="line">let num=$a+$b</span><br><span class="line">let num+=2</span><br><span class="line">num=$[$a*$b]</span><br><span class="line">num=$(($b/$a))</span><br></pre></td></tr></table></figure>
<h3 id="&#x6D4B;&#x8BD5;&#x8868;&#x8FBE;&#x5F0F;"><a href="#&#x6D4B;&#x8BD5;&#x8868;&#x8FBE;&#x5F0F;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x8868;&#x8FBE;&#x5F0F;"></a>&#x6D4B;&#x8BD5;&#x8868;&#x8FBE;&#x5F0F;</h3><blockquote>
<p><code>test EXPRESSION</code><br><code>[ EXPRESSION ]</code><br><code>[[ EXPRESSION ]]</code>&#xFF1A;&#x63A8;&#x8350;&#x4F7F;&#x7528;</p>
</blockquote>
<ul>
<li><code>-eq</code>:&#x7B49;&#x4E8E;&#xFF0C;<code>-ne</code>:&#x4E0D;&#x7B49;&#x4E8E;&#xFF0C;<code>-qt</code>:&#x5927;&#x4E8E;&#xFF0C;<code>-qe</code>:&#x5927;&#x7B49;&#x4E8E;&#xFF0C;<code>-lt</code>:&#x5C0F;&#x4E8E;&#xFF0C;<code>-le</code>:&#x5C0F;&#x7B49;&#x4E8E;</li>
<li><code>==</code>&#xFF0C;<code>&lt;</code>&#xFF0C;<code>&gt;</code>&#xFF0C;<code>!=</code>&#xFF0C;<code>=~</code>:&#x5DE6;&#x4FA7;&#x5B57;&#x7B26;&#x80FD;&#x5426;&#x88AB;&#x53F3;&#x4FA7;&#x89C4;&#x5219;&#x5339;&#x914D;</li>
<li><code>-z $str</code>: &#x4E3A;&#x7A7A;&#x5219;&#x4E3A;&#x771F;</li>
<li><code>-n $str</code>: &#x4E0D;&#x7A7A;&#x5219;&#x4E3A;&#x771F;</li>
<li><code>-d file</code>: &#x662F;&#x5426;&#x662F;&#x76EE;&#x5F55;</li>
<li><code>-e file</code>: &#x5B58;&#x5728;&#x4E3A;&#x771F;</li>
<li><code>-f file</code>: &#x666E;&#x901A;&#x6587;&#x4EF6;&#xFF0C;<code>-c</code>:&#x5B57;&#x7B26;&#x8BBE;&#x5907;&#xFF0C;<code>-p</code>:&#x7BA1;&#x9053;&#xFF0C;<code>-h</code>&#x6216;<code>-L</code>:&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#xFF0C;<code>-S</code>:&#x5957;&#x63A5;&#x5B57;</li>
<li><code>&amp;&amp;</code>&#xFF0C;<code>||</code>&#xFF0C;<code>&#xFF01;</code>: [ -d /aa ] &amp;&amp; [ -f f2 ]</li>
<li><code>-a</code>&#xFF0C;<code>-o</code>&#xFF0C;<code>&#xFF01;</code>: [ -d /aa -a -f f2 ]&#xFF0C;[ ! -e /dd ]</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="&#x5224;&#x65AD;"><a href="#&#x5224;&#x65AD;" class="headerlink" title="&#x5224;&#x65AD;"></a>&#x5224;&#x65AD;</h2><ol>
<li>if&#x2026;fi</li>
</ol>
<ol>
<li>if&#x2026;else&#x2026;fi</li>
</ol>
<ol>
<li>if&#x2026;elif&#x2026;else&#x2026;fi</li>
</ol>
<ol>
<li>case&#x2026;esac</li>
</ol>
<h2 id="&#x5FAA;&#x73AF;"><a href="#&#x5FAA;&#x73AF;" class="headerlink" title="&#x5FAA;&#x73AF;"></a>&#x5FAA;&#x73AF;</h2><ol>
<li>for</li>
</ol>
<ol>
<li>while</li>
</ol>
<ol>
<li>until</li>
</ol>
<h2 id="&#x51FD;&#x6570;"><a href="#&#x51FD;&#x6570;" class="headerlink" title="&#x51FD;&#x6570;"></a>&#x51FD;&#x6570;</h2><h2 id="&#x6613;&#x9519;"><a href="#&#x6613;&#x9519;" class="headerlink" title="&#x6613;&#x9519;"></a>&#x6613;&#x9519;</h2><ul>
<li>echo</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a=&quot;this *.txt&quot;</span><br><span class="line">echo $a  		# this a.txt b.txt ...</span><br><span class="line">echo &quot;$a&quot; 		# this *.txt</span><br><span class="line"></span><br><span class="line">b=&quot;hello!&quot; 		# &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;bash&#x4E2D;&#x7684;!&#x4F1A;&#x88AB;&#x5F53;&#x4F5C;&#x6267;&#x884C;&#x5386;&#x53F2;&#x547D;&#x4EE4;</span><br></pre></td></tr></table></figure>
<ul>
<li>cat</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF</span><br><span class="line">this is</span><br><span class="line">a </span><br><span class="line">book</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<ul>
<li>.exp1.&amp;&amp;.cmd1.||.cmd2.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># &#x7531;&#x4E8E;i++&#x8FD4;&#x56DE;&#x503C;&#x4E3A;1(&#x5047;)&#xFF0C;&#x6240;&#x4EE5;i--&#x4E5F;&#x4F1A;&#x6267;&#x884C;</span><br><span class="line">i=0;true &amp;&amp; ((i++)) || ((i--));echo $i</span><br></pre></td></tr></table></figure>
<ul>
<li>for arg in $*</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># &#x6B63;&#x786E;&#x5199;&#x6CD5;</span><br><span class="line">for x in &quot;$@&quot;; do</span><br><span class="line">   echo &quot;parameter: &apos;$x&apos;&quot;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># &#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;</span><br><span class="line">$ ./script &apos;arg 1&apos; arg2 </span><br><span class="line">parameter: &apos;arg 1&apos;</span><br><span class="line">parameter: &apos;arg2&apos;</span><br><span class="line"></span><br><span class="line"># &#x5982;&#x679C;&quot;$@&quot;&#x6362;&#x6210;$*&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;</span><br><span class="line">parameter: &apos;arg&apos;</span><br><span class="line">parameter: &apos;1&apos;</span><br><span class="line">parameter: &apos;arg2&apos;</span><br></pre></td></tr></table></figure>
<ul>
<li>[[ -e file ]]</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x5982;&#x679C;file&#x662F;&#x94FE;&#x63A5;&#x6587;&#x4EF6;&#xFF0C;&#x4F46;&#x6307;&#x5411;&#x7684;&#x539F;&#x6587;&#x4EF6;&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#xFF0C;-e&#x7684;&#x7ED3;&#x679C;&#x4E3A;1(&#x5047;)&#xFF0C;&#x5982;&#x679C;&#x53EA;&#x60F3;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</span><br><span class="line"></span><br><span class="line">[[ -e file || -L file ]]</span><br></pre></td></tr></table></figure>
<ul>
<li>for&#x5FAA;&#x73AF;&#x8BFB;&#x6587;&#x4EF6;&#x4E0D;&#x9760;&#x8C31;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># &#x5EFA;&#x8BAE;&#x4F7F;&#x7528;while</span><br><span class="line"></span><br><span class="line">while IFS= read -r line; do echo &quot;$line&quot; ; done &lt; file.txt</span><br></pre></td></tr></table></figure>
<h2 id="&#x7B80;&#x6D01;"><a href="#&#x7B80;&#x6D01;" class="headerlink" title="&#x7B80;&#x6D01;"></a>&#x7B80;&#x6D01;</h2><ul>
<li>&#x4F4D;&#x7F6E;&#x53C2;&#x6570;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arg=${1:-123} 		# &#x5F53;$1&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#xFF0C;arg=123</span><br></pre></td></tr></table></figure>
<ul>
<li>&#x683C;&#x5F0F;&#x5316;&#x6570;&#x5B57;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">printf &quot;%&apos;.2f&quot; 1234455.2323 	# 1,234,455.23</span><br></pre></td></tr></table></figure>
<ul>
<li>here document(cat &lt;EOF)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">while read line; do</span><br><span class="line">    CMD...</span><br><span class="line">done &lt;&lt; EOF</span><br><span class="line">`grep 1 test.txt`</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<ul>
<li>&#x591A;&#x7EBF;&#x7A0B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># &#x4F7F;&#x7528;(CMD)&#x65B9;&#x5F0F;fork&#x4E00;&#x4E2A;&#x5B50;&#x8FDB;&#x7A0B;&#x6765;&#x6267;&#x884C;</span><br><span class="line"></span><br><span class="line">num=10</span><br><span class="line">function multi_test(){</span><br><span class="line">    echo &quot;working...&quot;</span><br><span class="line">    sleep 2</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">for ((i=0; i &lt; num ;i++)); do</span><br><span class="line">    echo &quot;Fork job $i&quot;</span><br><span class="line">    (multi_test) &amp;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">wait</span><br><span class="line">echo &quot;All job done!&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>vim&#x7F16;&#x8F91;&#x8FDC;&#x7A0B;&#x6587;&#x4EF6;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim scp://data01.com//tmp/test.sh</span><br></pre></td></tr></table></figure>
<ul>
<li>&#x7F16;&#x8F91;&#x5F53;&#x524D;&#x547D;&#x4EE4;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># &#x9047;&#x5230;&#x8F93;&#x5165;&#x6BD4;&#x8F83;&#x957F;&#x7684;&#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x65F6;&#xFF0C;&#x4F7F;&#x7528; ctrl+x ctrl+e&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;emacs&#xFF0C;&#x4F7F;&#x7528;vim&#x4FEE;&#x6539;~/.bashrc</span><br><span class="line"></span><br><span class="line">export EDITOR=&apos;vim&apos;</span><br></pre></td></tr></table></figure>
<h2 id="&#x53C2;&#x8003;"><a href="#&#x53C2;&#x8003;" class="headerlink" title="&#x53C2;&#x8003;"></a>&#x53C2;&#x8003;</h2><ul>
<li>shell 13&#x95EE;</li>
<li><a href="http://kodango.com/bash-pitfalls-part-1" target="_blank" rel="noopener">bash &#x7F16;&#x7A0B;&#x6613;&#x72AF;&#x7684;&#x9519;&#x8BEF;</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SSH端口转发简介]]></title>
      <url>http://liu2lin600.github.io/2017/03/31/SSH%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E7%AE%80%E4%BB%8B/</url>
      <content type="html"><![CDATA[<p>ssh&#x9664;&#x4E86;&#x7528;&#x4E8E;&#x5B89;&#x5168;&#x7684;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#x4EE5;&#x5916;&#xFF0C;&#x8FD8;&#x6709;&#x4E2A;&#x5F3A;&#x5927;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5373;<strong>&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</strong>&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x6D41;&#x5F80;&#x67D0;&#x7AEF;&#x53E3;&#x7684;&#x6570;&#x636E;&#x88AB;&#x52A0;&#x5BC6;&#x540E;&#x4F20;&#x5411;&#x53E6;&#x4E00;&#x673A;&#x5668;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x5F62;&#x4F3C;&#x6784;&#x9020;&#x4E86;&#x4E00;&#x6761;&#x901A;&#x9053;&#xFF0C;&#x56E0;&#x6B64;&#x4E5F;&#x79F0;&#x4E4B;&#x4E3A;SSH&#x96A7;&#x9053;(SSH Tunnel)<br><a id="more"></a></p>
<h2 id="&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x7C7B;&#x578B;"><a href="#&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x7C7B;&#x578B;" class="headerlink" title="&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x7C7B;&#x578B;"></a>&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x7C7B;&#x578B;</h2><ol>
<li>&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1; (socks&#x4EE3;&#x7406;)</li>
<li>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</li>
<li>&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</li>
</ol>
<p><strong>&#x5E38;&#x7528;&#x7684;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh -C -f -N -g -L listen_port:DST_Host:DST_port user@Tunnel_Host</span><br><span class="line">ssh -C -f -N -g -R listen_port:DST_Host:DST_port user@Tunnel_Host</span><br><span class="line">ssh -C -f -N -g -D listen_port user@Tunnel_Host</span><br></pre></td></tr></table></figure>
<p><strong>&#x76F8;&#x5173;&#x53C2;&#x6570;&#x8BF4;&#x660E;&#xFF1A;</strong></p>
<p><code>-D</code>&#xFF1A;&#x52A8;&#x6001;&#x8F6C;&#x53D1;<br><code>-L</code>&#xFF1A;&#x672C;&#x5730;&#x8F6C;&#x53D1;<br><code>-R</code>&#xFF1A;&#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;<br><code>-N</code>&#xFF1A;&#x4E0D;&#x6267;&#x884C;shell[&#x4E0E; -g &#x5408;&#x7528;]<br><code>-f</code>&#xFF1A;&#x5C06;ssh&#x8F6C;&#x5230;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x5373;&#x8BA4;&#x8BC1;&#x4E4B;&#x540E;&#xFF0C;ssh&#x81EA;&#x52A8;&#x4EE5;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x4E0D;&#x5728;&#x8F93;&#x51FA;&#x4FE1;&#x606F;<br><code>-g</code>&#xFF1A;&#x5141;&#x8BB8;&#x6253;&#x5F00;&#x7684;&#x7AEF;&#x53E3;&#x8BA9;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x8BBF;&#x95EE;<br><code>-C</code>&#xFF1A;&#x538B;&#x7F29;&#x6570;&#x636E;&#x4F20;&#x8F93;<br><code>-T</code>&#xFF1A;&#x4E0D;&#x5206;&#x914D;tty&#xFF0C;&#x53EA;&#x505A;&#x4EE3;&#x7406;&#x7528;</p>
<h3 id="1-&#x52A8;&#x6001;&#x8F6C;&#x53D1;"><a href="#1-&#x52A8;&#x6001;&#x8F6C;&#x53D1;" class="headerlink" title="1. &#x52A8;&#x6001;&#x8F6C;&#x53D1;"></a>1. &#x52A8;&#x6001;&#x8F6C;&#x53D1;</h3><p>&#x52A8;&#x6001;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x53EF;&#x7528;&#x4E8E;socks&#x4EE3;&#x7406;&#xFF0C;&#x65B9;&#x6CD5;&#x5E38;&#x5E38;&#x88AB;&#x7528;&#x6765;&#x7A81;&#x7834;&#x9632;&#x706B;&#x5899;&#x7684;&#x9650;&#x5236;&#x8FDB;&#x884C;&#x4EE3;&#x7406;&#x670D;&#x52A1;(&#x7FFB;&#x5899;)</p>
<p><strong>&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF1A;</strong></p>
<ol>
<li>&#x4E3B;&#x673A;A(1.1.1.1)&#x4E0D;&#x80FD;&#x4E0A;google&#xFF0C;&#x4E3B;&#x673A;B(2.2.2.2)&#x53EF;&#x4EE5;&#x4E0A;</li>
<li>&#x4E3B;&#x673A;A&#x7533;&#x8BF7;&#x4E00;&#x4E2A;socket&#x76D1;&#x542C;&#x7AEF;&#x53E3;(8080)</li>
<li>&#x4E3B;&#x673A;A&#x4E0E;&#x4E3B;&#x673A;B&#x5EFA;&#x7ACB;ssh&#x96A7;&#x9053;</li>
<li>&#x5F53;&#x4E3B;&#x673A;A&#x6709;&#x8BF7;&#x6C42;8080, &#x8BF7;&#x6C42;&#x6570;&#x636E;&#x4F1A;&#x4ECE;ssh&#x96A7;&#x9053;&#x53D1;&#x5F80;&#x4E3B;&#x673A;B</li>
<li>&#x4E3B;&#x673A;B&#x6536;&#x5230;&#x6570;&#x636E;, &#x6839;&#x636E;&#x6570;&#x636E;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x534F;&#x8BAE;&#x53BB;&#x53D1;&#x9001;&#x6570;&#x636E;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x5730;&#x5740;</li>
<li>&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x4F1A;&#x6309;&#x539F;&#x6709;&#x8DEF;&#x5F84;&#x8FD4;&#x8FD8;&#x7ED9;&#x4E3B;&#x673A;A</li>
<li>&#x5728;&#x4E3B;&#x673A;B&#x4E0A;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x4EE3;&#x7406;&#x8BBE;&#x7F6E;&#x5373;&#x53EF;&#x5B9E;&#x73B0;&#x7FFB;&#x5899;&#xFF0C;&#x6B64;&#x5904;&#x4E0D;&#x591A;&#x505A;&#x4ECB;&#x7ECD;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># &#x5728;A(1.1.1.1)&#x4E0A;&#x6267;&#x884C;</span><br><span class="line">ssh -D 127.0.0.1:8080 user@2.2.2.2</span><br><span class="line">curl --socks5 127.0.0.1:8008 www.google.com 	# &#x9A8C;&#x8BC1;&#x4EE3;&#x7406;&#x662F;&#x5426;&#x6210;&#x529F;</span><br></pre></td></tr></table></figure>
<h3 id="2-&#x672C;&#x5730;&#x8F6C;&#x53D1;"><a href="#2-&#x672C;&#x5730;&#x8F6C;&#x53D1;" class="headerlink" title="2. &#x672C;&#x5730;&#x8F6C;&#x53D1;"></a>2. &#x672C;&#x5730;&#x8F6C;&#x53D1;</h3><p>&#x672C;&#x5730;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x4E3A;&#x901A;&#x8FC7;SSH&#x96A7;&#x9053;&#xFF0C;&#x5C06;&#x4E00;&#x4E2A;&#x8FDC;&#x7AEF;&#x673A;&#x5668;&#x80FD;&#x591F;&#x8BBF;&#x95EE;&#x5230;&#x7684;&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;&#xFF0C;&#x6620;&#x5C04;&#x4E3A;&#x4E00;&#x4E2A;&#x672C;&#x5730;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;</p>
<p><img src="/2017/03/31/SSH&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x7B80;&#x4ECB;/local port forwarding.png" alt="&#x672C;&#x5730;&#x8F6C;&#x53D1;"></p>
<p><strong>&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF1A;</strong></p>
<ol>
<li>&#x5982;&#x4E0A;&#x56FE;&#xFF0C;&#x4E3B;&#x673A;A(client:1.1.1.1)&#xFF0C;B(server:2.2.2.2)&#xFF0C;C(host:10.0.0.1)</li>
<li>A&#x53EF;&#x4EE5;&#x8FDE;B&#xFF0C;&#x4F46;&#x4E0D;&#x80FD;&#x8FDE;C&#xFF0C;&#x4F46;B&#x80FD;&#x8FDE;C</li>
<li>&#x7ED1;&#x5B9A;A&#x7684;8080&#xFF0C;&#x4E0E;B&#x6784;&#x5EFA;&#x4E00;&#x6761;SSH&#x96A7;&#x9053;</li>
<li>&#x5F53;&#x6211;&#x4EEC;&#x8BF7;&#x6C42;A&#x7684;8080&#x65F6;&#xFF0C;&#x8BF7;&#x6C42;&#x7684;&#x6570;&#x636E;&#x901A;&#x8FC7;SSH&#x96A7;&#x9053;&#x5230;&#x8FBE;B&#xFF0C;B&#x5C31;&#x4F1A;&#x628A;&#x6570;&#x636E;&#x53D1;&#x9001;&#x5230;C&#x7684;80&#x4E0A;</li>
<li>&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x6309;&#x7167;&#x539F;&#x8DEF;&#x8FD4;&#x56DE;</li>
<li>&#x53EF;&#x4EE5;&#x5C06;C&#x4E0A;&#x7684;http&#x3001;ftp&#x3001;ssh&#x7B49;&#x670D;&#x52A1;&#x8F6C;&#x5230;A&#x4E0A;&#x8BBF;&#x95EE;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># &#x5728;A(1.1.1.1)&#x4E0A;&#x6267;&#x884C;</span><br><span class="line">ssh -L :8080:10.0.0.1:80 root@2.2.2.2</span><br><span class="line">curl 127.0.0.1:8080</span><br></pre></td></tr></table></figure>
<h3 id="3-&#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;"><a href="#3-&#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;" class="headerlink" title="3. &#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;"></a>3. &#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;</h3><p>&#x8FDC;&#x7A0B;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x7528;&#x4E8E;&#x67D0;&#x4E9B;&#x5355;&#x5411;&#x963B;&#x9694;&#x7684;&#x5185;&#x7F51;&#x73AF;&#x5883;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;NAT&#xFF0C;&#x7F51;&#x7EDC;&#x9632;&#x706B;&#x5899;&#x3002;&#x5728;NAT&#x8BBE;&#x5907;&#x4E4B;&#x540E;&#x7684;&#x5185;&#x7F51;&#x4E3B;&#x673A;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x516C;&#x7F51;&#x4E3B;&#x673A;&#xFF0C;&#x4F46;&#x5916;&#x7F51;&#x4E3B;&#x673A;&#x5374;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&#x5185;&#x7F51;&#x4E3B;&#x673A;&#x7684;&#x670D;&#x52A1;&#x3002;&#x5982;&#x679C;&#x5185;&#x7F51;&#x4E3B;&#x673A;&#x5411;&#x5916;&#x7F51;&#x4E3B;&#x673A;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;&#x7AEF;&#x53E3;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8BA9;&#x5916;&#x7F51;&#x4E3B;&#x673A;&#x901A;&#x8FC7;&#x8BE5;&#x7AEF;&#x53E3;&#x8BBF;&#x95EE;&#x8BE5;&#x5185;&#x7F51;&#x4E3B;&#x673A;&#x7684;&#x670D;&#x52A1;</p>
<p><img src="/2017/03/31/SSH&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x7B80;&#x4ECB;/remote port forwarding.png" alt="&#x8FDC;&#x7A0B;&#x8F6C;&#x53D1;"></p>
<p><strong>&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF1A;</strong></p>
<ol>
<li>&#x5982;&#x4E0A;&#x56FE;&#xFF0C;&#x4E3B;&#x673A;A(server:1.1.1.1)&#xFF0C;B(client:2.2.2.2)&#xFF0C;C(host:10.0.0.1)</li>
<li>A&#x4E0D;&#x80FD;&#x8FDE;B&#xFF0C;B&#x80FD;&#x8FDE;A&#xFF0C;BC&#x4E92;&#x8054;</li>
<li>&#x5728;B&#x4E0A;&#x521B;&#x5EFA;ssh&#x96A7;&#x9053;&#xFF0C;&#x5728;A&#x4E0A;&#x7ED1;&#x5B9A;&#x7AEF;&#x53E3;(8080)&#xFF0C;&#x5C06;C&#x4E2D;&#x7684;80&#x8F6C;&#x51FA;&#x6765;</li>
<li>&#x5F53;&#x8BF7;&#x6C42;A&#x7684;8080&#x65F6;&#xFF0C;&#x4F1A;&#x5C06;&#x6570;&#x636E;&#x53D1;&#x9001;&#x5230;C&#x7684;80&#x4E0A;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x8FD4;&#x56DE;&#x7ED9;A</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># &#x5728;B(2.2.2.2)&#x4E0A;&#x6267;&#x884C;</span><br><span class="line">ssh -R 8080:10.0.0.1:80 root@1.1.1.1</span><br><span class="line"></span><br><span class="line"># &#x5728;A&#x4E0A;&#x9A8C;&#x8BC1;</span><br><span class="line">curl 127.0.0.1:8080</span><br></pre></td></tr></table></figure>
<p>&#x4EE5;&#x4E0A;&#x4E3A;&#x5E38;&#x7528;&#x7684;3&#x79CD;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x7B80;&#x4ECB;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[基于ssl的MySQL主从复制]]></title>
      <url>http://liu2lin600.github.io/2016/09/02/%E5%9F%BA%E4%BA%8Essl%E7%9A%84MySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/</url>
      <content type="html"><![CDATA[<p>&#x672C;&#x6587;&#x7B80;&#x8981;&#x81EA;&#x5EFA;CA&#x4E2D;&#x5FC3;&#x7528;&#x4E8E;&#x57FA;&#x4E8E;ssl&#x7684;MySQL&#x7684;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x7684;&#x5B9E;&#x73B0;<br><a id="more"></a></p>
<h2 id="&#x73AF;&#x5883;&#x51C6;&#x5907;"><a href="#&#x73AF;&#x5883;&#x51C6;&#x5907;" class="headerlink" title="&#x73AF;&#x5883;&#x51C6;&#x5907;"></a>&#x73AF;&#x5883;&#x51C6;&#x5907;</h2><ul>
<li>&#x7CFB;&#x7EDF;&#xFF1A;CentOS_7.2_x86_64</li>
<li>&#x7A0B;&#x5E8F;&#xFF1A;mariadb-5.5.50-1.el7_2.x86_64</li>
<li>CA&#x4E2D;&#x5FC3;&#x670D;&#x52A1;&#x5668;&#xFF1A;172.16.60.71</li>
<li>&#x4E3B;&#x670D;&#x52A1;&#x5668;&#xFF1A;172.16.60.3</li>
<li>&#x4ECE;&#x670D;&#x52A1;&#x5668;&#xFF1A;172.16.60.4</li>
</ul>
<h2 id="CA&#x4E2D;&#x5FC3;&#x670D;&#x52A1;&#x5668;&#x642D;&#x5EFA;"><a href="#CA&#x4E2D;&#x5FC3;&#x670D;&#x52A1;&#x5668;&#x642D;&#x5EFA;" class="headerlink" title="CA&#x4E2D;&#x5FC3;&#x670D;&#x52A1;&#x5668;&#x642D;&#x5EFA;"></a>CA&#x4E2D;&#x5FC3;&#x670D;&#x52A1;&#x5668;&#x642D;&#x5EFA;</h2><p><img src="/2016/09/02/&#x57FA;&#x4E8E;ssl&#x7684;MySQL&#x4E3B;&#x4ECE;&#x590D;&#x5236;/ca.png" alt="CA"></p>
<h2 id="&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7533;&#x8BF7;&#x8BC1;&#x4E66;"><a href="#&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7533;&#x8BF7;&#x8BC1;&#x4E66;" class="headerlink" title="&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7533;&#x8BF7;&#x8BC1;&#x4E66;"></a>&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7533;&#x8BF7;&#x8BC1;&#x4E66;</h2><ol>
<li><p>&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7533;&#x8BF7;&#x8BC1;&#x4E66;<br> <img src="/2016/09/02/&#x57FA;&#x4E8E;ssl&#x7684;MySQL&#x4E3B;&#x4ECE;&#x590D;&#x5236;/master_ca.png" alt="master_ca"></p>
</li>
<li><p>&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7533;&#x8BF7;&#x53C2;&#x8003;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5C06;&#x751F;&#x6210;&#x7533;&#x8BF7;&#x6587;&#x4EF6;&#x6539;&#x4E3A;slave.csr&#x5373;&#x53EF;</p>
</li>
</ol>
<h2 id="CA&#x7B7E;&#x53D1;&#x53D1;&#x8BC1;&#x4E66;"><a href="#CA&#x7B7E;&#x53D1;&#x53D1;&#x8BC1;&#x4E66;" class="headerlink" title="CA&#x7B7E;&#x53D1;&#x53D1;&#x8BC1;&#x4E66;"></a>CA&#x7B7E;&#x53D1;&#x53D1;&#x8BC1;&#x4E66;</h2><ol>
<li><p>&#x4E3A;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x7B7E;&#x53D1;&#x8BC1;&#x4E66;<br> <img src="/2016/09/02/&#x57FA;&#x4E8E;ssl&#x7684;MySQL&#x4E3B;&#x4ECE;&#x590D;&#x5236;/ca_2.png" alt="ca_2"></p>
</li>
<li><p>&#x4E3A;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7B7E;&#x53D1;&#x540C;&#x4E0A;</p>
</li>
</ol>
<h2 id="&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x914D;&#x7F6E;"><a href="#&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x914D;&#x7F6E;" class="headerlink" title="&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x914D;&#x7F6E;"></a>&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x914D;&#x7F6E;</h2><ol>
<li><p>&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;<br> <code>vim /etc/my.cnf</code></p>
<pre><code>[mysqld]
log_bin = log-bin
server_id = 1
innodb_file_per_table=ON
skip_name_resolve=ON

ssl
ssl-ca = /etc/my.cnf.d/ssl/cacert.pem
ssl-cert = /etc/my.cnf.d/ssl/master.crt
ssl-key = /etc/my.cnf.d/ssl/master.key
</code></pre></li>
<li><p>&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;</p>
<pre><code>[mysqld]
log_relay = log-relay
server_id = 2
read_only=ON
innodb_file_per_table=ON
skip_name_resolve=ON

ssl
ssl-ca = /etc/my.cnf.d/ssl/cacert.pem
ssl-cert = /etc/my.cnf.d/ssl/slave.crt
ssl-key = /etc/my.cnf.d/ssl/slave.key
</code></pre></li>
<li><p>&#x4FEE;&#x6539;&#x5BC6;&#x94A5;&#x53CA;&#x8BC1;&#x4E66;&#x6743;&#x9650;(&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x90FD;&#x987B;&#x4FEE;&#x6539;)<br> <img src="/2016/09/02/&#x57FA;&#x4E8E;ssl&#x7684;MySQL&#x4E3B;&#x4ECE;&#x590D;&#x5236;/chown.png" alt="chown"></p>
</li>
</ol>
<h2 id="&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x6388;&#x6743;"><a href="#&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x6388;&#x6743;" class="headerlink" title="&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x6388;&#x6743;"></a>&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x6388;&#x6743;</h2><p>&#x542F;&#x52A8;mariadb&#x670D;&#x52A1;&#x5E76;&#x767B;&#x5F55;&#x8FDB;&#x884C;&#x5982;&#x4E0B;&#x8BBE;&#x7F6E;</p>
<pre><code># &#x67E5;&#x770B;ssl&#x662F;&#x5426;&#x542F;&#x7528;&#x53CA;&#x76F8;&#x5173;&#x4FE1;&#x606F;
MariaDB [(none)]&gt; SHOW GLOBAL VARIABLES LIKE &apos;%ssl%&apos;;
+---------------+------------------------------+
| Variable_name | Value                        |
+---------------+------------------------------+
| have_openssl  | YES                          |
| have_ssl      | YES                          |
| ssl_ca        | /etc/my.cnf.d/ssl/cacert.pem |
| ssl_capath    |                              |
| ssl_cert      | /etc/my.cnf.d/ssl/master.crt |
| ssl_cipher    |                              |
| ssl_key       | /etc/my.cnf.d/ssl/master.key |
+---------------+------------------------------+

# &#x6388;&#x6743;&#x4FE1;&#x606F;
MariaDB [(none)]&gt; GRANT REPLICATION SLAVE,REPLICATION CLIENT ON *.* TO &apos;repuser&apos;@&apos;172.16.60.%&apos; IDENTIFIED BY &apos;reppass&apos; REQUIRE ssl;
MariaDB [(none)]&gt; FLUSH PRIVILEGES;

# &#x67E5;&#x770B;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;
MariaDB [(none)]&gt; SHOW MASTER STATUS;
+----------------+----------+--------------+------------------+
| File           | Position | Binlog_Do_DB | Binlog_Ignore_DB |
+----------------+----------+--------------+------------------+
| log-bin.000001 |      507 |              |                  |
+----------------+----------+--------------+------------------+
</code></pre><h2 id="&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x547D;&#x4EE4;&#x884C;&#x767B;&#x5F55;&#x6D4B;&#x8BD5;"><a href="#&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x547D;&#x4EE4;&#x884C;&#x767B;&#x5F55;&#x6D4B;&#x8BD5;" class="headerlink" title="&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x547D;&#x4EE4;&#x884C;&#x767B;&#x5F55;&#x6D4B;&#x8BD5;"></a>&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x547D;&#x4EE4;&#x884C;&#x767B;&#x5F55;&#x6D4B;&#x8BD5;</h2><pre><code>mysql -h172.16.60.3 -urepuser -p --ssl-ca=/etc/my.cnf.d/ssl/cacert.pem --ssl-cert=/etc/my.cnf.d/ssl/slave.crt --ssl-key=/etc/my.cnf.d/ssl/slave.key
</code></pre><h2 id="&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x8BBE;&#x7F6E;"><a href="#&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x8BBE;&#x7F6E;" class="headerlink" title="&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x8BBE;&#x7F6E;"></a>&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x8BBE;&#x7F6E;</h2><p>&#x542F;&#x52A8;&#x670D;&#x52A1;&#x5E76;&#x914D;&#x7F6E;&#x4E3A;&#x4ECE;&#x670D;&#x52A1;&#x5668;</p>
<pre><code># &#x67E5;&#x770B;ssl&#x662F;&#x5426;&#x542F;&#x7528;&#x53CA;&#x76F8;&#x5173;&#x4FE1;&#x606F;
MariaDB [(none)]&gt; SHOW GLOBAL VARIABLES LIKE &apos;%ssl%&apos;;
+---------------+------------------------------+
| Variable_name | Value                        |
+---------------+------------------------------+
| have_openssl  | YES                          |
| have_ssl      | YES                          |
| ssl_ca        | /etc/my.cnf.d/ssl/cacert.pem |
| ssl_capath    |                              |
| ssl_cert      | /etc/my.cnf.d/ssl/slave.crt  |
| ssl_cipher    |                              |
| ssl_key       | /etc/my.cnf.d/ssl/slave.key  |
+---------------+------------------------------+

# &#x8BBE;&#x7F6E;&#x4E3B;&#x4ECE;
MariaDB [(none)]&gt; CHANGE MASTER TO 
  -&gt; MASTER_HOST=&apos;172.16.60.3&apos;,
  -&gt; MASTER_USER=&apos;repuser&apos;,
  -&gt; MASTER_PASSWORD=&apos;reppass&apos;,
  -&gt; MASTER_LOG_FILE=&apos;log-bin.000001&apos;,
  -&gt; MASTER_LOG_POS=507,
  -&gt; MASTER_SSL=1,
  -&gt; MASTER_SSL_CA=&apos;/etc/my.cnf.d/ssl/cacert.pem&apos;,
  -&gt; MASTER_SSL_CERT=&apos;/etc/my.cnf.d/ssl/slave.crt&apos;,
  -&gt; MASTER_SSL_KEY=&apos;/etc/my.cnf.d/ssl/slave.key&apos;;

# &#x5F00;&#x542F;&#x4ECE;&#x670D;&#x52A1;&#x5668;IO&#x53CA;SQL&#x7EBF;&#x7A0B;
MariaDB [(none)]&gt; START SLAVE;
MariaDB [(none)]&gt; SHOW SLAVE STATUS\G;
*************************** 1. row ***************************
               Slave_IO_State: Waiting for master to send event
                  Master_Host: 172.16.60.3
                  Master_User: repuser
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: log-bin.000001
          Read_Master_Log_Pos: 507
               Relay_Log_File: log-relay.000001
                Relay_Log_Pos: 621
        Relay_Master_Log_File: log-bin.000001
             Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB: 
          Replicate_Ignore_DB: 
           Replicate_Do_Table: 
       Replicate_Ignore_Table: 
      Replicate_Wild_Do_Table: 
  Replicate_Wild_Ignore_Table: 
                   Last_Errno: 0
                   Last_Error: 
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 339
              Relay_Log_Space: 909
              Until_Condition: None
               Until_Log_File: 
                Until_Log_Pos: 0
           Master_SSL_Allowed: Yes
           Master_SSL_CA_File: /etc/my.cnf.d/ssl/cacert.pem
           Master_SSL_CA_Path: 
              Master_SSL_Cert: /etc/my.cnf.d/ssl/slave.crt
            Master_SSL_Cipher: 
               Master_SSL_Key: /etc/my.cnf.d/ssl/slave.key
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error: 
               Last_SQL_Errno: 0
               Last_SQL_Error: 
  Replicate_Ignore_Server_Ids: 
             Master_Server_Id: 1
</code></pre><h2 id="&#x6D4B;&#x8BD5;"><a href="#&#x6D4B;&#x8BD5;" class="headerlink" title="&#x6D4B;&#x8BD5;"></a>&#x6D4B;&#x8BD5;</h2><p>&#x5728;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x8FDB;&#x884C;&#x6570;&#x636E;CURD&#x64CD;&#x4F5C;&#xFF0C;&#x67E5;&#x770B;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x540C;&#x6B65;&#x60C5;&#x51B5;</p>
<p>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x7B80;&#x5355;&#x914D;&#x7F6E;&#x7684;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x672C;&#x5B9E;&#x9A8C;&#x4E2D;&#x6570;&#x636E;&#x5E93;&#x4E3A;&#x5168;&#x65B0;&#x5B89;&#x88C5;&#xFF0C;&#x6240;&#x6709;&#x6CA1;&#x6D89;&#x53CA;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x5BFC;&#x51FA;&#x6570;&#x636E;&#xFF0C;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x5BFC;&#x5165;&#x8FC7;&#x7A0B;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[keepalived+haproxy+varnish实现web动静分离]]></title>
      <url>http://liu2lin600.github.io/2016/08/22/keepalived-haproxy-varnish%E5%AE%9E%E7%8E%B0web%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB/</url>
      <content type="html"><![CDATA[<p>&#x524D;&#x7AEF;&#x4F7F;&#x7528;haproxy&#x8FDB;&#x884C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x53CA;&#x5BF9;&#x52A8;&#x9759;&#x5206;&#x79BB;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;keepalived&#x5BF9;&#x5176;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x540E;&#x7AEF;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x4F7F;&#x7528;varnish&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#xFF0C;&#x4EE5;php&#x4E3A;&#x4F8B;&#x5BF9;&#x52A8;&#x6001;&#x8BF7;&#x6C42;&#x57FA;&#x4E8E;memcached&#x4FDD;&#x5B58;session&#x4EE5;&#x5B9E;&#x73B0;&#x4F1A;&#x8BDD;&#x4FDD;&#x6301;&#x6548;&#x679C;</p>
<a id="more"></a>
<p>&#x6309;&#x7167;&#x60EF;&#x4F8B;&#x76F4;&#x63A5;&#x4E0A;&#x672C;&#x6B21;&#x5B9E;&#x9A8C;&#x7684;&#x62D3;&#x6251;&#x56FE;&#xFF0C;&#x5982;&#x4E0B;</p>
<p><img src="/2016/08/22/keepalived-haproxy-varnish&#x5B9E;&#x73B0;web&#x52A8;&#x9759;&#x5206;&#x79BB;/main.png" alt="main"></p>
<h2 id="&#x73AF;&#x5883;&#x51C6;&#x5907;"><a href="#&#x73AF;&#x5883;&#x51C6;&#x5907;" class="headerlink" title="&#x73AF;&#x5883;&#x51C6;&#x5907;"></a>&#x73AF;&#x5883;&#x51C6;&#x5907;</h2><ul>
<li>&#x7CFB;&#x7EDF;&#xFF1A;CentOS.x86_64.7.2</li>
<li>&#x4E3A;&#x5B9E;&#x9A8C;&#x65B9;&#x4FBF;&#x8FDB;&#x884C;&#xFF0C;&#x5173;&#x95ED;&#x5404;&#x4E3B;&#x673A;&#x9632;&#x706B;&#x5899;&#x53CA;SELinux</li>
<li>&#x6240;&#x6709;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;yum&#x5B89;&#x88C5;&#xFF0C;&#x7248;&#x672C;&#x5982;&#x4E0B;:<ul>
<li>keepalived-1.2.13-7.el7.x86_64</li>
<li>haproxy-1.5.14-3.el7.x86_64 </li>
<li>varnish-4.0.3-3.el7.x86_64</li>
<li>httpd-2.4.6-40.el7.centos.4.x86_64</li>
<li>php-5.4.16-36.3.el7_2.x86_64</li>
<li>memcached-1.4.15-9.el7.x86_64</li>
<li>php-pecl-memcached-2.2.0-1.el7.x86_64<ul>
<li>&#x5982;&#x4E0A;&#x56FE;&#x5728;&#x5404;&#x4E3B;&#x673A;&#x4E0A;&#x5B89;&#x88C5;&#x76F8;&#x5E94;&#x7A0B;&#x5E8F;</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><em>&#x5907;&#x6CE8;&#xFF1A;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;haproxy&#x4E3B;&#x673A;&#x5E94;&#x914D;&#x7F6E;2&#x5757;&#x7F51;&#x5361;&#xFF0C;&#x5BF9;&#x5916;&#x4F7F;&#x7528;&#x4FE1;&#x516C;&#x7F51;IP&#xFF0C;&#x53CD;&#x4EE3;&#x540E;&#x7AEF;&#x4F7F;&#x7528;&#x5185;&#x7F51;IP&#xFF0C;&#x672C;&#x5B9E;&#x9A8C;&#x4E3A;&#x65B9;&#x4FBF;&#x7EDF;&#x4E00;&#x4F7F;&#x7528;&#x540C;&#x4E00;&#x7F51;&#x6BB5;</em></p>
<h2 id="&#x540E;&#x7AEF;&#x52A8;&#x6001;&#x670D;&#x52A1;&#x914D;&#x7F6E;"><a href="#&#x540E;&#x7AEF;&#x52A8;&#x6001;&#x670D;&#x52A1;&#x914D;&#x7F6E;" class="headerlink" title="&#x540E;&#x7AEF;&#x52A8;&#x6001;&#x670D;&#x52A1;&#x914D;&#x7F6E;"></a>&#x540E;&#x7AEF;&#x52A8;&#x6001;&#x670D;&#x52A1;&#x914D;&#x7F6E;</h2><ol>
<li>&#x4FEE;&#x6539;httpd&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x4E3A;8080</li>
<li><p>&#x4E3A;2&#x53F0;&#x52A8;&#x6001;&#x4E3B;&#x673A;&#x51C6;&#x5907;&#x6D4B;&#x8BD5;&#x9875;&#x9762;</p>
<p> <code>&#x25BA; vim /var/www/html/index.php</code></p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    session_start();</span><br><span class="line"></span><br><span class="line">    $mem = <span class="keyword">new</span> Memcached();</span><br><span class="line">    $mem-&gt;addServer(<span class="string">&apos;172.16.60.74&apos;</span>,<span class="number">11211</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;backend_1&quot;</span>.<span class="string">&apos;&lt;br/&gt;&apos;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;SESSION_ID: &quot;</span>.session_id().<span class="string">&apos;&lt;br/&gt;&apos;</span>;</span><br><span class="line">    $ss = $mem-&gt;get(<span class="string">&apos;memc.sess.key.&apos;</span>.session_id());</span><br><span class="line">    print_r($ss);</span><br><span class="line"></span><br><span class="line">    <span class="comment"># &#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x56FE;&#x7247;&#x94FE;&#x63A5;&#xFF0C;&#x6D4B;&#x8BD5;&#x52A8;&#x9759;&#x5206;&#x79BB;</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br/&gt;&lt;img src=&apos;./42.jpg&apos; /&gt;&quot;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x5728;172.16.60.73&#x4E3B;&#x673A;&#x4E0A;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x8BBE;&#x7F6E;session&#x9875;&#x9762;<br> <code>&#x25BA; vim /var/www/html/session.php</code></p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $ip = <span class="string">&apos;172.16.60.74&apos;</span>;</span><br><span class="line">    $port = <span class="number">11211</span>;</span><br><span class="line">    ini_set(<span class="string">&quot;session.save_handler&quot;</span>, <span class="string">&quot;memcached&quot;</span>);</span><br><span class="line">    ini_set(<span class="string">&quot;session.save_path&quot;</span>, $ip.<span class="string">&quot;:&quot;</span>.$port.<span class="string">&quot;?persistent=1&amp;weight=1&amp;timeout=1&amp;retry_interval=15&quot;</span>);</span><br><span class="line"></span><br><span class="line">    session_start();</span><br><span class="line">    $_SESSION[<span class="string">&apos;test&apos;</span>] = <span class="string">&apos;kelly&apos;</span>;</span><br><span class="line">    <span class="keyword">if</span> ($_SESSION[<span class="string">&apos;test&apos;</span>]) <span class="keyword">echo</span> <span class="string">&apos;set session success!&apos;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x6D4B;&#x8BD5;</p>
</li>
</ol>
<h2 id="varnish&#x914D;&#x7F6E;"><a href="#varnish&#x914D;&#x7F6E;" class="headerlink" title="varnish&#x914D;&#x7F6E;"></a>varnish&#x914D;&#x7F6E;</h2><ol>
<li><p>&#x4FEE;&#x6539;varnish&#x9ED8;&#x8BA4;&#x53C2;&#x6570;<br> <code>vim /etc/varnish/varnish.params</code></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x4FEE;&#x6539;&#x4E3A;&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x505A;&#x7F13;&#x5B58;&#xFF0C;&#x6CE8;&#x91CA;&#x9ED8;&#x8BA4;&#x9879;&#xFF0C;&#x5176;&#x5B83;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;</span></span><br><span class="line">VARNISH_STORAGE=<span class="string">&quot;malloc,200M&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x4FEE;&#x6539;vcl&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br> <code>vim /etc/varnish/default.vcl</code> </p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">vcl 4.0;</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5065;&#x5EB7;&#x68C0;&#x67E5;</span></span><br><span class="line">probe check {</span><br><span class="line">        .url = <span class="string">&quot;/check.html&quot;</span>;</span><br><span class="line">        .window = 5;</span><br><span class="line">        .threshold = 2;</span><br><span class="line">        .interval = 10s;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">acl purge {</span><br><span class="line">        <span class="string">&quot;127.0.0.1&quot;</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">backend default {</span><br><span class="line">    .host = <span class="string">&quot;172.16.60.71&quot;</span>;</span><br><span class="line">    .port = <span class="string">&quot;8080&quot;</span>;</span><br><span class="line">        .probe = check;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">sub vcl_purge {</span><br><span class="line">    <span class="built_in">return</span> (synth(200,<span class="string">&quot;Purged&quot;</span>));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">sub vcl_recv {</span><br><span class="line">    <span class="keyword">if</span> (req.restarts == 0) {</span><br><span class="line">        <span class="keyword">if</span> (req.http.X-Forwarded-For) {</span><br><span class="line">            <span class="built_in">set</span> req.http.X-Forwarded-For = req.http.X-Forwarded-For + <span class="string">&quot;, &quot;</span> + client.ip;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="built_in">set</span> req.http.X-Forwarded-For = client.ip;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment"># &#x53EA;&#x5141;&#x8BB8;&#x901A;&#x8FC7;&#x672C;&#x673A;&#x5BF9;&#x7F13;&#x5B58;&#x505A;&#x4FEE;&#x526A;</span></span><br><span class="line">    <span class="keyword">if</span> (req.method == <span class="string">&quot;PURGE&quot;</span>) {</span><br><span class="line">        <span class="keyword">if</span> (!client.ip ~ purge){</span><br><span class="line">            <span class="built_in">return</span> (synth(405, <span class="string">&quot;This request is not allowed&quot;</span>));</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">return</span> (purge);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">sub vcl_backend_response {</span><br><span class="line">    <span class="comment"># &#x516C;&#x5171;&#x56FE;&#x7247;&#x7B49;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6DFB;&#x52A0;&#x6709;&#x6548;&#x65F6;&#x957F;</span></span><br><span class="line">    <span class="keyword">if</span> (beresp.http.cache-control !~ <span class="string">&quot;s-maxage&quot;</span>) {</span><br><span class="line">        <span class="keyword">if</span> (bereq.url ~ <span class="string">&quot;(?i)\.(jpg|jpeg|png|gif|css|js)$&quot;</span>) {</span><br><span class="line">            <span class="built_in">unset</span> beresp.http.Set-Cookie;</span><br><span class="line">            <span class="built_in">set</span> beresp.ttl = 3600s;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">sub vcl_deliver {</span><br><span class="line">    <span class="comment"># &#x6DFB;&#x52A0;&#x54CD;&#x5E94;&#x9996;&#x90E8;&#x8BB0;&#x5F55;&#x662F;&#x5426;&#x7F13;&#x5B58;&#x547D;&#x4E2D;</span></span><br><span class="line">    <span class="keyword">if</span> (obj.hits &gt; 0){</span><br><span class="line">        <span class="built_in">set</span> resp.http.X-Cache = <span class="string">&quot;HIT From &quot;</span> + server.ip;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="built_in">set</span> resp.http.X-Cache = <span class="string">&quot;MISS&quot;</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p>172.16.60.71&#x9759;&#x6001;&#x670D;&#x52A1;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x4FEE;&#x6539;&#x4E3A;8080&#xFF0C;&#x5E76;&#x6DFB;&#x52A0;&#x6D4B;&#x8BD5;&#x9875;&#x9762;<br> &#x5728;<code>/var/www/html/&#x76EE;&#x5F55;&#x4E0B;&#x6DFB;&#x52A0;&#x4E00;&#x5F20;&#x56FE;&#x7247;(42.jpg)</code></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x6DFB;&#x52A0;&#x4E3B;&#x9875;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&lt;h2&gt;static page&lt;/h2&gt;&quot;</span> &gt; /var/www/html/index.html</span><br><span class="line"><span class="comment"># &#x6DFB;&#x52A0;&#x5065;&#x5EB7;&#x68C0;&#x6D4B;&#x9875;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;I&apos;m alive&quot;</span> &gt; /var/www/html/check.html</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x542F;&#x52A8;varnish&#x5E76;&#x8F7D;&#x5165;vcl&#x914D;&#x7F6E;<br> <img src="/2016/08/22/keepalived-haproxy-varnish&#x5B9E;&#x73B0;web&#x52A8;&#x9759;&#x5206;&#x79BB;/varnishadm.png" alt="varnishadm"></p>
</li>
<li><p>&#x5065;&#x5EB7;&#x68C0;&#x6D4B;&#x72B6;&#x6001;<br> <img src="/2016/08/22/keepalived-haproxy-varnish&#x5B9E;&#x73B0;web&#x52A8;&#x9759;&#x5206;&#x79BB;/check.png" alt="check"></p>
</li>
<li><p>&#x7F13;&#x5B58;&#x4FEE;&#x526A;&#x6D4B;&#x8BD5;<br> <img src="/2016/08/22/keepalived-haproxy-varnish&#x5B9E;&#x73B0;web&#x52A8;&#x9759;&#x5206;&#x79BB;/purge.png" alt="purge"><br> &#x4ECE;&#x4E0A;&#x56FE;&#x53EF;&#x770B;&#x51FA;&#xFF0C;varnish&#x7F13;&#x5B58;&#x53EA;&#x5141;&#x8BB8;&#x672C;&#x673A;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x6E05;&#x9664;&#x64CD;&#x4F5C;</p>
</li>
</ol>
<h2 id="haproxy&#x914D;&#x7F6E;"><a href="#haproxy&#x914D;&#x7F6E;" class="headerlink" title="haproxy&#x914D;&#x7F6E;"></a>haproxy&#x914D;&#x7F6E;</h2><ol>
<li><p>&#x4FEE;&#x6539;haproxy&#x4E3B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;global&#x53CA;default&#x6BB5;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;<br> <code>vim /etc/haproxy/haproxy.cfg</code></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x8BBF;&#x95EE;&#x5165;&#x53E3;</span></span><br><span class="line">frontend websrvs</span><br><span class="line">    <span class="built_in">bind</span> *:80</span><br><span class="line">    acl  static     path_beg    -i  /static  /javascript  /stylesheets</span><br><span class="line">    acl  static     path_end    -i  .html .js .css .jpeg .png .gif .bmp</span><br><span class="line">    acl  dynamic    path_end    -i  .php</span><br><span class="line"></span><br><span class="line">    use_backend     dynamic     <span class="keyword">if</span>  dynamic</span><br><span class="line">    use_backend     static      <span class="keyword">if</span>  static</span><br><span class="line"></span><br><span class="line">    default_backend static</span><br><span class="line">    rspadd X-Via:\ HAPorxy</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x9759;&#x6001;&#x8D44;&#x6E90;&#x4F7F;&#x7528;cookie&#x4FDD;&#x6301;</span></span><br><span class="line">backend static</span><br><span class="line">    cookie WEBSRV insert nocache indirect</span><br><span class="line">    server srv1 172.16.60.71:6081 check weight 2 cookie srv1</span><br><span class="line">    server srv2 172.16.60.72:6081 check weight 1 cookie srv2</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x52A8;&#x6001;&#x8F6E;&#x8BE2;</span></span><br><span class="line">backend dynamic</span><br><span class="line">    balance roundrobin</span><br><span class="line">    server  srv3 172.16.60.73:8080 check</span><br><span class="line">    server  srv4 172.16.60.74:8080 check</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x76D1;&#x63A7;&#x9875;&#x9762;</span></span><br><span class="line">listen stats</span><br><span class="line">    <span class="built_in">bind</span> *:8009</span><br><span class="line">    stats <span class="built_in">enable</span></span><br><span class="line">    stats uri /admin?stats</span><br><span class="line">    stats auth liu:lin</span><br><span class="line">    stats realm admin\ area</span><br><span class="line">    stats admin <span class="keyword">if</span> TRUE</span><br><span class="line">    stats hide-version</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x542F;&#x52A8;haproxy&#x5E76;&#x67E5;&#x770B;&#x76D1;&#x63A7;&#x9875;<br> <img src="/2016/08/22/keepalived-haproxy-varnish&#x5B9E;&#x73B0;web&#x52A8;&#x9759;&#x5206;&#x79BB;/stats.png" alt="stats"></p>
</li>
</ol>
<h2 id="keepalived&#x914D;&#x7F6E;"><a href="#keepalived&#x914D;&#x7F6E;" class="headerlink" title="keepalived&#x914D;&#x7F6E;"></a>keepalived&#x914D;&#x7F6E;</h2><ol>
<li><p>MASTER&#x8BBE;&#x7F6E;(172.16.60.3)<br> <code>vim /etc/keepalived/keepalived.conf</code></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">!Configuration File <span class="keyword">for</span> keepalived</span><br><span class="line">global_defs {</span><br><span class="line">    notification_email {</span><br><span class="line">        root@localhost</span><br><span class="line">    }</span><br><span class="line">    notification_email_from keepalived@localhost</span><br><span class="line">    smtp_server 127.0.0.1</span><br><span class="line">    smtp_connect_timeout 30</span><br><span class="line">    router_id node1</span><br><span class="line">    vrrp_mcast_group4 224.0.100.18</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">vrrp_script chk_haproxy {</span><br><span class="line">    script <span class="string">&quot;killall -0 haproxy&quot;</span></span><br><span class="line">    interval 1</span><br><span class="line">    weight -5</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">vrrp_instance VI_1 {</span><br><span class="line">    state MASTER</span><br><span class="line">    interface eno16777736</span><br><span class="line">    virtual_router_id 66</span><br><span class="line">    priority 100</span><br><span class="line">    advert_int 1</span><br><span class="line"></span><br><span class="line">    authentication {</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass sdfhj23H</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    virtual_ipaddress {</span><br><span class="line">        172.16.60.100/32 dev eno16777736</span><br><span class="line">    }</span><br><span class="line">    track_script {</span><br><span class="line">        chk_haproxy</span><br><span class="line">    }</span><br><span class="line">    notify_master <span class="string">&quot;/etc/keepalived/notify.sh master&quot;</span></span><br><span class="line">    notify_backup <span class="string">&quot;/etc/keepalived/notify.sh backup&quot;</span></span><br><span class="line">    notify_fault <span class="string">&quot;/etc/keepalived/notify.sh fault&quot;</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p>BACKUP&#x914D;&#x7F6E;(172.16.60.4)<br> &#x590D;&#x5236;MASTER&#x914D;&#x7F6E;&#x5E76;&#x505A;&#x5982;&#x4E0B;&#x51E0;&#x5904;&#x4FEE;&#x6539;</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router_id node2</span><br><span class="line">state BACKUP</span><br><span class="line">priority 97</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x51C6;&#x5907;&#x901A;&#x77E5;&#x811A;&#x672C;&#xFF0C;&#x7528;&#x6765;&#x5F53;haparoxy&#x4E0D;&#x53EF;&#x7528;&#x65F6;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x5E76;&#x5C1D;&#x8BD5;&#x81EA;&#x52A8;&#x91CD;&#x542F;<br> <code>vim /etc/keepalived/notify.sh</code> <strong>&#x5E76;&#x6DFB;&#x52A0;&#x6267;&#x884C;&#x6743;&#x9650;</strong></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">contact=&apos;root@localhost&apos;</span><br><span class="line"></span><br><span class="line">notify() {</span><br><span class="line">    mailsubject=&quot;$(hostname) to be $1, vip floating.&quot;</span><br><span class="line">    mailbody=&quot;$(date +&apos;%F %T&apos;): vrrp transition, $(hostname) changed to be $1&quot;</span><br><span class="line">    echo &quot;$mailbody&quot; | mail -s &quot;$mailsubject&quot; $contact</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">master)</span><br><span class="line">    notify master</span><br><span class="line">    ;;</span><br><span class="line">backup)</span><br><span class="line">    notify backup</span><br><span class="line">    systemctl restart haproxy</span><br><span class="line">    ;;</span><br><span class="line">fault)</span><br><span class="line">    notify fault</span><br><span class="line">    systemctl restart haproxy</span><br><span class="line">    ;;</span><br><span class="line">*)</span><br><span class="line">    echo &quot;Usage: $(basename $0) {master|backup|fault}&quot;</span><br><span class="line">    exit 1</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x542F;&#x52A8;2&#x53F0;&#x4E3B;&#x673A;keepalived<br> &#x5E76;&#x67E5;&#x770B;vip(172.16.60.100)&#x662F;&#x5426;&#x6DFB;&#x52A0;&#x6210;&#x529F;<br> <img src="/2016/08/22/keepalived-haproxy-varnish&#x5B9E;&#x73B0;web&#x52A8;&#x9759;&#x5206;&#x79BB;/vip.png" alt="vip"><br> &#x624B;&#x52A8;&#x5173;&#x95ED;&#x4E3B;haproxy&#xFF0C;&#x67E5;&#x770B;&#x5907;haproxy&#x60C5;&#x51B5;<br> <img src="/2016/08/22/keepalived-haproxy-varnish&#x5B9E;&#x73B0;web&#x52A8;&#x9759;&#x5206;&#x79BB;/keepalived.png" alt="keepalived"><br> <em>&#x4E3B;haproxy&#x6545;&#x969C;&#x65F6;&#xFF0C;&#x5907;&#x542F;&#x52A8;&#xFF0C;&#x4F46;&#x4E3B;&#x72B6;&#x6001;&#x53D8;&#x6210;backup&#x65F6;&#x89E6;&#x53D1;&#x901A;&#x77E5;&#x811A;&#x672C;&#xFF0C;&#x91CD;&#x542F;haproxy&#xFF0C;&#x4E00;&#x65E6;&#x91CD;&#x542F;&#x6210;&#x529F;&#x5E76;&#x91CD;&#x65B0;&#x6210;&#x4E3A;&#x4E3B;&#x8282;&#x70B9;</em></p>
</li>
</ol>
<h2 id="&#x7F13;&#x5B58;&#x53CA;&#x4F1A;&#x8BDD;&#x4FDD;&#x6301;&#x6D4B;&#x8BD5;"><a href="#&#x7F13;&#x5B58;&#x53CA;&#x4F1A;&#x8BDD;&#x4FDD;&#x6301;&#x6D4B;&#x8BD5;" class="headerlink" title="&#x7F13;&#x5B58;&#x53CA;&#x4F1A;&#x8BDD;&#x4FDD;&#x6301;&#x6D4B;&#x8BD5;"></a>&#x7F13;&#x5B58;&#x53CA;&#x4F1A;&#x8BDD;&#x4FDD;&#x6301;&#x6D4B;&#x8BD5;</h2><ol>
<li><p>&#x7F13;&#x5B58;&#x547D;&#x4E2D;&#x6D4B;&#x8BD5;<br> <img src="/2016/08/22/keepalived-haproxy-varnish&#x5B9E;&#x73B0;web&#x52A8;&#x9759;&#x5206;&#x79BB;/cache.png" alt="cache"></p>
</li>
<li><p>&#x4F1A;&#x8BDD;&#x4FDD;&#x6301;&#x53CA;&#x52A8;&#x9759;&#x5206;&#x79BB;<br> <img src="/2016/08/22/keepalived-haproxy-varnish&#x5B9E;&#x73B0;web&#x52A8;&#x9759;&#x5206;&#x79BB;/session.png" alt="session"></p>
</li>
</ol>
<p>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x672C;&#x6B21;&#x5B9E;&#x9A8C;&#x7684;&#x5168;&#x90E8;&#x5185;&#x5BB9;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ansible简单部署高可用负载均衡lnamp环境]]></title>
      <url>http://liu2lin600.github.io/2016/08/06/ansible%E7%AE%80%E5%8D%95%E9%83%A8%E7%BD%B2%E9%AB%98%E5%8F%AF%E7%94%A8%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1lnamp%E7%8E%AF%E5%A2%83/</url>
      <content type="html"><![CDATA[<p>&#x7B80;&#x8FF0;&#x4F7F;&#x7528;ansible&#x5FEB;&#x901F;&#x90E8;&#x7F72;keepalived&#x9AD8;&#x53EF;&#x7528;nginx&#x53CD;&#x4EE3;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x540E;&#x7AEF;lamp&#x73AF;&#x5883;</p>
<a id="more"></a>
<p>&#x90E8;&#x7F72;&#x73AF;&#x5883;&#x793A;&#x610F;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br><img src="/2016/08/06/ansible&#x7B80;&#x5355;&#x90E8;&#x7F72;&#x9AD8;&#x53EF;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;lnamp&#x73AF;&#x5883;/main.png" alt="ansible"></p>
<h2 id="&#x73AF;&#x5883;&#x51C6;&#x5907;"><a href="#&#x73AF;&#x5883;&#x51C6;&#x5907;" class="headerlink" title="&#x73AF;&#x5883;&#x51C6;&#x5907;"></a>&#x73AF;&#x5883;&#x51C6;&#x5907;</h2><ul>
<li>&#x7CFB;&#x7EDF;&#xFF1A;CentOS.x86_64.7.2</li>
<li>&#x914D;&#x7F6E;&#x597D;IP&#x5E76;&#x6D4B;&#x8BD5;ansible&#x4E3B;&#x673A;&#x4E0E;&#x5176;&#x5B83;&#x4E3B;&#x673A;&#x8FDE;&#x63A5;</li>
<li>&#x914D;&#x7F6E;&#x597D;ansible&#x4E3B;&#x673A;&#x57FA;&#x4E8E;ssh&#x5BC6;&#x94A5;&#x8FDE;&#x63A5;&#xFF0C;&#x53C2;&#x8003;ssh&#x547D;&#x4EE4;</li>
<li>&#x4E3A;&#x5B9E;&#x9A8C;&#x65B9;&#x4FBF;&#x8FDB;&#x884C;&#xFF0C;&#x5173;&#x95ED;&#x5404;&#x4E3B;&#x673A;&#x9632;&#x706B;&#x5899;&#x53CA;SELinux</li>
<li>&#x786E;&#x4FDD;&#x5404;&#x4E3B;&#x673A;&#x4E0A;&#x7684;yum&#x6E90;&#x6B63;&#x5E38;&#x53EF;&#x7528;</li>
</ul>
<h2 id="ansible&#x914D;&#x7F6E;"><a href="#ansible&#x914D;&#x7F6E;" class="headerlink" title="ansible&#x914D;&#x7F6E;"></a>ansible&#x914D;&#x7F6E;</h2><h3 id="ansible&#x5B89;&#x88C5;"><a href="#ansible&#x5B89;&#x88C5;" class="headerlink" title="ansible&#x5B89;&#x88C5;"></a>ansible&#x5B89;&#x88C5;</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &#x5148;&#x914D;&#x7F6E;&#x597D;epel&#x6E90;</span></span><br><span class="line">yum -y install ansible</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> &#x521B;&#x5EFA;roles&#x76EE;&#x5F55;</span></span><br><span class="line">cd /etc/ansible/roles</span><br><span class="line">mkdir -pv {keepalived,httpd,nginx,mariadb}/{files,tasks,templates,handlers,vars}</span><br></pre></td></tr></table></figure>
<h3 id="&#x4E3B;&#x673A;&#x6E05;&#x5355;&#x8BBE;&#x7F6E;"><a href="#&#x4E3B;&#x673A;&#x6E05;&#x5355;&#x8BBE;&#x7F6E;" class="headerlink" title="&#x4E3B;&#x673A;&#x6E05;&#x5355;&#x8BBE;&#x7F6E;"></a>&#x4E3B;&#x673A;&#x6E05;&#x5355;&#x8BBE;&#x7F6E;</h3><pre><code>&#x27A4; vim /etc/ansible/hosts

[nginx_keepalived]
172.16.60.3 ip=172.16.60.3 role=MASTER host=node1 pri=100
172.16.60.4 ip=172.16.60.4 role=BACKUP host=node2 pri=98

[nginx_keepalived:vars]
vip=172.16.60.100
ifc=eno16777736
router_id=66
pass=fLsdk3Gk

[httpd_php]
172.16.60.73 website=web_1
172.16.60.74 website=web_2

[mariadb]
172.16.60.73
</code></pre><h3 id="&#x6D4B;&#x8BD5;ansible&#x4E3B;&#x673A;&#x8FDE;&#x63A5;"><a href="#&#x6D4B;&#x8BD5;ansible&#x4E3B;&#x673A;&#x8FDE;&#x63A5;" class="headerlink" title="&#x6D4B;&#x8BD5;ansible&#x4E3B;&#x673A;&#x8FDE;&#x63A5;"></a>&#x6D4B;&#x8BD5;ansible&#x4E3B;&#x673A;&#x8FDE;&#x63A5;</h3><p><img src="/2016/08/06/ansible&#x7B80;&#x5355;&#x90E8;&#x7F72;&#x9AD8;&#x53EF;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;lnamp&#x73AF;&#x5883;/ping.png" alt="ansible_ping"></p>
<h2 id="nginx&#x89D2;&#x8272;&#x914D;&#x7F6E;"><a href="#nginx&#x89D2;&#x8272;&#x914D;&#x7F6E;" class="headerlink" title="nginx&#x89D2;&#x8272;&#x914D;&#x7F6E;"></a>nginx&#x89D2;&#x8272;&#x914D;&#x7F6E;</h2><p><img src="/2016/08/06/ansible&#x7B80;&#x5355;&#x90E8;&#x7F72;&#x9AD8;&#x53EF;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;lnamp&#x73AF;&#x5883;/nginx.png" alt="ansible_nginx" title="nginx&#x89D2;&#x8272;&#x76EE;&#x5F55;&#x7EC4;&#x6210;"></p>
<h3 id="tasks&#x6587;&#x4EF6;"><a href="#tasks&#x6587;&#x4EF6;" class="headerlink" title="tasks&#x6587;&#x4EF6;"></a>tasks&#x6587;&#x4EF6;</h3><p>CentOS7&#x5B98;&#x65B9;yum&#x6E90;&#x4E0A;&#x7684;nginx&#x7248;&#x672C;&#x4E3A;1.6.3&#xFF0C;&#x6B64;&#x5904;&#x914D;&#x7F6E;nginx&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;yum&#x6E90;</p>
<pre><code>&#x27A4; vim /etc/ansible/roles/nginx/tasks/main.yml

    - name: prepare nginx repo
      copy: src=nginx.repo dest=/etc/yum.repos.d/
    - name: install nginx
      yum: name=nginx state=present
    - name: edit conf
      copy: src=default.conf dest=/etc/nginx/conf.d
    - name: start nginx
      service: name=nginx state=started
      notify: restart nginx
    - name: test page
      template: src=index.html.j2 dest=/usr/share/nginx/html/index.html
</code></pre><h3 id="files&#x6587;&#x4EF6;"><a href="#files&#x6587;&#x4EF6;" class="headerlink" title="files&#x6587;&#x4EF6;"></a>files&#x6587;&#x4EF6;</h3><pre><code># nginx&#x5B98;&#x65B9;yum&#x6E90;&#xFF0C;&#x6B64;&#x7248;&#x672C;&#x4E3A;1.10.1
&#x27A4; vim /etc/ansible/roles/nginx/files/nginx.repo

    [nginx]
    name=nginx repo
    baseurl=http://nginx.org/packages/centos/7/$basearch/
    gpgcheck=0

# nginxs&#x914D;&#x7F6E;&#x6587;&#x4EF6;
&#x27A4; vim /etc/ansible/roles/nginx/files/default.conf

    upstream webs {
        server 172.16.60.73;
        server 172.16.60.74;
        server 127.0.0.1:8080 backup;
    }

    server {
        listen 80; 
        location / { 
            proxy_pass http://webs; 
        }   
    }

    server {
        listen 8080;
        server_name localhost;
        location / { 
            root   /usr/share/nginx/html;
            index  index.html index.htm;
        }   
    }
</code></pre><h3 id="handler&#x6587;&#x4EF6;"><a href="#handler&#x6587;&#x4EF6;" class="headerlink" title="handler&#x6587;&#x4EF6;"></a>handler&#x6587;&#x4EF6;</h3><pre><code># &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65F6;&#x89E6;&#x53D1;&#x751F;&#x91CD;&#x542F;&#x64CD;&#x4F5C;&#xFF0C;&#x4EE5;&#x4E0B;&#x670D;&#x52A1;&#x7565;
&#x27A4; vim /etc/ansible/roles/nginx/handlers/main.yml  

    - name: restart nginx
      service: name=nginx state=restarted
</code></pre><h3 id="templates&#x6587;&#x4EF6;"><a href="#templates&#x6587;&#x4EF6;" class="headerlink" title="templates&#x6587;&#x4EF6;"></a>templates&#x6587;&#x4EF6;</h3><pre><code># &#x540E;&#x7AEF;&#x4E3B;&#x673A;&#x90FD;&#x6545;&#x969C;&#x65F6;&#x62A5;&#x9519;&#x9875;&#x9762;&#xFF0C;&#x663E;&#x793A;ip&#x4E3A;&#x6D4B;&#x8BD5;nginx&#x9AD8;&#x53EF;&#x7528;&#x4F7F;&#x7528;
&#x27A4; vim /etc/ansible/roles/nginx/templates/index.html.j2

    &lt;h4&gt;IP: {{ ip }}&lt;/h4&gt;
    we will back soon...
</code></pre><h2 id="keepalived&#x89D2;&#x8272;&#x914D;&#x7F6E;"><a href="#keepalived&#x89D2;&#x8272;&#x914D;&#x7F6E;" class="headerlink" title="keepalived&#x89D2;&#x8272;&#x914D;&#x7F6E;"></a>keepalived&#x89D2;&#x8272;&#x914D;&#x7F6E;</h2><h3 id="tasks&#x6587;&#x4EF6;-1"><a href="#tasks&#x6587;&#x4EF6;-1" class="headerlink" title="tasks&#x6587;&#x4EF6;"></a>tasks&#x6587;&#x4EF6;</h3><pre><code>&#x27A4; vim /etc/ansible/roles/keepalived/tasks/main.yml

    - name: set hostname
      hostname: name={{ host }}
    - name: install keepalived
      yum: name=keepalived state=present
    - name: edit conf
      template: src=keepalived.conf.j2 dest=/etc/keepalived/keepalived.conf
      notify: restart keepalived
    - name: notify script
      copy: src=notify.sh dest=/etc/keepalived
    - name: start keepalived
      service: name=keepalived state=started
</code></pre><h3 id="templates&#x6587;&#x4EF6;-1"><a href="#templates&#x6587;&#x4EF6;-1" class="headerlink" title="templates&#x6587;&#x4EF6;"></a>templates&#x6587;&#x4EF6;</h3><pre><code># keepalived&#x4E3B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6A21;&#x677F;
&#x27A4; vim /etc/ansible/roles/keepalived/templates/keepalived.conf.j2

    !Configuration File for keepalived
    global_defs {
        notification_email {
            root@localhost
        }   
        notification_email_from keepalived@localhost
        smtp_server 127.0.0.1
        smtp_connect_timeout 30
        router_id {{ host }}
        vrrp_mcast_group4 224.0.100.18
    }

    vrrp_script chk_nginx {
        script &quot;killall -0 nginx&quot;
        interval 1
        weight -5
    }

    vrrp_instance VI_1 {
        state {{ role }}
        interface {{ ifc }}
        virtual_router_id {{ router_id }}
        priority {{ pri }}
        advert_int 1

        authentication {
            auth_type PASS
            auth_pass {{ pass }}
        }   

        virtual_ipaddress {
            {{ vip }}/32 dev {{ ifc }}
        }   
        track_script {
            chk_nginx
        }

        notify_master &quot;/etc/keepalived/notify.sh master&quot;
        notify_backup &quot;/etc/keepalived/notify.sh backup&quot;
        notify_fault &quot;/etc/keepalived/notify.sh fault&quot;
    }
</code></pre><h3 id="files&#x6587;&#x4EF6;-1"><a href="#files&#x6587;&#x4EF6;-1" class="headerlink" title="files&#x6587;&#x4EF6;"></a>files&#x6587;&#x4EF6;</h3><pre><code># nginx&#x4E3B;&#x5907;&#x5207;&#x6362;&#x901A;&#x77E5;&#x811A;&#x672C;
&#x27A4; vim /etc/ansible/roles/keepalived/files/notify.sh

    #!/bin/bash
    contact=&apos;root@localhost&apos;

    notify() {
        mailsubject=&quot;$(hostname) to be $1, vip floating.&quot;
        mailbody=&quot;$(date +&apos;%F %T&apos;): vrrp transition, $(hostname) changed to be $1&quot;
        echo &quot;$mailbody&quot; | mail -s &quot;$mailsubject&quot; $contact
    }

    case $1 in
    master)
        notify master
        ;;
    backup)
        notify backup
        systemctl restart nginx
        ;;
    fault)
        notify fault
        systemctl restart nginx
        ;;
    *)
        echo &quot;Usage: $(basename $0) {master|backup|fault}&quot;
        exit 1
        ;;
    esac
</code></pre><h2 id="httpd&#x89D2;&#x8272;&#x914D;&#x7F6E;"><a href="#httpd&#x89D2;&#x8272;&#x914D;&#x7F6E;" class="headerlink" title="httpd&#x89D2;&#x8272;&#x914D;&#x7F6E;"></a>httpd&#x89D2;&#x8272;&#x914D;&#x7F6E;</h2><pre><code>&#x27A4; vim /etc/ansible/roles/httpd/tasks/main.yml

    - name: install httpd 
      yum: name=httpd state=present
    - name: install php 
      yum: name=php state=present
    - name: install php-mysql
      yum: name=php-mysql state=present
    - name: html page
      shell: echo {{ website }} &gt; /var/www/html/index.html
    - name: php page
      shell: echo &apos;&lt;?php phpinfo();?&gt;&apos; &gt; /var/www/html/index.php 
    - name: restart httpd
      service: name=httpd state=restarted
</code></pre><h2 id="mariadb&#x89D2;&#x8272;&#x914D;&#x7F6E;"><a href="#mariadb&#x89D2;&#x8272;&#x914D;&#x7F6E;" class="headerlink" title="mariadb&#x89D2;&#x8272;&#x914D;&#x7F6E;"></a>mariadb&#x89D2;&#x8272;&#x914D;&#x7F6E;</h2><pre><code>&#x27A4; vim /etc/ansible/roles/mariadb/tasks/main.yml

    - name: install mariadb
      yum: name=httpd state=present
    - name: start mariadb
      service: name=mariadb state=started

# php&#x8FDE;&#x63A5;mysql&#x6D4B;&#x8BD5;&#x9875;
&#x27A4; vim /etc/ansible/roles/mariadb/files/index.php

    &lt;?php
        echo &apos;&lt;h2&gt;dbserver&lt;/h2&gt;&apos;.&apos;&lt;br&gt;&apos;;
        $conn = mysql_connect(&apos;127.0.0.1&apos;,&apos;root&apos;,&apos;&apos;);
        if($conn){
            echo &apos;connect mysql success!!!&apos;;
        }else{
            echo &apos;connect mysql fail!!!&apos;;
        }
</code></pre><p><em>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x6240;&#x6709;&#x89D2;&#x8272;&#x7684;&#x7B80;&#x8981;&#x914D;&#x7F6E;&#xFF0C;&#x53EF;&#x81EA;&#x884C;&#x6DFB;&#x52A0;&#x66F4;&#x591A;&#x5185;&#x5BB9;&#xFF0C;&#x5982;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7B49;</em></p>
<h2 id="&#x521B;&#x5EFA;playbook&#x8C03;&#x7528;"><a href="#&#x521B;&#x5EFA;playbook&#x8C03;&#x7528;" class="headerlink" title="&#x521B;&#x5EFA;playbook&#x8C03;&#x7528;"></a>&#x521B;&#x5EFA;playbook&#x8C03;&#x7528;</h2><pre><code>&#x27A4; vim /etc/ansible/lnamp.yml

    - hosts: nginx_keepalived
      remote_user: root
      roles: 
      - nginx
      - keepalived
    - hosts: httpd_php
      remote_user: root
      roles:
      - httpd
    - hosts: mariadb
      remote_user: root
      roles:
      - mariadb
</code></pre><h2 id="&#x90E8;&#x7F72;"><a href="#&#x90E8;&#x7F72;" class="headerlink" title="&#x90E8;&#x7F72;"></a>&#x90E8;&#x7F72;</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/ansible/</span><br><span class="line">ansible-play --check lnamp.yml      # &#x6D4B;&#x8BD5;&#x662F;&#x5426;&#x6B63;&#x5E38;</span><br><span class="line">ansible-play  lnamp.yml             # &#x5B9E;&#x9645;&#x8FD0;&#x884C;</span><br></pre></td></tr></table></figure>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x90E8;&#x5206;&#x8FD0;&#x884C;&#x622A;&#x56FE;<br><img src="/2016/08/06/ansible&#x7B80;&#x5355;&#x90E8;&#x7F72;&#x9AD8;&#x53EF;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;lnamp&#x73AF;&#x5883;/check.png" alt="ansible_check" title="&#x6D4B;&#x8BD5;&#x8FD0;&#x884C;&#x90E8;&#x5206;&#x622A;&#x56FE;"><br><img src="/2016/08/06/ansible&#x7B80;&#x5355;&#x90E8;&#x7F72;&#x9AD8;&#x53EF;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;lnamp&#x73AF;&#x5883;/run.png" alt="ansible_run" title="&#x90E8;&#x7F72;&#x6210;&#x529F;&#x7ED3;&#x679C;"></p>
<h2 id="&#x6D4B;&#x8BD5;"><a href="#&#x6D4B;&#x8BD5;" class="headerlink" title="&#x6D4B;&#x8BD5;"></a>&#x6D4B;&#x8BD5;</h2><h3 id="&#x6D4B;&#x8BD5;&#x8D1F;&#x8F7D;&#x5747;&#x8861;"><a href="#&#x6D4B;&#x8BD5;&#x8D1F;&#x8F7D;&#x5747;&#x8861;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x8D1F;&#x8F7D;&#x5747;&#x8861;"></a>&#x6D4B;&#x8BD5;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</h3><p>&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x770B;&#x51FA;&#x7ED3;&#x679C;&#xFF0C;&#x5728;&#x4E0A;&#x8FF0;&#x914D;&#x7F6E;&#x65F6;&#x6709;&#x610F;&#x5C06;2&#x53F0;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;&#x9996;&#x9875;&#x8BBE;&#x4E3A;&#x4E0D;&#x540C;&#xFF0C;&#x7ED3;&#x679C;&#x5982;&#x4E0B;<br><img src="/2016/08/06/ansible&#x7B80;&#x5355;&#x90E8;&#x7F72;&#x9AD8;&#x53EF;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;lnamp&#x73AF;&#x5883;/test1.png" alt="load_balance"></p>
<h3 id="&#x6D4B;&#x8BD5;lamp&#x73AF;&#x5883;"><a href="#&#x6D4B;&#x8BD5;lamp&#x73AF;&#x5883;" class="headerlink" title="&#x6D4B;&#x8BD5;lamp&#x73AF;&#x5883;"></a>&#x6D4B;&#x8BD5;lamp&#x73AF;&#x5883;</h3><p>&#x6D4B;&#x8BD5;php&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5982;&#x4E0B;<br><img src="/2016/08/06/ansible&#x7B80;&#x5355;&#x90E8;&#x7F72;&#x9AD8;&#x53EF;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;lnamp&#x73AF;&#x5883;/test2.png" alt="php_mysql"></p>
<h3 id="&#x6D4B;&#x8BD5;&#x9AD8;&#x53EF;&#x7528;"><a href="#&#x6D4B;&#x8BD5;&#x9AD8;&#x53EF;&#x7528;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x9AD8;&#x53EF;&#x7528;"></a>&#x6D4B;&#x8BD5;&#x9AD8;&#x53EF;&#x7528;</h3><p>&#x672C;&#x5B9E;&#x9A8C;&#x4E2D;&#x901A;&#x8FC7;&#x5224;&#x65AD;nginx&#x7684;&#x5B58;&#x6D3B;&#x72B6;&#x6001;&#x6765;&#x5B9E;&#x73B0;&#x4E3B;&#x5907;&#x5207;&#x6362;&#xFF0C;&#x914D;&#x5408;&#x901A;&#x77E5;&#x811A;&#x672C;&#xFF0C;&#x5373;&#x5F53;&#x4E3B;nginx&#x6545;&#x969C;&#x65F6;&#xFF0C;keepalived&#x5C06;&#x72B6;&#x6001;&#x5207;&#x6362;&#x4E3A;BACKUP&#xFF0C;&#x6B64;&#x65F6;&#x4F7F;&#x7528;&#x901A;&#x77E5;&#x811A;&#x672C;&#x91CD;&#x542F;nginx&#xFF0C;&#x5982;&#x679C;&#x91CD;&#x542F;&#x6210;&#x529F;&#x5219;&#x5207;&#x6362;&#x4E3A;MASTER&#xFF0C;&#x7EE7;&#x7EED;&#x670D;&#x52A1;&#x3002;</p>
<ol>
<li><p>&#x505C;&#x6B62;&#x4E3B;nginx&#xFF0C;&#x67E5;&#x770B;&#x5907;nginx&#x4E0A;&#x7684;keeplived&#x72B6;&#x6001;<br> <img src="/2016/08/06/ansible&#x7B80;&#x5355;&#x90E8;&#x7F72;&#x9AD8;&#x53EF;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;lnamp&#x73AF;&#x5883;/test3.png" alt="backup"></p>
</li>
<li><p>&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x4E3B;nginx&#xFF0C;&#x5907;nginx&#x4E0A;&#x7684;keepalived&#x72B6;&#x6001;<br> <img src="/2016/08/06/ansible&#x7B80;&#x5355;&#x90E8;&#x7F72;&#x9AD8;&#x53EF;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;lnamp&#x73AF;&#x5883;/test4.png" alt="backup2"></p>
</li>
<li><p>&#x505C;&#x6B62;&#x540E;&#x7AEF;2&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x67E5;&#x770B;nginx&#x63D0;&#x793A;&#x9875;<br> <img src="/2016/08/06/ansible&#x7B80;&#x5355;&#x90E8;&#x7F72;&#x9AD8;&#x53EF;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;lnamp&#x73AF;&#x5883;/test5.png" alt="sorry"></p>
</li>
</ol>
<p><em>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x672C;&#x6B21;&#x5B9E;&#x9A8C;&#x7684;&#x5168;&#x90E8;&#x5185;&#x5BB9;</em></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Nginx配置文件主要指令参考]]></title>
      <url>http://liu2lin600.github.io/2016/08/02/Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%BB%E8%A6%81%E6%8C%87%E4%BB%A4%E5%8F%82%E8%80%83/</url>
      <content type="html"><![CDATA[<p>&#x5BF9;nginx&#x6838;&#x5FC3;&#x6A21;&#x5757;&#x53CA;&#x90E8;&#x5206;&#x91CD;&#x8981;&#x6A21;&#x5757;&#x6307;&#x4EE4;&#x8FDB;&#x884C;&#x8BF4;&#x660E;<br><a id="more"></a></p>
<p>&#x8BE6;&#x60C5;&#x53C2;&#x8003;&#x5B98;&#x7F51;&#xFF1A;<a href="http://nginx.org/en/docs/" target="_blank" rel="noopener">nginx&#x5B98;&#x65B9;&#x6587;&#x6863;</a></p>
<h2 id="&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7EC4;&#x6210;"><a href="#&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7EC4;&#x6210;" class="headerlink" title="&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7EC4;&#x6210;"></a>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7EC4;&#x6210;</h2><p>&#x914D;&#x7F6E;&#x7531;&#x6307;&#x4EE4;&#x548C;&#x503C;&#x7EC4;&#x6210;&#xFF0C;&#x6BCF;&#x4E2A;&#x6307;&#x4EE4;&#x4EE5;&#x2019;;&#x2019;&#x7ED3;&#x5C3E;&#xFF0C;&#x4E3B;&#x8981;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5305;&#x62EC;main, events, http, upstream, server, location&#xFF0C;&#x7ED3;&#x6784;&#x5982;&#x4E0B;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">main BLOCK      <span class="comment"># &#x4E3B;&#x914D;&#x7F6E;&#x6BB5;</span></span><br><span class="line">events {        <span class="comment"># &#x4E8B;&#x4EF6;&#x76F8;&#x5173;&#x914D;&#x7F6E;</span></span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line">http {          <span class="comment"># http/https&#x76F8;&#x5173;</span></span><br><span class="line">    ...</span><br><span class="line">    upstream {  <span class="comment"># &#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;</span></span><br><span class="line">        ...</span><br><span class="line">    }</span><br><span class="line">    server {    <span class="comment"># &#x865A;&#x62DF;&#x4E3B;&#x673A;</span></span><br><span class="line">        ...</span><br><span class="line">        location /xxx {     <span class="comment"># URI&#x5B9A;&#x4F4D;&#x540E;&#x914D;&#x7F6E;</span></span><br><span class="line">            ...</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">stream {        <span class="comment"># tcp&#x4EE3;&#x7406;&#x6BB5;</span></span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line">mail {          <span class="comment"># &#x90AE;&#x4EF6;&#x4EE3;&#x7406;&#x914D;&#x7F6E;</span></span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="&#x6838;&#x5FC3;&#x6A21;&#x5757;&#x914D;&#x7F6E;&#x6BB5;"><a href="#&#x6838;&#x5FC3;&#x6A21;&#x5757;&#x914D;&#x7F6E;&#x6BB5;" class="headerlink" title="&#x6838;&#x5FC3;&#x6A21;&#x5757;&#x914D;&#x7F6E;&#x6BB5;"></a>&#x6838;&#x5FC3;&#x6A21;&#x5757;&#x914D;&#x7F6E;&#x6BB5;</h2><ol>
<li><p>&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x7684;&#x5FC5;&#x5907;&#x914D;&#x7F6E;</p>
<ul>
<li><code>user username [groupname];</code><br>  &#x6307;&#x5B9A;&#x8FD0;&#x884C;worker&#x8FDB;&#x7A0B;&#x7684;&#x7528;&#x6237;&#x548C;&#x7EC4;</li>
<li><code>pid /path/to/pidfile_name;</code><br>  &#x6307;&#x5B9A;nginx&#x7684;pid&#x6587;&#x4EF6;</li>
<li><code>worker_rlimit_nofile 10240;</code><br>  &#x6307;&#x5B9A;&#x4E00;&#x4E2A;worker&#x8FDB;&#x7A0B;&#x6240;&#x80FD;&#x591F;&#x6253;&#x5F00;&#x7684;&#x6700;&#x5927;&#x6587;&#x4EF6;&#x53E5;&#x67C4;&#x6570;</li>
<li><code>worker_rlimit_sigpending N;</code><br>  &#x8BBE;&#x5B9A;&#x6BCF;&#x4E2A;&#x7528;&#x6237;&#x80FD;&#x591F;&#x53D1;&#x5F80;worker&#x8FDB;&#x7A0B;&#x7684;&#x4FE1;&#x53F7;&#x7684;&#x6570;&#x91CF;</li>
</ul>
</li>
<li><p>&#x4F18;&#x5316;&#x6027;&#x80FD;&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E;</p>
<ul>
<li><code>worker_processes NUM|auto;</code><br>  worker&#x8FDB;&#x7A0B;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x901A;&#x5E38;&#x5176;&#x6570;&#x503C;&#x5E94;&#x8BE5;&#x4E3A;CPU&#x7684;&#x7269;&#x7406;&#x6838;&#x5FC3;&#x6570;&#x51CF;1</li>
<li><p><code>worker_cpu_affinity cpumask ...;</code><br>  &#x7ED1;&#x5B9A;cpu&#x4EB2;&#x7F18;&#x6027;</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0000 0001 == &#x7B2C;&#x4E00;&#x9897;</span><br><span class="line">0000 0010 == &#x7B2C;&#x4E8C;&#x9897;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>worker_priority NICE;</code><br>  NICE&#x503C;&#x5728;-20~19&#x4E4B;&#x95F4;&#xFF0C;&#x8D8A;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x8D8A;&#x9AD8;</p>
</li>
<li><code>ssl_engine device;</code><br>  &#x5728;&#x5B58;&#x5728;ssl&#x786C;&#x4EF6;&#x52A0;&#x901F;&#x5668;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x6307;&#x5B9A;&#x6240;&#x4F7F;&#x7528;&#x7684;ssl&#x786C;&#x4EF6;&#x52A0;&#x901F;&#x8BBE;&#x5907;</li>
</ul>
</li>
<li><p>&#x4E8B;&#x4EF6;&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E;</p>
<ul>
<li><code>worker_connections 2048;</code><br>  &#x6BCF;&#x4E2A;worker&#x80FD;&#x591F;&#x5E76;&#x53D1;&#x54CD;&#x5E94;&#x6700;&#x5927;&#x8BF7;&#x6C42;&#x6570;</li>
<li><code>use epoll;</code><br>  &#x5B9A;&#x4E49;&#x4F7F;&#x7528;&#x7684;&#x4E8B;&#x4EF6;&#x6A21;&#x578B;&#xFF0C;&#x5EFA;&#x8BAE;&#x8BA9;nginx&#x81EA;&#x52A8;&#x9009;&#x62E9;</li>
<li><code>accept_mutex [on|off];</code><br>  &#x662F;&#x5426;&#x6253;&#x5F00;Ningx&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x9501;&#xFF0C;&#x6B64;&#x9501;&#x80FD;&#x591F;&#x8BA9;&#x591A;&#x4E2A;worker&#x8FDB;&#x8F6E;&#x6D41;&#x5730;&#x3001;&#x5E8F;&#x5217;&#x5316;&#x5730;&#x4E0E;&#x65B0;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#xFF0C;&#x800C;&#x901A;&#x5E38;&#x5F53;&#x4E00;&#x4E2A;w    orker&#x8FDB;&#x7A0B;&#x7684;&#x8D1F;&#x8F7D;&#x8FBE;&#x5230;&#x5176;&#x4E0A;&#x9650;&#x7684;7/8&#xFF0C;master&#x5C31;&#x5C3D;&#x53EF;&#x80FD;&#x4E0D;&#x518D;&#x5C06;&#x8BF7;&#x6C42;&#x8C03;&#x5EA6;&#x6B64;worker&#x3002;off&#x65F6;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x5524;&#x9192;&#x591A;&#x4E2A;worke<br>r &#x8FDB;&#x7A0B;&#xFF0C;&#x540C;&#x65F6;&#x53EA;&#x6709;&#x4E00;&#x4E2A;worker&#x83B7;&#x5F97;&#x8FDE;&#x63A5;&#xFF0C;&#x5B58;&#x5728;&#x60CA;&#x7FA4;&#x95EE;&#x9898;&#xFF0C;&#x4E0D;&#x8FC7;&#x7531;&#x4E8E;nginx&#x8FDB;&#x7A0B;&#x6570;&#x5C11;&#xFF0C;&#x95EE;&#x9898;&#x4E0D;&#x5927;</li>
<li><code>accept_mutex_delay NUMms;</code><br>  accept&#x9501;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x4E00;&#x4E2A;worker&#x8FDB;&#x7A0B;&#x4E3A;&#x53D6;&#x5F97;accept&#x9501;&#x7684;&#x7B49;&#x5F85;&#x65F6;&#x957F;&#xFF0C;&#x5982;&#x679C;&#x67D0;worker&#x8FDB;&#x7A0B;&#x5728;&#x67D0;&#x6B21;&#x8BD5;&#x56FE;&#x53D6;&#x5F97;&#x9501;&#x65F6;&#x5931;&#x8D25;&#x4E86;&#xFF0C;&#x81F3;    &#x5C11;&#x8981;&#x7B49;&#x5F85;#ms&#x624D;&#x80FD;&#x518D;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x9501;</li>
<li><code>lock_file /path/to/lock_file;</code><br>  lock&#x6587;&#x4EF6;</li>
<li><code>multi_accept on|off;</code><br>  &#x662F;&#x5426;&#x5141;&#x8BB8;&#x4E00;&#x6B21;&#x6027;&#x5730;&#x54CD;&#x5E94;&#x591A;&#x4E2A;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;Off </li>
</ul>
</li>
<li><p>&#x7528;&#x4E8E;&#x8C03;&#x8BD5;&#x53CA;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;&#x914D;&#x7F6E;</p>
<ul>
<li><code>daemon on|off;</code><br>  ningx&#x8FD0;&#x884C;&#x540E;&#x53F0;&#x9ED8;&#x8BA4;&#x4E3A;on&#xFF0C;&#x8C03;&#x8BD5;&#x65F6;&#x53EF;&#x8BBE;&#x4E3A;off&#xFF0C;&#x6240;&#x6709;&#x4FE1;&#x606F;&#x63A5;&#x8F93;&#x51FA;&#x63A7;&#x5236;&#x53F0;</li>
<li><code>master_process on|off;</code><br>  &#x662F;&#x5426;&#x4EE5;master/worker&#x6A21;&#x5F0F;&#x8FD0;&#x884C;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;on&#xFF0C;&#x8C03;&#x8BD5;&#x65F6;&#x53EF;&#x8BBE;off&#x4EE5;&#x65B9;&#x4FBF;&#x8FFD;&#x8E2A;</li>
<li><code>error_log /path/to/error_log LEVEL;</code><br>  &#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x53CA;&#x5176;&#x7EA7;&#x522B;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;error&#x7EA7;&#x522B;&#xFF0C;&#x8C03;&#x8BD5;&#x65F6;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;debug&#x7EA7;&#x522B;&#xFF0C;&#x4F46;&#x8981;&#x6C42;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x2013;with-debug&#x542F;&#x7528;debug&#x529F;&#x80FD;</li>
</ul>
</li>
</ol>
<h2 id="http&#x6A21;&#x5757;&#x914D;&#x7F6E;&#x6BB5;"><a href="#http&#x6A21;&#x5757;&#x914D;&#x7F6E;&#x6BB5;" class="headerlink" title="http&#x6A21;&#x5757;&#x914D;&#x7F6E;&#x6BB5;"></a>http&#x6A21;&#x5757;&#x914D;&#x7F6E;&#x6BB5;</h2><ol>
<li><p>&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E; </p>
<ul>
<li><p><code>server {...}</code><br>  &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x4E3B;&#x673A;,nginx&#x652F;&#x6301;&#x4F7F;&#x7528;&#x57FA;&#x4E8E;&#x4E3B;&#x673A;&#x540D;&#x6216;IP&#x7684;&#x865A;&#x62DF;&#x4E3B;&#x673A;</p>
<pre><code>server {
    listen 80;
    server_name www.liu2lin.com;
    root /web/www;
}  
</code></pre></li>
<li><p><code>listen address[:port];</code><br>  <code>listen port;</code><br>  <code>listen unix:path;</code>  </p>
<pre><code>**&#x5176;&#x5B83;&#x53EF;&#x7528;&#x53C2;&#x6570;&#xFF1A;**
default_server&#xFF1A;&#x9ED8;&#x8BA4;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#xFF0C;&#x5B9A;&#x4E49;&#x6B64;server&#x4E3A;http&#x4E2D;&#x9ED8;&#x8BA4;&#x7684;server&#xFF0C;&#x5982;&#x679C;&#x6240;&#x6709;&#x7684;server&#x4E2D;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;listen&#x4F7F;&#x7528;&#x6B64;&#x53C2;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x7B2C;&#x4E00;&#x4E2A;server&#x5373;&#x4E3A;&#x9ED8;&#x8BA4;server;
ssl&#xFF1A;&#x9650;&#x5236;&#x53EA;&#x80FD;&#x901A;&#x8FC7;ssl&#x8FDE;&#x63A5;&#x63D0;&#x4F9B;&#x670D;&#x52A1;
back
rcvbuf=SIZE&#xFF1A;&#x63A5;&#x6536;&#x7F13;&#x51B2;&#x5927;&#x5C0F;
sndbuf=SIZE&#xFF1A;&#x53D1;&#x9001;&#x7F13;&#x51B2;&#x5927;&#x5C0F;
</code></pre></li>
<li><p><code>server_name [...];</code><br>  &#x5F53;&#x524D;server&#x7684;&#x4E3B;&#x673A;&#x540D;&#xFF0C;&#x53EF;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x6216;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x5206;&#x9694;&#x7684;&#x591A;&#x4E2A;&#x4E3B;&#x673A;&#xFF0C;&#x652F;&#x6301;&#x4F7F;&#x7528;&#x901A;&#x914D;&#x53CA;&#x6B63;&#x5219;&#x5339;&#x914D;&#xFF0C;&#x4F18;&#x5148;&#x7EA7;&#x5982;&#x4E0B;</p>
<pre><code>1. &#x9996;&#x5148;&#x505A;&#x7CBE;&#x786E;&#x5339;&#x914D;&#xFF1B;www.liu2lin.com 
2. &#x5DE6;&#x4FA7;&#x901A;&#x914D;&#x7B26;&#x5339;&#x914D;&#xFF1B;*.liu2lin.com
3. &#x53F3;&#x4FA7;&#x901A;&#x914D;&#x7B26;&#x5339;&#x914D;&#xFF1B;www.abc.com, www.*
4. &#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5339;&#x914D;: ~^.*\.liu2lin\.com$
</code></pre></li>
<li><p><code>server_name_hash_bucket_size 32|64|128;</code><br>  &#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x5FEB;&#x901F;&#x4E3B;&#x673A;&#x67E5;&#x627E;&#xFF0C;nginx&#x4F7F;&#x7528;hash&#x8868;&#x6765;&#x4FDD;&#x5B58;&#x4E3B;&#x673A;&#x540D;</p>
</li>
</ul>
</li>
<li><p>&#x8DEF;&#x5F84;&#x5B9A;&#x4E49;&#x76F8;&#x5173;&#x914D;&#x7F6E;</p>
<ul>
<li><p><code>root PATH;</code><br>  &#x8BBE;&#x7F6E;web&#x8D44;&#x6E90;&#x8DEF;&#x5F84;&#xFF0C;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x8BF7;&#x6C42;&#x7684;&#x6839;&#x6587;&#x6863;&#x76EE;&#x5F55;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;http, server, location&#x4E2D;</p>
</li>
<li><p><code>location [ = | ~ | ~* | ^~ ] uri { ... }</code><br>  <code>location @name { ... }</code><br>  &#x529F;&#x80FD;&#xFF1A;&#x5141;&#x8BB8;&#x6839;&#x636E;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x7684;URI&#x6765;&#x5339;&#x914D;&#x6307;&#x5B9A;&#x7684;&#x5404;location&#x4EE5;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#x914D;&#x7F6E;&#xFF1B;&#x5339;&#x914D;&#x5230;&#x65F6;&#xFF0C;&#x5C06;&#x88AB;location&#x5757;&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x6240;&#x5904;&#x7406;</p>
<p>  <code>=</code>&#xFF1A; URI&#x7CBE;&#x786E;&#x5339;&#x914D;<br>  <code>~</code>&#xFF1A; &#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#xFF0C;&#x5339;&#x914D;&#x65F6;&#x533A;&#x5206;&#x5B57;&#x7B26;&#x5927;&#x5C0F;&#x5199;<br>  <code>~*</code>&#xFF1A;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#xFF0C;&#x5339;&#x914D;&#x65F6;&#x5FFD;&#x7565;&#x5B57;&#x7B26;&#x5927;&#x5C0F;&#x5199;<br>  <code>^~</code>&#xFF1A;URI&#x524D;&#x534A;&#x90E8;&#x5206;&#x5339;&#x914D;&#xFF0C;&#x4E0D;&#x533A;&#x5206;&#x5B57;&#x7B26;&#x5927;&#x5C0F;&#x5199;</p>
<pre><code>location ~* .*\.(jpg|jpeg|gif|png)$ {
    root /web/images;
}
</code></pre><p>  &#x5339;&#x914D;&#x4F18;&#x5148;&#x7EA7;&#xFF1A;= &gt; ^~ &gt; ~|~* &gt; &#x65E0;&#x7B26;&#x53F7;<br>  &#x5B57;&#x7B26;&#x5B57;&#x9762;&#x91CF;&#x6700;&#x7CBE;&#x786E;&#x5339;&#x914D;&#x3001;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x68C0;&#x7D22;&#xFF08;&#x7531;&#x7B2C;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x5230;&#x6240;&#x5904;&#x7406;&#xFF09;&#x3001;&#x6309;&#x5B57;&#x7B26;&#x5B57;&#x9762;&#x91CF;</p>
</li>
<li><p><code>alias PATH;</code><br>  &#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x7684;&#x8DEF;&#x5F84;&#x522B;&#x540D;&#xFF0C;&#x53EA;&#x80FD;&#x7528;&#x4E8E;location&#x4E2D;</p>
<pre><code>location /data/ {
    alias /web/images/; 
}

# http://www.a.com/data/a.jpg ==&gt; http://www.a.com/web/images/a.jpg
</code></pre><p>  &#x6CE8;&#xFF1A;<br>  root&#x6307;&#x4EE4;&#xFF1A;&#x7ED9;&#x5B9A;&#x7684;&#x8DEF;&#x5F84;&#x5BF9;&#x5E94;&#x4E8E;location&#x4E2D;&#x7684;URI&#x5DE6;&#x4FA7;&#x7684;&#x2019;/&#x2018;<br>  alias&#x6307;&#x4EE4;&#xFF1A;&#x7ED9;&#x5B9A;&#x7684;&#x8DEF;&#x5F84;&#x5BF9;&#x5E94;&#x4E8E;location&#x4E2D;&#x7684;URI&#x53F3;&#x4FA7;&#x7684;&#x2019;/&#x2018;</p>
</li>
<li><p><code>index file ...;</code><br>  &#x5B9A;&#x4E49;&#x9ED8;&#x8BA4;&#x9875;&#x9762;&#xFF0C;&#x53EF;&#x8DDF;&#x591A;&#x4E2A;&#x503C;</p>
</li>
<li><p><code>error_page code ... [=[response]] uri;</code><br>  &#x81EA;&#x5B9A;&#x4E49;&#x9519;&#x8BEF;&#x9875;&#x91CD;&#x5B9A;&#x5411;&#xFF0C;&#x5F53;&#x5BF9;&#x4E8E;&#x67D0;&#x4E2A;&#x8BF7;&#x6C42;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x5339;&#x914D;&#x4E0A;&#x4E86;error_page&#x6307;&#x4EE4;&#x4E2D;&#x8BBE;&#x5B9A;&#x7684;code&#xFF0C;&#x5219;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x65B0;&#x7684;URI&#x4E2D;&#xFF0C;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;&#x76F8;&#x5E94;&#x54CD;&#x5E94;&#x7801;&#xFF0C;&#x5982;&#x52A0;&#x4E0A;&#x2019;=xxx&#x2019;&#xFF0C;&#x5219;&#x53D1;&#x751F;&#x76F8;&#x5E94;&#x6539;&#x53D8;</p>
<pre><code>error_page  404  /404.html
error_page  500  502  503  /50x.html
</code></pre></li>
<li><p><code>try_files path1 [path2 ...] uri;</code><br>  &#x81EA;&#x5DE6;&#x81F3;&#x53F3;&#x5C1D;&#x8BD5;&#x8BFB;&#x53D6;&#x7531;path&#x6240;&#x6307;&#x5B9A;&#x8DEF;&#x5F84;&#xFF0C;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x627E;&#x5230;&#x5373;&#x505C;&#x6B62;&#x5E76;&#x8FD4;&#x56DE;&#xFF0C;&#x5982;&#x679C;&#x6240;&#x6709;path&#x5747;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x6700;&#x540E;&#x4E00;&#x4E2A;uri; </p>
<pre><code>location ~* ^/documents/(.*)$ {
    root /www/htdocs;
    try_files $uri /docu/$1 /temp.html;
}

# http://www.liu2lin.com/documents/a.html
# http://www.liu2lin.com/docu/a.html
# http://www.liu2lin.com/temp.html
</code></pre></li>
</ul>
</li>
<li><p>&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x76F8;&#x5173;&#x7684;&#x8BBE;&#x7F6E;&#xFF1A;</p>
<ul>
<li><p><code>keepalive_timeout TIME;</code><br>  &#x4FDD;&#x6301;&#x8FDE;&#x63A5;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x957F;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;75&#x79D2;&#xFF0C;0&#x8868;&#x793A;&#x7981;&#x6B62;&#x4F7F;&#x7528;&#x957F;&#x8FDE;&#x63A5;</p>
</li>
<li><p><code>keepalive_requests N;</code><br>  &#x5728;&#x4E00;&#x6B21;&#x957F;&#x8FDE;&#x63A5;&#x4E0A;&#x5141;&#x8BB8;&#x627F;&#x8F7D;&#x7684;&#x6700;&#x5927;&#x8BF7;&#x6C42;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;100&#x4E2A;</p>
</li>
<li><p><code>keepalive_disable [msie6 | safari | none ];</code><br>  &#x5BF9;&#x6307;&#x5B9A;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x7981;&#x6B62;&#x4F7F;&#x7528;&#x957F;&#x8FDE;&#x63A5;</p>
</li>
<li><p><code>tcp_nodelay on|off</code><br>  &#x5BF9;keepalive&#x8FDE;&#x63A5;&#x662F;&#x5426;&#x4F7F;&#x7528;TCP_NODELAY&#x9009;&#x9879;&#xFF0C;DELAY&#x4E3A;&#x5C06;&#x591A;&#x4E2A;&#x62A5;&#x6587;&#x5408;&#x5E76;&#x518D;&#x4E00;&#x8D77;&#x53D1;&#x9001;</p>
</li>
<li><p><code>client_header_timeout TIME;</code><br>  &#x8BFB;&#x53D6;http&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x957F;&#xFF0C;&#x9ED8;&#x8BA4;60s</p>
</li>
<li><p><code>client_body_timeout TIME;</code><br>  &#x8BFB;&#x53D6;http&#x8BF7;&#x6C42;&#x5305;&#x4F53;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x957F;&#xFF0C;&#x9ED8;&#x8BA4;60s</p>
</li>
<li><p><code>send_timeout TIME;</code><br>  &#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x54CD;&#x5E94;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x957F;&#xFF0C;&#x6307;&#x4E24;&#x6B21;&#x5199;&#x64CD;&#x4F5C;&#x4E4B;&#x95F4;&#x7684;&#x95F4;&#x9694;&#x65F6;&#x957F;</p>
</li>
</ul>
</li>
<li><p>&#x5BF9;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x7684;&#x9650;&#x5236;&#xFF1A;</p>
<ul>
<li><p><code>limit_except METHOD ... { ... };</code><br>  &#x6307;&#x5B9A;&#x5BF9;&#x8303;&#x56F4;&#x4E4B;&#x5916;&#x7684;&#x5176;&#x5B83;&#x65B9;&#x6CD5;&#x7684;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#xFF0C;&#x53EA;&#x80FD;&#x7528;&#x4E8E;location&#x4E2D;</p>
<pre><code># &#x8868;&#x793A;&#x9664;&#x4E86;GET&#x4EE5;&#x5916;&#x7684;&#x65B9;&#x6CD5;&#x4EC5;&#x5141;&#x8BB8;172.16&#x7F51;&#x7EDC;&#x4E3B;&#x673A;&#x8BBF;&#x95EE;
limit_except GET {
    allow 172.16.0.0/16;
    deny all; 
}
</code></pre></li>
<li><p><code>client_max_body_size SIZE;</code><br>  http&#x8BF7;&#x6C42;&#x5305;&#x4F53;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x5E38;&#x7528;&#x4E8E;&#x9650;&#x5B9A;&#x5BA2;&#x6237;&#x6240;&#x80FD;&#x591F;&#x8BF7;&#x6C42;&#x7684;&#x6700;&#x5927;&#x5305;&#x4F53;&#xFF0C;&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x4E2D;&#x7684;Content-Length&#x6765;&#x68C0;&#x6D4B;&#xFF0C;&#x4EE5;&#x907F;&#x514D;&#x65E0;&#x7528;&#x7684;&#x4F20;&#x8F93;</p>
</li>
<li><p><code>limit_rate RATE;</code><br>  &#x9650;&#x5236;&#x5BA2;&#x6237;&#x7AEF;&#x6BCF;&#x79D2;&#x949F;&#x4F20;&#x8F93;&#x7684;&#x5B57;&#x8282;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;0&#xFF0C;&#x8868;&#x793A;&#x6CA1;&#x6709;&#x9650;&#x5236;</p>
<pre><code>location /download/ {
    root /web/;
    limit_rate 20480;
}
</code></pre></li>
<li><p><code>limit_rate_after TIME;</code><br>  nginx&#x5411;&#x5BA2;&#x6237;&#x53D1;&#x9001;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x65F6;&#x957F;&#x8D85;&#x51FA;&#x4E86;&#x6B64;&#x5904;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x957F;&#xFF0C;&#x5219;&#x540E;&#x7EED;&#x7684;&#x53D1;&#x9001;&#x8FC7;&#x7A0B;&#x5F00;&#x59CB;&#x9650;&#x901F;</p>
</li>
</ul>
</li>
<li><p>&#x6587;&#x4EF6;&#x64CD;&#x4F5C;&#x7684;&#x4F18;&#x5316;&#xFF1A;</p>
<ul>
<li><p><code>sendfile on|off;</code><br>  &#x662F;&#x5426;&#x542F;&#x7528;sendfile&#x529F;&#x80FD;&#xFF0C;&#x5F00;&#x542F;&#x540E;&#x4F1A;&#x51CF;&#x5C11;&#x7528;&#x6237;&#x7A7A;&#x95F4;&#x5230;&#x5185;&#x6838;&#x7A7A;&#x95F4;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x3002;&#x5BF9;&#x4E8E;&#x666E;&#x901A;&#x5E94;&#x7528;&#x8BBE;&#x4E3A; on&#xFF0C;&#x5982;&#x679C;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x4E0B;&#x8F7D;&#x7B49;&#x5E94;&#x7528;&#x78C1;&#x76D8;IO&#x91CD;&#x8D1F;&#x8F7D;&#x5E94;&#x7528;&#xFF0C;&#x53EF;&#x8BBE;&#x7F6E;&#x4E3A;off&#xFF0C;&#x9ED8;&#x8BA4;off</p>
</li>
<li><p><code>aio on|off;</code><br>  &#x662F;&#x5426;&#x542F;&#x7528;aio(&#x5F02;&#x6B65;&#x975E;&#x963B;&#x585E;)&#x529F;&#x80FD;</p>
</li>
<li><p><code>open_file_cache max=N [inactive=TIME]|off;</code><br>  &#x662F;&#x5426;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x7F13;&#x5B58;&#x529F;&#x80FD;</p>
<p>  <code>max</code>&#xFF1A;&#x7F13;&#x5B58;&#x6761;&#x76EE;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x5F53;&#x6EE1;&#x4E86;&#x4EE5;&#x540E;&#x5C06;&#x6839;&#x636E;LRU&#x7B97;&#x6CD5;&#x8FDB;&#x884C;&#x7F6E;&#x6362;<br>  <code>inactive</code>&#xFF1A;&#x7F13;&#x5B58;&#x6761;&#x76EE;&#x5728;&#x6307;&#x5B9A;&#x65F6;&#x957F;&#x65F6;&#x6CA1;&#x6709;&#x88AB;&#x8BBF;&#x95EE;&#x8FC7;&#x65F6;&#xFF0C;&#x5C06;&#x81EA;&#x52A8;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;60s</p>
<p>  &#x7F13;&#x5B58;&#x7684;&#x4FE1;&#x606F;&#x5305;&#x62EC;&#xFF1A;</p>
<ol>
<li>&#x6587;&#x4EF6;&#x53E5;&#x67C4;&#x3001;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x548C;&#x4E0A;&#x6B21;&#x4FEE;&#x6539;&#x65F6;&#x95F4;</li>
<li>&#x5DF2;&#x7ECF;&#x6253;&#x5F00;&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;</li>
<li>&#x6CA1;&#x6709;&#x627E;&#x5230;&#x6216;&#x6CA1;&#x6709;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x7684;&#x4FE1;&#x606F;</li>
</ol>
</li>
<li><p><code>open_file_cache_errors on|off;</code><br>  &#x662F;&#x5426;&#x7F13;&#x5B58;&#x6587;&#x4EF6;&#x627E;&#x4E0D;&#x5230;&#x6216;&#x6CA1;&#x6709;&#x6743;&#x9650;&#x8BBF;&#x95EE;&#x7B49;&#x76F8;&#x5173;&#x4FE1;&#x606F;</p>
</li>
<li><p><code>open_file_cache_valid TIME;</code><br>  &#x591A;&#x957F;&#x65F6;&#x95F4;&#x68C0;&#x67E5;&#x4E00;&#x6B21;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x6761;&#x76EE;&#x662F;&#x5426;&#x8D85;&#x51FA;&#x975E;&#x6D3B;&#x52A8;&#x65F6;&#x957F;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;60s</p>
</li>
<li><p><code>open_file_cache_min_use N;</code><br>  &#x5728;inactive&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x957F;&#x5185;&#x88AB;&#x8BBF;&#x95EE;&#x8D85;&#x6B64;&#x5904;&#x6307;&#x5B9A;&#x7684;&#x6B21;&#x6570;&#x5730;&#xFF0C;&#x624D;&#x4E0D;&#x4F1A;&#x88AB;&#x5220;&#x9664;</p>
</li>
</ul>
</li>
<li><p>&#x5BF9;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x7684;&#x7279;&#x6B8A;&#x5904;&#x7406;&#xFF1A;</p>
<ul>
<li><p><code>ignore_invalid_headers on|off;</code><br>  &#x662F;&#x5426;&#x5FFD;&#x7565;&#x4E0D;&#x5408;&#x6CD5;&#x7684;http&#x9996;&#x90E8;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;on&#xFF0C;off&#x610F;&#x5473;&#x7740;&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x4E2D;&#x51FA;&#x73B0;&#x4E0D;&#x5408;&#x89C4;&#x7684;&#x9996;&#x90E8;&#x5C06;&#x62D2;&#x7EDD;&#x54CD;&#x5E94;&#x3002;&#x53EA;&#x80FD;&#x7528;&#x4E8E;server&#x548C;http</p>
</li>
<li><p><code>log_not_found on|off;</code><br>  &#x662F;&#x5426;&#x5C06;&#x6587;&#x4EF6;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x4FE1;&#x606F;&#x4E5F;&#x8BB0;&#x5F55;&#x8FDB;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x4E2D;</p>
</li>
<li><p><code>resolver ADDRESS;</code><br>  &#x6307;&#x5B9A;nginx&#x4F7F;&#x7528;&#x7684;DNS&#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;</p>
</li>
<li><p><code>resover_timeout TIME;</code><br>  &#x6307;&#x5B9A;DNS&#x89E3;&#x6790;&#x8D85;&#x65F6;&#x65F6;&#x957F;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;30s</p>
</li>
<li><p><code>server_tokens on|off;</code><br>  &#x662F;&#x5426;&#x5728;&#x9519;&#x8BEF;&#x9875;&#x9762;&#x4E2D;&#x663E;&#x793A;nginx&#x7684;&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x5EFA;&#x8BAE;&#x5173;&#x95ED;</p>
</li>
</ul>
</li>
<li><p>&#x5185;&#x5B58;&#x53CA;&#x78C1;&#x76D8;&#x8D44;&#x6E90;&#x5206;&#x914D;&#xFF1A;</p>
<ul>
<li><p><code>client_body_in_file_only on|clean|off;</code><br>  HTTP&#x7684;&#x5305;&#x4F53;&#x662F;&#x5426;&#x5B58;&#x50A8;&#x5728;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x4E2D;&#xFF1B;&#x975E;off&#x8868;&#x793A;&#x5B58;&#x50A8;&#xFF0C;&#x5373;&#x4F7F;&#x5305;&#x4F53;&#x5927;&#x5C0F;&#x4E3A;0&#x4E5F;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#xFF1B;on&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x7ED3;&#x675F;&#x540E;&#x5305;&#x4F53;&#x6587;&#x4EF6;&#x4E0D;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#xFF0C;clean&#x8868;&#x793A;&#x4F1A;&#x88AB;&#x5220;&#x9664;</p>
</li>
<li><p><code>client_body_in_single_buffer on|off;</code><br>  HTTP&#x7684;&#x5305;&#x4F53;&#x662F;&#x5426;&#x5B58;&#x50A8;&#x5728;&#x5185;&#x5B58;buffer&#x5F53;&#x4E2D;&#xFF1B;&#x9ED8;&#x8BA4;&#x4E3A;off</p>
</li>
<li><p><code>cleint_body_buffer_size size;</code><br>  &#x63A5;&#x6536;&#x8BF7;&#x6C42;&#x5305;&#x4F53;&#x7684;&#x5185;&#x5B58;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#xFF0C;&#x9ED8;&#x8BA4;16k&#xFF0C;&#x8D85;&#x51FA;&#x65F6;&#x5C06;&#x88AB;&#x6682;&#x5B58;&#x5728;&#x78C1;&#x76D8;&#x4E0A;</p>
</li>
<li><p><code>client_body_temp_path PATH [level1 [level2 [level3]]];</code><br>  HTTP&#x5305;&#x4F53;&#x5B58;&#x653E;&#x7684;&#x4E34;&#x65F6;&#x76EE;&#x5F55;&#xFF0C;&#x5BF9;&#x5E94;&#x51E0;&#x4F4D;16&#x4F4D;&#x8FDB;&#x5236;&#x4E2A;&#x6570;</p>
<pre><code>client_body_temp_path /var/tmp/client/  1 2 ==&gt; /var/tmp/client/{0-f}/{00-ff}
</code></pre></li>
<li><p><code>client_header_buffer_size size;</code><br>  &#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x63A5;&#x6536;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x7684;http&#x62A5;&#x6587;header&#x90E8;&#x5206;&#x65F6;&#x5206;&#x914D;&#x7684;buffer&#x5927;&#x5C0F;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;1k</p>
</li>
<li><p><code>large_client_header_buffers number size;</code><br>  &#x5B58;&#x50A8;&#x8D85;&#x5927;Http&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x7684;&#x5185;&#x5B58;buffer&#x5927;&#x5C0F;&#x53CA;&#x4E2A;&#x6570;</p>
</li>
<li><p><code>connection_pool_size size;</code><br>  nginx&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x5EFA;&#x7ACB;&#x6210;&#x529F;&#x7684;tcp&#x8FDE;&#x63A5;&#x90FD;&#x4F1A;&#x9884;&#x5148;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x5185;&#x5B58;&#x6C60;&#xFF0C;&#x6B64;&#x5904;&#x5373;&#x7528;&#x4E8E;&#x8BBE;&#x5B9A;&#x6B64;&#x5185;&#x5B58;&#x6C60;&#x7684;&#x521D;&#x59CB;&#x5927;&#x5C0F;&#xFF1B;&#x9ED8;&#x8BA4;&#x4E3A;256</p>
</li>
<li><p><code>request_pool_size size;</code><br>  nginx&#x5728;&#x5904;&#x7406;&#x6BCF;&#x4E2A;http&#x8BF7;&#x6C42;&#x65F6;&#x4F1A;&#x9884;&#x5148;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x5185;&#x5B58;&#x6C60;&#xFF0C;&#x6B64;&#x5904;&#x5373;&#x7528;&#x4E8E;&#x8BBE;&#x5B9A;&#x6B64;&#x5185;&#x5B58;&#x6C60;&#x7684;&#x521D;&#x59CB;&#x5927;&#x5C0F;&#xFF1B;&#x9ED8;&#x8BA4;&#x4E3A;4k</p>
</li>
</ul>
</li>
</ol>
<h2 id="&#x6838;&#x5FC3;&#x6A21;&#x5757;&#x5E38;&#x7528;&#x5185;&#x7F6E;&#x53D8;&#x91CF;"><a href="#&#x6838;&#x5FC3;&#x6A21;&#x5757;&#x5E38;&#x7528;&#x5185;&#x7F6E;&#x53D8;&#x91CF;" class="headerlink" title="&#x6838;&#x5FC3;&#x6A21;&#x5757;&#x5E38;&#x7528;&#x5185;&#x7F6E;&#x53D8;&#x91CF;"></a>&#x6838;&#x5FC3;&#x6A21;&#x5757;&#x5E38;&#x7528;&#x5185;&#x7F6E;&#x53D8;&#x91CF;</h2><p><code>$uri</code>&#xFF1A;&#x5F53;&#x524D;&#x8BF7;&#x6C42;&#x7684;uri&#xFF0C;&#x4E0D;&#x5E26;&#x53C2;&#x6570;<br><code>$request_uri</code>&#xFF1A;&#x8BF7;&#x6C42;&#x7684;uri&#xFF0C;&#x5E26;&#x5B8C;&#x6574;&#x53C2;&#x6570;<br><code>$host</code>&#xFF1A;http&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x4E2D;host&#x9996;&#x90E8;&#xFF0C;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x4E2D;&#x6CA1;&#x6709;host&#x9996;&#x90E8;&#xFF0C;&#x5219;&#x4EE5;&#x5904;&#x7406;&#x6B64;&#x8BF7;&#x6C42;&#x7684;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x7684;&#x4E3B;&#x673A;&#x540D;&#x4EE3;&#x66FF;<br><code>$hostname</code>&#xFF1A;nginx&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x5728;&#x7684;&#x4E3B;&#x673A;&#x7684;&#x4E3B;&#x673A;&#x540D;<br><code>$remote_addr</code>&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;IP<br><code>$remote_port</code>&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;Port<br><code>$remote_user</code>&#xFF1A;&#x4F7F;&#x7528;&#x7528;&#x6237;&#x8BA4;&#x8BC1;&#x65F6;&#x5BA2;&#x6237;&#x7AEF;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7684;&#x7528;&#x6237;&#x540D;<br><code>$request_filename</code>&#xFF1A;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x4E2D;&#x7684;URI&#x7ECF;&#x8FC7;&#x672C;&#x5730;root&#x6216;alias&#x8F6C;&#x6362;&#x540E;&#x6620;&#x5C04;&#x7684;&#x672C;&#x5730;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;<br><code>$request_method</code>&#xFF1A;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;<br><code>$server_addr</code>&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;<br><code>$server_name</code>&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;<br><code>$server_port</code>&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53E3;<br><code>$server_protocol</code>&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x54CD;&#x5E94;&#x65F6;&#x7684;&#x534F;&#x8BAE;&#xFF0C;&#x5982;http/1.1, http/1.0<br><code>$scheme</code>&#xFF1A;&#x5728;&#x8BF7;&#x6C42;&#x4E2D;&#x4F7F;&#x7528;scheme, &#x5982;<a href="https://www.magedu.com/&#x4E2D;&#x7684;https" target="_blank" rel="noopener">https://www.magedu.com/&#x4E2D;&#x7684;https</a><br><code>$http_HEADER</code>&#xFF1A;&#x5339;&#x914D;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x4E2D;&#x6307;&#x5B9A;&#x7684;HEADER&#xFF0C;&#x5982;$http_host&#x5339;&#x914D;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x4E2D;&#x7684;host&#x9996;&#x90E8;<br><code>$sent_http_HEADER</code>&#xFF1A;&#x5339;&#x914D;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x4E2D;&#x6307;&#x5B9A;&#x7684;HEADER&#xFF0C;&#x5982;$http_content_type&#x5339;&#x914D;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x4E2D;&#x7684;content-type&#x9996;&#x90E8;<br><code>$document_root</code>&#xFF1A;&#x5F53;&#x524D;&#x8BF7;&#x6C42;&#x6620;&#x5C04;&#x5230;&#x7684;root&#x914D;&#x7F6E;</p>
<h2 id="&#x90E8;&#x5206;&#x91CD;&#x8981;&#x6A21;&#x5757;"><a href="#&#x90E8;&#x5206;&#x91CD;&#x8981;&#x6A21;&#x5757;" class="headerlink" title="&#x90E8;&#x5206;&#x91CD;&#x8981;&#x6A21;&#x5757;"></a>&#x90E8;&#x5206;&#x91CD;&#x8981;&#x6A21;&#x5757;</h2><h3 id="ngx-http-headers-module&#xFF1A;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x9996;&#x90E8;&#x8BBE;&#x7F6E;"><a href="#ngx-http-headers-module&#xFF1A;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x9996;&#x90E8;&#x8BBE;&#x7F6E;" class="headerlink" title="ngx_http_headers_module&#xFF1A;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x9996;&#x90E8;&#x8BBE;&#x7F6E;"></a>ngx_http_headers_module&#xFF1A;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x9996;&#x90E8;&#x8BBE;&#x7F6E;</h3><ul>
<li><code>add_header NAME VALUE [always];</code></li>
<li><code>expires [modified] time &#xFF5C; epoch | max | off;</code><pre><code>expires    24h;
expires    modified +24h;
expires    @24h;
add_header X-Via $server_addr;              # &#x6DFB;&#x52A0;&#x4EE3;&#x7406;&#x4E3B;&#x673A;&#x5730;&#x5740;
add_header X-Cache $upstream_cache_status;  # &#x6DFB;&#x52A0;&#x4EE3;&#x7406;&#x7F13;&#x5B58;&#x4F7F;&#x7528;&#x72B6;&#x51B5;&#xFF0C;&#x6709;HIT,MISS,BYPASS...
add_header Cache-Control private;
</code></pre></li>
</ul>
<h3 id="ngx-http-access-module&#xFF1A;&#x5B9E;&#x73B0;&#x57FA;&#x4E8E;ip&#x7684;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x529F;&#x80FD;"><a href="#ngx-http-access-module&#xFF1A;&#x5B9E;&#x73B0;&#x57FA;&#x4E8E;ip&#x7684;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x529F;&#x80FD;" class="headerlink" title="ngx_http_access_module&#xFF1A;&#x5B9E;&#x73B0;&#x57FA;&#x4E8E;ip&#x7684;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x529F;&#x80FD;"></a>ngx_http_access_module&#xFF1A;&#x5B9E;&#x73B0;&#x57FA;&#x4E8E;ip&#x7684;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x529F;&#x80FD;</h3><ul>
<li><code>allow address | CIDR | unix: | all;</code></li>
<li><code>deny address | CIDR | unix: | all;</code><pre><code>location / {
    deny  192.168.1.1;
    allow 192.168.1.0/24;
    allow 10.1.1.0/16;
    allow 2001:0db8::/32;
    deny  all;
}
</code></pre></li>
</ul>
<h3 id="ngx-http-auth-basic-module&#xFF1A;&#x7528;&#x6237;&#x8BA4;&#x8BC1;"><a href="#ngx-http-auth-basic-module&#xFF1A;&#x7528;&#x6237;&#x8BA4;&#x8BC1;" class="headerlink" title="ngx_http_auth_basic_module&#xFF1A;&#x7528;&#x6237;&#x8BA4;&#x8BC1;"></a>ngx_http_auth_basic_module&#xFF1A;&#x7528;&#x6237;&#x8BA4;&#x8BC1;</h3><ul>
<li>auth_basic STRING | off;    # &#x4F7F;&#x7528;basic&#x673A;&#x5236;&#x8FDB;&#x884C;&#x7528;&#x6237;&#x8BA4;&#x8BC1;&#x6216;&#x5173;&#x95ED;</li>
<li><p>auth_basic_user_file FILE;  # &#x8BA4;&#x8BC1;&#x7528;&#x7684;&#x8D26;&#x53F7;&#x5BC6;&#x7801;&#x6587;&#x4EF6;</p>
<pre><code>location /admin/ {
    root /www/b.org;
    auth_basic &quot;admin area&quot;|off;        # &#x63D0;&#x793A;&#x4FE1;&#x606F;&#x6216;&#x5173;&#x95ED;&#x8BA4;&#x8BC1;
    auth_basic_user_file /etc/nginx/.htpasswd;
}

# &#x5BC6;&#x7801;&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#xFF1A;USER:PASS:COMMENT
htpasswd -c -m /etc/nginx/.htpasswd tom     # &#x751F;&#x6210;&#x5BC6;&#x7801;&#x6587;&#x4EF6;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x751F;&#x6210;&#x4F7F;&#x7528;&apos;-c&apos;
</code></pre></li>
</ul>
<h3 id="ngx-http-autoindex-module&#xFF1A;&#x6587;&#x4EF6;&#x7D22;&#x5F15;"><a href="#ngx-http-autoindex-module&#xFF1A;&#x6587;&#x4EF6;&#x7D22;&#x5F15;" class="headerlink" title="ngx_http_autoindex_module&#xFF1A;&#x6587;&#x4EF6;&#x7D22;&#x5F15;"></a>ngx_http_autoindex_module&#xFF1A;&#x6587;&#x4EF6;&#x7D22;&#x5F15;</h3><pre><code># &#x663E;&#x793A;/www/b.org/download/&#x4E0B;&#x7684;&#x5404;&#x8D44;&#x6E90;&#x5217;&#x8868;
location /download/ {
    root /www/b.org;
    autoindex on; 
}
</code></pre><h3 id="ngx-http-stub-status-module&#xFF1A;nginx&#x72B6;&#x6001;&#x663E;&#x793A;"><a href="#ngx-http-stub-status-module&#xFF1A;nginx&#x72B6;&#x6001;&#x663E;&#x793A;" class="headerlink" title="ngx_http_stub_status_module&#xFF1A;nginx&#x72B6;&#x6001;&#x663E;&#x793A;"></a>ngx_http_stub_status_module&#xFF1A;nginx&#x72B6;&#x6001;&#x663E;&#x793A;</h3><pre><code>location /stub_status {
    stub_status;        # &#x5F00;&#x542F;&#x72B6;&#x6001;&#x663E;&#x793A;
    allow 192.168.0.0/16;
    deny all;
}
</code></pre><p>&#x8BBF;&#x95EE;&#x663E;&#x793A;&#x5185;&#x5BB9;&#x5206;&#x6790;&#xFF1A;</p>
<pre><code>Active connections: 291 
server accepts handled requests
     16630948 16630948 31070465 
Reading: 6 Writing: 179 Waiting: 106

# active connections:&#x5BF9;&#x540E;&#x7AEF;&#x53D1;&#x8D77;&#x7684;&#x6D3B;&#x52A8;&#x8FDE;&#x63A5;&#x6570;
# accept:&#x5DF2;&#x7ECF;&#x63A5;&#x53D7;&#x7684;16630948&#x4E2A;&#x8FDE;&#x63A5;
# handled:&#x6210;&#x529F;&#x521B;&#x5EFA;16630948&#x6B21;&#x63E1;&#x624B;(&#x4E0E;accept&#x4E00;&#x6837;&#x8BF4;&#x660E;&#x6CA1;&#x51FA;&#x73B0;&#x5931;&#x8D25;)
# requests:&#x603B;&#x5171;&#x5904;&#x7406;&#x4E86;31070465&#x4E2A;&#x8BF7;&#x6C42;(1.8&#x4E2A;/s)
# Reading: nginx&#x8BFB;&#x53D6;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;Header&#x4FE1;&#x606F;&#x6570; 
# Writing: &#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x7684;Header&#x4FE1;&#x606F;&#x6570; 
# Waiting: &#x5F00;&#x542F; keep-alive &#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x7B49;&#x4E8E;&#x524D;&#x4E24;&#x8005;&#x4E4B;&#x548C;
</code></pre><h3 id="ngx-http-referer-module&#xFF1A;&#x9632;&#x76D7;&#x94FE;"><a href="#ngx-http-referer-module&#xFF1A;&#x9632;&#x76D7;&#x94FE;" class="headerlink" title="ngx_http_referer_module&#xFF1A;&#x9632;&#x76D7;&#x94FE;"></a>ngx_http_referer_module&#xFF1A;&#x9632;&#x76D7;&#x94FE;</h3><ul>
<li><p><code>valid_referers none|blocked|server_names|string ...;</code>   # &#x5B9A;&#x4E49;&#x5408;&#x89C4;&#x7684;&#x5F15;&#x7528;<br>  <code>none</code>&#xFF1A;&#x65E0;referer&#xFF0C;&#x5373;&#x76F4;&#x63A5;&#x8F93;&#x5165;&#x7F51;&#x5740;<br>  <code>blocked</code>&#xFF1A;&#x5224;&#x65AD;&#x5408;&#x6CD5;&#x6027;</p>
<pre><code>location ~* \.(jpg|png|gif|jpeg)$ {
    root /web/liu2lin;
    valid_referers none blocked www.liu2lin.com;          # &#x5B9A;&#x4E49;
    if($invalid_referer){                                 # &#x5224;&#x65AD;&#x5F15;&#x7528;&#x662F;&#x5426;&#x7B26;&#x5408;
        rewrite ^/.*$ http://www.liu2lin.com/403.html     # &#x4E0D;&#x7B26;&#x5408;&#x91CD;&#x5199;&#x5230;403&#x9875;&#x9762;
    }
}
</code></pre></li>
</ul>
<h3 id="ngx-http-rewrite-module&#xFF1A;URL&#x91CD;&#x5199;"><a href="#ngx-http-rewrite-module&#xFF1A;URL&#x91CD;&#x5199;" class="headerlink" title="ngx_http_rewrite_module&#xFF1A;URL&#x91CD;&#x5199;"></a>ngx_http_rewrite_module&#xFF1A;URL&#x91CD;&#x5199;</h3><ul>
<li><code>rewrite REGEX REPLACE [flag];</code></li>
</ul>
<p>[flag]&#x6807;&#x5FD7;&#xFF1A;<br><code>last</code>&#xFF1A;&#x4E00;&#x65E6;&#x88AB;&#x5F53;&#x524D;&#x89C4;&#x5219;&#x5339;&#x914D;&#x5E76;&#x91CD;&#x5199;&#x540E;&#x7ACB;&#x5373;&#x505C;&#x6B62;&#x68C0;&#x67E5;&#x540E;&#x7EED;&#x7684;&#x5176;&#x5B83;rewrite&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x800C;&#x540E;&#x901A;&#x8FC7;&#x91CD;&#x5199;&#x540E;&#x7684;&#x89C4;&#x5219;&#x91CD;&#x65B0;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;<br><code>break</code>&#xFF1A;&#x4E00;&#x65E6;&#x88AB;&#x5F53;&#x524D;&#x89C4;&#x5219;&#x5339;&#x914D;&#x5E76;&#x91CD;&#x5199;&#x540E;&#x7ACB;&#x5373;&#x505C;&#x6B62;&#x540E;&#x7EED;&#x7684;&#x5176;&#x5B83;rewrite&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x800C;&#x540E;&#x7EE7;&#x7EED;&#x7531;nginx&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x64CD;&#x4F5C;<br><code>redirect</code>&#xFF1A;&#x4E0D;&#x662F;&#x4EE5;http://&#x6216;https://&#x5F00;&#x5934;&#xFF0C;&#x8FD4;&#x56DE;302&#x4E34;&#x65F6;&#x91CD;&#x5B9A;&#x5411;<br><code>permanent</code>&#xFF1A;&#x8FD4;&#x56DE;301&#x6C38;&#x4E45;&#x91CD;&#x5B9A;&#x5411;</p>
<pre><code>location / {
    root /www/b.org;
    rewrite ^/images/(.*)$ /imgs/$1 last; 
    rewirte ^/imgs/(.*)$ /images/$1;
}
# http://www.b.org/images/a.jpg --&gt; http://www.b.org/imgs/a.jpg

location /download/ {
    rewrite ^(/download/.*)/media/(.*)\..*$ $1/media/$2.mp3 break;
}

# &#x6CE8;&#x610F;&#xFF1A;nginx&#x6700;&#x591A;&#x5FAA;&#x73AF;10&#x6B21;&#xFF0C;&#x8D85;&#x51FA;&#x4E4B;&#x540E;&#x4F1A;&#x8FD4;&#x56DE;500&#x9519;&#x8BEF;&#xFF0C;&#x4E00;&#x822C;&#x5C06;rewrite&#x5199;&#x5728;location&#x4E2D;&#x65F6;&#x90FD;&#x4F7F;&#x7528;break&#x6807;&#x5FD7;&#xFF0C;&#x6216;&#x8005;&#x5C06;rewrite&#x5199;&#x5728;if&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;
</code></pre><ul>
<li><p><code>rewrite_log on|off;</code><br>  &#x662F;&#x5426;&#x628A;&#x91CD;&#x5199;&#x8FC7;&#x7A0B;&#x8BB0;&#x5F55;&#x5728;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x4E2D;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;notice&#x7EA7;&#x522B;off</p>
</li>
<li><p><code>return CODE;</code><br>  &#x7528;&#x4E8E;&#x7ED3;&#x675F;rewrite&#x89C4;&#x5219;&#xFF0C;&#x5E76;&#x4E14;&#x4E3A;&#x5BA2;&#x6237;&#x8FD4;&#x56DE;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#x72B6;&#x6001;&#x7801;&#x6709;204, 400, 402-406, 500-504&#x7B49;</p>
</li>
<li><p><code>set $var VALUE;</code> # &#x8BBE;&#x7F6E;&#x81EA;&#x5B9A;&#x4E49;&#x53D8;&#x91CF;</p>
</li>
<li><p><code>if (condition) { ... }</code><br>  <em>condition&#x6BD4;&#x8F83;&#x64CD;&#x4F5C;&#x7B26;&#xFF1A;</em><br>  <code>==</code>, <code>!=</code>, <code>!~</code>, <code>!~*</code><br>  <code>~</code>&#xFF1A;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#xFF0C;&#x533A;&#x5206;&#x5B57;&#x7B26;&#x5927;&#x5C0F;&#x5199;<br>  <code>~*</code>: &#x6A21;&#x5F0F;&#x5339;&#x914D;&#xFF0C;&#x4E0D;&#x533A;&#x5206;&#x5B57;&#x7B26;&#x5927;&#x5C0F;&#x5199;</p>
<p>  <em>&#x6587;&#x4EF6;&#x53CA;&#x76EE;&#x5F55;&#x5B58;&#x5728;&#x6027;&#x5224;&#x65AD;&#xFF1A;</em><br>  <code>-e</code>, <code>!-e</code>&#xFF1A;&#x5B58;&#x5728;&#x4E0E;&#x5426;<br>  <code>-f</code>, <code>!-f</code>&#xFF1A;&#x5B58;&#x5728;&#x4E14;&#x4E3A;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x6587;&#x4EF6;&#x4E0E;&#x5426;<br>  <code>-d</code>, <code>!-d</code>&#xFF1A;&#x76EE;&#x5F55;<br>  <code>-x</code>, <code>!-x</code>&#xFF1A;&#x6267;&#x884C;</p>
</li>
</ul>
<h3 id="ngx-http-gzip-module&#xFF1A;&#x538B;&#x7F29;&#xFF0C;&#x9002;&#x7528;&#x4E8E;http-server-location"><a href="#ngx-http-gzip-module&#xFF1A;&#x538B;&#x7F29;&#xFF0C;&#x9002;&#x7528;&#x4E8E;http-server-location" class="headerlink" title="ngx_http_gzip_module&#xFF1A;&#x538B;&#x7F29;&#xFF0C;&#x9002;&#x7528;&#x4E8E;http, server, location"></a>ngx_http_gzip_module&#xFF1A;&#x538B;&#x7F29;&#xFF0C;&#x9002;&#x7528;&#x4E8E;http, server, location</h3><ul>
<li><code>gzip on | off;</code><br>  &#x5F00;&#x542F;&#x6216;&#x5173;&#x95ED;&#x538B;&#x7F29;</li>
<li><code>gzip_buffers 32 4k;</code><br>  &#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x538B;&#x7F29;&#x529F;&#x80FD;&#x7684;&#x7F13;&#x5B58;&#x533A;&#x6570;&#x91CF;&#x53CA;&#x5927;&#x5C0F;</li>
<li><code>gzip_comp_level 6;</code><br>  &#x538B;&#x7F29;&#x7EA7;&#x522B;1-9&#xFF0C;&#x9ED8;&#x8BA4;1</li>
<li><code>gzip_disable regex ...;</code><br>  &#x5BF9;&#x5BA2;&#x6237;&#x7AEF;&#x6D4F;&#x89C8;&#x5668;&#x7C7B;&#x578B;&#x5B57;&#x7B26;&#x4E32;&#x5339;&#x914D;&#x81F3;&#x6B64;&#x5904;&#x7684;regex&#x6240;&#x63CF;&#x8FF0;&#x7684;&#x6A21;&#x5F0F;&#x7684;&#x8BF7;&#x6C42;&#x7981;&#x7528;&#x538B;&#x7F29;&#x529F;&#x80FD;</li>
<li><code>gzip_min_length LENGTH;</code><br>  &#x9ED8;&#x8BA4;20&#x5B57;&#x8282;</li>
<li><code>gzip_proxied off |expired|no-cache |no-store|private|no_last_modified|no_etag|auth|any ...;</code><br>  &#x5BF9;&#x4EE3;&#x7406;&#x7684;&#x8BF7;&#x6C42;&#x6240;&#x83B7;&#x53D6;&#x7684;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x662F;&#x5426;&#x542F;&#x52A8;&#x538B;&#x7F29;&#x529F;&#x80FD;&#xFF0C;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x542F;&#x7528;&#xFF0C;&#x9ED8;&#x8BA4;&#x5173;&#x95ED;</li>
<li><code>gzip_types mime-type ...;</code><br>  &#x538B;&#x7F29;&#x8FC7;&#x6EE4;&#x5668;&#xFF0C;&#x4EC5;&#x5BF9;&#x6B64;&#x5904;&#x8BBE;&#x5B9A;&#x7684;&#x7C7B;&#x578B;&#x7684;&#x5185;&#x5BB9;&#x542F;&#x7528;&#x538B;&#x7F29;&#x529F;&#x80FD;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;text/html</li>
</ul>
<h3 id="ngx-http-fastcgi-module&#xFF1A;fastcgi&#x4EE3;&#x7406;&#xFF0C;nginx&#x4E0E;php&#x7ED3;&#x5408;&#x53EA;&#x80FD;&#x901A;&#x8FC7;fastcgi&#x534F;&#x8BAE;"><a href="#ngx-http-fastcgi-module&#xFF1A;fastcgi&#x4EE3;&#x7406;&#xFF0C;nginx&#x4E0E;php&#x7ED3;&#x5408;&#x53EA;&#x80FD;&#x901A;&#x8FC7;fastcgi&#x534F;&#x8BAE;" class="headerlink" title="ngx_http_fastcgi_module&#xFF1A;fastcgi&#x4EE3;&#x7406;&#xFF0C;nginx&#x4E0E;php&#x7ED3;&#x5408;&#x53EA;&#x80FD;&#x901A;&#x8FC7;fastcgi&#x534F;&#x8BAE;"></a>ngx_http_fastcgi_module&#xFF1A;fastcgi&#x4EE3;&#x7406;&#xFF0C;nginx&#x4E0E;php&#x7ED3;&#x5408;&#x53EA;&#x80FD;&#x901A;&#x8FC7;fastcgi&#x534F;&#x8BAE;</h3><ul>
<li><code>fastcgi_pass address;</code><br>  address&#x4E3A;php-fpm&#x670D;&#x52A1;&#x5668;&#x76D1;&#x542C;&#x7684;&#x5730;&#x5740;</li>
<li><code>fastcgi_index name;</code><br>  fastcgi&#x9ED8;&#x8BA4;&#x7684;&#x4E3B;&#x9875;&#x8D44;&#x6E90;</li>
<li><code>fastcgi_param  parameter value [if_not_empty];</code>      </li>
<li><p><code>fastcgi_cache_path path [levels=levels] [use_temp_path=on|off] keys_zone=name:size [inactive=time] [max_size=size] [loader_files=number] [loader_sleep=time] [loader_threshold=time] [purger=on|off] [purger_files=number] [purger_sleep=time] [purger_threshold=time];</code><br>  &#x7F13;&#x5B58;&#x8BBE;&#x7F6E;&#xFF0C;&#x5B9A;&#x4E49;&#x5728;http&#x4E2D; </p>
<pre><code>path                    # &#x7F13;&#x5B58;&#x76EE;&#x5F55;&#x8DEF;&#x5F84;&#xFF1B;
levels=                 # &#x7F13;&#x5B58;&#x76EE;&#x5F55;&#x5C42;&#x7EA7;&#x6570;&#x91CF;&#xFF0C;&#x4EE5;&#x53CA;&#x6BCF;&#x4E00;&#x7EA7;&#x7684;&#x76EE;&#x5F55;&#x6570;&#x91CF;
    levels=1:2:1        # &#x8868;&#x793A;&#x4E00;&#x7EA7;&#x76EE;&#x5F55;16&#x4E2A;&#xFF0C;&#x6BCF;&#x4E2A;1&#x7EA7;&#x76EE;&#x5F55;&#x4E0B;256&#x4E2A;&#xFF0C;&#x7B2C;&#x4E2A;2&#x7EA7;&#x76EE;&#x5F55;&#x4E0B;16&#x4E2A;
keys_zone=NAME:SIZE     # &#x5185;&#x5B58;&#x4E2D;&#x7684;&#x7F13;&#x5B58;&#x7A7A;&#x95F4;&#x7684;&#x540D;&#x79F0;&#x53CA;&#x5927;&#x5C0F;
max_size=SIZE           # &#x78C1;&#x76D8;&#x4E0A;&#x7528;&#x4E8E;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x7684;&#x7F13;&#x5B58;&#x7A7A;&#x95F4;&#x4E0A;&#x9650;
inactive=TIME           # &#x7F13;&#x5B58;&#x65F6;&#x957F;
</code></pre></li>
<li><p><code>fastcgi_cache zone | off;</code><br>  &#x8C03;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x7F13;&#x5B58;&#x7A7A;&#x95F4;&#x6765;&#x7F13;&#x5B58;&#x6570;&#x636E;</p>
</li>
<li><code>fastcgi_cache_key STRING;</code><br>  &#x5B9A;&#x4E49;&#x7528;&#x4F5C;&#x7F13;&#x5B58;&#x9879;&#x7684;key&#x7684;&#x5B57;&#x7B26;&#x4E32;</li>
<li><code>fastcgi_cache_methods GET...;</code><br>  &#x5BF9;&#x54EA;&#x4E9B;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#x6765;&#x68C0;&#x67E5;&#x7F13;&#x5B58;</li>
<li><code>fastcgi_cache_min_uses NUM;</code><br>  &#x7F13;&#x5B58;&#x6709;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x5185;&#x6700;&#x5C11;&#x5F15;&#x7528;</li>
<li><p><code>fastcgi_cache_valid [code ...] time;</code><br>  &#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x54CD;&#x5E94;&#x7801;&#x7684;&#x8D44;&#x6E90;&#x53EF;&#x7F13;&#x5B58;&#x65F6;&#x957F;</p>
<p>  &#x6CE8;&#x610F;&#xFF1A;&#x8C03;&#x7528;&#x7F13;&#x5B58;&#x65F6;&#xFF0C;&#x81F3;&#x5C11;&#x5E94;&#x8BE5;&#x8BBE;&#x5B9A;&#x4E09;&#x4E2A;&#x53C2;&#x6570;<br>  <code>fastcgi_cache</code><br>  <code>fastcgi_cache_key</code><br>  <code>fastcgi_cache_valid</code> </p>
<pre><code>http{
    fastcgi_cache_path  /var/nginx/cache  key_zone=WORD:10m level=1:2 

    location / {
        fastcgi_pass  127.0.0.1:9000;
        fastcgi_index index.php;

        fastcgi_param SCRIPT_FILENAME /home/www/scripts/php$fastcgi_script_name;
        include       fastcgi_params;

        fastcgi_cache  WORD;
        fastcgi_cache_key  $request_uri;
        fastcgi_cache_valid 200 302 1h;
        fastcgi_cache_min_uses  2;
    }
}
</code></pre></li>
</ul>
<h3 id="ngx-http-log-module&#xFF1A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x6A21;&#x5757;"><a href="#ngx-http-log-module&#xFF1A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x6A21;&#x5757;" class="headerlink" title="ngx_http_log_module&#xFF1A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x6A21;&#x5757;"></a>ngx_http_log_module&#xFF1A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x6A21;&#x5757;</h3><ul>
<li><p><code>access_log PATH [format [buffer=size] [gzip[=level]] [flush=time] [if=condition]]|off;</code><br>  &#x65E5;&#x5FD7;&#x8DEF;&#x5F84;&#x3001;&#x683C;&#x5F0F;&#x3001;&#x7F13;&#x51B2;&#x7B49;&#x8BBE;&#x7F6E;&#xFF0C;&#x9ED8;&#x8BA4;access_log logs/access.log combined;  combined&#x683C;&#x5F0F;&#x65E0;&#x9700;&#x5B9A;&#x4E49;</p>
</li>
<li><p><code>log_format NAME string ...;</code><br>  &#x65E5;&#x5FD7;&#x683C;&#x5F0F;&#x8BBE;&#x7F6E;</p>
<p>  &#x5185;&#x7F6E;combined&#x683C;&#x5F0F;&#x53CA;&#x53CD;&#x4EE3;&#x683C;&#x5F0F;&#x65F6;&#xFF1A;</p>
<pre><code>log_format combined &apos;$remote_addr - $remote_user [$time_local] &apos;
                    &apos;&quot;$request&quot; $status $body_bytes_sent &apos;
                    &apos;&quot;$http_referer&quot; &quot;$http_user_agent&quot;&apos;;
log_format  porxy   &apos;$http_x_forwarded_for - $remote_user [$time_local] &apos;
                    &apos;&quot;$request&quot;  $status $body_bytes_sent &apos;
                    &apos;&quot;$http_referer&quot;  &quot;$http_user_agent&quot; &apos;;
</code></pre></li>
<li><p><code>open_log_file_cache max=N [inactive=time] [min_uses=N] [valid=time];</code><br>  &#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7F13;&#x5B58;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;off</p>
<pre><code>max:&#x8BBE;&#x7F6E;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x6700;&#x5927;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x6570;&#x91CF;&#xFF0C;&#x5982;&#x679C;&#x88AB;&#x5360;&#x6EE1;&#xFF0C;&#x91C7;&#x7528;LRU&#x7B97;&#x6CD5;&#x5C06;&#x63CF;&#x8FF0;&#x7B26;&#x5173;&#x95ED;
inactive:&#x8BBE;&#x7F6E;&#x5B58;&#x6D3B;&#x65F6;&#x95F4;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;10s
min_uses:&#x5728;inactive&#x65F6;&#x95F4;&#x6BB5;&#x5185;&#xFF0C;&#x7F13;&#x5B58;&#x6700;&#x5C11;&#x9700;&#x88AB;&#x4F7F;&#x7528;&#x6B21;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;1
valid:&#x8BBE;&#x7F6E;&#x68C0;&#x67E5;&#x9891;&#x7387;&#xFF0C;&#x9ED8;&#x8BA4;60s
</code></pre></li>
</ul>
<h3 id="ngx-http-proxy-module&#xFF1A;&#x53CD;&#x5411;&#x4EE3;&#x7406;"><a href="#ngx-http-proxy-module&#xFF1A;&#x53CD;&#x5411;&#x4EE3;&#x7406;" class="headerlink" title="ngx_http_proxy_module&#xFF1A;&#x53CD;&#x5411;&#x4EE3;&#x7406;"></a>ngx_http_proxy_module&#xFF1A;&#x53CD;&#x5411;&#x4EE3;&#x7406;</h3><p>&#x63A5;&#x6536;&#x5B8C;&#x6574;&#x62A5;&#x6587;&#x5206;&#x6790;&#x540E;&#x5148;&#x67E5;&#x770B;&#x672C;&#x5730;&#x7F13;&#x5B58;&#x662F;&#x5426;&#x6709;&#x9700;&#x8981;&#x8D44;&#x6E90;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x518D;&#x5411;&#x540E;&#x7AEF;&#x8F6C;&#x53D1;(&#x5C06;&#x81EA;&#x5DF1;&#x5F53;&#x4F5C;&#x5BA2;&#x6237;&#x7AEF;&#x53BB;&#x8BF7;&#x6C42;&#x8D44;&#x6E90;)</p>
<ul>
<li><p><code>proxy_pass URL;</code><br>  &#x7528;&#x4E8E;location, if in location, limit_except</p>
<p>  &#x6CE8;&#x610F;&#xFF1A;<br>  (1) proxy_pass&#x540E;&#x9762;&#x7684;&#x8DEF;&#x5F84;&#x4E0D;&#x5E26;uri&#x65F6;&#xFF0C;&#x5176;&#x4F1A;&#x5C06;location&#x7684;uri&#x4F20;&#x9012;&#x7ED9;&#x540E;&#x7AEF;&#x4E3B;&#x673A;</p>
<pre><code>location /uri/ {
    proxy_pass http://HOST;
}
    http://xx/img/a.jpg ==&gt; http://HOST/img/a.jpg
</code></pre><p>  (2) proxy_pass&#x540E;&#x9762;&#x7684;&#x8DEF;&#x5F84;&#x662F;&#x4E00;&#x4E2A;uri&#x65F6;&#xFF0C;&#x5176;&#x4F1A;&#x5C06;location&#x7684;uri&#x66FF;&#x6362;&#x4E3A;proxy_pass&#x7684;uri</p>
<pre><code>location /uri/ {
    proxy_pass http://HOST/new_uri/;
}
    http://xx/uri/a.jpg ==&gt; http://HOST/new_uri/a.jpg
</code></pre><p>  (3) location&#x5B9A;&#x4E49;uri&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5219;proxy_pass&#x4E4B;&#x540E;&#x5FC5;&#x987B;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;uri</p>
<pre><code>location ~|~* PATTERN {
    proxy_pass http://HOST;
}
</code></pre></li>
<li><p><code>proxy_set_header field value;</code><br>  &#x8BBE;&#x5B9A;&#x53D1;&#x5F80;&#x540E;&#x7AEF;&#x4E3B;&#x673A;&#x7684;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x7684;&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x7684;&#x503C;&#xFF0C;&#x540E;&#x7AEF;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x505A;&#x76F8;&#x5E94;&#x4FEE;&#x6539;<br>  &#x4EE3;&#x7406;&#x8BBE;&#x7F6E;&#xFF1A;proxy_set_header X-Real-IP $remote_addr;<br>  &#x540E;&#x7AEF;&#x4E3B;&#x673A;&#x65E5;&#x5FD7;&#x4FEE;&#x6539;&#xFF1A;</p>
<pre><code>LogFormat &quot;%{X-Real-IP}i %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot;&quot; combined
</code></pre></li>
<li><p><code>proxy_cache_path;</code><br>  &#x5B9A;&#x4E49;&#x4EE3;&#x7406;&#x7F13;&#x5B58;&#xFF0C;&#x53EA;&#x80FD;&#x7528;&#x4E8E;http&#x4E2D;</p>
<pre><code>proxy_cache_path PATH [levels=levels] [use_temp_path=on|off] keys_zone=name:size [inactive=time] [max_size=size] [loader_files=number] [loader_sleep=time] [loader_threshold=time] [purger=on|off] [purger_files=number] [purger_sleep=time] [purger_threshold=time];
</code></pre></li>
<li><p><code>proxy_cache zone | off;</code><br>  &#x5F00;&#x542F;&#x6216;&#x7981;&#x7528;&#x7F13;&#x5B58;</p>
</li>
<li><code>proxy_cache_key string;</code><br>  &#x7F13;&#x5B58;&#x6761;&#x76EE;&#x7684;&#x952E;</li>
<li><p><code>proxy_cache_valid [code] time;</code><br>  &#x5BF9;&#x5404;&#x7C7B;&#x54CD;&#x5E94;&#x7801;&#x7684;&#x7F13;&#x5B58;&#x65F6;&#x957F;<br><strong>&#x6CE8;&#xFF1A;&#x6B63;&#x5E38;&#x4EE5;&#x4E0A;3&#x9879;&#x5185;&#x5BB9;&#x5FC5;&#x5907;</strong></p>
</li>
<li><p><code>proxy_cache_use_stale error|timeout|invalid_header|updating|http_code|off ...;</code></p>
</li>
<li><p><code>proxy_connect_timeout TIME</code><br>  <code>proxy_read_timeout TIME</code><br>  <code>proxy_send_timeout TIME</code><br>  &#x4EE3;&#x7406;&#x8FDE;&#x63A5;&#x3001;&#x8BF7;&#x6C42;&#x3001;&#x54CD;&#x5E94;&#x8D85;&#x65F6;&#x65F6;&#x957F;</p>
</li>
<li><p><code>proxy_buffering on|off</code><br>  <code>proxy_buffer_size SIZE</code><br>  <code>proxy_buffers NUM SIZE</code><br>  &#x5F00;&#x542F;&#x4EE3;&#x7406;&#x7F13;&#x51B2;&#x3001;&#x7F13;&#x51B2;&#x6570;&#x91CF;&#x53CA;&#x5927;&#x5C0F;</p>
<pre><code># &#x5148;&#x5B9A;&#x4E49;&#x7F13;&#x5B58;&#x8BBE;&#x7F6E;&#xFF0C;&#x53EA;&#x80FD;&#x5B9A;&#x4E49;&#x5728;http&#x4E2D;
http{
    proxy_cache_path /var/cache/nginx/proxy_cache levels=1:2:1 keys_zone=pcache:10m max_size=1g;
}

server {
    proxy_set_header X-Real-IP $remote_addr;    # &#x6DFB;&#x52A0;&#x5BA2;&#x6237;&#x7AEF;IP&#x7ED9;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for     # &#x591A;&#x7EA7;&#x4EE3;&#x7406;&#x8FFD;&#x52A0;

    proxy_cache pcache;             # &#x5F00;&#x542F;&#x7F13;&#x5B58;
    proxy_cache_key $request_uri;
    proxy_cache_valid 200 302 10m;
    proxy_cache_valid 301 1h;
    proxy_cache_valid any 1m;  

    location / {
        proxy_pass http://192.168.1.8;
    }
}
</code></pre></li>
</ul>
<h3 id="ngx-http-upstream-module&#xFF1A;&#x8BBE;&#x7F6E;&#x8D1F;&#x8F7D;&#x5747;&#x8861;"><a href="#ngx-http-upstream-module&#xFF1A;&#x8BBE;&#x7F6E;&#x8D1F;&#x8F7D;&#x5747;&#x8861;" class="headerlink" title="ngx_http_upstream_module&#xFF1A;&#x8BBE;&#x7F6E;&#x8D1F;&#x8F7D;&#x5747;&#x8861;"></a>ngx_http_upstream_module&#xFF1A;&#x8BBE;&#x7F6E;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</h3><ul>
<li><code>ip_hash;</code><br>  &#x5B9E;&#x73B0;IP&#x7ED1;&#x5B9A;</li>
<li><p><code>server ADDR [weight=N] [max_fails=N] [fail_timeout=TIME] [slow_start=TIME] [backup] [down]...;</code></p>
<pre><code>ADDR&#x683C;&#x5F0F;&#xFF1A;
    IP[:PORT]
    HOSTNAME[:PORT]
    unix:/PATH/TO/SOME_SOCK_FILE
weight&#xFF1A;&#x6743;&#x91CD;
max_fails&#xFF1A;&#x6700;&#x5927;&#x5931;&#x8D25;&#x8FDE;&#x63A5;&#x6B21;&#x6570;&#xFF0C;&#x5931;&#x8D25;&#x8FDE;&#x63A5;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x957F;&#x7531;fail_timeout&#x6307;&#x5B9A;
fail_timeout&#xFF1A;&#x7B49;&#x5F85;&#x8BF7;&#x6C42;&#x7684;&#x76EE;&#x6807;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x54CD;&#x5E94;&#x7684;&#x65F6;&#x957F;
backup&#xFF1A;&#x7528;&#x4E8E;fallback&#x7684;&#x76EE;&#x7684;&#xFF0C;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5747;&#x6545;&#x969C;&#x65F6;&#x624D;&#x542F;&#x52A8;&#x6B64;&#x670D;&#x52A1;&#x5668;
down&#xFF1A;&#x624B;&#x52A8;&#x6807;&#x8BB0;&#x5176;&#x4E0D;&#x518D;&#x5904;&#x7406;&#x4EFB;&#x4F55;&#x8BF7;&#x6C42;
</code></pre></li>
<li><p><code>least_conn;</code><br>  &#x6700;&#x5C11;&#x8FDE;&#x63A5;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#xFF1B; &#x5F53;server&#x62E5;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x6743;&#x91CD;&#x65F6;&#x4E3A;wlc</p>
</li>
<li><p><code>hash key [consistent];</code><br>  &#x57FA;&#x4E8E;&#x6307;&#x5B9A;&#x7684;key&#x7684;hash&#x8868;&#x5B9E;&#x73B0;&#x8BF7;&#x6C42;&#x8C03;&#x5EA6;&#xFF0C;&#x6B64;&#x5904;&#x7684;key&#x53EF;&#x4EE5;&#x6587;&#x672C;&#x3001;&#x53D8;&#x91CF;&#x6216;&#x4E8C;&#x8005;&#x7684;&#x7EC4;&#x5408;<br>  consistent&#xFF1A;&#x53C2;&#x6570;&#xFF0C;&#x6307;&#x5B9A;&#x4F7F;&#x7528;&#x4E00;&#x81F4;&#x6027;hash&#x7B97;&#x6CD5;</p>
<pre><code>hash $request_uri consistent
hash $remote_addr
hash $cookie_name
</code></pre></li>
<li><p><code>keepalive NUM;</code><br>  &#x53EF;&#x4F7F;&#x7528;&#x957F;&#x8FDE;&#x63A5;&#x7684;&#x8FDE;&#x63A5;&#x6570;&#x91CF;&#xFF0C;&#x9ED8;&#x8BA4;&#x5173;&#x95ED;</p>
</li>
</ul>
<p><strong>1. upstream&#x53EA;&#x80FD;&#x7528;&#x4E8E;http&#x4E0A;&#x4E0B;&#x6587;</strong><br><strong>2. &#x5404;server&#x53EA;&#x80FD;&#x76F4;&#x63A5;&#x4F7F;&#x7528;IP&#x6216;&#x4E3B;&#x673A;&#x540D;&#xFF0C;&#x4E0D;&#x8981;&#x52A0;&#x534F;&#x8BAE;</strong></p>
<pre><code>upstream dynamic {
    zone upstream_dynamic 64k;

    server backend1.liu2lin.com      weight=5;
    server backend2.liu2lin.com:8080 fail_timeout=5s slow_start=30s;
    server 192.0.2.1                 max_fails=3;
    server backend4.liu2lin.com      service=http resolve;

    server backup.liu2lin.com:8080  backup;
}

server {
    location / {
        proxy_pass http://dynamic;
    }
}
</code></pre><h3 id="ngx-stream-core-module&#xFF1A;&#x8BBE;&#x7F6E;tcp-udp&#x4EE3;&#x7406;"><a href="#ngx-stream-core-module&#xFF1A;&#x8BBE;&#x7F6E;tcp-udp&#x4EE3;&#x7406;" class="headerlink" title="ngx_stream_core_module&#xFF1A;&#x8BBE;&#x7F6E;tcp/udp&#x4EE3;&#x7406;"></a>ngx_stream_core_module&#xFF1A;&#x8BBE;&#x7F6E;tcp/udp&#x4EE3;&#x7406;</h3><ul>
<li><p>listen address:port [ssl] [udp] [backlog=number] [bind] [ipv6only=on|off] [reuseport] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];<br>  &#x9ED8;&#x8BA4;&#x76D1;&#x542C;tcp&#x534F;&#x8BAE;</p>
<pre><code># &#x4EE3;&#x7406;ssh      
stream {
    upstream sshsrvs {
        server 192.168.1.8:22;
        server 192.168.1.9:22;
        hash $remote_addr consistent;
    }

    server {
        listen 172.16.60.4:22022;
        proxy_pass sshsrvs; 
    }
}
</code></pre></li>
</ul>
<p><em>&#x4EE5;&#x4E0A;&#x4E3A;&#x5E38;&#x7528;&#x90E8;&#x5206;&#x8BF4;&#x660E;&#xFF0C;&#x672A;&#x5B8C;&#x5F85;&#x7EED;&#x2026;</em></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iptables的FORWAD和NAT实验]]></title>
      <url>http://liu2lin600.github.io/2016/07/24/iptables%E7%9A%84FORWAD%E5%92%8CNAT%E5%AE%9E%E9%AA%8C/</url>
      <content type="html"><![CDATA[<p>&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x6A21;&#x62DF;&#x5B9E;&#x73B0;iptables&#x4E2D;&#x7684;FORWARD&#x53CA;NAT&#x529F;&#x80FD;</p>
<a id="more"></a>
<p>&#x76F4;&#x63A5;&#x4E0A;&#x6B64;&#x6B21;&#x5B9E;&#x9A8C;&#x7684;&#x73AF;&#x5883;&#x793A;&#x610F;&#x56FE;&#xFF1A;<br><img src="/2016/07/24/iptables&#x7684;FORWAD&#x548C;NAT&#x5B9E;&#x9A8C;/forward_nat.png" alt="f"></p>
<p>&#x73AF;&#x5883;&#x8BF4;&#x660E;</p>
<ol>
<li><strong>&#x7CFB;&#x7EDF;</strong>&#xFF1A;CentOS 7.2.x86_64&#x4E3B;&#x673A;3&#x53F0;&#xFF0C;&#x5173;&#x95ED;firewalld&#x670D;&#x52A1;&#xFF0C;&#x540C;&#x65F6;&#x6E05;&#x7A7A;iptables&#x89C4;&#x5219;</li>
<li>&#x4E3B;&#x673A;B&#x4E0A;&#x914D;2&#x5757;&#x7F51;&#x5361;&#xFF0C;&#x901A;&#x8FC7;vmnet2&#x4E0E;A&#x8FDE;&#x63A5;&#xFF0C;&#x4E0E;C&#x76F4;&#x63A5;&#x6865;&#x63A5;</li>
<li>&#x4E3B;&#x673A;B&#x5145;&#x5F53;&#x8F6C;&#x53D1;&#x548C;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x5F00;&#x542F;&#x6838;&#x5FC3;&#x8F6C;&#x53D1;&#x529F;&#x80FD;(ip_forward)</li>
<li>&#x5C06;A&#x7684;&#x9ED8;&#x8BA4;&#x7F51;&#x5173;&#x6307;&#x5411;B</li>
</ol>
<h2 id="FORWARD-&#x8F6C;&#x53D1;"><a href="#FORWARD-&#x8F6C;&#x53D1;" class="headerlink" title="FORWARD(&#x8F6C;&#x53D1;)"></a>FORWARD(&#x8F6C;&#x53D1;)</h2><h3 id="&#x5B9E;&#x9A8C;&#x524D;&#x914D;&#x7F6E;"><a href="#&#x5B9E;&#x9A8C;&#x524D;&#x914D;&#x7F6E;" class="headerlink" title="&#x5B9E;&#x9A8C;&#x524D;&#x914D;&#x7F6E;"></a>&#x5B9E;&#x9A8C;&#x524D;&#x914D;&#x7F6E;</h3><ol>
<li><p>B&#x4E3B;&#x673A;&#x5F00;&#x542F;&#x6838;&#x5FC3;&#x8F6C;&#x53D1;&#x529F;&#x80FD;&#xFF0C;&#x540C;&#x65F6;&#x786E;&#x4FDD;&#x6A21;&#x5757;<code>nf_conntrack</code>&#x5904;&#x4E8E;&#x5F00;&#x542F;&#x72B6;</p>
<pre><code>echo 1 &gt; /proc/sys/net/ipv4/ip_forward
lsmod | grep nf_conntrack
</code></pre></li>
<li><p>A&#x4E3B;&#x673A;&#x9ED8;&#x8BA4;&#x7F51;&#x5173;&#x6307;&#x5411;B</p>
<pre><code>route add default gw 172.16.60.12
</code></pre></li>
<li><p>C&#x4E3B;&#x673A;&#x6DFB;&#x52A0;&#x4E00;&#x6761;&#x7F51;&#x7EDC;&#x8DEF;&#x7531;&#x5230;B&#x4E3B;&#x673A;</p>
<pre><code>route add -net 172.16.0.0/16 gw 192.168.1.71 
</code></pre></li>
<li><p>&#x6D4B;&#x8BD5;A&#x3001;B&#x3001;C&#x4E4B;&#x95F4;&#x662F;&#x5426;&#x90FD;&#x80FD;ping&#x901A;</p>
</li>
</ol>
<h3 id="&#x5B9E;&#x9A8C;&#x8981;&#x6C42;"><a href="#&#x5B9E;&#x9A8C;&#x8981;&#x6C42;" class="headerlink" title="&#x5B9E;&#x9A8C;&#x8981;&#x6C42;"></a>&#x5B9E;&#x9A8C;&#x8981;&#x6C42;</h3><p>A&#x4E3B;&#x673A;&#x5F00;&#x542F;web,ftp,ssh&#x670D;&#x52A1;&#xFF0C;&#x786E;&#x4FDD;&#x5916;&#x7F51;C&#x4E3B;&#x673A;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x8BBE;&#x7F6E;FORWARD&#x9ED8;&#x8BA4;&#x89C4;&#x5219;&#x4E3A;DROP&#xFF0C;&#x6B64;&#x65F6;AC&#x95F4;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x901A;&#x4FE1;</span></span><br><span class="line">iptables -P FORWARD DROP</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5F00;&#x653E;&#x72B6;&#x6001;&#x4E3A;&#x5DF2;&#x5EFA;&#x7ACB;&#x7684;&#x8FDE;&#x63A5;&#x53CA;&#x6709;&#x5173;&#x8054;&#x8FDE;&#x63A5;</span></span><br><span class="line">iptables -A FORWARD -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5F00;&#x542F;A&#x4E3B;&#x673A;&#x8BBF;&#x95EE;&#x5916;&#x90E8;&#x7F51;&#x7EDC;&#xFF0C;&#x6B64;&#x65F6;&#x5916;&#x7F51;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE;A&#x4E3B;&#x673A;</span></span><br><span class="line">iptables -A FORWARD -s 172.16.60.11 -m state --state NEW -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5F00;&#x653E;A&#x4E3B;&#x673A;21,22,23,80&#x7AEF;&#x53E3;</span></span><br><span class="line">iptables -A FORWARD -d 172.16.60.11 -p tcp -m multiport --dports 21,22,80 -m state --state NEW -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment"># B&#x4E3B;&#x673A;&#x52A0;&#x8F7D;ftp&#x6A21;&#x5757;&#xFF0C;&#x786E;&#x4FDD;&#x53EF;&#x4EE5;&#x8FFD;&#x8E2A;ftp&#x72B6;&#x6001;</span></span><br><span class="line">modprobe nf_conntrack_ftp</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5728;C&#x4E3B;&#x673A;&#x6D4B;&#x8BD5;</span></span><br><span class="line">ftp 172.16.60.11</span><br><span class="line">curl 172.16.60.11</span><br><span class="line">ssh root@172.16.60.11</span><br></pre></td></tr></table></figure>
<h2 id="NAT-&#x5730;&#x5740;&#x8F6C;&#x6362;"><a href="#NAT-&#x5730;&#x5740;&#x8F6C;&#x6362;" class="headerlink" title="NAT(&#x5730;&#x5740;&#x8F6C;&#x6362;)"></a>NAT(&#x5730;&#x5740;&#x8F6C;&#x6362;)</h2><h3 id="&#x5B9E;&#x9A8C;&#x524D;&#x914D;&#x7F6E;-1"><a href="#&#x5B9E;&#x9A8C;&#x524D;&#x914D;&#x7F6E;-1" class="headerlink" title="&#x5B9E;&#x9A8C;&#x524D;&#x914D;&#x7F6E;"></a>&#x5B9E;&#x9A8C;&#x524D;&#x914D;&#x7F6E;</h3><ol>
<li><p>&#x5220;&#x9664;&#x4E0A;&#x5B9E;&#x9A8C;&#x4E2D;&#x4E3A;C&#x4E3B;&#x673A;&#x6DFB;&#x52A0;&#x7684;&#x5230;B&#x4E3B;&#x673A;&#x7F51;&#x7EDC;&#x8DEF;&#x7531;</p>
<pre><code>route del -net 172.16.0.0/16
</code></pre></li>
<li><p>&#x6E05;&#x7A7A;&#x6240;&#x6709;&#x89C4;&#x5219;&#x94FE;&#xFF0C;&#x5E76;&#x786E;&#x4FDD;&#x9ED8;&#x8BA4;&#x7B56;&#x7565;&#x4E3A;ACCEPT</p>
<pre><code>iptables -F
</code></pre></li>
</ol>
<h3 id="SNAT"><a href="#SNAT" class="headerlink" title="SNAT"></a>SNAT</h3><p><strong>&#x6E90;&#x5730;&#x5740;&#x8F6C;&#x6362;</strong>&#x7528;&#x4E8E;&#x8BA9;&#x5185;&#x7F51;&#x4E3B;&#x673A;&#x8BBF;&#x95EE;&#x4E92;&#x8054;&#x7F51;&#xFF0C;&#x4EC5;&#x4F5C;&#x7528;&#x4E8E;nat&#x8868;&#x4E0A;POSTROUTING&#xFF0C;INPUT&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x8FBE;&#x5230;&#x9690;&#x85CF;&#x5185;&#x7F51;ip&#x7684;&#x4F5C;&#x7528;</p>
<p><strong>&#x5B9E;&#x9A8C;&#x8981;&#x6C42;</strong>&#xFF1A;&#x5185;&#x7F51;&#x4E3B;&#x673A;A&#x8BBF;&#x95EE;&#x5916;&#x7F51;C&#x4E3B;&#x673A;&#xFF0C;&#x901A;&#x8FC7;B&#x4E3B;&#x673A;&#x7684;&#x6E90;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x5B9E;&#x73B0;B&#x4EE3;&#x7406;&#x8BBF;&#x95EE;C&#xFF0C;&#x540C;&#x65F6;&#x9690;&#x85CF;&#x5185;&#x7F51;ip&#x3002;&#x524D;&#x63D0;&#x786E;&#x4FDD;B&#x4E3B;&#x673A;&#x80FD;&#x591F;&#x6B63;&#x5E38;&#x8BBF;&#x95EE;C</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x8BBE;&#x7F6E;&#x8F6C;&#x6362;</span></span><br><span class="line">iptables -t nat -A POSTROUTING -s 172.16.60.11 -j SNAT --to-source 192.168.1.71</span><br><span class="line"></span><br><span class="line"><span class="comment"># A&#x4E3B;&#x673A;&#x8BBF;&#x95EE;C&#x4E3B;&#x673A;web&#x670D;&#x52A1;</span></span><br><span class="line">curl 192.168.1.72</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5728;C&#x4E3B;&#x673A;&#x4E0A;&#x67E5;&#x770B;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;</span></span><br><span class="line">tail /var/<span class="built_in">log</span>/httpd/access_log</span><br><span class="line"></span><br><span class="line">    <span class="comment"># &#x8BBF;&#x95EE;&#x4E3B;&#x673A;&#x663E;&#x793A;B&#x4E3B;&#x673A;IP</span></span><br><span class="line">    192.168.1.71 - - [24/Jul/2016:11:17:10 +0800] <span class="string">&quot;GET /index.html HTTP/1.1&quot;</span> 200 10</span><br></pre></td></tr></table></figure>
<h3 id="DNAT"><a href="#DNAT" class="headerlink" title="DNAT"></a>DNAT</h3><p><strong>&#x76EE;&#x6807;&#x5730;&#x5740;&#x8F6C;&#x6362;</strong>&#x7528;&#x4E8E;&#x8BA9;&#x4E92;&#x8054;&#x7F51;&#x4E0A;&#x4E3B;&#x673A;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x5185;&#x7F51;&#x4E0A;&#x7684;&#x67D0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x4EC5;&#x4F5C;&#x7528;&#x4E8E;nat&#x8868;&#x4E0A;PREROUTING&#x548C;OUTPUT&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x6709;&#x7AEF;&#x53E3;&#x8F6C;&#x6362;&#x4F5C;&#x7528;</p>
<p><strong>&#x5B9E;&#x9A8C;&#x8981;&#x6C42;</strong>&#xFF1A;&#x5185;&#x7F51;&#x4E3B;&#x673A;&#x7684;httpd&#x670D;&#x52A1;&#x76D1;&#x542C;&#x5728;8080&#x7AEF;&#x53E3;&#xFF0C;&#x8BA9;C&#x8BBF;&#x95EE;&#x4E3B;&#x673A;B&#x7684;80&#x65F6;&#x8F6C;&#x6362;&#x5230;A&#x4E3B;&#x673A;&#x7684;8080&#x4E0A;&#xFF0C;B&#x4E0A;&#x6CA1;&#x6709;httpd&#x670D;&#x52A1;&#xFF0C;&#x53EA;&#x8D1F;&#x8D23;&#x5730;&#x5740;&#x8F6C;&#x6362;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x8BBE;&#x7F6E;&#x8F6C;&#x6362;</span></span><br><span class="line">iptables -t nat -A PREROUTING -d 192.168.1.71 -p tcp --dport 80 -j DNAT --to-destination 172.16.60.11:8080</span><br><span class="line"></span><br><span class="line"><span class="comment"># C&#x4E3B;&#x673A;&#x8BBF;&#x95EE;&#x6D4B;&#x8BD5;</span></span><br><span class="line">curl 192.168.1.71</span><br><span class="line"></span><br><span class="line"><span class="comment"># A&#x4E3B;&#x673A;&#x4E0A;&#x67E5;&#x770B;http&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;</span></span><br><span class="line">tail /var/<span class="built_in">log</span>/httpd/access_log</span><br><span class="line"></span><br><span class="line">    <span class="comment"># &#x6B63;&#x5E38;&#x8BB0;&#x5F55;&#x4E0B;C&#x4E3B;&#x673A;IP</span></span><br><span class="line">    192.168.1.72 - - [24/Jul/2016:10:44:14 +0800] <span class="string">&quot;GET / HTTP/1.1&quot;</span> 200 9 <span class="string">&quot;-&quot;</span> <span class="string">&quot;curl/7.29.0&quot;</span></span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iptables简介及命令用法]]></title>
      <url>http://liu2lin600.github.io/2016/07/23/iptables%E7%AE%80%E4%BB%8B%E5%8F%8A%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>&#x7B80;&#x8981;&#x4ECB;&#x7ECD;Linux&#x9632;&#x706B;&#x5899;&#x53CA;iptables&#x7684;&#x5E38;&#x89C1;&#x7528;&#x6CD5;</p>
<a id="more"></a>
<h2 id="&#x7B80;&#x4ECB;"><a href="#&#x7B80;&#x4ECB;" class="headerlink" title="&#x7B80;&#x4ECB;"></a>&#x7B80;&#x4ECB;</h2><blockquote>
<p>&#x9632;&#x706B;&#x5899;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5C4F;&#x853D;&#x6765;&#x81EA;&#x4E8E;&#x4E92;&#x8054;&#x7F51;&#xFF0C;&#x6216;&#x6765;&#x81EA;&#x4E8E;&#x4F01;&#x4E1A;&#x5185;&#x90E8;&#x7684;&#x7528;&#x6237;&#x7684;&#x653B;&#x51FB;&#x64CD;&#x4F5C;&#x53CA;&#x9632;&#x8303;&#x975E;&#x6388;&#x6743;&#x7684;&#x8BBF;&#x95EE;&#x7684;&#x3002;&#x4E00;&#x822C;&#x5DE5;&#x4F5C;&#x4E8E;&#x7F51;&#x7EDC;&#x6216;&#x4E3B;&#x673A;&#x7684;&#x8FB9;&#x7F18;&#xFF0C;&#x5BF9;&#x4E8E;&#x8FDB;&#x51FA;&#x672C;&#x7F51;&#x7EDC;&#x6216;&#x4E3B;&#x673A;&#x7684;&#x62A5;&#x6587;&#x6839;&#x636E;&#x4E8B;&#x5148;&#x5B9A;&#x4E49;&#x7684;&#x68C0;&#x67E5;&#x89C4;&#x5219;&#x505A;&#x5339;&#x914D;&#x68C0;&#x6D4B;&#xFF0C;&#x5BF9;&#x4E8E;&#x88AB;&#x89C4;&#x5219;&#x5339;&#x914D;&#x5230;&#x7684;&#x62A5;&#x6587;&#x505A;&#x51FA;&#x76F8;&#x5E94;&#x5904;&#x7406;&#xFF0C;&#x65F6;&#x523B;&#x68C0;&#x67E5;&#x51FA;&#x5165;&#x9632;&#x706B;&#x5899;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x5305;&#xFF0C;&#x51B3;&#x5B9A;&#x62E6;&#x622A;&#x6216;&#x662F;&#x653E;&#x884C;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x5305;&#x3002;</p>
</blockquote>
<p>&#x6839;&#x636E;&#x8BBE;&#x5907;&#x6765;&#x5212;&#x5206;&#x901A;&#x5E38;&#x53EF;&#x5206;&#x4E3A;&#x786C;&#x4EF6;&#x9632;&#x706B;&#x5899;&#x548C;&#x8F6F;&#x4EF6;&#x9632;&#x706B;&#x5899;&#xFF1A;</p>
<ul>
<li><strong>&#x786C;&#x4EF6;&#x9632;&#x706B;&#x5899;</strong>&#xFF1A;&#x4E13;&#x95E8;&#x7684;&#x4E00;&#x53F0;&#x9632;&#x706B;&#x5899;&#x786C;&#x4EF6;&#x8BBE;&#x5907;&#xFF0C;&#x5DE5;&#x4F5C;&#x5728;&#x6574;&#x4E2A;&#x7F51;&#x7EDC;&#x5165;&#x53E3;&#x5904;</li>
<li><strong>&#x8F6F;&#x4EF6;&#x9632;&#x706B;&#x5899;</strong>&#xFF1A;&#x5DE5;&#x4F5C;&#x5728;&#x4E3B;&#x673A;&#x4E2D;TCP/IP&#x534F;&#x8BAE;&#x7AD9;&#x4E0A;&#x9762;&#x7684;&#x8F6F;&#x4EF6;&#xFF08;&#x5DE5;&#x4F5C;&#x5728;&#x5185;&#x6838;&#x4E2D;&#xFF09;</li>
</ul>
<p>&#x6839;&#x636E;&#x9632;&#x706B;&#x5899;&#x5DE5;&#x4F5C;&#x4F4D;&#x7F6E;&#x53C8;&#x53EF;&#x5206;&#x4E3A;&#x7F51;&#x7EDC;&#x9632;&#x706B;&#x5899;&#x548C;&#x4E3B;&#x673A;&#x9632;&#x706B;&#x5899;&#xFF1A;</p>
<ul>
<li><strong>&#x7F51;&#x7EDC;&#x9632;&#x706B;&#x5899;&#xFF1A;</strong>&#x5DE5;&#x4F5C;&#x4E0E;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#x7684;&#x8FB9;&#x7F18;&#xFF0C;&#x80FD;&#x591F;&#x5B9E;&#x73B0;&#x5BF9;&#x8FDB;&#x51FA;&#x672C;&#x7F51;&#x7EDC;&#x7684;&#x6240;&#x6709;&#x4E3B;&#x673A;&#x62A5;&#x6587;&#x52A0;&#x4EE5;&#x9632;&#x62A4;</li>
<li><strong>&#x4E3B;&#x673A;&#x9632;&#x706B;&#x5899;&#xFF1A;</strong>&#x4E3B;&#x8981;&#x662F;&#x7528;&#x6765;&#x9632;&#x8303;&#x5355;&#x53F0;&#x4E3B;&#x673A;&#x7684;&#x8FDB;&#x51FA;&#x62A5;&#x6587;</li>
</ul>
<h3 id="iptables-netfilter"><a href="#iptables-netfilter" class="headerlink" title="iptables/netfilter"></a>iptables/netfilter</h3><p>Linux&#x4E0A;&#x7684;&#x9632;&#x706B;&#x5899;&#x5957;&#x4EF6;&#x4E3A;<code>iptables/netfilter</code>&#xFF0C;iptables&#x662F;&#x7528;&#x6237;&#x7A7A;&#x95F4;&#x4E0A;&#x914D;&#x7F6E;&#x4E0E;&#x4FEE;&#x6539;&#x8FC7;&#x6EE4;&#x89C4;&#x5219;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x751F;&#x6210;&#x7684;&#x89C4;&#x5219;&#x76F4;&#x63A5;&#x9001;&#x5F80;linux&#x5185;&#x6838;&#x7A7A;&#x95F4;netfilter&#x4E2D;&#xFF0C;netfilter&#x662F;Linux&#x6838;&#x5FC3;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x901A;&#x7528;&#x67B6;&#x6784;&#xFF0C;&#x7528;&#x4E8E;&#x63A5;&#x6536;&#x5E76;&#x751F;&#x6548;&#x89C4;&#x5219;&#xFF0C;&#x8D77;&#x5230;&#x9632;&#x706B;&#x5899;&#x4F5C;&#x7528;&#xFF0C;&#x4E8C;&#x8005;&#x5173;&#x7CFB;&#x5982;&#x4E0B;&#xFF1A;<br><img src="/2016/07/23/iptables&#x7B80;&#x4ECB;&#x53CA;&#x547D;&#x4EE4;&#x7528;&#x6CD5;/iptables.png" alt="iptables"></p>
<p>&#x5728;netfilter&#x4E0A;&#x5B9A;&#x4E49;&#x4E86;5&#x4E2A;&#x94A9;&#x5B50;&#x51FD;&#x6570;(hook function)&#xFF0C;&#x5206;&#x522B;&#x4F5C;&#x7528;&#x4E8E;5&#x4E2A;&#x94FE;&#x4E0A;&#xFF1A;</p>
<ol>
<li>&#x8DEF;&#x7531;&#x524D;&#xFF0C;&#x76EE;&#x6807;&#x5730;&#x5740;&#x8F6C;&#x6362;       == &gt; PREROUTING</li>
<li>&#x5230;&#x8FBE;&#x672C;&#x673A;&#x5185;&#x90E8;&#x7684;&#x62A5;&#x6587;&#x5FC5;&#x7ECF;&#x4E4B;&#x8DEF; == &gt; INPUT</li>
<li>&#x7531;&#x672C;&#x673A;&#x8F6C;&#x53D1;&#x7684;&#x62A5;&#x6587;&#x5FC5;&#x7ECF;&#x4E4B;&#x8DEF;   == &gt; FORWARD</li>
<li>&#x7531;&#x672C;&#x673A;&#x53D1;&#x51FA;&#x7684;&#x62A5;&#x6587;&#x7684;&#x5FC5;&#x7ECF;&#x4E4B;&#x8DEF; == &gt; OUTPUT</li>
<li>&#x8DEF;&#x7531;&#x540E;&#xFF0C;&#x6E90;&#x5730;&#x5740;&#x8F6C;&#x6362;         == &gt; POSTROUTING</li>
</ol>
<p>netfilter&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x8868;(tables),&#x6BCF;&#x4E2A;&#x8868;&#x7531;&#x82E5;&#x5E72;&#x4E2A;&#x94FE;(chains)&#x7EC4;&#x6210;&#xFF0C;&#x800C;&#x6BCF;&#x6761;&#x94FE;&#x53EF;&#x4EE5;&#x7531;&#x4E00;&#x6761;&#x6216;&#x82E5;&#x5E72;&#x6761;&#x89C4;&#x5219;(rules)&#x7EC4;&#x6210;&#xFF0C;&#x5173;&#x7CFB;&#x5982;&#x4E0B;&#xFF1A;<br><img src="/2016/07/23/iptables&#x7B80;&#x4ECB;&#x53CA;&#x547D;&#x4EE4;&#x7528;&#x6CD5;/iptables1.png" alt="table-chain-rule"></p>
<h4 id="4&#x8868;"><a href="#4&#x8868;" class="headerlink" title="4&#x8868;"></a>4&#x8868;</h4><ol>
<li><code>raw</code>&#xFF1A;&#x7528;&#x4E8E;&#x914D;&#x7F6E;&#x6570;&#x636E;&#x5305;&#xFF0C;raw &#x4E2D;&#x7684;&#x6570;&#x636E;&#x5305;&#x4E0D;&#x4F1A;&#x88AB;&#x7CFB;&#x7EDF;&#x8DDF;&#x8E2A;</li>
<li><code>mangle</code>&#xFF1A;&#x7528;&#x4E8E;&#x5BF9;&#x7279;&#x5B9A;&#x6570;&#x636E;&#x5305;&#x7684;&#x4FEE;&#x6539;</li>
<li><code>nat</code>&#xFF1A;&#x7528;&#x4E8E;&#x7F51;&#x7EDC;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x5982;SNAT&#x3001;DNAT&#x3001;MASQUERADE&#x3001;REDIRECT</li>
<li><code>filter</code>&#xFF1A;&#x8FC7;&#x6EE4;&#xFF0C;&#x5B9A;&#x4E49;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x901A;&#x8FC7;&#x9632;&#x706B;&#x5899;</li>
</ol>
<h4 id="5&#x94FE;"><a href="#5&#x94FE;" class="headerlink" title="5&#x94FE;"></a>5&#x94FE;</h4><ol>
<li><code>INPUT</code>&#x94FE;&#xFF1A;&#x5F53;&#x63A5;&#x6536;&#x5230;&#x9632;&#x706B;&#x5899;&#x672C;&#x673A;&#x5730;&#x5740;&#x7684;&#x6570;&#x636E;&#x5305;&#xFF08;&#x5165;&#x7AD9;&#xFF09;&#x65F6;&#xFF0C;&#x5E94;&#x7528;&#x6B64;&#x94FE;&#x4E2D;&#x7684;&#x89C4;&#x5219;</li>
<li><code>OUTPUT</code>&#x94FE;&#xFF1A;&#x5F53;&#x9632;&#x706B;&#x5899;&#x672C;&#x673A;&#x5411;&#x5916;&#x53D1;&#x9001;&#x6570;&#x636E;&#x5305;&#xFF08;&#x51FA;&#x7AD9;&#xFF09;&#x65F6;&#xFF0C;&#x5E94;&#x7528;&#x6B64;&#x94FE;&#x4E2D;&#x7684;&#x89C4;&#x5219;</li>
<li><code>FORWARD</code>&#x94FE;&#xFF1A;&#x5F53;&#x63A5;&#x6536;&#x5230;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x9632;&#x706B;&#x5899;&#x53D1;&#x9001;&#x7ED9;&#x5176;&#x4ED6;&#x5730;&#x5740;&#x7684;&#x6570;&#x636E;&#x5305;&#xFF08;&#x8F6C;&#x53D1;&#xFF09;&#x65F6;&#xFF0C;&#x5E94;&#x7528;&#x6B64;&#x94FE;&#x4E2D;&#x7684;&#x89C4;&#x5219;</li>
<li><code>PREROUTING</code>&#x94FE;&#xFF1A;&#x5728;&#x5BF9;&#x6570;&#x636E;&#x5305;&#x4F5C;&#x8DEF;&#x7531;&#x9009;&#x62E9;&#x4E4B;&#x524D;&#xFF0C;&#x5E94;&#x7528;&#x6B64;&#x94FE;&#x4E2D;&#x7684;&#x89C4;&#x5219;</li>
<li><code>POSTROUTING</code>&#x94FE;&#xFF1A;&#x5728;&#x5BF9;&#x6570;&#x636E;&#x5305;&#x4F5C;&#x8DEF;&#x7531;&#x9009;&#x62E9;&#x4E4B;&#x540E;&#xFF0C;&#x5E94;&#x7528;&#x6B64;&#x94FE;&#x4E2D;&#x7684;&#x89C4;&#x5219;</li>
</ol>
<h4 id="&#x89C4;&#x5219;-&#x5904;&#x7406;&#x673A;&#x5236;"><a href="#&#x89C4;&#x5219;-&#x5904;&#x7406;&#x673A;&#x5236;" class="headerlink" title="&#x89C4;&#x5219;(&#x5904;&#x7406;&#x673A;&#x5236;)"></a>&#x89C4;&#x5219;(&#x5904;&#x7406;&#x673A;&#x5236;)</h4><ol>
<li><code>ACCEPT</code>&#xFF1A;&#x5141;&#x8BB8;&#x6570;&#x636E;&#x5305;&#x901A;&#x8FC7;</li>
<li><code>DROP</code>&#xFF1A;&#x76F4;&#x63A5;&#x4E22;&#x5F03;&#x6570;&#x636E;&#x5305;&#xFF0C;&#x4E0D;&#x7ED9;&#x4EFB;&#x4F55;&#x56DE;&#x5E94;&#x4FE1;&#x606F;</li>
<li><code>REJECT</code>&#xFF1A;&#x62D2;&#x7EDD;&#x6570;&#x636E;&#x5305;&#x901A;&#x8FC7;&#xFF0C;&#x540C;&#x65F6;&#x4F1A;&#x7ED9;&#x6570;&#x636E;&#x53D1;&#x9001;&#x7AEF;&#x4E00;&#x4E2A;&#x54CD;&#x5E94;&#x7684;&#x4FE1;&#x606F;</li>
<li><code>SNAT</code>&#xFF1A;&#x6E90;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x89E3;&#x51B3;&#x5185;&#x7F51;&#x7528;&#x6237;&#x7528;&#x540C;&#x4E00;&#x4E2A;&#x516C;&#x7F51;&#x5730;&#x5740;&#x4E0A;&#x7F51;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4EC5;&#x4F5C;&#x7528;&#x4E8E;nat&#x8868;&#x4E0A;POSTROUTING&#xFF0C;INPUT&#x4E0A;&#x3002;&#x5728;&#x8FDB;&#x5165;&#x8DEF;&#x7531;&#x5C42;&#x9762;&#x7684;route&#x4E4B;&#x524D;&#xFF0C;&#x91CD;&#x65B0;&#x6539;&#x5199;&#x6E90;&#x5730;&#x5740;&#xFF0C;&#x76EE;&#x6807;&#x5730;&#x5740;&#x4E0D;&#x53D8;&#xFF0C;&#x5E76;&#x5728;&#x672C;&#x673A;&#x5EFA;&#x7ACB;NAT&#x8868;&#x9879;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x8FD4;&#x56DE;&#x65F6;&#xFF0C;&#x6839;&#x636E;NAT&#x8868;&#x5C06;&#x76EE;&#x7684;&#x5730;&#x5740;&#x6570;&#x636E;&#x6539;&#x5199;&#x4E3A;&#x6570;&#x636E;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x65F6;&#x5019;&#x7684;&#x6E90;&#x5730;&#x5740;&#xFF0C;&#x5E76;&#x53D1;&#x9001;&#x7ED9;&#x4E3B;&#x673A;</li>
<li><code>MASQUERADE</code>&#xFF1A;&#x662F;SNAT&#x7684;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x5F62;&#x5F0F;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x50CF;adsl&#x8FD9;&#x79CD;&#x4E34;&#x65F6;&#x4F1A;&#x53D8;&#x7684;ip&#x4E0A;</li>
<li><code>DNAT</code>:&#x76EE;&#x6807;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x8BA9;&#x4E92;&#x8054;&#x7F51;&#x4E0A;&#x4E3B;&#x673A;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x5185;&#x7F51;&#x4E0A;&#x7684;&#x67D0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x4EC5;&#x4F5C;&#x7528;&#x4E8E;nat&#x8868;&#x4E0A;PREROUTING&#x548C;OUTPUT&#x3002;&#x548C;SNAT&#x76F8;&#x53CD;&#xFF0C;IP&#x5305;&#x7ECF;&#x8FC7;route&#x4E4B;&#x540E;&#x3001;&#x51FA;&#x672C;&#x5730;&#x7684;&#x7F51;&#x7EDC;&#x6808;&#x4E4B;&#x524D;&#xFF0C;&#x91CD;&#x65B0;&#x4FEE;&#x6539;&#x76EE;&#x6807;&#x5730;&#x5740;&#xFF0C;&#x6E90;&#x5730;&#x5740;&#x4E0D;&#x53D8;&#xFF0C;&#x5728;&#x672C;&#x673A;&#x5EFA;&#x7ACB;NAT&#x8868;&#x9879;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x8FD4;&#x56DE;&#x65F6;&#xFF0C;&#x6839;&#x636E;NAT&#x8868;&#x5C06;&#x6E90;&#x5730;&#x5740;&#x4FEE;&#x6539;&#x4E3A;&#x6570;&#x636E;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x65F6;&#x7684;&#x76EE;&#x6807;&#x5730;&#x5740;&#xFF0C;&#x5E76;&#x53D1;&#x7ED9;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#xFF0C;&#x53EF;&#x4EE5;&#x9690;&#x85CF;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x5668;&#x7684;&#x771F;&#x5B9E;&#x5730;&#x5740;</li>
<li><code>REDIRECT</code>&#xFF1A;&#x662F;DNAT&#x7684;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x5F62;&#x5F0F;&#xFF0C;&#x5C06;&#x7F51;&#x7EDC;&#x5305;&#x8F6C;&#x53D1;&#x5230;&#x672C;&#x5730;host&#x4E0A;&#xFF08;&#x4E0D;&#x7BA1;IP&#x5934;&#x90E8;&#x6307;&#x5B9A;&#x7684;&#x76EE;&#x6807;&#x5730;&#x5740;&#x662F;&#x5565;&#xFF09;&#xFF0C;&#x65B9;&#x4FBF;&#x5728;&#x672C;&#x673A;&#x505A;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;</li>
<li><code>LOG</code>&#xFF1A;&#x4EC5;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6570;&#x636E;&#x5305;&#x4F20;&#x9012;&#x7ED9;&#x4E0B;&#x4E00;&#x6761;&#x89C4;&#x5219;</li>
<li><code>RETURN</code>&#xFF1A;&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x81EA;&#x5B9A;&#x4E49;&#x94FE;&#x4E0A;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x94FE;&#x88AB;&#x5185;&#x7F6E;&#x94FE;&#x5F15;&#x7528;&#x65F6;&#xFF0C;&#x5F53;&#x6CA1;&#x6709;&#x89C4;&#x5219;&#x88AB;&#x5339;&#x914D;&#x65F6;&#xFF0C;&#x8FD4;&#x56DE;&#x5185;&#x7F6E;&#x94FE;&#x7684;&#x4E0B;&#x4E00;&#x6761;&#x89C4;&#x5219;</li>
</ol>
<h4 id="&#x6570;&#x636E;&#x6D41;&#x5411;"><a href="#&#x6570;&#x636E;&#x6D41;&#x5411;" class="headerlink" title="&#x6570;&#x636E;&#x6D41;&#x5411;"></a>&#x6570;&#x636E;&#x6D41;&#x5411;</h4><ul>
<li><p>&#x4E0E;&#x672C;&#x673A;&#x5185;&#x90E8;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;&#xFF1A;<br>  <strong>&#x8FDB;&#x5165;</strong>&#xFF1A;&#x2013;&gt; PREROUTING &#x2013;&gt; INPUT<br>  <strong>&#x51FA;&#x53BB;</strong>&#xFF1A;&#x2013;&gt; OUTPUT &#x2013;&gt; POSTROUTING</p>
</li>
<li><p>&#x7531;&#x672C;&#x673A;&#x8F6C;&#x53D1;&#xFF1A;<br>  <strong>&#x8BF7;&#x6C42;</strong>&#xFF1A;&#x2013;&gt;PREROUTING&#x2013;&gt;FORWARD&#x2013;&gt;POSTROUTING<br>  <strong>&#x54CD;&#x5E94;</strong>&#xFF1A;&#x2013;&gt;PREROUTING&#x2013;&gt;FORWARD&#x2013;&gt;POSTROUTING</p>
</li>
</ul>
<p>&#x6570;&#x636E;&#x6D41;&#x5411;&#x53CA;&#x76F8;&#x5E94;&#x7684;&#x8868;&#x94FE;&#x5173;&#x7CFB;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br><img src="/2016/07/23/iptables&#x7B80;&#x4ECB;&#x53CA;&#x547D;&#x4EE4;&#x7528;&#x6CD5;/iptables2.jpg" alt="iptables/netfilter"></p>
<h2 id="iptables&#x547D;&#x4EE4;&#x7528;&#x6CD5;"><a href="#iptables&#x547D;&#x4EE4;&#x7528;&#x6CD5;" class="headerlink" title="iptables&#x547D;&#x4EE4;&#x7528;&#x6CD5;"></a>iptables&#x547D;&#x4EE4;&#x7528;&#x6CD5;</h2><h3 id="&#x8BED;&#x6CD5;"><a href="#&#x8BED;&#x6CD5;" class="headerlink" title="&#x8BED;&#x6CD5;"></a>&#x8BED;&#x6CD5;</h3><p><code>iptables [-t table] COMMAND chain [num] [-m match [match-options]] [-j target [target-options]]</code></p>
<h3 id="&#x5E38;&#x7528;&#x9009;&#x9879;"><a href="#&#x5E38;&#x7528;&#x9009;&#x9879;" class="headerlink" title="&#x5E38;&#x7528;&#x9009;&#x9879;"></a>&#x5E38;&#x7528;&#x9009;&#x9879;</h3><blockquote>
<p><strong>&#x94FE;&#x7BA1;&#x7406;</strong><br><code>-F</code>&#xFF1A;flush, &#x6E05;&#x7A7A;&#x89C4;&#x5219;&#x94FE;&#xFF0C;&#x65E0;&#x6CD5;&#x8FD8;&#x539F;<br><code>-N</code>&#xFF1A;new, &#x65B0;&#x5EFA;&#x4E00;&#x6761;&#x81EA;&#x5B9A;&#x4E49;&#x94FE;&#xFF0C;&#x88AB;&#x5185;&#x5EFA;&#x94FE;&#x4E0A;&#x89C4;&#x5219;&#x8C03;&#x7528;&#x624D;&#x80FD;&#x751F;&#x6548;<br><code>-X</code>&#xFF1A;delete, &#x5220;&#x9664;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x4E3A;0&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x7A7A;&#x94FE;<br><code>-P</code>&#xFF1A;policy&#xFF0C;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x7B56;&#x7565;&#xFF0C;&#x5BF9;filter&#x8868;&#x6765;&#x8BB2;&#xFF0C;&#x9ED8;&#x8BA4;&#x89C4;&#x5219;&#x4E3A;ACCEPT&#x6216;DROP<br><code>-E</code>&#xFF1A;&#x91CD;&#x547D;&#x540D;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x4E3A;0&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x94FE;<br><code>-Z</code>&#xFF1A;zero&#xFF0C;&#x8BA1;&#x6570;&#x5668;&#x5F52;&#x96F6;<br><strong>&#x89C4;&#x5219;&#x7BA1;&#x7406;</strong><br><code>-A</code>&#xFF1A;Append&#xFF0C;&#x5728;&#x5C3E;&#x540E;&#x8FFD;&#x52A0;<br><code>-I</code>&#xFF1A;Insert&#xFF0C;&#x5728;&#x6307;&#x5B9A;&#x4F4D;&#x63D2;&#x5165;&#x89C4;&#x5219;&#xFF0C;&#x7701;&#x7565;&#x4F4D;&#x7F6E;&#x5219;&#x4E3A;&#x94FE;&#x9996;<br><code>-D</code>&#xFF1A;Delete&#xFF0C;&#x5220;&#x9664;&#x6307;&#x5B9A;&#x89C4;&#x5219;<br><code>-R</code>&#xFF1A;Replace&#xFF0C;&#x5C06;&#x6307;&#x5B9A;&#x89C4;&#x5219;&#x66FF;&#x6362;&#x4E3A;&#x65B0;&#x89C4;&#x5219;<br><strong>&#x663E;&#x793A;</strong><br><code>-L</code>&#xFF1A;list&#xFF0C;&#x5217;&#x51FA;&#x8868;&#x4E2D;&#x7684;&#x94FE;&#x4E0A;&#x7684;&#x89C4;&#x5219;&#xFF1B;</p>
<blockquote>
<p><code>-n</code>&#xFF1A;numeric&#xFF0C;&#x4EE5;&#x6570;&#x503C;&#x683C;&#x5F0F;&#x663E;&#x793A;&#xFF1B;<br><code>-v</code>&#xFF1A;verbose&#xFF0C;&#x663E;&#x793A;&#x8BE6;&#x7EC6;&#x683C;&#x5F0F;&#x4FE1;&#x606F;&#xFF0C;&#x66F4;&#x8BE6;&#x7EC6;<code>-vv</code>, <code>-vvv</code><br><code>-x</code>&#xFF1A;exactly&#xFF0C;&#x8BA1;&#x6570;&#x5668;&#x7684;&#x7CBE;&#x786E;&#x7ED3;&#x679C;&#xFF1B;<br><code>--line-numbers</code>&#xFF1A;&#x663E;&#x793A;&#x94FE;&#x4E2D;&#x7684;&#x89C4;&#x5219;&#x7F16;&#x53F7;</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">iptables -vnL               <span class="comment"># &#x9ED8;&#x8BA4;&#x663E;&#x793A;filter&#x8868;&#x89C4;&#x5219;&#xFF0C;&#x53EF;&#x6307;&#x5B9A;&#x8868;&#x663E;&#x793A;</span></span><br><span class="line">iptables -F -t filter       <span class="comment"># &#x6E05;&#x7A7A;filter&#x8868;&#x4E2D;&#x89C4;&#x5219;&#xFF0C;&#x4E0D;&#x6307;&#x5B9A;&#x5219;&#x6E05;&#x7A7A;&#x6240;&#x6709;&#x8868;&#x4E2D;&#x7684;&#x89C4;&#x5219;</span></span><br><span class="line">iptables -P INPUT DROP      <span class="comment"># &#x8BBE;&#x7F6E;INPUT&#x94FE;&#x9ED8;&#x8BA4;&#x5904;&#x7406;&#x673A;&#x5236;&#x4E3A;DROP</span></span><br><span class="line">iptables -D INPUT 2         <span class="comment"># &#x5220;&#x9664;INPUT&#x94FE;&#x4E0A;&#x7B2C;2&#x6761;&#x89C4;&#x5219;</span></span><br><span class="line">iptables -N test_chain      <span class="comment"># &#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x94FE;test_chain&#xFF0C;&#x5176;&#x53EA;&#x80FD;&#x88AB;&#x5185;&#x7F6E;&#x94FE;&#x63A5;&#x6240;&#x5F15;&#x7528;</span></span><br><span class="line">iptables -X test_chain      <span class="comment"># &#x5220;&#x9664;&#x5F15;&#x7528;&#x8BA1;&#x6570;&#x4E3A;0&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x7A7A;&#x94FE;</span></span><br><span class="line">iptables -I INPUT 2 xxxx    <span class="comment"># &#x6DFB;&#x52A0;&#x89C4;&#x5219;&#x5230;INPUT&#x4E0A;&#x7B2C;2&#x6761;</span></span><br><span class="line">iptables -A OUTPUT xxxx     <span class="comment"># &#x5728;OUTPUT&#x94FE;&#x5C3E;&#x6DFB;&#x52A0;</span></span><br></pre></td></tr></table></figure>
<h3 id="&#x5339;&#x914D;&#x6761;&#x4EF6;"><a href="#&#x5339;&#x914D;&#x6761;&#x4EF6;" class="headerlink" title="&#x5339;&#x914D;&#x6761;&#x4EF6;"></a>&#x5339;&#x914D;&#x6761;&#x4EF6;</h3><h4 id="&#x901A;&#x7528;&#x5339;&#x914D;"><a href="#&#x901A;&#x7528;&#x5339;&#x914D;" class="headerlink" title="&#x901A;&#x7528;&#x5339;&#x914D;"></a>&#x901A;&#x7528;&#x5339;&#x914D;</h4><blockquote>
<p><code>[!] -s ADDR[/mask]</code>&#xFF1A;&#x6307;&#x5B9A;&#x62A5;&#x6587;&#x6E90;IP&#x5730;&#x5740;&#x5339;&#x914D;&#x7684;&#x8303;&#x56F4;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;IP&#x548C;&#x7F51;&#x7EDC;&#x5730;&#x5740;&#xFF0C;<code>!</code>&#x8868;&#x793A;&#x53D6;&#x53CD;<br><code>[!] -d ADDR[/mask]</code>&#xFF1A;&#x6307;&#x5B9A;&#x62A5;&#x6587;&#x76EE;&#x6807;IP&#x5730;&#x5740;&#x5339;&#x914D;&#x7684;&#x8303;&#x56F4;<br><code>[!] -p PROTOCOL</code>&#xFF1A;&#x6307;&#x5B9A;&#x5339;&#x914D;&#x62A5;&#x6587;&#x7684;&#x534F;&#x8BAE;&#x7C7B;&#x578B;&#xFF0C;&#x4E00;&#x822C;&#x6709;&#x4E09;&#x79CD;tcp, udp&#x548C;icmp<br><code>[!] -i INTERFACE</code>&#xFF1A;&#x6570;&#x636E;&#x62A5;&#x6587;&#x6D41;&#x5165;&#x7684;&#x63A5;&#x53E3;&#xFF1B;&#x53EA;&#x9002;&#x7528;&#x4E8E;PREROUTING, INPUT, FORWARD<br><code>[!] -o INTERFACE</code>&#xFF1A;&#x6570;&#x636E;&#x62A5;&#x6587;&#x6D41;&#x51FA;&#x7684;&#x63A5;&#x53E3;&#xFF1B;&#x53EA;&#x9002;&#x7528;&#x4E8E;OUTPUT, FORWARD, POSTROUITING</p>
</blockquote>
<h4 id="&#x6269;&#x5C55;&#x5339;&#x914D;"><a href="#&#x6269;&#x5C55;&#x5339;&#x914D;" class="headerlink" title="&#x6269;&#x5C55;&#x5339;&#x914D;"></a>&#x6269;&#x5C55;&#x5339;&#x914D;</h4><h5 id="p-tcp"><a href="#p-tcp" class="headerlink" title="-p tcp"></a>-p tcp</h5><blockquote>
<p><code>--sport PORT[:PORT]</code>: tcp &#x6307;&#x5B9A;&#x6E90;&#x7AEF;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x8FDE;&#x7EED;&#x591A;&#x4E2A;&#x7AEF;&#x53E3;<br><code>--dport PORT[:PORT]</code>: tcp &#x6307;&#x5B9A;&#x76EE;&#x6807;&#x7AEF;&#x53E3;<br><code>--tcp-flags</code>: tcp&#x6807;&#x793A;&#x4F4D;&#xFF0C;&#x5305;&#x62EC;SYN&#xFF0C;ACK&#xFF0C;FIN&#xFF0C;RST&#xFF0C;URG&#xFF0C;PSH&#xFF0C;&#x5206;2&#x6BB5;&#xFF0C;&#x8868;&#x793A;&#x5728;&#x5DE6;&#x6BB5;&#x7684;&#x6807;&#x793A;&#x4F4D;&#x4E2D;&#xFF0C;&#x53EA;&#x6709;&#x53F3;&#x6BB5;&#x4E2D;&#x7684;&#x4E3A;1</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x4E0D;&#x6307;&#x5B9A;&#x8868;&#x9ED8;&#x8BA4;&#x4E3A;filter&#x8FC7;&#x6EE4;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5141;&#x8BB8;172.16&#x7F51;&#x6BB5;&#x7684;&#x4E3B;&#x673A;&#x53EF;&#x901A;&#x8FC7;22&#x53F7;&#x7AEF;&#x53E3;&#x5230;&#x8FBE;&#x672C;&#x673A;172.16.60.1</span></span><br><span class="line">iptables -A INPUT -s 172.16.0.0/16 -d 172.16.60.1 -p tcp --dport 22 -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -s 172.16.60.1 -d 172.16.0.0/16 -p tcp --dport 22 -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x62D2;&#x7EDD;tcp&#x6807;&#x793A;&#x4F4D;&#x4E0D;&#x6B63;&#x5E38;&#x6570;&#x636E;</span></span><br><span class="line">iptables -A INPUT  -p tcp --tcp-flags all all -j DROP       <span class="comment"># tcp&#x6807;&#x793A;&#x4F4D;&#x5168;&#x4E3A;1</span></span><br><span class="line">iptables -A OUTPUT  -p tcp --tcp-flages all none -j DROP    <span class="comment"># tcp&#x6807;&#x793A;&#x4F4D;&#x5168;&#x4E3A;0</span></span><br></pre></td></tr></table></figure>
<h5 id="p-udp"><a href="#p-udp" class="headerlink" title="-p udp"></a>-p udp</h5><blockquote>
<p><code>--sport PORT[:PORT]</code> &#xFF1A;udp &#x6E90;&#x7AEF;&#x53E3;&#xFF0C;&#x53EF;&#x8FDE;&#x7EED;<br><code>--dport PORT[:PORT]</code>&#xFF1A;udp &#x76EE;&#x6807;&#x7AEF;&#x53E3;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x653E;&#x884C;&#x672C;&#x673A;dns&#xFF0C;&#x672C;&#x673A;172.16.60.1</span></span><br><span class="line">iptables -A INPUT -s 172.16.0.0/16 -d 172.16.60.1 -p udp --dport 53 -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -s 172.16.60.1 -d 172.16.0.0/16 -p udp --sport 53 -j AACEPT</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x672C;&#x673A;&#x8BBF;&#x95EE;&#x5176;&#x5B83;&#x4E3B;&#x673A;DNS</span></span><br><span class="line">iptables -A OUTPUT -s 172.16.60.1 -p udp --sport 53 -j ACCEPT  </span><br><span class="line">iptables -A INPUT -d 172.16.60.1 -p udp --dport 53 -j ACCEPT</span><br></pre></td></tr></table></figure>
<h5 id="p-icmp"><a href="#p-icmp" class="headerlink" title="-p icmp"></a>-p icmp</h5><blockquote>
<p><code>--icmp-type 8</code>&#xFF1A;echo-request,&#x8BF7;&#x6C42;<br><code>--icmp-type 0</code>&#xFF1A;echo-reply,&#x54CD;&#x5E94;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x653E;&#x884C;ping&#x5176;&#x5B83;&#x4E3B;&#x673A;</span></span><br><span class="line">iptables -A INPUT -d 172.16.60.1 -p icmp --icmp-type 0 -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -s 172.16.60.1 -p icmp --icmp-type 8 -j ACCEPT</span><br></pre></td></tr></table></figure>
<h5 id="m-multiport"><a href="#m-multiport" class="headerlink" title="-m multiport"></a>-m multiport</h5><p>&#x591A;&#x7AEF;&#x53E3;&#x5339;&#x914D;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x5339;&#x914D;&#x975E;&#x8FDE;&#x7EED;(,)&#x6216;&#x8FDE;&#x7EED;&#x7AEF;&#x53E3;(:)&#xFF0C;&#x9700;&#x6307;&#x660E;&#x76F8;&#x5E94;tcp&#x6216;udp&#x534F;&#x8BAE;</p>
<blockquote>
<p><code>[!] --sports PORT[,PORT...]</code><br><code>[!] --dports PORT[,PORT...]</code><br><code>[!] --ports PORT[,PORT...]</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x5F00;&#x653E;&#x672C;&#x673A;21&#xFF0C;22&#xFF0C;23&#xFF0C;80&#x7AEF;&#x53E3;</span></span><br><span class="line">iptables -I INPUT -d 172.16.60.1 -p tcp -m multiport --dports 21:23,80 -j ACCEPT</span><br><span class="line">iptables -I OUTPUT -s 172.16.60.1 -p tcp -m multiport --sports 21:23,80 -j ACCEPT</span><br></pre></td></tr></table></figure>
<h5 id="m-iprange"><a href="#m-iprange" class="headerlink" title="-m iprange"></a>-m iprange</h5><p>&#x5339;&#x914D;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x5185;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x5339;&#x914D;&#x4E00;&#x6BB5;&#x8FDE;&#x7EED;&#x7684;&#x5730;&#x5740;&#x800C;&#x975E;&#x6574;&#x4E2A;&#x7F51;&#x7EDC;&#x65F6;&#x6709;&#x7528;</p>
<blockquote>
<p><code>[!] --src-range FROM_IP[-TO_IP]</code><br><code>[!] --dst-range FROM_IP[-TO_IP]</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -d 172.16.60.1 -p tcp --dport 23 -m iprange --src-range 172.16.60.1-172.16.60.100 -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -s 172.16.60.1 -p tcp --sport 23 -m iprange --dst-range 172.16.60.1-172.16.60.100 -j ACCEPT</span><br></pre></td></tr></table></figure>
<h5 id="m-string"><a href="#m-string" class="headerlink" title="-m string"></a>-m string</h5><p>&#x5B57;&#x7B26;&#x4E32;&#x5339;&#x914D;&#xFF0C;&#x80FD;&#x591F;&#x68C0;&#x6D4B;&#x62A5;&#x6587;&#x5E94;&#x7528;&#x5C42;&#x4E2D;&#x7684;&#x5B57;&#x7B26;&#x4E32;</p>
<blockquote>
<p><code>[!] --string PATTERN</code>: &#x6307;&#x5B9A;&#x5B57;&#x7B26;&#x4E32;<br><code>[!] --hex-string &quot;HEX_STRING&quot;</code>: HEX_STRING&#x4E3A;&#x7F16;&#x7801;&#x6210;16&#x8FDB;&#x5236;&#x683C;&#x5F0F;&#x7684;&#x5B57;&#x4E32;</p>
<blockquote>
<p><code>--algo {kmp|bm}</code>: &#x6307;&#x5B9A;&#x7B97;&#x6CD5;<br>    iptables -I OUTPUT -m string &#x2013;algo kmp &#x2013;string &#x201C;sex&#x201D; -j DROP</p>
</blockquote>
</blockquote>
<h5 id="m-time"><a href="#m-time" class="headerlink" title="-m time"></a>-m time</h5><p>&#x57FA;&#x4E8E;&#x65F6;&#x95F4;&#x505A;&#x8BBF;&#x95EE;&#x63A7;&#x5236;</p>
<blockquote>
<p><code>--datestart YYYY[-MM][-DD[Thh[:mm[:ss]]]]</code>&#xFF1A;&#x5F00;&#x59CB;&#x65E5;&#x671F;<br><code>--datestop YYYY[-MM][-DD[Thh[:mm[:ss]]]]</code>&#xFF1A;&#x7ED3;&#x675F;&#x65E5;&#x671F;<br><code>--timestart hh:mm[:ss]</code>&#xFF1A;&#x5F00;&#x59CB;&#x65F6;&#x95F4;<br><code>--timestop hh:mm[:ss]</code>&#xFF1A;<br><code>[!]--monthdays day[,day...]</code>&#xFF1A;&#x6307;&#x5B9A;&#x65E5;&#x671F;<br><code>[!]--weekdays day[,day]|1-7</code>&#xFF1A;&#x6307;&#x5B9A;&#x661F;&#x671F;&#xFF0C;&#x53EF;&#x7528;Mon,Tue&#x2026;&#x6216; Mo,Tu&#x2026;&#x6216; 1-7</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -d 172.16.60.1 -p tcp --dport 90 -m time --timestart 08:20 --timestop 18:40 --weekdays Mon,Tue,Thu,Fri -j ACCEPT</span><br><span class="line">iptables -A OUTPUT -s 172.16.60.1 -p tcp --dport 901 -j ACCEPT</span><br></pre></td></tr></table></figure>
<h5 id="m-connlimit"><a href="#m-connlimit" class="headerlink" title="-m connlimit"></a>-m connlimit</h5><p>&#x8FDE;&#x63A5;&#x6570;&#x9650;&#x5236;&#xFF0C;&#x5BF9;&#x6BCF;IP&#x6240;&#x80FD;&#x591F;&#x53D1;&#x8D77;&#x5E76;&#x53D1;&#x8FDE;&#x63A5;&#x6570;&#x505A;&#x9650;&#x5236;</p>
<blockquote>
<p><code>--connlimit-upto N</code>&#xFF1A;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;N<br><code>--connlimit-above N</code>&#xFF1A;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -d 172.16.60.1 -p tcp --dport 80 -m connlimit --connlimit-above 5 -j DROP</span><br></pre></td></tr></table></figure>
<h5 id="m-limit"><a href="#m-limit" class="headerlink" title="-m limit"></a>-m limit</h5><p>&#x4F20;&#x8F93;&#x901F;&#x7387;&#x9650;&#x5236;</p>
<blockquote>
<p><code>[!] --limit n[/second|/minute|/hour|/day]</code>: &#x9650;&#x5236;&#x6BCF;&#x79D2;,&#x5206;,&#x5C0F;&#x65F6;,&#x5929;n&#x4E2A;<br><code>[!] --limit-burst N</code>: &#x5CF0;&#x503C;&#x9650;&#x5236;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -d 172.16.60.1 -p icmp --icmp-type 8 -m <span class="built_in">limit</span> --<span class="built_in">limit</span> 20/second --<span class="built_in">limit</span>-burst 5 -j ACCEPT</span><br></pre></td></tr></table></figure>
<h5 id="m-state"><a href="#m-state" class="headerlink" title="-m state"></a>-m state</h5><p>&#x72B6;&#x6001;&#x5339;&#x914D;&#xFF0C;&#x72B6;&#x6001;&#x5305;&#x62EC;<code>NEW</code>(&#x65B0;&#x5EFA;&#x8FDE;&#x63A5;), <code>ESTABLISHED</code>(&#x5DF2;&#x5EFA;&#x7ACB;&#x7684;&#x8FDE;&#x63A5;), <code>RELATED</code>(&#x6709;&#x5173;&#x8054;&#x5173;&#x7CFB;), <code>INVALID</code>(&#x65E0;&#x6CD5;&#x8BC6;&#x522B;),<code>UNTRACKED</code>(&#x672A;&#x8FFD;&#x8E2A;)</p>
<blockquote>
<p><code>[!] --state STATE</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -d 172.16.60.1 -m multiport --dports 22,80 -m state --state NEW,ESTABLISHED -j ACCEPT</span><br><span class="line">iptables -I OUTPUT -s 172.16.60.1 -m state --state ESTABLISHED -j ACCEPT</span><br></pre></td></tr></table></figure>
<p><font color="red">&#x6CE8;&#xFF1A;</font>&#x5F00;&#x542F;&#x72B6;&#x6001;&#x8FFD;&#x8E2A;&#x673A;&#x5236;&#x5FC5;&#x987B;&#x52A0;&#x8F7D;<code>nf_conntrack</code>&#x6A21;&#x5757;&#xFF0C;&#x7279;&#x5B9A;&#x670D;&#x52A1;&#x8FD8;&#x9700;&#x52A0;&#x8F7D;&#x76F8;&#x5E94;&#x6A21;&#x5757;&#xFF0C;&#x5982;ftp&#x9700;&#x52A0;&#x8F7D;<code>nf_conntrack_ftp</code></p>
<p><strong>&#x72B6;&#x6001;&#x8FFD;&#x8E2A;&#x7F16;&#x5199;&#x6CD5;&#x5219;&#xFF1A;</strong>  </p>
<ol>
<li>&#x6240;&#x6709;&#x8FDB;&#x5165;&#x6216;&#x51FA;&#x53BB;&#x72B6;&#x6001;&#x4E3A;<code>ESTABLISHED</code>&#x90FD;&#x5E94;&#x8BE5;&#x653E;&#x884C;</li>
<li>&#x4E25;&#x683C;&#x68C0;&#x67E5;&#x8FDB;&#x5165;&#x72B6;&#x6001;&#x4E3A;<code>NEW</code>&#x7684;&#x8FDE;&#x63A5;</li>
<li>&#x6240;&#x6709;&#x72B6;&#x6001;&#x6709;<code>INVALIED</code>&#x90FD;&#x5E94;&#x8BE5;&#x62D2;&#x7EDD;</li>
</ol>
<p><strong>&#x76F8;&#x5173;&#x6587;&#x4EF6;</strong></p>
<ol>
<li>/proc/sys/net/nf_conntrack_max&#xFF1A;&#x8FDE;&#x63A5;&#x8FFD;&#x8E2A;&#x529F;&#x80FD;&#x6240;&#x80FD;&#x5BB9;&#x7EB3;&#x7684;&#x8FDE;&#x63A5;&#x7684;&#x6700;&#x5927;&#x6570;&#x76EE;&#xFF0C;&#x5EFA;&#x8BAE;&#x8C03;&#x5927;</li>
<li>/proc/net/nf_conntrack&#xFF1A;&#x8BB0;&#x5F55;&#x5F53;&#x524D;&#x8FFD;&#x8E2A;&#x7684;&#x6240;&#x6709;&#x8FDE;&#x63A5;</li>
<li>/proc/sys/net/netfilter/*&#xFF1A;&#x4E0D;&#x540C;&#x534F;&#x8BAE;&#x6216;&#x8FDE;&#x63A5;&#x7C7B;&#x578B;&#x8FFD;&#x8E2A;&#x65F6;&#x7684;&#x5C5E;&#x6027;</li>
</ol>
<h3 id="&#x81EA;&#x5B9A;&#x4E49;&#x94FE;"><a href="#&#x81EA;&#x5B9A;&#x4E49;&#x94FE;" class="headerlink" title="&#x81EA;&#x5B9A;&#x4E49;&#x94FE;"></a>&#x81EA;&#x5B9A;&#x4E49;&#x94FE;</h3><p>iptables&#x4E2D;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x94FE;&#x53EA;&#x80FD;&#x88AB;&#x5185;&#x7F6E;&#x5F15;&#x7528;&#x4F7F;&#x7528;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x7CFB;&#x5217;&#x9488;&#x5BF9;&#x6027;&#x7684;&#x89C4;&#x5219;&#x65B9;&#x4FBF;&#x88AB;&#x4E0D;&#x540C;&#x7684;&#x5185;&#x7F6E;&#x94FE;&#x6240;&#x5F15;&#x7528;&#xFF0C;&#x540C;&#x65F6;&#x5EFA;&#x8BAE;&#x5728;&#x6700;&#x540E;&#x6DFB;&#x52A0;&#x4E00;&#x6761;RETURN&#x89C4;&#x5219;&#xFF0C;&#x5DF2;&#x4FBF;&#x672A;&#x5339;&#x914D;&#x5230;&#x65F6;&#x8FD4;&#x56DE;&#x4E3B;&#x94FE;&#x7EE7;&#x7EED;&#x5339;&#x914D;&#x3002;&#x5220;&#x9664;&#x81EA;&#x5B9A;&#x4E49;&#x94FE;&#x9700;&#x6E05;&#x7A7A;&#x5F15;&#x7528;&#xFF0C;&#x540C;&#x65F6;&#x6E05;&#x7A7A;&#x94FE;&#x4E2D;&#x7684;&#x89C4;&#x5219;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x6761;&#x653E;&#x884C;ping&#x8BF7;&#x6C42;&#x7684;&#x94FE;</span></span><br><span class="line">iptables -N icmp_test</span><br><span class="line">iptables -A icmp_test -p icmp -j ACCEPT</span><br><span class="line">iptables -A icmp_test -j RETURN</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5F15;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x94FE;</span></span><br><span class="line">iptables -A INPUT -j icmp_test</span><br><span class="line">iptables -A OUTPUT -j icmp_test</span><br></pre></td></tr></table></figure>
<h3 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h3><p>&#x7F51;&#x7EDC;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x5305;&#x62EC;SNAT&#xFF0C;DNAT&#xFF0C;MASQUERADE<br><code>SNAT</code>&#xFF1A;&#x6E90;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x7528;&#x4E8E;&#x5185;&#x7F51;&#x4E3B;&#x673A;&#x8BBF;&#x95EE;&#x4E92;&#x8054;&#x7F51;&#xFF0C;&#x4F5C;&#x7528;&#x4E8E;nat&#x8868;&#x4E0A;POSTROUTING&#xFF0C;INPUT<br><code>DNAT</code>&#xFF1A;&#x76EE;&#x6807;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x8BA9;&#x4E92;&#x8054;&#x7F51;&#x4E0A;&#x4E3B;&#x673A;&#x8BBF;&#x95EE;&#x672C;&#x5730;&#x5185;&#x7F51;&#x4E0A;&#x7684;&#x67D0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x4F5C;&#x7528;&#x4E8E;nat&#x8868;&#x4E0A;PREROUTING&#x548C;OUTPUT</p>
<blockquote>
<p><code>-j SNAT --to-source SIP</code>&#xFF1A;&#x6E90;&#x5730;&#x5740;&#x8F6C;&#x6362;<br><code>-j DNAT --to-destination DIP[:PORT]</code>&#xFF1A;&#x76EE;&#x6807;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF0C;&#x652F;&#x6301;&#x7AEF;&#x53E3;&#x6620;&#x5C04;<br><code>-j MASQUERADE</code>&#xFF1A;&#x52A8;&#x6001;&#x83B7;&#x53D6;&#xFF0C;&#x4EC5;&#x7528;&#x4E8E;nat&#x8868;&#x7684;POSTROUTING</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x672C;&#x5730;&#x5185;&#x7F51;172.16&#x7F51;&#x6BB5;&#x4E3B;&#x673A;&#x8BBF;&#x95EE;&#x4E92;&#x8054;&#x7F51;&#x65F6;&#xFF0C;&#x5C06;&#x6E90;&#x5730;&#x5740;&#x8F6C;&#x6362;&#x5728;&#x672C;&#x516C;&#x53F8;&#x7684;&#x516C;&#x7F51;8.9.9.9&#x4E0A;</span></span><br><span class="line">iptables -t nat -A POSTROUTING -s 172.16.0.0/24 -j SNAT --to-source 8.9.9.9</span><br><span class="line">iptables -t nat -A POSTROUTING -s 172.16.0.0/24 -j MASQUERADE</span><br><span class="line">                    </span><br><span class="line"><span class="comment"># &#x5916;&#x90E8;&#x8BBF;&#x95EE;&#x516C;&#x53F8;&#x5BF9;&#x5916;&#x670D;&#x52A1;&#x5668;8.8.8.9&#x7684;22022&#x7AEF;&#x53E3;&#x65F6;&#xFF0C;&#x5C06;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x7ED9;&#x672C;&#x5730;&#x670D;&#x52A1;&#x5668;192.168.0.1&#x7684;22&#x7AEF;&#x53E3;&#x4E0A;</span></span><br><span class="line">iptables -t nat -A PREROUTING -d 8.8.8.9 -p -tcp --dport 22022 -j DNAT --to-destination 192.168.0.1:22</span><br></pre></td></tr></table></figure>
<h3 id="&#x4FDD;&#x5B58;&#x548C;&#x91CD;&#x8F7D;&#x89C4;&#x5219;"><a href="#&#x4FDD;&#x5B58;&#x548C;&#x91CD;&#x8F7D;&#x89C4;&#x5219;" class="headerlink" title="&#x4FDD;&#x5B58;&#x548C;&#x91CD;&#x8F7D;&#x89C4;&#x5219;"></a>&#x4FDD;&#x5B58;&#x548C;&#x91CD;&#x8F7D;&#x89C4;&#x5219;</h3><p>&#x4F7F;&#x7528;iptables&#x547D;&#x4EE4;&#x751F;&#x6210;&#x7684;&#x89C4;&#x5219;&#x5728;&#x91CD;&#x542F;&#x540E;&#x5C06;&#x5931;&#x6548;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x5C06;&#x89C4;&#x5219;&#x4FDD;&#x5B58;&#x81F3;&#x6587;&#x4EF6;&#xFF0C;&#x91CD;&#x542F;&#x65F6;&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">iptables-save &gt; /PATH/TO/SOME_RULE_FILE       <span class="comment"># &#x5C06;&#x7F16;&#x5199;&#x7684;&#x89C4;&#x5219;&#x4FDD;&#x5B58;&#x5230;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x4E2D;</span></span><br><span class="line">iptables-restore &lt; /PATH/FROM/SOME_RULE_FILE  <span class="comment"># &#x4ECE;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x4E2D;&#x6062;&#x590D;&#x89C4;&#x5219;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># centos6&#x4E0A;&#x4E5F;&#x53EF;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;</span></span><br><span class="line">service iptables save       <span class="comment"># &#x81EA;&#x52A8;&#x4FDD;&#x5B58;&#x89C4;&#x5219;&#x81F3;/etc/sysconfig/iptables&#x6587;&#x4EF6;&#x4E2D;</span></span><br><span class="line">server iptables restore     <span class="comment"># &#x4ECE;/etc/sysconfig/iptables&#x6587;&#x4EF6;&#x4E2D;&#x91CD;&#x8F7D;&#x89C4;&#x5219;</span></span><br></pre></td></tr></table></figure>
<h3 id="&#x89C4;&#x5219;&#x4F18;&#x5316;"><a href="#&#x89C4;&#x5219;&#x4F18;&#x5316;" class="headerlink" title="&#x89C4;&#x5219;&#x4F18;&#x5316;"></a>&#x89C4;&#x5219;&#x4F18;&#x5316;</h3><ol>
<li>&#x53EF;&#x5B89;&#x5168;&#x653E;&#x884C;&#x6240;&#x6709;&#x5165;&#x7AD9;&#x53CA;&#x51FA;&#x7AD9;&#xFF0C;&#x4E14;&#x72B6;&#x6001;&#x4E3A;ESTABLISHED&#x7684;&#x8FDE;&#x63A5;</li>
<li>&#x670D;&#x52A1;&#x4E8E;&#x540C;&#x4E00;&#x7C7B;&#x529F;&#x80FD;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x5339;&#x914D;&#x6761;&#x4EF6;&#x4E25;&#x683C;&#x7684;&#x653E;&#x524D;&#x9762;&#xFF0C;&#x5BBD;&#x677E;&#x653E;&#x540E;&#x9762;</li>
<li>&#x670D;&#x52A1;&#x4E8E;&#x4E0D;&#x540C;&#x7C7B;&#x529F;&#x80FD;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x5339;&#x914D;&#x62A5;&#x6587;&#x53EF;&#x80FD;&#x6027;&#x8F83;&#x5927;&#x6269;&#x524D;&#x9762;&#xFF0C;&#x8F83;&#x5C0F;&#x653E;&#x540E;&#x9762;</li>
<li>&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x7B56;&#x7565;&#xFF1A;<br> (a) &#x6700;&#x540E;&#x4E00;&#x6761;&#x89C4;&#x5219;&#x8BBE;&#x5B9A;<br> (b) &#x9ED8;&#x8BA4;&#x7B56;&#x7565;&#x8BBE;&#x5B9A;  </li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[文件共享服务之NFS简介及应用]]></title>
      <url>http://liu2lin600.github.io/2016/07/21/%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E4%B9%8BNFS%E7%AE%80%E4%BB%8B%E5%8F%8A%E5%BA%94%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>&#x672C;&#x6587;&#x7B80;&#x8981;&#x4ECB;&#x7ECD;nfs&#x6587;&#x4EF6;&#x5171;&#x4EAB;&#x670D;&#x52A1;&#x53CA;&#x57FA;&#x4E8E;nfs&#x7684;web&#x670D;&#x52A1;&#x7F51;&#x9875;&#x5171;&#x4EAB;&#x5B9E;&#x9A8C;<br><a id="more"></a></p>
<h2 id="&#x7B80;&#x4ECB;"><a href="#&#x7B80;&#x4ECB;" class="headerlink" title="&#x7B80;&#x4ECB;"></a>&#x7B80;&#x4ECB;</h2><blockquote>
<p><strong>NFS</strong>(Network File System)&#x5373;&#x7F51;&#x7EDC;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x8BA9;&#x4E0D;&#x540C;&#x7684;&#x673A;&#x5668;&#x3001;&#x4E0D;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x80FD;&#x591F;&#x5F7C;&#x6B64;&#x5206;&#x4EAB;&#x4E2A;&#x522B;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x8BA9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#x4F4D;&#x4E8E;&#x670D;&#x52A1;&#x5668;&#x78C1;&#x76D8;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x662F;&#x5728;&#x7C7B;Unix&#x7CFB;&#x7EDF;&#x95F4;&#x5B9E;&#x73B0;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x5171;&#x4EAB;&#x7684;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x3002;&#x5728;&#x5B9E;&#x73B0;&#x6587;&#x4EF6;&#x4F20;&#x8F93;&#x9700;&#x8981;&#x4F9D;&#x8D56;<strong>RPC</strong>&#xFF0C;&#x5373;&#x8FDC;&#x7A0B;&#x8FC7;&#x7A0B;&#x8C03;&#x7528;&#x3002;nfs&#x670D;&#x52A1;&#x5728;&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x5411;rpc&#x6CE8;&#x518C;&#x76D1;&#x542C;&#x5728;&#x67D0;&#x4E2A;&#x7AEF;&#x53E3;&#x4E0A;&#xFF0C;rpc&#x670D;&#x52A1;&#x4ECE;&#x8FD8;&#x6CA1;&#x88AB;&#x4F7F;&#x7528;&#x7684;&#x7AEF;&#x53E3;&#x4E2D;&#x6311;&#x4E00;&#x4E2A;&#x7ED9;&#x6B64;&#x8FDB;&#x7A0B;&#x76D1;&#x542C;&#xFF0C;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;NFS&#x662F;RPC&#x670D;&#x52A1;&#x5668;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4E0D;&#x4F46;&#x8FD0;&#x884C;NFS&#x7684;&#x670D;&#x52A1;&#x5668;&#x9700;&#x8981;&#x542F;&#x52A8;RPC&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x8981;&#x6302;&#x8F7D;NFS&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4E5F;&#x9700;&#x8981;&#x540C;&#x6B65;&#x542F;&#x52A8;RPC&#xFF0C;&#x8FD9;&#x6837;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x624D;&#x80FD;&#x7531;RPC&#x7684;&#x534F;&#x8BAE;&#x8FDB;&#x7A0B;&#x5E8F;&#x7AEF;&#x53E3;&#x7684;&#x5BF9;&#x5E94;&#xFF0C;Linux&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x542F;&#x52A8;&#x6B64;&#x670D;&#x52A1;</p>
</blockquote>
<p><img src="/2016/07/21/&#x6587;&#x4EF6;&#x5171;&#x4EAB;&#x670D;&#x52A1;&#x4E4B;NFS&#x7B80;&#x4ECB;&#x53CA;&#x5E94;&#x7528;/nfs_rpc.png" alt="nfs_rpc" title="nfs&#x5DE5;&#x539F;&#x7406;&#x56FE;"></p>
<p>&#x4EE5;&#x4E0B;&#x5B9E;&#x9A8C;&#x73AF;&#x5883;&#x4E3A;CentOS7.2</p>
<h2 id="nfs&#x670D;&#x52A1;&#x5B89;&#x88C5;&#x914D;&#x7F6E;"><a href="#nfs&#x670D;&#x52A1;&#x5B89;&#x88C5;&#x914D;&#x7F6E;" class="headerlink" title="nfs&#x670D;&#x52A1;&#x5B89;&#x88C5;&#x914D;&#x7F6E;"></a>nfs&#x670D;&#x52A1;&#x5B89;&#x88C5;&#x914D;&#x7F6E;</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install nfs-utils rpcbind   <span class="comment"># rpcbind&#x63D0;&#x4F9B;rpc&#x670D;&#x52A1;&#xFF0C;&#x9ED8;&#x8BA4;&#x5DF2;&#x5B89;&#x88C5;&#xFF0C;nfs-utils&#x63D0;&#x4F9B;nfs&#x670D;&#x52A1;&#x6240;&#x9700;&#x7A0B;&#x5E8F;&#x5305;</span></span><br><span class="line">systemctl start rpcbind nfs     <span class="comment"># &#x5F00;&#x542F;&#x670D;&#x52A1;</span></span><br><span class="line">rpcinfo -p localhost            <span class="comment"># &#x67E5;&#x770B;rpc&#x670D;&#x52A1;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x53CA;&#x670D;&#x52A1;&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5730;&#x5740;&#x67E5;&#x770B;&#x8BE5;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x5171;&#x4EAB;</span></span><br></pre></td></tr></table></figure>
<h3 id="&#x76D1;&#x542C;&#x7AEF;&#x53E3;"><a href="#&#x76D1;&#x542C;&#x7AEF;&#x53E3;" class="headerlink" title="&#x76D1;&#x542C;&#x7AEF;&#x53E3;"></a>&#x76D1;&#x542C;&#x7AEF;&#x53E3;</h3><ol>
<li>nfs&#x670D;&#x52A1;&#xFF1A;2049/tcp, 2049/udp</li>
<li>rpc&#x670D;&#x52A1;&#xFF1A;111/tcp, 111/udp</li>
</ol>
<h3 id="&#x76F8;&#x5173;&#x8FDB;&#x7A0B;"><a href="#&#x76F8;&#x5173;&#x8FDB;&#x7A0B;" class="headerlink" title="&#x76F8;&#x5173;&#x8FDB;&#x7A0B;"></a>&#x76F8;&#x5173;&#x8FDB;&#x7A0B;</h3><ol>
<li><code>rpc.mountd</code>&#xFF1A;&#x6302;&#x8F7D;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF0C;&#x8D1F;&#x8D23;&#x5BA2;&#x6237;&#x7AEF;&#x6765;&#x6E90;&#x8BA4;&#x8BC1;&#x8FDB;&#x7A0B;&#xFF0C;&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#x53F7;&#x968F;&#x673A;&#xFF0C;&#x53EF;&#x5728;/etc/sysconfig/nfs&#x4E2D;&#x914D;&#x7F6E;&#x56FA;&#x5B9A;&#x7AEF;&#x53E3;</li>
<li><code>rpc.nfsd</code>&#xFF1A;&#x7BA1;&#x7406;&#x5BA2;&#x6237;&#x7AEF;&#x662F;&#x5426;&#x80FD;&#x591F;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6302;&#x8F7D;&#x4FE1;&#x606F;&#x7B49;&#xFF0C;&#x5176;&#x4E2D;&#x8FD8;&#x5305;&#x542B;&#x8FD9;&#x4E2A;&#x767B;&#x5165;&#x8005;&#x7684;ID&#x7684;&#x5224;&#x522B;</li>
<li><code>rpc.idmap</code>&#xFF1A;ID&#x6620;&#x5C04;</li>
<li><code>rpc.lockd</code>&#xFF1A;&#x6587;&#x4EF6;&#x9501;&#xFF0C;&#x9632;&#x6B62;&#x591A;&#x4EBA;&#x540C;&#x65F6;&#x5BF9;&#x6587;&#x4EF6;&#x64CD;&#x4F5C;&#x9020;&#x6210;&#x95EE;&#x9898;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#x540C;&#x65F6;&#x5F00;&#x542F;</li>
<li><code>rpc.statd</code>&#xFF1A;&#x68C0;&#x67E5;&#x6587;&#x4EF6;&#x7684;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x53D1;&#x751F;&#x6587;&#x4EF6;&#x635F;&#x6BC1;&#x65F6;&#x53EF;&#x5C1D;&#x8BD5;&#x4FEE;&#x590D;</li>
</ol>
<h3 id="&#x6743;&#x9650;&#x95EE;&#x9898;"><a href="#&#x6743;&#x9650;&#x95EE;&#x9898;" class="headerlink" title="&#x6743;&#x9650;&#x95EE;&#x9898;"></a>&#x6743;&#x9650;&#x95EE;&#x9898;</h3><p>nfs&#x7684;&#x6743;&#x9650;&#x7BA1;&#x7406;&#x673A;&#x5236;&#x9ED8;&#x8BA4;&#x4E0A;&#x4EE5;UID&#x6216;GID&#x6620;&#x5C04;&#xFF0C;&#x5373;&#x8981;&#x786E;&#x4FDD;&#x670D;&#x52A1;&#x7AEF;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x4E0A;&#x7684;&#x5B58;&#x5728;&#x76F8;&#x540C;&#x7528;&#x6237;&#x4E14;UID&#x6216;GID&#x4E5F;&#x76F8;&#x673A;&#xFF0C;&#x5426;&#x5219;&#x6620;&#x5C04;&#x65F6;&#x5C06;&#x4F1A;&#x51FA;&#x73B0;&#x6DF7;&#x4E71;&#xFF0C;&#x5F53;&#x7136;&#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x4E2D;&#x5FC3;&#x8EAB;&#x4EFD;&#x8BA4;&#x8BC1;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x5219;&#x4E0D;&#x5B58;&#x5728;&#x6B64;&#x95EE;&#x9898;&#xFF0C;&#x4E2D;&#x5FC3;&#x8BA4;&#x8BC1;&#x670D;&#x52A1;&#x5668;&#x5305;&#x62EC;NIS&#xFF0C;Kerberos&#x53CA;LDAP&#x7B49;&#xFF0C;&#x6B64;&#x5904;&#x6682;&#x4E0D;&#x8BA8;&#x8BBA;&#x3002;&#x4EE5;&#x4E0B;&#x662F;&#x51E0;&#x79CD;&#x6620;&#x5C04;&#x60C5;&#x51B5;&#xFF1A;</p>
<ol>
<li>Client&#x548C;Server&#x4E0A;&#x540C;&#x65F6;&#x5B58;&#x5728;lin00&#x7528;&#x6237;&#xFF0C;&#x4E14;UID&#x548C;GID&#x90FD;&#x4E00;&#x81F4;&#x65F6;&#xFF0C;Client&#x4E0A;&#x4EE5;liu00&#x7528;&#x6237;&#x5BF9;nfs&#x5171;&#x4EAB;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x6B63;&#x5E38;</li>
<li>Client&#x4E0A;liu00&#x7528;&#x6237;ID&#x4E3A;1001&#xFF0C;Server&#x4E0A;Tom&#x7528;&#x6237;ID&#x4E3A;1001&#xFF0C;&#x6B64;&#x65F6;Client&#x4E0A;liu00&#x7528;&#x6237;&#x5C06;&#x4EE5;Tom&#x7684;&#x6743;&#x9650;&#x8BBF;&#x95EE;nfs&#x5171;&#x4EAB;&#x6587;&#x4EF6;&#xFF0C;&#x4ECE;&#x800C;&#x9020;&#x6210;&#x4E00;&#x5B9A;&#x7684;&#x95EE;&#x9898;</li>
<li>Client&#x4E0A;liu00&#x7528;&#x6237;ID&#x4E3A;1001&#xFF0C;Server&#x4E0A;&#x65E0;UID&#x4E3A;1001&#x7528;&#x6237;&#xFF0C;&#x6B64;&#x65F6;liu00&#x5C06;&#x88AB;&#x538B;&#x7F29;&#x6210;&#x533F;&#x540D;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#xFF0C;&#x5176;UID&#x4E3A;65534&#x7684;nfsnobody</li>
<li>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;root&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x65F6;&#x4E5F;&#x4F1A;&#x88AB;&#x538B;&#x7F29;&#x6210;&#x533F;&#x540D;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#xFF0C;&#x5982;&#x9700;root&#x6743;&#x9650;&#x8981;&#x5728;&#x5B9A;&#x4E49;nfs&#x5BFC;&#x51FA;&#x65F6;&#x6DFB;&#x52A0;<code>no_root_squash</code>&#x9009;&#x9879;</li>
</ol>
<h3 id="&#x4E3B;&#x914D;&#x7F6E;"><a href="#&#x4E3B;&#x914D;&#x7F6E;" class="headerlink" title="&#x4E3B;&#x914D;&#x7F6E;"></a>&#x4E3B;&#x914D;&#x7F6E;</h3><p><code>/etc/exports</code>&#xFF1A;&#x5728;&#x6B64;&#x6587;&#x4EF6;&#x4E2D;&#x5B9A;&#x4E49;&#x5171;&#x4EAB;&#xFF0C;&#x5BFC;&#x51FA;&#x65F6;&#x5EFA;&#x8BAE;&#x76F4;&#x63A5;&#x5BFC;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x5206;&#x533A;</p>
<p>&#x8BED;&#x6CD5;&#xFF1A;<code>&#x5BFC;&#x51FA;&#x76EE;&#x5F55;  &#x5BA2;&#x6237;&#x7AEF;1(&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5BFC;&#x51FA;&#x9009;&#x9879;)  [&#x5BA2;&#x6237;&#x7AEF;2(&#x9009;&#x9879;)...]</code>  </p>
<pre><code>/nfsshare  192.168.1.0/24(rw,no_root_squash)  172.16.60.0/24(rw)
</code></pre><ul>
<li><p>&#x5BA2;&#x6237;&#x7AEF;&#x683C;&#x5F0F;&#xFF1A;<br>  &#x6307;&#x5B9A;IP&#xFF1A;172.16.60.7<br>  &#x6307;&#x5B9A;&#x57DF;&#x540D;&#xFF1A;*.liu2lin.com<br>  &#x7F51;&#x7EDC;&#x5730;&#x5740;&#xFF1A;172.16.0.0/16  192.168.1.0/255.255.255.0<br>  &#x4E3B;&#x673A;&#x7EC4;&#xFF1A;NIS&#x57DF;&#x5185;&#x4E3B;&#x673A;&#x7EC4;&#xFF0C;@groups<br>  &#x6240;&#x6709;&#x4E3B;&#x673A;&#xFF1A;&#x4F7F;&#x7528;*&#x901A;&#x914D;&#x6240;&#x6709;</p>
</li>
<li><p>&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5BFC;&#x51FA;&#x5C5E;&#x6027;&#xFF1A;<br>  <code>ro</code>&#xFF1A;&#x53EA;&#x8BFB;<br>  <code>rw</code>&#xFF1A;&#x8BFB;&#x5199;<br>  <code>async</code>&#xFF1A;&#x5F02;&#x6B65;,&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x5F02;&#x6B65;<br>  <code>sync</code>&#xFF1A;&#x540C;&#x6B65;<br>  <code>root_squash</code>&#xFF1A;&#x538B;&#x7F29;root&#x7528;&#x6237;&#xFF0C;&#x57FA;&#x4E8E;imapd&#xFF0C;&#x5C06;root&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#x65F6;&#x6620;&#x5C04;&#x4E3A;nfsnobody&#x7528;&#x6237;&#xFF0C;&#x9ED8;&#x8BA4;&#x542F;&#x7528;<br>  <code>no_root_squash</code>&#xFF1A;&#x4E0D;&#x538B;&#x7F29;root&#x7528;&#x6237;<br>  <code>all_squash</code>&#xFF1A;&#x538B;&#x7F29;&#x6240;&#x6709;&#x7528;&#x6237;<br>  <code>anonuid</code>&#xFF0C;<code>anongid</code>&#xFF1A;&#x6307;&#x5B9A;&#x533F;&#x540D;&#x7528;&#x6237;&#x6620;&#x5C04;&#x4E3A;UID&#xFF0C;GID</p>
</li>
</ul>
<font color="red"><strong>&#x6CE8;</strong>&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#x4E0A;&#x7528;&#x6237;&#x5BF9;&#x5171;&#x4EAB;&#x6587;&#x4EF6;&#x7684;&#x53D6;&#x51B3;&#x4E8E;&#x5BFC;&#x51FA;&#x5C5E;&#x6027;&#x53CA;&#x670D;&#x52A1;&#x7AEF;&#x4E0A;&#x5BF9;&#x5E94;&#x7528;&#x6237;&#x5BF9;&#x5BFC;&#x51FA;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x5171;&#x540C;&#x51B3;&#x5B9A;</font>

<h3 id="&#x76F8;&#x5173;&#x547D;&#x4EE4;"><a href="#&#x76F8;&#x5173;&#x547D;&#x4EE4;" class="headerlink" title="&#x76F8;&#x5173;&#x547D;&#x4EE4;"></a>&#x76F8;&#x5173;&#x547D;&#x4EE4;</h3><ol>
<li><p><code>showmount</code></p>
<blockquote>
<p><code>-a</code>: &#x5728;nfs&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x663E;&#x793A;&#x6240;&#x6709;&#x7684;&#x6302;&#x8F7D;&#x4F1A;&#x8BDD;<br><code>-d SERVER_IP</code>: &#x670D;&#x52A1;&#x5668;&#x7AEF;&#x6267;&#x884C;&#xFF0C;&#x663E;&#x793A;&#x90A3;&#x4E2A;&#x5BFC;&#x51FA;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x88AB;&#x90A3;&#x4E9B;&#x5BA2;&#x6237;&#x7AEF;&#x6302;&#x8F7D;&#x8FC7;<br><code>-e SERVER_IP</code>: &#x5BA2;&#x6237;&#x7AEF;&#x6267;&#x884C;&#xFF0C;&#x63A2;&#x67E5;&#x67D0;&#x4E3B;&#x673A;&#x6240;&#x5BFC;&#x51FA;&#x7684;nfs&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</p>
</blockquote>
</li>
<li><p><code>exportfs</code></p>
<blockquote>
<p><code>-ar</code>: &#x91CD;&#x65B0;&#x5BFC;&#x51FA;&#x6240;&#x6709;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;<br><code>-au</code>: &#x5173;&#x95ED;&#x5BFC;&#x51FA;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;<br><code>-u FS</code>: &#x5173;&#x95ED;&#x6307;&#x5B9A;&#x7684;&#x5BFC;&#x51FA;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;<br><code>-v</code>: &#x663E;&#x793A;&#x8BE6;&#x7EC6;&#x8FC7;&#x7A0B;</p>
</blockquote>
</li>
</ol>
<h2 id="&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;"><a href="#&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;" class="headerlink" title="&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;"></a>&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;</h2><p>&#x5BA2;&#x6237;&#x7AEF;&#x542F;&#x52A8;rpcbind&#xFF0C;&#x4EE5;&#x670D;&#x52A1;&#x7AEF;(172.16.60.1)&#x5BFC;&#x51FA;<code>/nfsshare</code>&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x6302;&#x8F7D;&#x5230;<code>/data/nfs</code>&#x4E3A;&#x4F8B;&#x8BF4;&#x660E;</p>
<ol>
<li><p>&#x5BA2;&#x6237;&#x7AEF;&#x6302;&#x8F7D;NFS&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF1A;</p>
<pre><code>mount -t nfs 172.16.60.1:/nfsshare  /data/nfs
</code></pre></li>
<li><p>&#x5BA2;&#x6237;&#x7AEF;&#x5F00;&#x673A;&#x81EA;&#x52A8;&#x6302;&#x8F7D;nfs&#xFF1A;<code>/etc/fstab</code>&#x6DFB;&#x52A0;</p>
<pre><code>172.16.60.1:/nfsshare  /data/nfs  nfs  defaults,_netdev  0 0
</code></pre></li>
</ol>
<h2 id="&#x5B9E;&#x8DF5;"><a href="#&#x5B9E;&#x8DF5;" class="headerlink" title="&#x5B9E;&#x8DF5;"></a>&#x5B9E;&#x8DF5;</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[LAMP搭建的几个方案]]></title>
      <url>http://liu2lin600.github.io/2016/07/16/LAMP%E6%90%AD%E5%BB%BA%E7%9A%84%E5%87%A0%E4%B8%AA%E6%96%B9%E6%A1%88/</url>
      <content type="html"><![CDATA[<p>&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x5206;&#x522B;&#x4F7F;&#x7528;yum&#x53CA;&#x6E90;&#x7801;&#x5305;&#x7F16;&#x8BD1;&#x642D;&#x5EFA;lamp&#x73AF;&#x5883;&#xFF0C;&#x5E76;&#x505A;&#x6D4B;&#x8BD5;</p>
<a id="more"></a>
<h2 id="&#x65B9;&#x6848;"><a href="#&#x65B9;&#x6848;" class="headerlink" title="&#x65B9;&#x6848;"></a>&#x65B9;&#x6848;</h2><ol>
<li><p>CentOS 7, lamp+xcache, rpm&#x5305;, php&#x4EE5;module&#x65B9;&#x5F0F;&#x5B89;&#x88C5;<br> a) &#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x63D0;&#x4F9B;phpMyAdmin&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x63D0;&#x4F9B;wordpress<br> b) &#x4E3A;phpMyAdmim&#x63D0;&#x4F9B;https&#x670D;&#x52A1;  </p>
</li>
<li><p>CentOS 7, lamp + xcache&#xFF0C; rpm&#x5305;&#xFF0C;php-fpm<br> a) httpd, php, mariadb&#x5206;&#x522B;&#x90E8;&#x7F72;&#x5728;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x4E3B;&#x673A;&#x4E0A;<br> b) &#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x63D0;&#x4F9B;phpMyAdmin&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x63D0;&#x4F9B;wordpress<br> c) &#x4E3A;phpMyAdmim&#x63D0;&#x4F9B;https&#x670D;&#x52A1;</p>
</li>
<li><p>CentOS 7, lamp + xcache&#xFF0C;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;&#xFF0C;php-fpm<br> a) httpd, php, mariadb&#x5206;&#x522B;&#x90E8;&#x7F72;&#x5728;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x4E3B;&#x673A;&#x4E0A;&#xFF0C;&#x4EE5;&#x53CA;&#x90FD;&#x5728;&#x540C;&#x4E00;&#x4E3B;&#x673A;<br> b) &#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x63D0;&#x4F9B;phpMyAdmin&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x63D0;&#x4F9B;wordpress<br> c) &#x4E3A;phpMyAdmim&#x63D0;&#x4F9B;https&#x670D;&#x52A1;  </p>
</li>
</ol>
<h2 id="&#x73AF;&#x5883;&#x51C6;&#x5907;"><a href="#&#x73AF;&#x5883;&#x51C6;&#x5907;" class="headerlink" title="&#x73AF;&#x5883;&#x51C6;&#x5907;"></a>&#x73AF;&#x5883;&#x51C6;&#x5907;</h2><ul>
<li>&#x7CFB;&#x7EDF;&#xFF1A;CentOS7.x86_64 (192.168.1.71~74)</li>
<li>&#x914D;&#x7F6E;&#x597D;yum&#x6E90;&#x5E76;&#x5B89;&#x88C5;&#x5F00;&#x53D1;&#x5305;&#x7EC4; <strong>&#x201C;Development Tools&#x201D;</strong>&#x53CA;<strong>&#x201C;Server Platform Development&#x201D;</strong></li>
<li>&#x4E3A;&#x65B9;&#x4FBF;&#x6D4B;&#x8BD5;&#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;iptables&#x53CA;SELinux&#xFF0C;&#x76F8;&#x5173;&#x77E5;&#x8BC6;&#x540E;&#x671F;&#x8BA8;&#x8BBA;</li>
<li>&#x4E0B;&#x8F7D;&#x76F8;&#x5E94;&#x6E90;&#x7801;&#x5305;&#xFF1A;<ul>
<li>apr-1.5.2.tar.bz2</li>
<li>apr-util-1.5.4.tar.bz2</li>
<li>httpd-2.4.23.tar.bz2</li>
<li>mariadb-5.5.50-linux-x86_64.tar.gz</li>
<li>php-5.5.37.tar.xz</li>
<li>xcache-3.2.0.tar.bz2</li>
<li>wordpress-4.5.3-zh_CN.tar.gz</li>
<li>phpMyAdmin-4.6.3-all-languages.zip</li>
</ul>
</li>
</ul>
<h2 id="&#x4E00;&#x3001;yum&#x5FEB;&#x901F;&#x5B89;&#x88C5;1&#xFF0C;php&#x4EE5;&#x6A21;&#x5757;&#x65B9;&#x5F0F;&#x5B89;&#x88C5;"><a href="#&#x4E00;&#x3001;yum&#x5FEB;&#x901F;&#x5B89;&#x88C5;1&#xFF0C;php&#x4EE5;&#x6A21;&#x5757;&#x65B9;&#x5F0F;&#x5B89;&#x88C5;" class="headerlink" title="&#x4E00;&#x3001;yum&#x5FEB;&#x901F;&#x5B89;&#x88C5;1&#xFF0C;php&#x4EE5;&#x6A21;&#x5757;&#x65B9;&#x5F0F;&#x5B89;&#x88C5;"></a>&#x4E00;&#x3001;yum&#x5FEB;&#x901F;&#x5B89;&#x88C5;1&#xFF0C;php&#x4EE5;&#x6A21;&#x5757;&#x65B9;&#x5F0F;&#x5B89;&#x88C5;</h2><h3 id="1-&#x73AF;&#x5883;&#xFF1A;&#x9759;&#x6001;IP-192-168-1-71"><a href="#1-&#x73AF;&#x5883;&#xFF1A;&#x9759;&#x6001;IP-192-168-1-71" class="headerlink" title="1. &#x73AF;&#x5883;&#xFF1A;&#x9759;&#x6001;IP(192.168.1.71)"></a>1. &#x73AF;&#x5883;&#xFF1A;&#x9759;&#x6001;IP(192.168.1.71)</h3><h3 id="2-&#x5B89;&#x88C5;"><a href="#2-&#x5B89;&#x88C5;" class="headerlink" title="2. &#x5B89;&#x88C5;"></a>2. &#x5B89;&#x88C5;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install httpd php php-mysql mariadb-server php-xcache</span><br></pre></td></tr></table></figure>
<h3 id="3-httpd-2-4"><a href="#3-httpd-2-4" class="headerlink" title="3. httpd-2.4"></a>3. httpd-2.4</h3><ul>
<li><strong>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;</strong>/etc/httpd/conf/httpd.conf, /etc/httpd/conf.d/*.conf</li>
<li><strong>&#x542F;&#x52A8;&#x670D;&#x52A1;&#xFF1A;</strong><br>  <code>systemctl start httpd</code><br>  <code>ss -tunl sport = :80</code><br>  <code>ps aux | grep httpd</code>  </li>
<li><strong>&#x6D4B;&#x8BD5;&#xFF1A;</strong><br>  <code>echo &quot;&lt;h2&gt;hello world&lt;/h2&gt;&quot; &gt; /var/www/html/index.html</code><br>  <code>curl 192.168.1.71</code></li>
</ul>
<h3 id="4-php-5-4"><a href="#4-php-5-4" class="headerlink" title="4. php-5.4"></a>4. php-5.4</h3><ul>
<li><strong>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;</strong>/etc/php.ini, /etc/php.d/*.ini</li>
</ul>
<h3 id="5-mariadb-5-5"><a href="#5-mariadb-5-5" class="headerlink" title="5. mariadb-5.5"></a>5. mariadb-5.5</h3><ul>
<li><p><strong>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;</strong>/etc/my.cnf,/etc/my.cnf.d/*.cnf<br>  &#x5728;&#x4E3B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/my.cnf&#x4E2D;[mysqld]&#x4E0B;&#x6DFB;&#x52A0;&#xFF1A;<br>  <code>innodb_file_per_table = On</code><br>  <code>skip_name_resolve = On</code></p>
</li>
<li><p><strong>&#x542F;&#x52A8;&#x670D;&#x52A1;&#xFF1A;</strong><br>  <code>systemctl start mariadb</code><br>  <code>ss -tunl sport = :3306</code><br>  <code>ps aux | grep mysql</code><br>  <em>&#x6CE8;&#xFF1A;&#x5982;&#x679C;&#x542F;&#x52A8;&#x4E0D;&#x4E86;&#xFF0C;&#x5C1D;&#x8BD5;&#x4FEE;&#x6539;&#x6743;&#x9650;:</em> <code>chown -R mysql.mysql /var/lib/mysql</code></p>
</li>
<li><p><strong>&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x5E93;&#x53CA;&#x5B89;&#x5168;&#x8BBE;&#x7F6E;&#xFF1A;</strong>&#x9ED8;&#x8BA4;&#x53EA;&#x5141;&#x8BB8;root&#x7528;&#x6237;&#x672C;&#x5730;&#x767B;&#x5F55;&#xFF0C;&#x4E14;&#x7A7A;&#x5BC6;&#x7801;<br>  <code>mysql_install_db</code><br>  <code>mysql_secure_installation</code>  # &#x6DFB;&#x52A0;root&#x5BC6;&#x7801;&#xFF0C;&#x79FB;&#x9664;&#x533F;&#x540D;&#x7528;&#x6237;&#x2026;  </p>
</li>
<li><p><strong>&#x767B;&#x5F55;&#x5E76;&#x6388;&#x6743;&#xFF1A;</strong><br>  <code>mysql -uroot -p123</code><br>  <code>GRANT ALL ON *.* TO test@&apos;localhost&apos; identified by &apos;123&apos;</code><br>  <code>GRANT ALL ON *.* TO test@&apos;127.0.0.1&apos; identified by &apos;123&apos;</code></p>
</li>
<li><p><strong>&#x4F7F;&#x7528;&#x6D4B;&#x8BD5;&#x7528;&#x6237;&#x767B;&#x5F55;&#xFF1A;</strong><br>  <code>mysql -utest -p123</code></p>
</li>
</ul>
<h3 id="6-php-xcache"><a href="#6-php-xcache" class="headerlink" title="6. php-xcache"></a>6. php-xcache</h3><ul>
<li><strong>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;</strong>/etc/php.d/xcache.ini</li>
</ul>
<h3 id="7-&#x6D4B;&#x8BD5;&#x8FDE;&#x63A5;"><a href="#7-&#x6D4B;&#x8BD5;&#x8FDE;&#x63A5;" class="headerlink" title="7. &#x6D4B;&#x8BD5;&#x8FDE;&#x63A5;"></a>7. &#x6D4B;&#x8BD5;&#x8FDE;&#x63A5;</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /var/www/html/index.php     <span class="comment"># &#x7F16;&#x8F91;&#x9ED8;&#x8BA4;&#x4E3B;&#x9875;&#x5185;&#x5BB9;&#x5982;&#x4E0B;</span></span><br><span class="line">curl 192.168.1.71/index.php     <span class="comment"># &#x6D4B;&#x8BD5;&#x662F;&#x5426;&#x8FDE;&#x63A5;&#x6210;&#x529F;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $con = mysql_connect(<span class="string">&apos;127.0.0.1&apos;</span>,<span class="string">&apos;test&apos;</span>,<span class="string">&apos;123&apos;</span>);</span><br><span class="line">    <span class="keyword">if</span>($con){</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&apos;OK&apos;</span>;</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&apos;FAIL&apos;</span>;</span><br><span class="line">    }</span><br><span class="line">    phpinfo();      <span class="comment">//&#x67E5;&#x770B;php&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="8-&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x914D;&#x7F6E;&#x53CA;wordpress&#x5B89;&#x88C5;"><a href="#8-&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x914D;&#x7F6E;&#x53CA;wordpress&#x5B89;&#x88C5;" class="headerlink" title="8. &#x865A;&#x62DF;&#x4E3B;&#x673A;&#x914D;&#x7F6E;&#x53CA;wordpress&#x5B89;&#x88C5;"></a>8. &#x865A;&#x62DF;&#x4E3B;&#x673A;&#x914D;&#x7F6E;&#x53CA;wordpress&#x5B89;&#x88C5;</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mkdir /web</span><br><span class="line">tar xf wordpress-4.5.3-zh_CN.tar.gz -C /web</span><br><span class="line"><span class="built_in">cd</span> /web/wordpress/</span><br><span class="line">cp wp-config{-sample,}.php</span><br><span class="line">vim wp-config.php           <span class="comment"># &#x7F16;&#x8F91;wp&#x914D;&#x7F6E;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># &#x65B0;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x505A;&#x5982;&#x4E0B;&#x4FEE;&#x6539;&#x5E76;&#x505A;&#x76F8;&#x5E94;&#x6388;&#x6743;&#xFF0C;&#x7565;</span></span><br><span class="line">    define(<span class="string">&apos;DB_NAME&apos;</span>, <span class="string">&apos;wordpress&apos;</span>);     <span class="comment"># &#x6570;&#x636E;&#x5E93;&#x540D;</span></span><br><span class="line">    define(<span class="string">&apos;DB_USER&apos;</span>, <span class="string">&apos;wpuser&apos;</span>);        <span class="comment"># &#x7528;&#x6237;</span></span><br><span class="line">    define(<span class="string">&apos;DB_PASSWORD&apos;</span>, <span class="string">&apos;wppass&apos;</span>);    <span class="comment"># &#x5BC6;&#x7801;</span></span><br><span class="line"></span><br><span class="line">vim /etc/httpd/conf.d/vhost.conf        <span class="comment"># &#x6DFB;&#x52A0;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x914D;&#x7F6E;</span></span><br><span class="line">    </span><br><span class="line">    &lt;VirtualHost 192.168.1.71:80&gt;</span><br><span class="line">        ServerName wp.liu2lin.com       <span class="comment"># &#x670D;&#x52A1;&#x5668;&#x540D;</span></span><br><span class="line">        DocumentRoot /web/wordpress     <span class="comment"># &#x6839;</span></span><br><span class="line">        &lt;Directory <span class="string">&quot;/web/wordpress&quot;</span>&gt;    <span class="comment"># &#x6388;&#x6743;</span></span><br><span class="line">                Options None</span><br><span class="line">                AllowOverride None</span><br><span class="line">                Require all granted</span><br><span class="line">        &lt;/Directory&gt;</span><br><span class="line">    &lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p>&#x4FEE;&#x6539;hosts&#x6587;&#x4EF6;&#x6DFB;&#x52A0;: 192.168.1.71 wp.liu2lin.com&#xFF0C;&#x8BBF;&#x95EE;wp.liu2lin.com&#x521D;&#x59CB;&#x5316;wordpress&#x7AD9;&#x70B9;</p>
<p><img src="/2016/07/16/LAMP&#x642D;&#x5EFA;&#x7684;&#x51E0;&#x4E2A;&#x65B9;&#x6848;/wordpress.png" alt="wp"></p>
<h2 id="&#x4E8C;&#x3001;yum&#x5FEB;&#x901F;&#x5B89;&#x88C5;2&#xFF0C;FastCGI&#x65B9;&#x5F0F;-php-fpm"><a href="#&#x4E8C;&#x3001;yum&#x5FEB;&#x901F;&#x5B89;&#x88C5;2&#xFF0C;FastCGI&#x65B9;&#x5F0F;-php-fpm" class="headerlink" title="&#x4E8C;&#x3001;yum&#x5FEB;&#x901F;&#x5B89;&#x88C5;2&#xFF0C;FastCGI&#x65B9;&#x5F0F;(php-fpm)"></a>&#x4E8C;&#x3001;yum&#x5FEB;&#x901F;&#x5B89;&#x88C5;2&#xFF0C;FastCGI&#x65B9;&#x5F0F;(php-fpm)</h2><p>&#x8BF4;&#x660E;&#xFF1A;mariadb&#x53CA;httpd&#x5B89;&#x88C5;&#x5982;&#x4E0A;&#x4E0D;&#x518D;&#x7F00;&#x8FF0;</p>
<blockquote>
<p>httpd-2.2&#xFF1A;&#x9ED8;&#x8BA4;&#x4E0D;&#x652F;&#x6301;fcgi&#x6A21;&#x5757;&#xFF0C;&#x9700;&#x8981;&#x81EA;&#x884C;&#x7F16;&#x8BD1;&#x6269;&#x5C55;<br>php-5.3.3&#xFF1A;&#x4E0D;&#x652F;&#x6301;fpm&#x673A;&#x5236;&#xFF0C;&#x9700;&#x8981;&#x81EA;&#x884C;&#x6253;&#x8865;&#x4E01;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;</p>
</blockquote>
<h3 id="1-&#x5B89;&#x88C5;"><a href="#1-&#x5B89;&#x88C5;" class="headerlink" title="1. &#x5B89;&#x88C5;"></a>1. &#x5B89;&#x88C5;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install httpd php-fpm php-mysql mariadb-server php-xcache</span><br></pre></td></tr></table></figure>
<h3 id="2-php-fpm"><a href="#2-php-fpm" class="headerlink" title="2. php-fpm"></a>2. php-fpm</h3><ul>
<li><strong>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;</strong></li>
</ul>
<blockquote>
<p>&#x670D;&#x52A1;&#x8FDB;&#x7A0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;/etc/php-fpm.conf, /etc/php-fpm.d/*.conf<br>&#x89E3;&#x91CA;&#x5668;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;/etc/php.ini, /etc/php.d/*.ini</p>
</blockquote>
<ul>
<li><strong>&#x670D;&#x52A1;&#x8FDB;&#x7A0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BF4;&#x660E;&#xFF1A;</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[global]            <span class="comment"># &#x5168;&#x5C40;&#x914D;&#x7F6E;</span></span><br><span class="line"></span><br><span class="line">[pool]              <span class="comment"># &#x8FDE;&#x63A5;&#x6C60;&#x914D;&#x7F6E;</span></span><br><span class="line">listen = 127.0.0.1:9000     <span class="comment"># &#x76D1;&#x542C;&#x7AEF;&#x53E3;</span></span><br><span class="line">listen.backlog = -1</span><br><span class="line"></span><br><span class="line">listen.allowed_clients = 127.0.0.1      <span class="comment"># &#x76D1;&#x542C;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#xFF0C;&#x672C;&#x5B9E;&#x9A8C;&#x4E2D;&#x914D;&#x7F6E;&#x5728;&#x540C;&#x4E00;&#x4E3B;&#x673A;</span></span><br><span class="line"></span><br><span class="line">user = </span><br><span class="line">group = </span><br><span class="line"></span><br><span class="line">pm = dynamic|static     <span class="comment"># &#x652F;&#x6301;&#x52A8;&#x6001;&#x751F;&#x6210;&#x8FDB;&#x7A0B;&#x6C60;&#x548C;&#x9759;&#x6001;</span></span><br><span class="line">pm.max_children = 50    <span class="comment"># &#x6700;&#x5927;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;&#x5373;&#x652F;&#x6301;&#x7684;&#x6700;&#x5927;&#x5E76;&#x53D1;</span></span><br><span class="line">pm.start_servers = 5</span><br><span class="line">pm.min_spare_servers = 5</span><br><span class="line">pm.max_spare_servers = 35</span><br><span class="line">pm.max_requests  = 500</span><br><span class="line"></span><br><span class="line"><span class="comment"># pm&#x65B9;&#x5F0F;&#x7684;php&#x8FDB;&#x7A0B;&#x5B58;&#x50A8;session&#x7684;&#x8DEF;&#x5F84;&#xFF1A;</span></span><br><span class="line">php_value[session.save_handler] = files</span><br><span class="line">php_value[session.save_path] = /var/lib/php/session</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5982;&#x679C;&#x76EE;&#x5F55;&#x4E0D;&#x5B58;&#x5728;&#x624B;&#x52A8;&#x5EFA;&#x7ACB;&#x5E76;&#x4FEE;&#x6539;&#x5C5E;&#x4E3B;</span></span><br><span class="line">    <span class="comment"># mkdir /var/lib/php/session</span></span><br><span class="line">    <span class="comment"># chown apache.apache /var/lib/php/session</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>&#x914D;&#x7F6E;&#x865A;&#x62DF;&#x4E3B;&#x673A;</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf.d/vhost.conf        <span class="comment"># &#x6DFB;&#x52A0;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x914D;&#x7F6E;</span></span><br><span class="line">    </span><br><span class="line">    &lt;VirtualHost 192.168.1.71:80&gt;</span><br><span class="line">        ServerName wp.liu2lin.com       <span class="comment"># &#x670D;&#x52A1;&#x5668;&#x540D;</span></span><br><span class="line">        DocumentRoot /web/wordpress     <span class="comment"># &#x6839;</span></span><br><span class="line">        ProxyRequests Off               <span class="comment"># &#x5173;&#x95ED;&#x6B63;&#x5411;&#x4EE3;&#x7406;</span></span><br><span class="line">        DirectoryIndex index.php        <span class="comment"># &#x7D22;&#x5F15;&#x6587;&#x4EF6;</span></span><br><span class="line">        ProxyPassMatch ^/(.*\.php)$ fcgi://127.0.0.1:9000/data/www/<span class="variable">$1</span>   <span class="comment"># &#x8BBE;&#x5B9A;&#x4EE3;&#x7406;</span></span><br><span class="line">        &lt;Directory <span class="string">&quot;/web/wordpress&quot;</span>&gt;</span><br><span class="line">                Options None</span><br><span class="line">                AllowOverride None</span><br><span class="line">                Require all granted</span><br><span class="line">        &lt;/Directory&gt;</span><br><span class="line">    &lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>&#x542F;&#x52A8;&#x670D;&#x52A1;&#xFF1A;</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start php-fpm     <span class="comment"># &#x542F;&#x52A8;php-fpm&#x670D;&#x52A1;</span></span><br><span class="line">ss -tuln sport = :9000      <span class="comment"># &#x9ED8;&#x8BA4;&#x76D1;&#x542C;9000/tcp </span></span><br><span class="line">ps aux | grep php-fpm       <span class="comment"># &#x67E5;&#x770B;&#x8FDB;&#x7A0B;</span></span><br></pre></td></tr></table></figure>
<h2 id="&#x4E09;&#x3001;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;-&#x5728;&#x540C;&#x4E00;&#x4E3B;&#x673A;&#x90E8;&#x7F72;"><a href="#&#x4E09;&#x3001;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;-&#x5728;&#x540C;&#x4E00;&#x4E3B;&#x673A;&#x90E8;&#x7F72;" class="headerlink" title="&#x4E09;&#x3001;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;(&#x5728;&#x540C;&#x4E00;&#x4E3B;&#x673A;&#x90E8;&#x7F72;)"></a>&#x4E09;&#x3001;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;(&#x5728;&#x540C;&#x4E00;&#x4E3B;&#x673A;&#x90E8;&#x7F72;)</h2><blockquote>
<p><strong>httpd&#xFF1A;</strong>httpd-2.4, &#x9700;&#x8981;apr-1.4+&#x53CA;apr-util-1.4+&#x4EE5;&#x4E0A;&#x4F9D;&#x8D56;<br><strong>mariadb&#xFF1A;</strong>mariadb-5.5, &#x4E8C;&#x8FDB;&#x5236;&#x5305;&#x5B89;&#x88C5;<br><strong>php&#xFF1A;</strong>php-5.5</p>
</blockquote>
<h3 id="&#x5F00;&#x53D1;&#x5305;&#x7EC4;&#x53CA;&#x4F9D;&#x8D56;&#x5305;&#x5B89;&#x88C5;"><a href="#&#x5F00;&#x53D1;&#x5305;&#x7EC4;&#x53CA;&#x4F9D;&#x8D56;&#x5305;&#x5B89;&#x88C5;" class="headerlink" title="&#x5F00;&#x53D1;&#x5305;&#x7EC4;&#x53CA;&#x4F9D;&#x8D56;&#x5305;&#x5B89;&#x88C5;"></a>&#x5F00;&#x53D1;&#x5305;&#x7EC4;&#x53CA;&#x4F9D;&#x8D56;&#x5305;&#x5B89;&#x88C5;</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum groupinstall <span class="string">&apos;Development Tools&apos;</span> <span class="string">&apos;Server Platform Development&apos;</span></span><br><span class="line">yum install pcre-devel openssl-devel  libevent-devel                <span class="comment"># httpd&#x4F9D;&#x8D56;</span></span><br><span class="line">yum install libxml2-devel gd-devel freetype-devel libmcrypt-devel   <span class="comment"># php&#x4F9D;&#x8D56;</span></span><br></pre></td></tr></table></figure>
<h3 id="httpd-2-4-&#x7F16;&#x8BD1;"><a href="#httpd-2-4-&#x7F16;&#x8BD1;" class="headerlink" title="httpd-2.4 &#x7F16;&#x8BD1;"></a>httpd-2.4 &#x7F16;&#x8BD1;</h3><h4 id="1-apr&#x53CA;apr-util&#x7F16;&#x8BD1;&#x5B89;&#x88C5;"><a href="#1-apr&#x53CA;apr-util&#x7F16;&#x8BD1;&#x5B89;&#x88C5;" class="headerlink" title="1. apr&#x53CA;apr-util&#x7F16;&#x8BD1;&#x5B89;&#x88C5;"></a>1. apr&#x53CA;apr-util&#x7F16;&#x8BD1;&#x5B89;&#x88C5;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">tar xf apr-1.5.2.tar.bz2</span><br><span class="line"><span class="built_in">cd</span> apr-1.5.2</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/apr</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">tar xf apr-util-1.5.4.tar.bz2</span><br><span class="line"><span class="built_in">cd</span> apr-util-1.5.4</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/apr-util --with-apr=/usr/<span class="built_in">local</span>/apr</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5728;centos7&#x7684;yum&#x6E90;&#x4E2D;apr&#x53CA;apr-utl&#x7248;&#x672C;&#x7B26;&#x5408;&#x8981;&#x6C42;&#xFF0C;&#x53EF;&#x4E0D;&#x7528;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-httpd&#x7F16;&#x8BD1;&#x5B89;&#x88C5;"><a href="#2-httpd&#x7F16;&#x8BD1;&#x5B89;&#x88C5;" class="headerlink" title="2. httpd&#x7F16;&#x8BD1;&#x5B89;&#x88C5;"></a>2. httpd&#x7F16;&#x8BD1;&#x5B89;&#x88C5;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar xf httpd-2.4.23.tar.bz2</span><br><span class="line"><span class="built_in">cd</span> httpd-2.4.23</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/apache2 --sysconfdir=/etc/httpd2 --<span class="built_in">enable</span>-so --<span class="built_in">enable</span>-ssl --<span class="built_in">enable</span>-cgi --<span class="built_in">enable</span>-rewrite --with-zlib --with-pcre --with-apr=/usr/<span class="built_in">local</span>/apr --with-apr-util=/usr/<span class="built_in">local</span>/apr-util --<span class="built_in">enable</span>-modules=most --<span class="built_in">enable</span>-mpms-shared=all --with-mpm=event</span><br><span class="line">make -j N       <span class="comment"># N&#x4E3A;&#x7269;&#x7406;&#x6838;&#x5FC3;&#x7684;2&#x500D;&#xFF0C;&#x52A0;&#x901F;&#x7F16;&#x8BD1;</span></span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<h4 id="3-&#x914D;&#x7F6E;"><a href="#3-&#x914D;&#x7F6E;" class="headerlink" title="3. &#x914D;&#x7F6E;"></a>3. &#x914D;&#x7F6E;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">LoadModule proxy_module modules/mod_proxy.so</span><br><span class="line">LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so</span><br><span class="line"><span class="comment"># &#x5982;&#x679C;php&#x4EE5;&#x6A21;&#x5757;&#x65B9;&#x5F0F;&#x7ED3;&#x5408; &#x5219;&#x4E3A; </span></span><br><span class="line"><span class="comment"># LoadModule php5_module modules/libphp5-[zts].so</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x6DFB;&#x52A0;</span></span><br><span class="line">AddType application/x-httpd-php  .php</span><br><span class="line">AddType application/x-httpd-php-source  .phps</span><br><span class="line"></span><br><span class="line">DirectoryIndex  index.php  index.html</span><br></pre></td></tr></table></figure>
<h4 id="4-PATH&#xFF0C;MAN-&#x5934;&#x6587;&#x4EF6;"><a href="#4-PATH&#xFF0C;MAN-&#x5934;&#x6587;&#x4EF6;" class="headerlink" title="4. PATH&#xFF0C;MAN, &#x5934;&#x6587;&#x4EF6;"></a>4. PATH&#xFF0C;MAN, &#x5934;&#x6587;&#x4EF6;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&apos;export PATH=$PATH:/usr/local/apache2/bin&apos;</span> &gt; /etc/profile.d/httpd.sh</span><br><span class="line">vim /etc/man_db.conf  &#x6DFB;&#x52A0;: MANDATORY_MANPATH  /usr/<span class="built_in">local</span>/apache2/man     <span class="comment"># centos7&#x4E0A;&#x53EA;&#x8981;&#x5BFC;&#x51FA;PATH&#x6B64;&#x6B65;&#x53EF;&#x7701;</span></span><br><span class="line">ln -sv /usr/<span class="built_in">local</span>/apache2/include /usr/include/apache   <span class="comment"># &#x5BFC;&#x51FA;&#x5934;&#x6587;&#x4EF6;</span></span><br><span class="line">ldconfig</span><br></pre></td></tr></table></figure>
<h4 id="5-&#x542F;&#x52A8;"><a href="#5-&#x542F;&#x52A8;" class="headerlink" title="5. &#x542F;&#x52A8;"></a>5. &#x542F;&#x52A8;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/apache2/bin/apachectl start</span><br><span class="line">ss -tlun | grep :80</span><br><span class="line">ps aux | grep httpd</span><br><span class="line">curl 192.168.1.72</span><br></pre></td></tr></table></figure>
<h3 id="mariadb-5-5&#x8FDB;&#x5236;&#x5305;&#x5B89;&#x88C5;"><a href="#mariadb-5-5&#x8FDB;&#x5236;&#x5305;&#x5B89;&#x88C5;" class="headerlink" title="mariadb-5.5&#x8FDB;&#x5236;&#x5305;&#x5B89;&#x88C5;"></a>mariadb-5.5&#x8FDB;&#x5236;&#x5305;&#x5B89;&#x88C5;</h3><h4 id="1-&#x521B;&#x5EFA;mysql&#x7528;&#x6237;"><a href="#1-&#x521B;&#x5EFA;mysql&#x7528;&#x6237;" class="headerlink" title="1. &#x521B;&#x5EFA;mysql&#x7528;&#x6237;"></a>1. &#x521B;&#x5EFA;mysql&#x7528;&#x6237;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd -r mysql</span><br><span class="line">useradd -g mysql -r -s /sbin/nologin -M -d /mydata/ mysql</span><br></pre></td></tr></table></figure>
<h4 id="2-&#x5B89;&#x88C5;-1"><a href="#2-&#x5B89;&#x88C5;-1" class="headerlink" title="2. &#x5B89;&#x88C5;"></a>2. &#x5B89;&#x88C5;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tar xf mariadb-5.5.50-linux-x86_64.tar.gz -C /usr/<span class="built_in">local</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/</span><br><span class="line">ln -sv mariadb-5.5.50-linux-x86_64  mysql   <span class="comment"># &#x65B9;&#x4FBF;&#x6EDA;&#x52A8;&#x5347;&#x7EA7;</span></span><br><span class="line"><span class="built_in">cd</span> mysql </span><br><span class="line">chown -R mysql:mysql .</span><br><span class="line">scripts/mysql_install_db --user=mysql --datadir=/mydata      <span class="comment"># &#x521D;&#x59CB;&#x5316;&#x5E76;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x5B58;&#x653E;&#x8DEF;&#x5F84;</span></span><br><span class="line">chown -R root .</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x6CE8;&#xFF1A;&#x6570;&#x636E;&#x5EFA;&#x8BAE;&#x5B58;&#x653E;&#x5728;lvm&#x4E0A;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-&#x914D;&#x7F6E;-1"><a href="#3-&#x914D;&#x7F6E;-1" class="headerlink" title="3. &#x914D;&#x7F6E;"></a>3. &#x914D;&#x7F6E;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/<span class="built_in">local</span>/mysql/support-files/my-large.cnf  /etc/my.cnf</span><br><span class="line">vim /etc/my.cnf</span><br><span class="line"></span><br><span class="line">    [mysqld]</span><br><span class="line">    thread_concurrency = 2      <span class="comment"># cpu&#x7684;&#x7269;&#x7406;&#x6838;&#x5FC3;*2</span></span><br><span class="line">    datadir = /mydata           <span class="comment"># &#x6570;&#x636E;&#x5B58;&#x653E;&#x8DEF;&#x5F84;&#xFF01;&#xFF01;&#xFF01;</span></span><br><span class="line">    innodb_file_per_table = On</span><br><span class="line">    skip_name_resolve = On      <span class="comment"># &#x7981;&#x6B62;IP&#x53CD;&#x89E3;</span></span><br><span class="line"></span><br><span class="line">cp /usr/<span class="built_in">local</span>/mysql/support-files/mysql.server /etc/rc.d/init.d/mysqld  <span class="comment"># &#x542F;&#x52A8;&#x811A;&#x672C;</span></span><br><span class="line">chmod +x /etc/rc.d/init.d/mysqld</span><br></pre></td></tr></table></figure>
<h4 id="4-PATH&#x8DEF;&#x5F84;-MAN&#x6587;&#x6863;-&#x5934;&#x6587;&#x4EF6;"><a href="#4-PATH&#x8DEF;&#x5F84;-MAN&#x6587;&#x6863;-&#x5934;&#x6587;&#x4EF6;" class="headerlink" title="4. PATH&#x8DEF;&#x5F84;,MAN&#x6587;&#x6863;,&#x5934;&#x6587;&#x4EF6;"></a>4. PATH&#x8DEF;&#x5F84;,MAN&#x6587;&#x6863;,&#x5934;&#x6587;&#x4EF6;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&apos;export PATH=$PATH:/usr/local/mysql/bin&apos;</span> &gt; /etc/profile.d/mysql.sh      <span class="comment"># PATH&#x73AF;&#x5883;&#x53D8;&#x91CF;</span></span><br><span class="line">vim /etc/man_db.conf  ==&gt; MANDATORY_MANPATH  /usr/<span class="built_in">local</span>/mysql/man               <span class="comment"># &#x5E2E;&#x5FD9;&#x6587;&#x6863;</span></span><br><span class="line">ln -sv /usr/<span class="built_in">local</span>/mysql/include  /usr/include/mysql                             <span class="comment"># &#x5934;&#x6587;&#x4EF6;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&apos;/usr/local/mysql/lib&apos;</span> &gt; /etc/ld.so.conf.d/mysql.conf          <span class="comment"># &#x8F93;&#x51FA;mysql&#x7684;&#x5E93;&#x6587;&#x4EF6;&#x7ED9;&#x7CFB;&#x7EDF;&#x5E93;&#x67E5;&#x627E;&#x8DEF;&#x5F84;</span></span><br><span class="line">ldconfig [-v]   <span class="comment"># &#x7CFB;&#x7EDF;&#x91CD;&#x65B0;&#x8F7D;&#x5165;&#x7CFB;&#x7EDF;&#x5E93;</span></span><br></pre></td></tr></table></figure>
<h4 id="5-&#x542F;&#x52A8;&#x670D;&#x52A1;"><a href="#5-&#x542F;&#x52A8;&#x670D;&#x52A1;" class="headerlink" title="5. &#x542F;&#x52A8;&#x670D;&#x52A1;"></a>5. &#x542F;&#x52A8;&#x670D;&#x52A1;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service mysqld start</span><br><span class="line">ss -tlun | grep :80     </span><br><span class="line">mysql       # &#x5EFA;&#x8BAE;&#x5148;&#x6267;&#x884C;mysql_secure_installation &#x8FDB;&#x884C;&#x5B89;&#x5168;&#x8BBE;&#x7F6E;</span><br></pre></td></tr></table></figure>
<h3 id="php-5-5-&#x7F16;&#x8BD1;&#x5B89;&#x88C5;"><a href="#php-5-5-&#x7F16;&#x8BD1;&#x5B89;&#x88C5;" class="headerlink" title="php-5.5 &#x7F16;&#x8BD1;&#x5B89;&#x88C5;"></a>php-5.5 &#x7F16;&#x8BD1;&#x5B89;&#x88C5;</h3><h4 id="1-&#x5B89;&#x88C5;-php-fpm"><a href="#1-&#x5B89;&#x88C5;-php-fpm" class="headerlink" title="1. &#x5B89;&#x88C5;(php-fpm)"></a>1. &#x5B89;&#x88C5;(php-fpm)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">tar xf php-5.5.37.tar.bz2</span><br><span class="line"><span class="built_in">cd</span> php-5.5.37</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/php5 --with-mysql=/usr/<span class="built_in">local</span>/mysql --with-openssl --with-mysqli=/usr/<span class="built_in">local</span>/mysql/bin/mysql_config --<span class="built_in">enable</span>-mbstring --<span class="built_in">enable</span>-xml --<span class="built_in">enable</span>-sockets --<span class="built_in">enable</span>-fpm --with-freetype-dir --with-gd --with-libxml-dir=/usr --with-zlib --with-jpeg-dir --with-png-dir --with-mcrypt --with-config-file-path=/etc/php5.ini --with-config-file-scan-dir=/etc/php5.d --<span class="built_in">enable</span>-maintainer-zts</span><br><span class="line">make -j N       <span class="comment"># N&#x4E3A;&#x7269;&#x7406;&#x6838;&#x5FC3;&#x7684;2&#x500D;&#xFF0C;&#x52A0;&#x901F;&#x7F16;&#x8BD1;</span></span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x6CE8;&#xFF1A;</span></span><br><span class="line"><span class="comment"># --enable-maintainer-zts                   # &#x4E3A;&#x652F;&#x6301;apache&#x7684;worker&#x6216;event</span></span><br><span class="line"><span class="comment"># --enable-fpm                              # &#x7F16;&#x8BD1;&#x6210;fpm</span></span><br><span class="line"><span class="comment"># --with-apxs2=/usr/local/apache2/bin/apxs  # &#x7F16;&#x8BD1;&#x6210;&#x6A21;&#x5757;&#xFF0C;&#x8DDF;fpm&#x662F;&#x51B2;&#x7A81;&#x7684;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-&#x914D;&#x7F6E;"><a href="#2-&#x914D;&#x7F6E;" class="headerlink" title="2. &#x914D;&#x7F6E;"></a>2. &#x914D;&#x7F6E;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cp ./php.ini-production /etc/php5.ini       <span class="comment"># &#x6E90;&#x7801;&#x76EE;&#x5F55;&#x4E0B;</span></span><br><span class="line">cp /usr/<span class="built_in">local</span>/php5/etc/php-fpm.conf.default /usr/<span class="built_in">local</span>/php5/etc/php-fpm.conf </span><br><span class="line">vim /usr/<span class="built_in">local</span>/php5/etc/php-fpm.conf</span><br><span class="line"></span><br><span class="line">    pm.max_children = 50</span><br><span class="line">    pm.start_servers = 5</span><br><span class="line">    pm.min_spare_servers = 2</span><br><span class="line">    pm.max_spare_servers = 8</span><br><span class="line">    pid = /usr/<span class="built_in">local</span>/php5/var/run/php-fpm.pid    <span class="comment"># &#x4FEE;&#x6539;&#x8FD9;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-&#x670D;&#x52A1;&#x811A;&#x672C;&#x5E76;&#x542F;&#x52A8;"><a href="#3-&#x670D;&#x52A1;&#x811A;&#x672C;&#x5E76;&#x542F;&#x52A8;" class="headerlink" title="3. &#x670D;&#x52A1;&#x811A;&#x672C;&#x5E76;&#x542F;&#x52A8;"></a>3. &#x670D;&#x52A1;&#x811A;&#x672C;&#x5E76;&#x542F;&#x52A8;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/systemd/system/php-fpm.service</span><br><span class="line">    </span><br><span class="line">    [Unit]</span><br><span class="line">    Description=The PHP FastCGI Process Manager</span><br><span class="line">    After=syslog.target network.target</span><br><span class="line"></span><br><span class="line">    [Service]</span><br><span class="line">    Type=forking</span><br><span class="line">    PIDFile=/usr/<span class="built_in">local</span>/php5/var/run/php-fpm.pid</span><br><span class="line">    ExecStart=/usr/<span class="built_in">local</span>/php5/sbin/php-fpm --fpm-config /usr/<span class="built_in">local</span>/php5/etc/php-fpm.conf</span><br><span class="line">    ExecReload=/bin/<span class="built_in">kill</span> -USR2 <span class="variable">$MAINPID</span></span><br><span class="line"></span><br><span class="line">    [Install]</span><br><span class="line">    WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line">systemctl start php-fpm</span><br><span class="line">ss -tunl | grep :9000</span><br></pre></td></tr></table></figure>
<h4 id="4-httpd&#x8BBE;&#x7F6E;&#x4EE3;&#x7406;"><a href="#4-httpd&#x8BBE;&#x7F6E;&#x4EE3;&#x7406;" class="headerlink" title="4. httpd&#x8BBE;&#x7F6E;&#x4EE3;&#x7406;"></a>4. httpd&#x8BBE;&#x7F6E;&#x4EE3;&#x7406;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/httpd.conf</span><br><span class="line">    </span><br><span class="line">    DirectoryIndex index.php index.html</span><br><span class="line">    ProxyRequests Off           <span class="comment"># &#x5173;&#x95ED;&#x6B63;&#x5411;&#x4EE3;&#x7406;</span></span><br><span class="line">    ProxyPassMatch ^/(.*\.php)$ fcgi://127.0.0.1:9000/usr/<span class="built_in">local</span>/apache2/htdocs/<span class="variable">$1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x6CE8;&#xFF1A;&#x5EFA;&#x8BAE;&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x8BBE;&#x7F6E;</span></span><br><span class="line"></span><br><span class="line">/usr/<span class="built_in">local</span>/apache2/bin/apachectl restart</span><br><span class="line">systemctl restart php-fpm</span><br></pre></td></tr></table></figure>
<h4 id="5-&#x5B89;&#x88C5;xcache&#x52A0;&#x901F;"><a href="#5-&#x5B89;&#x88C5;xcache&#x52A0;&#x901F;" class="headerlink" title="5. &#x5B89;&#x88C5;xcache&#x52A0;&#x901F;"></a>5. &#x5B89;&#x88C5;xcache&#x52A0;&#x901F;</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">tar</span><br><span class="line"><span class="built_in">cd</span></span><br><span class="line">/usr/<span class="built_in">local</span>/php5/bin/phpize      <span class="comment"># &#x6DFB;&#x52A0;php&#x6269;&#x5C55;&#x65F6;&#x5728;&#x6E90;&#x7801;&#x76EE;&#x5F55;&#x4E0B;&#x6267;&#x884C;</span></span><br><span class="line">./configure --<span class="built_in">enable</span>-xcache --with-php-config=/usr/<span class="built_in">local</span>/php5/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x6CE8;&#xFF1A;&#x6267;&#x884C;&#x5B89;&#x88C5;&#x540E;&#x51FA;&#x73B0;  Installing shared extensions:     /usr/local/php5/lib/php/extensions/no-debug-zts-20121212/</span></span><br><span class="line"></span><br><span class="line">mkdir /etc/php5.d/</span><br><span class="line">cp xcache.ini  /etc/php5.d/     <span class="comment"># &#x590D;&#x5236;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5E76;&#x67E5;&#x770B;&#x5982;&#x4E0B;&#x503C;</span></span><br><span class="line">    </span><br><span class="line">    extension = xcache.so   <span class="comment"># &#x786E;&#x4FDD;&#x5F00;&#x542F;</span></span><br><span class="line">    xcache.size  =  160M    <span class="comment"># &#x9002;&#x5F53;&#x8C03;&#x6574;&#x7F13;&#x5B58;&#x5927;&#x5C0F;</span></span><br><span class="line"></span><br><span class="line">systemctl restart php-fpm</span><br></pre></td></tr></table></figure>
<h3 id="&#x6D4B;&#x8BD5;"><a href="#&#x6D4B;&#x8BD5;" class="headerlink" title="&#x6D4B;&#x8BD5;"></a>&#x6D4B;&#x8BD5;</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&apos;&lt;?php phpinfo();?&gt;&apos;</span> &gt; /usr/<span class="built_in">local</span>/apache2/htdocs/index.php</span><br><span class="line">curl 192.168.1.72</span><br></pre></td></tr></table></figure>
<p><em>&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x8BBE;&#x7F6E;&#x540C;&#x4E0A;&#xFF0C;&#x6B64;&#x7565;</em></p>
<h2 id="&#x56DB;-&#x57FA;&#x4E8E;FastCGI&#x4E0D;&#x540C;&#x4E3B;&#x673A;&#x5206;&#x522B;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;"><a href="#&#x56DB;-&#x57FA;&#x4E8E;FastCGI&#x4E0D;&#x540C;&#x4E3B;&#x673A;&#x5206;&#x522B;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;" class="headerlink" title="&#x56DB;. &#x57FA;&#x4E8E;FastCGI&#x4E0D;&#x540C;&#x4E3B;&#x673A;&#x5206;&#x522B;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;"></a>&#x56DB;. &#x57FA;&#x4E8E;FastCGI&#x4E0D;&#x540C;&#x4E3B;&#x673A;&#x5206;&#x522B;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;</h2><h3 id="1-&#x73AF;&#x5883;&#x51C6;&#x5907;"><a href="#1-&#x73AF;&#x5883;&#x51C6;&#x5907;" class="headerlink" title="1. &#x73AF;&#x5883;&#x51C6;&#x5907;"></a>1. &#x73AF;&#x5883;&#x51C6;&#x5907;</h3><ul>
<li>httpd-2.4&#xFF1A;192.168.1.73</li>
<li>php-5.5&#xFF1A;192.168.1.74</li>
<li>mariadb-5.5&#xFF1A;192.168.1.75</li>
</ul>
<p><strong>httpd&#x548C;mariadb&#x7F16;&#x8BD1;&#x65B9;&#x5F0F;&#x540C;&#x4E0A;&#xFF0C;&#x5219;&#x5904;&#x7F16;&#x8BD1;php</strong></p>
<h3 id="2-php&#x5B89;&#x88C5;"><a href="#2-php&#x5B89;&#x88C5;" class="headerlink" title="2. php&#x5B89;&#x88C5;"></a>2. php&#x5B89;&#x88C5;</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum install libxml2-devel gd-devel freetype-devel libmcrypt-devel openssl-devel bzip2-devel</span><br><span class="line">tar</span><br><span class="line"><span class="built_in">cd</span></span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/php5 --with-mysql=mysqlnd --with-pdo-mysql=mysqlnd --with-mysqli=mysqlnd --with-openssl --<span class="built_in">enable</span>-mbstring --with-freetype-dir --with-jpeg-dir --with-png-dir  --with-libxml-dir=/usr/ --<span class="built_in">enable</span>-xml --<span class="built_in">enable</span>-sockets --<span class="built_in">enable</span>-fpm --with-config-file-path=/etc/ --with-config-file-scan-dir=/etc/php5.d --with-bz2 --<span class="built_in">enable</span>-maintainer-zts</span><br><span class="line">make -j N    <span class="comment"># N&#x4E3A;&#x7269;&#x7406;&#x6838;&#x5FC3;&#x7684;2&#x500D;&#xFF0C;&#x52A0;&#x901F;&#x7F16;&#x8BD1;</span></span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<h3 id="3-&#x914D;&#x7F6E;-2"><a href="#3-&#x914D;&#x7F6E;-2" class="headerlink" title="3. &#x914D;&#x7F6E;"></a>3. &#x914D;&#x7F6E;</h3><ul>
<li>php&#x914D;&#x7F6E;</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cp ./php.ini-production /etc/php5.ini       <span class="comment"># &#x6E90;&#x7801;&#x76EE;&#x5F55;&#x4E0B;</span></span><br><span class="line">cp /usr/<span class="built_in">local</span>/php5/etc/php-fpm.conf.default /usr/<span class="built_in">local</span>/php5/etc/php-fpm.conf </span><br><span class="line">vim /usr/<span class="built_in">local</span>/php5/etc/php-fpm.conf</span><br><span class="line"></span><br><span class="line">    listen 192.168.1.74:9000       <span class="comment"># &#x4FEE;&#x6539;&#x4E3A;php-fpm&#x670D;&#x52A1;&#x76D1;&#x542C;&#x5730;&#x5740;&#xFF01;&#xFF01;&#xFF01;&#xFF01;&#xFF01;</span></span><br><span class="line">    pm.max_children = 50</span><br><span class="line">    pm.start_servers = 5</span><br><span class="line">    pm.min_spare_servers = 2</span><br><span class="line">    pm.max_spare_servers = 8</span><br><span class="line">    pid = /usr/<span class="built_in">local</span>/php5/var/run/php-fpm.pid    <span class="comment"># &#x4FEE;&#x6539;&#x8FD9;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>httpd&#x914D;&#x7F6E;&#xFF1A;/etc/httpd2/httpd.conf</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x5F00;&#x542F;&#x5982;&#x4E0B;&#x6A21;&#x5757;</span></span><br><span class="line">LoadModule proxy_module modules/mod_proxy.so</span><br><span class="line">LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so</span><br><span class="line"><span class="comment"># &#x5982;&#x679C;php&#x4EE5;&#x6A21;&#x5757;&#x65B9;&#x5F0F;&#x7ED3;&#x5408; &#x5219;&#x4E3A; </span></span><br><span class="line"><span class="comment"># LoadModule php5_module modules/libphp5-[zts].so</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x6DFB;&#x52A0;</span></span><br><span class="line">AddType application/x-httpd-php  .php</span><br><span class="line">AddType application/x-httpd-php-source  .phps</span><br></pre></td></tr></table></figure>
<ul>
<li>httpd&#x865A;&#x62DF;&#x673A;&#x914D;&#x7F6E;&#xFF1A;/etc/httpd2.d/vhost.conf (&#x624B;&#x52A8;&#x5EFA;&#x7ACB;)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost 192.168.1.73:80&gt;</span><br><span class="line">    ServerName www3.liu2lin.com</span><br><span class="line">    DocumentRoot /web</span><br><span class="line">    ProxyRequests Off         </span><br><span class="line">    DirectoryIndex index.php </span><br><span class="line">    ProxyPassMatch ^/(.*\.php)$ fcgi://192.168.1.74:9000/web/<span class="variable">$1</span></span><br><span class="line">    &lt;Directory <span class="string">&quot;/web&quot;</span>&gt;</span><br><span class="line">        Options None</span><br><span class="line">        AllowOverride None</span><br><span class="line">        Require all granted</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>&#x6D4B;&#x8BD5;mysql&#x8FDE;&#x63A5;&#x6027;  </li>
</ul>
<blockquote>
<p>&#x5728;php-fpm(192.168.1.74)&#x4E0A;&#x65B0;&#x5EFA;&#x6D4B;&#x8BD5;&#x9875;/web/index.php&#xFF0C;mysql&#x5148;&#x6388;&#x6743;&#xFF0C;&#x53C2;&#x8003;&#x4E0A;&#xFF0C;&#x7136;&#x540E;&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;192.168.1.73&#x67E5;&#x770B;&#x7ED3;&#x679C;</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $con = mysql_connect(<span class="string">&apos;192.168.1.75&apos;</span>,<span class="string">&apos;wpuser&apos;</span>,<span class="string">&apos;wppass&apos;</span>);</span><br><span class="line">    <span class="keyword">if</span>($con){</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&apos;OK&apos;</span>;</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&apos;FAIL&apos;</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x642D;&#x5EFA;phpMyAdmin</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># php-fpm&#x670D;&#x52A1;&#x5668;&#x4E0A;</span></span><br><span class="line">unzip phpMyAdmin-4.6.3-all-languages.zip</span><br><span class="line">mv phpMyAdmin-4.6.3-all-languages /web/phpmyadmin</span><br><span class="line"><span class="built_in">cd</span> /web/phpmyadmin</span><br><span class="line">cp config.sample.inc.php config.inc.php     <span class="comment"># &#x914D;&#x7F6E;&#x6587;&#x4EF6;</span></span><br><span class="line">vim config.inc.php  <span class="comment"># &#x4FEE;&#x6539;&#x4EE5;&#x4E0B;</span></span><br><span class="line"></span><br><span class="line">    <span class="variable">$cfg</span>[<span class="string">&apos;blowfish_secret&apos;</span>] = <span class="string">&apos;t4hjJbhU1iLz6g&apos;</span>;     <span class="comment"># cookie&#x52A0;&#x5BC6;</span></span><br><span class="line">    <span class="variable">$cfg</span>[<span class="string">&apos;Servers&apos;</span>][<span class="variable">$i</span>][<span class="string">&apos;host&apos;</span>] = <span class="string">&apos;192.168.1.75&apos;</span>;   <span class="comment"># mysql&#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x52A0;&#x5BC6;&#x7801;&#x6700;&#x597D;&#x4F7F;&#x7528;openssl rand -base64 10  &#x6765;&#x751F;&#x6210;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># httpd&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x865A;&#x62DF;&#x4E3B;&#x673A;&#x8BBE;&#x7F6E;</span></span><br><span class="line">&lt;VirtualHost 192.168.1.73:80&gt;</span><br><span class="line">    ServerName pma3.liu2lin.com</span><br><span class="line">    DocumentRoot /web/phpmyadmin</span><br><span class="line">    ProxyRequests Off</span><br><span class="line">    DirectoryIndex index.php</span><br><span class="line">    ProxyPassMatch ^/(.*\.php)$ fcgi://192.168.1.74:9000/web/phpmyadmin/<span class="variable">$1</span></span><br><span class="line">    &lt;Directory <span class="string">&quot;/web/phpmyadmin&quot;</span>&gt;</span><br><span class="line">        Options None</span><br><span class="line">        AllowOverride None</span><br><span class="line">        Require all granted</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># httpd&#x4E3B;&#x673A;&#x4E0A;&#x9700;&#x8981;&#x5EFA;&#x7ACB;/web/phpmyadmin&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x51FA;&#x73B0;403&#x9519;&#x8BEF; !!!!</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>&#x6CE8;&#xFF1A;php-fpm&#x670D;&#x52A1;&#x5668;&#x53EA;&#x8D1F;&#x8D23;&#x89E3;&#x6790;php&#x6587;&#x4EF6;&#xFF0C;html,&#x56FE;&#x7247;&#x7B49;&#x9759;&#x6001;&#x8D44;&#x6E90;&#x4ECD;&#x9700;&#x7531;httpd&#x6765;&#x89E3;&#x6790;&#xFF0C;&#x5982;&#x4E0B;</p>
</blockquote>
<p><img src="/2016/07/16/LAMP&#x642D;&#x5EFA;&#x7684;&#x51E0;&#x4E2A;&#x65B9;&#x6848;/pma1.png" alt="pma1"></p>
<blockquote>
<p>&#x4E3A;&#x65B9;&#x4FBF;&#x8D77;&#x89C1;&#x76F4;&#x63A5;&#x5C06;phpMyAdmin&#x76EE;&#x5F55;&#x590D;&#x5236;&#x5230;/web/&#x4E0B;&#x5E76;&#xFF0C;&#x56FE;&#x7247;&#x53EF;&#x6B63;&#x5E38;&#x89E3;&#x6790;</p>
</blockquote>
<p><img src="/2016/07/16/LAMP&#x642D;&#x5EFA;&#x7684;&#x51E0;&#x4E2A;&#x65B9;&#x6848;/pma2.png" alt="pma2"></p>
<h2 id="&#x538B;&#x6D4B;&#x7ED3;&#x679C;"><a href="#&#x538B;&#x6D4B;&#x7ED3;&#x679C;" class="headerlink" title="&#x538B;&#x6D4B;&#x7ED3;&#x679C;"></a>&#x538B;&#x6D4B;&#x7ED3;&#x679C;</h2><p>&#x2026;.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux特殊权限及ACL简介]]></title>
      <url>http://liu2lin600.github.io/2016/06/25/Linux%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90%E5%8F%8AACL%E7%AE%80%E4%BB%8B/</url>
      <content type="html"><![CDATA[<p>&#x5BF9;&#x4E8E;linux&#x4E2D;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x9664;&#x4E86;&#x666E;&#x901A;&#x7684;&#x8BFB;(r)&#x3001;&#x5199;(w)&#x3001;&#x6267;&#x884C;(x)&#x6743;&#x9650;&#x5916;&#xFF0C;&#x8FD8;&#x5B58;&#x5728;&#x4E9B;&#x7279;&#x6B8A;&#x6743;&#x9650;</p>
<a id="more"></a>
<blockquote>
<p>&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x53EF;&#x6267;&#x884C;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#x80FD;&#x4E0D;&#x80FD;&#x542F;&#x52A8;&#x4E3A;&#x8FDB;&#x7A0B;&#xFF0C;&#x53D6;&#x51B3;&#x53D1;&#x8D77;&#x8005;&#x5BF9;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x62E5;&#x6709;&#x6267;&#x884C;&#x6743;&#x9650;&#xFF0C;&#x4E00;&#x65E6;&#x542F;&#x52A8;&#x4E3A;&#x8FDB;&#x7A0B;&#x4E4B;&#x540E;&#xFF0C;&#x5176;&#x8FDB;&#x7A0B;&#x7684;&#x5C5E;&#x4E3B;&#x4E3A;&#x53D1;&#x8D77;&#x8005;&#xFF0C;&#x8FDB;&#x7A0B;&#x7684;&#x5C5E;&#x7EC4;&#x4E3A;&#x53D1;&#x8D77;&#x8005;&#x6240;&#x5C5E;&#x7684;&#x7EC4;&#xFF0C;&#x8FDB;&#x7A0B;&#x8BBF;&#x95EE;&#x6587;&#x4EF6;&#x65F6;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x53D6;&#x51B3;&#x4E8E;&#x8FDB;&#x7A0B;&#x7684;&#x53D1;&#x8D77;&#x8005;&#xFF0C;&#x4E0D;&#x8FC7;&#x7279;&#x6B8A;&#x6743;&#x9650;&#x7684;&#x5B58;&#x5728;&#x8BA9;&#x8FD9;&#x4E00;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#x4E86;&#x70B9;&#x6539;&#x53D8;&#xFF0C;&#x8FD9;&#x4E9B;&#x6743;&#x9650;&#x4E3B;&#x8981;&#x6709;SUID,SGID,STICKY&#xFF0C;chattr&#xFF0C;ACL&#xFF0C;SELinux&#x8BBE;&#x7F6E;&#x7684;&#x6743;&#x9650;</p>
</blockquote>
<p>&#x5148;&#x770B;&#x5F20;&#x56FE;&#xFF0C;&#x56FE;&#x4E2D;&#x7684;s,t&#x5C31;&#x662F;SUID,SGID,STICKY3&#x79CD;&#x7279;&#x6B8A;&#x6743;&#x9650;&#x7684;&#x8868;&#x793A;<br><img src="/2016/06/25/Linux&#x7279;&#x6B8A;&#x6743;&#x9650;&#x53CA;ACL&#x7B80;&#x4ECB;/suid.png" alt="&apos;&#x7279;&#x6B8A;&#x6743;&#x9650;&apos;"><br>&#x4E0B;&#x9762;&#x5BF9;&#x8FD9;3&#x79CD;&#x7279;&#x6B8A;&#x6743;&#x9650;&#x5206;&#x522B;&#x4F5C;&#x4E0B;&#x4ECB;&#x7ECD;</p>
<h2 id="SUID"><a href="#SUID" class="headerlink" title="SUID"></a>SUID</h2><ul>
<li><strong>&#x529F;&#x80FD;&#xFF1A;</strong>&#x4F5C;&#x7528;&#x4E8E;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#xFF0C;&#x5F53;&#x5176;&#x8FD0;&#x884C;&#x4E3A;&#x8FDB;&#x7A0B;&#x65F6;&#xFF0C;&#x8BE5;&#x7A0B;&#x5E8F;&#x5C5E;&#x4E3B;&#x4E0D;&#x518D;&#x662F;&#x53D1;&#x8D77;&#x4EBA;&#xFF0C;&#x800C;&#x662F;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#x81EA;&#x8EAB;&#x5C5E;&#x4E3B;  </li>
<li><strong>&#x5C55;&#x793A;&#xFF1A;</strong>&#x5C55;&#x793A;&#x4E8E;&#x6587;&#x4EF6;&#x5C5E;&#x4E3B;&#x6267;&#x884C;&#x6743;&#x9650;&#x4F4D;&#xFF0C;&#x5982;&#x5C5E;&#x4E3B;&#x6709;&#x6267;&#x884C;&#x6743;&#x9650;&#x5219;&#x663E;&#x793A;&#x4E3A;<code>s</code>&#xFF0C;&#x5426;&#x5219;&#x4E3A;<code>S</code>  </li>
<li><strong>&#x4FEE;&#x6539;&#xFF1A;</strong><code>chmod u{+|-}s file1</code>&#xFF0C;<code>+</code>&#x4E3A;&#x6DFB;&#x52A0;&#xFF0C;<code>-</code>&#x4E3A;&#x5220;&#x9664;  </li>
<li><strong>&#x5B9E;&#x9A8C;&#xFF1A;</strong>&#x7BA1;&#x7406;&#x5458;&#x590D;&#x5236;<code>cat</code>&#x547D;&#x4EE4;&#x5230;&#x5176;&#x5B83;&#x76EE;&#x5F55;&#x5E76;&#x6DFB;&#x52A0;SUID&#xFF0C;&#x5207;&#x6362;&#x666E;&#x901A;&#x7528;&#x80FD;&#x5426;&#x67E5;&#x770B;/etc/shadow&#x6587;&#x4EF6;&#xFF1F;<br><img src="/2016/06/25/Linux&#x7279;&#x6B8A;&#x6743;&#x9650;&#x53CA;ACL&#x7B80;&#x4ECB;/suid1.png" alt="suid&#x5B9E;&#x9A8C;"></li>
</ul>
<p><em>SUID&#x975E;&#x5E38;&#x6709;&#x98CE;&#x9669;&#xFF0C;&#x614E;&#x7528;&#x3002;&#x4E0D;&#x8FC7;<code>passwd</code>&#x547D;&#x4EE4;&#x6B63;&#x662F;&#x4F7F;&#x7528;&#x4E86;suid&#x6743;&#x9650;&#x624D;&#x4F7F;&#x5F97;&#x666E;&#x901A;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8BE5;&#x547D;&#x4EE4;&#x6765;&#x4FEE;&#x6539;&#x81EA;&#x5DF1;&#x7684;&#x5BC6;&#x7801;&#x5E76;&#x5199;&#x5165;/etc/shadow&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x540C;&#x65F6;&#x666E;&#x901A;&#x7528;&#x6237;&#x4F7F;&#x7528;<code>passwd</code>&#x65F6;&#xFF0C;&#x4E0D;&#x53EF;&#x5E26;&#x4EFB;&#x4F55;&#x53C2;&#x6570;&#xFF0C;&#x786E;&#x4FDD;&#x4E86;&#x53EA;&#x80FD;&#x4FEE;&#x6539;&#x81EA;&#x5DF1;&#x7684;&#x5BC6;&#x7801;</em></p>
<h2 id="SGID"><a href="#SGID" class="headerlink" title="SGID"></a>SGID</h2><ul>
<li><strong>&#x529F;&#x80FD;&#xFF1A;</strong>&#x5BF9;&#x76EE;&#x5F55;&#x8D4B;&#x6743;&#xFF0C;&#x5219;&#x5728;&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x7684;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x90FD;&#x7EE7;&#x627F;&#x8BE5;&#x76EE;&#x5F55;&#x5C5E;&#x7EC4;&#x6743;&#x9650;&#xFF0C;&#x800C;&#x975E;&#x521B;&#x5EFA;&#x8005;&#x672C;&#x8EAB;&#x5C5E;&#x4E3B;; &#x5BF9;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x8D4B;&#x6743;&#xFF0C;&#x540C;SUID&#xFF0C;&#x6267;&#x884C;&#x65F6;&#x5C06;&#x62E5;&#x6709;&#x6587;&#x4EF6;&#x5C5E;&#x7EC4;&#x7684;&#x6743;&#x9650;  </li>
<li><strong>&#x5C55;&#x793A;&#xFF1A;</strong>&#x5C55;&#x793A;&#x4E8E;&#x6587;&#x4EF6;&#x5C5E;&#x7EC4;&#x6267;&#x884C;&#x6743;&#x9650;&#x4F4D;&#xFF0C;&#x5982;&#x5C5E;&#x7EC4;&#x6709;&#x6267;&#x884C;&#x6743;&#x9650;&#x5219;&#x663E;&#x793A;&#x4E3A;<code>s</code>&#xFF0C;&#x5426;&#x5219;&#x4E3A;<code>S</code>  </li>
<li><strong>&#x4FEE;&#x6539;&#xFF1A;</strong><code>chmod g{+|-}s file1</code></li>
</ul>
<h2 id="STICKY"><a href="#STICKY" class="headerlink" title="STICKY"></a>STICKY</h2><ul>
<li><strong>&#x529F;&#x80FD;&#xFF1A;</strong>&#x5BF9;&#x76EE;&#x5F55;&#x8D4B;&#x6743;&#xFF0C;&#x5728;&#x8BE5;&#x76EE;&#x5F55;&#x521B;&#x5EFA;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x53EA;&#x6709;&#x5C5E;&#x4E3B;&#x624D;&#x6709;&#x6743;&#x9650;&#x5220;&#x9664;</li>
<li><strong>&#x5C55;&#x793A;&#xFF1A;</strong>&#x5C55;&#x793A;&#x4E8E;&#x76EE;&#x5F55;&#x5176;&#x5B83;&#x7528;&#x6237;&#x6267;&#x884C;&#x6743;&#x9650;&#x4F4D;&#xFF0C;&#x5982;&#x539F;&#x6765;&#x6709;&#x6267;&#x884C;&#x6743;&#x9650;&#x5219;&#x663E;&#x793A;&#x4E3A;<code>t</code>&#xFF0C;&#x5426;&#x5219;&#x4E3A;<code>T</code></li>
<li><strong>&#x4FEE;&#x6539;&#xFF1A;</strong><code>chmod {+|-}t DIR</code><br><img src="/2016/06/25/Linux&#x7279;&#x6B8A;&#x6743;&#x9650;&#x53CA;ACL&#x7B80;&#x4ECB;/sticky1.png" alt="sticky&#x5B9E;&#x9A8C;"></li>
</ul>
<p><em>&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;/tmp&#x548C;/usr/tmp&#x6587;&#x4EF6;&#x5939;&#x5E26;&#x6709;sticky&#x6743;&#x9650;</em></p>
<h3 id="&#x6743;&#x9650;&#x6570;&#x5B57;&#x8868;&#x793A;"><a href="#&#x6743;&#x9650;&#x6570;&#x5B57;&#x8868;&#x793A;" class="headerlink" title="&#x6743;&#x9650;&#x6570;&#x5B57;&#x8868;&#x793A;"></a>&#x6743;&#x9650;&#x6570;&#x5B57;&#x8868;&#x793A;</h3><ul>
<li>SUID = 4 (100)</li>
<li>SGID = 2 (010)</li>
<li>Sticky = 1 (001)</li>
</ul>
<p>&#x4F8B;&#x5982;&#xFF1A;&#x6587;&#x4EF6;&#x6743;&#x9650;&#x4F4D;&#x4E3A;<code>rwsr-Sr-T</code>&#xFF0C;&#x7528;&#x6570;&#x5B57;&#x8868;&#x793A;&#x4E3A;<code>7744</code></p>
<h2 id="chattr&#x8BBE;&#x7F6E;&#x6743;&#x9650;"><a href="#chattr&#x8BBE;&#x7F6E;&#x6743;&#x9650;" class="headerlink" title="chattr&#x8BBE;&#x7F6E;&#x6743;&#x9650;"></a>chattr&#x8BBE;&#x7F6E;&#x6743;&#x9650;</h2><p>&#x4F7F;&#x7528;<code>chattr</code>&#x8BBE;&#x7F6E;&#x7684;&#x7279;&#x6B8A;&#x6743;&#x9650;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;<code>ls -h</code>&#x770B;&#xFF0C;&#x4F7F;&#x7528;<code>lsattr</code>&#x67E5;&#x770B;&#xFF0C;&#x8BBE;&#x7F6E;&#x6709;&#x4E24;&#x79CD;&#x5F62;&#x5F0F;&#xFF1A;</p>
<ul>
<li><code>i</code>&#xFF1A;&#x4F5C;&#x7528;&#x4E8E;&#x7684;&#x6587;&#x4EF6;&#x4E0D;&#x53EF;&#x5220;&#x9664;&#xFF0C;&#x4FEE;&#x6539;&#xFF0C;&#x6539;&#x540D;&#x53CA;&#x8BBE;&#x7F6E;&#x94FE;&#x63A5;&#xFF0C;&#x5BF9;root&#x7528;&#x6237;&#x540C;&#x6837;&#x8D77;&#x4F5C;&#x7528;  </li>
<li><code>a</code>&#xFF1A;&#x53EF;&#x5411;&#x6587;&#x4EF6;&#x4E2D;&#x8FFD;&#x52A0;&#x5185;&#x5BB9;</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chattr +|-i file1   <span class="comment"># +&#x4E3A;&#x6DFB;&#x52A0;&#xFF0C;-&#x4E3A;&#x5220;&#x9664;&#x6743;&#x9650;</span></span><br><span class="line">chattr +|-a file1   </span><br><span class="line">lsattr file1        <span class="comment"># &#x67E5;&#x770B;</span></span><br></pre></td></tr></table></figure>
<h2 id="ACL"><a href="#ACL" class="headerlink" title="ACL"></a>ACL</h2><p>access control lists&#xFF1A;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x5217;&#x8868;&#xFF0C;&#x88AB;ACL&#x63A7;&#x5236;&#x6743;&#x9650;&#x7684;&#x6587;&#x4EF6;&#x4F1A;&#x5728;&#x6743;&#x9650;&#x5B57;&#x7B26;&#x4E32;&#x540E;&#x9762;&#x52A0;&#x4E0A;<code>+</code>&#xFF0C;&#x5982;<code>rwxrwxrwx+</code>&#xFF0C;&#x5176;&#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#x4E8E;&#x666E;&#x901A;&#x8BBE;&#x7F6E;&#x7684;&#x6743;&#x9650;&#x3002;&#x5F53;&#x6587;&#x4EF6;&#x6743;&#x9650;&#x7B26;&#x540E;&#x51FA;&#x73B0;<code>+</code>&#x65F6;&#xFF0C;&#x5176;&#x5C5E;&#x7EC4;&#x7684;&#x6743;&#x9650;&#x4F4D;&#x8868;&#x793A;&#x53D7;<em>ALC_MASK</em>&#x63A7;&#x5236;&#xFF0C;&#x4F7F;&#x7528;<code>ls -l</code>&#x67E5;&#x770B;&#x7684;&#x5C5E;&#x7EC4;&#x6240;&#x663E;&#x793A;&#x7684;&#x6743;&#x9650;&#x4F1A;&#x4E0D;&#x6B63;&#x786E;&#xFF0C;&#x76F8;&#x5173;&#x547D;&#x4EE4;&#x6709;<code>getfacl</code>,<code>setfacl</code></p>
<p><em>&#x547D;&#x4EE4;&#x7528;&#x6CD5;&#x89C1;</em>&#xFF1A;<a href="http://liu2lin600.github.io/2016/05/21/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4--%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/">setfacl&#x547D;&#x4EE4;&#x7528;&#x6CD5;</a></p>
<p>&#x6682;&#x65F6;&#x5199;&#x5230;&#x8FD9;&#x2026;&#x2026;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux文本处理三剑客之awk]]></title>
      <url>http://liu2lin600.github.io/2016/06/21/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bawk/</url>
      <content type="html"><![CDATA[<p>Linux&#x6587;&#x672C;&#x5904;&#x7406;&#x4E2D;&#x7684;&#x5C60;&#x9F99;&#x5200;&#x51FA;&#x573A;</p>
<a id="more"></a>
<h2 id="&#x7B80;&#x4ECB;"><a href="#&#x7B80;&#x4ECB;" class="headerlink" title="&#x7B80;&#x4ECB;"></a>&#x7B80;&#x4ECB;</h2><p>awk&#x662F;&#x4E00;&#x79CD;&#x89E3;&#x91CA;&#x6267;&#x884C;&#x7684;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#xFF0C;&#x7528;&#x6765;&#x4E13;&#x95E8;&#x5904;&#x7406;&#x6587;&#x672C;&#x6570;&#x636E;&#xFF0C;&#x5176;&#x540D;&#x79F0;&#x662F;&#x7531;&#x5B83;&#x4EEC;&#x8BBE;&#x8BA1;&#x8005;&#x7684;&#x540D;&#x5B57;&#x7F29;&#x5199;&#x800C;&#x6765; &#x2014;&#x2014;&#x2014; Afred Aho, Peter Weinberger &#x4E0E; Brian Kernighan&#x3002;&#x5E38;&#x89C1;&#x7248;&#x672C;&#x6709;&#xFF1A;</p>
<ul>
<li>awk&#xFF1A; &#x6700;&#x539F;&#x521D;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x5B83;&#x7531; AT&amp;T &#x5B9E;&#x9A8C;&#x5BA4;&#x5F00;&#x53D1;</li>
<li>nawk&#xFF1A;awk&#x7684;&#x6539;&#x8FDB;&#x589E;&#x5F3A;&#x7248;&#x672C;</li>
<li>gawk&#xFF1A;GNU awk&#xFF0C;&#x6240;&#x6709;&#x7684; GNU/Linux &#x53D1;&#x884C;&#x7248;&#x90FD;&#x5305;&#x62EC;gawk&#xFF0C;&#x4E14;&#x5B8C;&#x5168;&#x517C;&#x5BB9;awk&#x4E0E;nawk</li>
</ul>
<p>&#x5176;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x4E3A;&#x6309;&#x884C;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x5168;&#x90E8;&#x6216;&#x5339;&#x914D;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x9ED8;&#x8BA4;&#x4EE5;&#x7A7A;&#x683C;&#x4E3A;&#x5206;&#x9694;&#x7B26;&#x5C06;&#x6BCF;&#x884C;&#x5206;&#x5272;&#x6210;&#x5B57;&#x6BB5;&#xFF0C;&#x53EF;&#x5BF9;&#x5404;&#x5B57;&#x6BB5;&#x6309;&#x67D0;&#x79CD;&#x683C;&#x5F0F;&#x8F93;&#x51FA;</p>
<h2 id="&#x8BED;&#x6CD5;"><a href="#&#x8BED;&#x6CD5;" class="headerlink" title="&#x8BED;&#x6CD5;"></a>&#x8BED;&#x6CD5;</h2><p><code>awk [OPTION] &apos;[BEGIN{action}][PATTERN]{action}[END{action}]&apos; file1...</code>  </p>
<p>&#x8BF4;&#x660E;&#xFF1A;</p>
<ul>
<li>OPTION&#xFF1A;&#x5E38;&#x7528;&#x9009;&#x9879;&#x6709;<code>-F</code>&#x548C;<code>-v</code>&#x7B49;  </li>
<li>BEGIN{&#x2026;}&#xFF1A;&#x542F;&#x52A8;&#x65F6;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;&#x90E8;&#x5206;&#xFF0C;&#x4E14;&#x53EA;&#x6267;&#x884C;&#x4E00;&#x6B21;&#xFF0C;&#x901A;&#x5E38;&#x7528;&#x6765;&#x521D;&#x59CB;&#x5316;&#x53D8;&#x91CF;&#x7B49;&#xFF0C;&#x53EF;&#x9009;  </li>
<li>PATTERN&#xFF1A;&#x9650;&#x5B9A;&#x5BF9;&#x4E8E;&#x8F93;&#x5165;&#x7684;&#x884C;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x53EF;&#x9009;  </li>
<li>{action}&#xFF1A;&#x6BCF;&#x4E00;&#x6B21;&#x8F93;&#x5165;&#x7684;&#x884C;&#x90FD;&#x4F1A;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x4E3B;&#x4F53;&#x90E8;&#x5206;&#x7684;&#x547D;&#x4EE4;</li>
<li>END{&#x2026;}&#xFF1A;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x7ED3;&#x675F;&#x65F6;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x53EF;&#x9009;</li>
</ul>
<h2 id="&#x4F7F;&#x7528;"><a href="#&#x4F7F;&#x7528;" class="headerlink" title="&#x4F7F;&#x7528;"></a>&#x4F7F;&#x7528;</h2><h3 id="0-&#x5185;&#x7F6E;&#x53D8;&#x91CF;"><a href="#0-&#x5185;&#x7F6E;&#x53D8;&#x91CF;" class="headerlink" title="0.&#x5185;&#x7F6E;&#x53D8;&#x91CF;"></a>0.&#x5185;&#x7F6E;&#x53D8;&#x91CF;</h3><p><code>$0</code>&#xFF1A;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;&#x7684;&#x5168;&#x90E8;&#x5B57;&#x6BB5;<br><code>$1~$#</code>&#xFF1A;&#x5339;&#x914D;&#x5230;&#x884C;&#x5206;&#x5272;&#x540E;&#x7684;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;<br><code>NF</code>&#xFF1A;number of field&#xFF0C;&#x5B57;&#x6BB5;&#x4E2A;&#x6570;<br><code>FS</code>&#xFF1A;input field seperator&#xFF0C;&#x8F93;&#x5165;&#x7684;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;&#x767D;&#x5B57;&#x7B26;<br><code>OFS</code>&#xFF1A;output field seperator&#xFF0C;&#x8F93;&#x51FA;&#x7684;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;&#x767D;&#x5B57;&#x7B26;<br><code>RS</code>&#xFF1A;input record seperator&#xFF0C;&#x8F93;&#x5165;&#x7684;&#x6362;&#x884C;&#x7B26;<br><code>ORS</code>&#xFF1A;output record seperator&#xFF0C;&#x8F93;&#x51FA;&#x65F6;&#x7684;&#x6362;&#x884C;&#x7B26;<br><code>NR</code>&#xFF1A;number of record&#xFF0C;&#x5F53;&#x524D;&#x8BB0;&#x5F55;&#x7684;&#x5B57;&#x6BB5;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x591A;&#x6587;&#x4EF6;&#x65F6;&#x7F16;&#x53F7;&#x7D2F;&#x52A0;<br><code>FNR</code>&#xFF1A;&#x4E0E;<code>NR</code>&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;<code>FNR</code>&#x7528;&#x4E8E;&#x8BB0;&#x5F55;&#x6B63;&#x5904;&#x7406;&#x7684;&#x884C;&#x662F;&#x5F53;&#x524D;&#x8FD9;&#x4E00;&#x6587;&#x4EF6;&#x4E2D;&#x88AB;&#x603B;&#x5171;&#x5904;&#x7406;&#x7684;&#x884C;&#x6570;<br><code>FILENAME</code>&#xFF1A;awk&#x547D;&#x4EE4;&#x6240;&#x5904;&#x7406;&#x7684;&#x6587;&#x4EF6;&#x7684;&#x540D;&#x79F0;<br><code>ARGC</code>&#xFF1A;&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x53C2;&#x6570;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x5176;awk&#x547D;&#x4EE4;&#x4E5F;&#x7B97;&#x4E00;&#x4E2A;&#x53C2;&#x6570;<br><code>ARGV</code>&#xFF1A;&#x5176;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x4FDD;&#x5B58;&#x7684;&#x662F;&#x547D;&#x4EE4;&#x884C;&#x6240;&#x7ED9;&#x5B9A;&#x7684;&#x5404;&#x53C2;&#x6570;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&apos;{print NF}&apos;</span> /etc/fstab         <span class="comment"># &#x6BCF;&#x884C;&#x5B57;&#x6BB5;&#x6570;&#xFF0C;&#x8FD9;&#x91CC;&#x662F;&#x6570;&#x91CF;&#x5F15;&#x7528;&#xFF0C;&#x4E0D;&#x662F;&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x5F15;&#x7528;</span></span><br><span class="line">awk <span class="string">&apos;{print $NF}&apos;</span> /etc/fstab        <span class="comment"># &#x6BCF;&#x884C;&#x4E2D;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x503C;</span></span><br><span class="line">awk <span class="string">&apos;{print NR}&apos;</span> file1 file2        <span class="comment"># &#x4F1A;&#x6BCF;&#x628A;&#x6240;&#x6709;&#x6587;&#x6863;&#x8FDB;&#x884C;&#x603B;&#x7684;&#x7F16;&#x53F7;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5355;&#x72EC;&#x5BF9;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x7F16;&#x53F7;</span></span><br><span class="line">awk <span class="string">&apos;{print FNR}&apos;</span> file1 file2       <span class="comment"># &#x4F1A;&#x5BF9;&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x884C;&#x6570;&#x8FDB;&#x884C;&#x5355;&#x72EC;&#x7684;&#x7F16;&#x53F7;&#x663E;&#x793A;</span></span><br><span class="line">awk <span class="string">&apos;{print FILENAME}&apos;</span> file1        <span class="comment"># &#x663E;&#x793A;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x4F46;&#x4F1A;&#x6BCF;&#x884C;&#x663E;&#x793A;&#x4E00;&#x6B21;</span></span><br><span class="line">awk <span class="string">&apos;END{print FILENAME}&apos;</span> file1     <span class="comment"># &#x663E;&#x793A;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x4F46;&#x53EA;&#x4F1A;&#x663E;&#x793A;&#x4E00;&#x6B21;</span></span><br><span class="line">awk <span class="string">&apos;END{print ARGC}&apos;</span> /etc/fstab    <span class="comment"># &#x663E;&#x793A;&#x5171;&#x6709;&#x51E0;&#x4E2A;&#x53C2;&#x6570;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-OPTION"><a href="#1-OPTION" class="headerlink" title="1.OPTION"></a>1.OPTION</h3><blockquote>
<p><code>-F</code>&#xFF1A;&#x6307;&#x660E;&#x8F93;&#x5165;&#x65F6;&#x7528;&#x5230;&#x7684;&#x5B57;&#x6BB5;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;&#x767D;&#x5B57;&#x7B26;<br><code>-v var=value</code>&#xFF1A;&#x81EA;&#x5B9A;&#x4E49;&#x53D8;&#x91CF;<br><code>-f</code>&#xFF1A;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x4E2D;&#x7684;awk&#x89C4;&#x5219;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk -v str=<span class="string">&apos;hello&apos;</span> <span class="string">&apos;{print str,$1}&apos;</span> file1       <span class="comment"># </span></span><br><span class="line">awk <span class="string">&apos;BEGIN{str=&quot;hello&quot;}{print str,$1}&apos;</span> file1    <span class="comment"># &#x6548;&#x679C;&#x540C;&#x4E0A;</span></span><br><span class="line">awk -f file1                                    <span class="comment"># awk&#x89C4;&#x5219;&#x5199;&#x5230;&#x811A;&#x672C;&#x4E2D;&#xFF0C;&#x4ECE;&#x4E2D;&#x8BFB;&#x53D6;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-PATTERN"><a href="#2-PATTERN" class="headerlink" title="2.PATTERN"></a>2.PATTERN</h3><p>&#x5E38;&#x89C1;&#x7684;&#x6A21;&#x5F0F;&#x7C7B;&#x578B;&#x6709;&#x5730;&#x5740;&#x5B9A;&#x754C;&#x3001;BEGIN/END&#x3001;&#x8868;&#x8FBE;&#x5F0F;</p>
<p><em>&#x5730;&#x5740;&#x5B9A;&#x754C;</em>&#xFF1A; </p>
<ul>
<li><code>&#x7A7A;</code>&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x610F;&#x8F93;&#x5165;&#x884C;</li>
<li><code>/pattern/</code>&#xFF1A;&#x88AB;&#x6B64;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#x5230;&#x7684;&#x6BCF;&#x4E00;&#x884C;</li>
<li><code>/pat1/,/pat2/</code>&#xFF1A;&#x7B2C;&#x4E00;&#x6B21;&#x88AB;&#x6A21;&#x5F0F;1&#x5339;&#x914D;&#x7684;&#x884C;&#x5230;&#x7B2C;&#x4E00;&#x6B21;&#x88AB;&#x6A21;&#x5F0F;2&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;</li>
<li><code>!/patter/</code>&#xFF1A;&#x53D6;&#x53CD;</li>
</ul>
<p><em>&#x8868;&#x8FBE;&#x5F0F;</em>&#xFF1A;  </p>
<ul>
<li><strong>x</strong> <code>&gt;</code>,<code>&gt;=</code>,<code>&lt;</code>,<code>&lt;=</code>,<code>==</code>,<code>!=</code>,<code>~</code>,<code>!~</code> <strong>y</strong></li>
</ul>
<p><em>BEGIN/END</em>&#xFF1A;</p>
<ul>
<li><code>BEGIN</code>&#xFF1A;&#x8BA9;&#x7528;&#x6237;&#x6307;&#x5B9A;&#x5728;&#x7B2C;&#x4E00;&#x6761;&#x8F93;&#x5165;&#x8BB0;&#x5F55;&#x88AB;&#x5904;&#x7406;&#x4E4B;&#x524D;&#x6240;&#x53D1;&#x751F;&#x7684;&#x52A8;&#x4F5C;&#xFF0C;&#x901A;&#x5E38;&#x53EF;&#x5728;&#x8FD9;&#x91CC;&#x8BBE;&#x7F6E;&#x5168;&#x5C40;&#x53D8;&#x91CF;  </li>
<li><code>END</code>&#xFF1A;&#x8BA9;&#x7528;&#x6237;&#x5728;&#x6700;&#x540E;&#x4E00;&#x6761;&#x8F93;&#x5165;&#x8BB0;&#x5F55;&#x88AB;&#x8BFB;&#x53D6;&#x4E4B;&#x540E;&#x53D1;&#x751F;&#x7684;&#x52A8;&#x4F5C; </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&apos;/^UUID/{print $1}&apos;</span> /etc/fstab              <span class="comment"># &#x4EE5;UUID&#x5F00;&#x5934;&#x7684;&#x884C;&#x7684;&#x7B2C;&#x4E00;&#x5B57;&#x6BB5;</span></span><br><span class="line">awk -F: <span class="string">&apos;$3&gt;50{print $0}&apos;</span> /etc/passwd           <span class="comment"># &#x4EE5;&#xFF1A;&#x5206;&#x5272;&#x7B2C;3&#x5B57;&#x6BB5;&#x503C;&#x5927;&#x4E8E;50&#x7684;&#x884C;</span></span><br><span class="line">awk -F: <span class="string">&apos;$NF~/bash$/{print $0}&apos;</span> /etc/passwd     <span class="comment"># &#x6700;&#x540E;&#x5B57;&#x6BB5;&#x4E3A;bash&#x7ED3;&#x5C3E;&#x7684;&#x884C;</span></span><br><span class="line">awk <span class="string">&apos;BEGIN{print &quot;hello&quot;}{print $1}&apos;</span> file1      <span class="comment"># &#x5728;&#x6700;&#x5F00;&#x59CB;&#x8F93;&#x51FA;hello&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5236;&#x505A;&#x8868;&#x5934;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-action"><a href="#3-action" class="headerlink" title="3.action"></a>3.action</h3><h4 id="print"><a href="#print" class="headerlink" title="print"></a>print</h4><p><code>print intem1,item2...</code>  </p>
<blockquote>
<ul>
<li>&#x5404;&#x9879;&#x76EE;&#x4E4B;&#x95F4;&#x4F7F;&#x7528;&#x9017;&#x53F7;&#x9694;&#x5F00;&#xFF0C;&#x800C;&#x8F93;&#x51FA;&#x65F6;&#x5219;&#x4EE5;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x5206;&#x9694;</li>
<li>&#x8F93;&#x51FA;&#x7684;item&#x53EF;&#x4EE5;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x6570;&#x503C;&#x3001;&#x5F53;&#x524D;&#x8BB0;&#x5F55;&#x7684;&#x5B57;&#x6BB5;(&#x5982;$1)&#x3001;&#x53D8;&#x91CF;&#x6216;awk&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#xFF1B;&#x6570;&#x503C;&#x4F1A;&#x5148;&#x8F6C;&#x6362;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x540E;&#x518D;&#x8F93;&#x51FA;</li>
<li>print&#x547D;&#x4EE4;&#x540E;&#x9762;&#x7684;item&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;&#x6B64;&#x65F6;&#x5176;&#x529F;&#x80FD;&#x76F8;&#x5F53;&#x4E8E;print $0, &#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x8F93;&#x51FA;&#x7A7A;&#x767D;&#x884C;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x4F7F;&#x7528;print &#x201C;&#x201D;</li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&apos;BEGIN{print &quot;line one\nline two\nline three&quot;}&apos;</span></span><br></pre></td></tr></table></figure>
<h4 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h4><p><code>printf format, item1, item2, ...</code></p>
<blockquote>
<ul>
<li>&#x5176;&#x4E0E;print&#x547D;&#x4EE4;&#x7684;&#x6700;&#x5927;&#x4E0D;&#x540C;&#x662F;&#xFF0C;printf&#x9700;&#x8981;&#x6307;&#x5B9A;format&#xFF1B;</li>
<li>format&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x540E;&#x9762;&#x7684;&#x6BCF;&#x4E2A;item&#x7684;&#x8F93;&#x51FA;&#x683C;&#x5F0F;&#xFF1B;</li>
<li>printf&#x8BED;&#x53E5;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x6253;&#x5370;&#x6362;&#x884C;&#x7B26;&#xFF1B;\n</li>
</ul>
</blockquote>
<p>format&#x683C;&#x5F0F;&#x7684;&#x6307;&#x793A;&#x7B26;&#x90FD;&#x4EE5;%&#x5F00;&#x5934;&#xFF0C;&#x540E;&#x8DDF;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#xFF1B;</p>
<blockquote>
<p><code>%s</code>&#xFF1A;&#x663E;&#x793A;&#x5B57;&#x7B26;&#x4E32;<br><code>%d,%i</code>&#xFF1A;&#x5341;&#x8FDB;&#x5236;&#x6574;&#x6570;<br><code>%c</code>&#xFF1A;&#x663E;&#x793A;&#x5B57;&#x7B26;&#x7684;ASCII&#x7801;<br><code>%e,%E</code>&#xFF1A;&#x79D1;&#x5B66;&#x8BA1;&#x6570;&#x6CD5;&#x663E;&#x793A;&#x6570;&#x503C;<br><code>%f</code>&#xFF1A;&#x663E;&#x793A;&#x6D6E;&#x70B9;&#x6570;<br><code>%g,%G</code>&#xFF1A;&#x4EE5;&#x79D1;&#x5B66;&#x8BA1;&#x6570;&#x6CD5;&#x7684;&#x683C;&#x5F0F;&#x6216;&#x6D6E;&#x70B9;&#x6570;&#x7684;&#x683C;&#x5F0F;&#x663E;&#x793A;&#x6570;&#x503C;<br><code>%u</code>&#xFF1A;&#x65E0;&#x7B26;&#x53F7;&#x6574;&#x6570;<br><code>%%</code>&#xFF1A;&#x663E;&#x793A;%&#x81EA;&#x8EAB;  </p>
<blockquote>
<p>&#x4FEE;&#x9970;&#x7B26;&#xFF1A;<br><code>N</code>: &#x663E;&#x793A;&#x5BBD;&#x5EA6;<br><code>-</code>: &#x5DE6;&#x5BF9;&#x9F50;<br><code>+</code>&#xFF1A;&#x663E;&#x793A;&#x6570;&#x503C;&#x7B26;&#x53F7;  </p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&apos;{printf &quot;%-15s %i\n&quot;,$1,$3}&apos;</span> /etc/passwd   <span class="comment"># &#x6CE8;&#x610F;&#x52A0;&#x6362;&#x884C;&#x7B26;</span></span><br></pre></td></tr></table></figure>
<h4 id="&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;"><a href="#&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;" class="headerlink" title="&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;"></a>&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;</h4><p><code>print items &gt; output-file</code><br><code>print items &gt;&gt; output-file</code><br><code>print items | command</code>  </p>
<p>&#x7279;&#x6B8A;&#x6587;&#x4EF6;&#xFF1A;  </p>
<ul>
<li><code>/dev/stdin</code>&#xFF1A;&#x6807;&#x51C6;&#x8F93;&#x5165;  </li>
<li><code>/dev/sdtout</code>&#xFF1A;&#x6807;&#x51C6;&#x8F93;&#x51FA;  </li>
<li><code>/dev/stderr</code>&#xFF1A;&#x9519;&#x8BEF;&#x8F93;&#x51FA;  </li>
<li><code>/dev/fd/N</code>&#xFF1A;&#x67D0;&#x7279;&#x5B9A;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#xFF0C;&#x5982;/dev/stdin&#x5C31;&#x76F8;&#x5F53;&#x4E8E;/dev/fd/0</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&apos;{printf &quot;%-15s %i\n&quot;,$1,$3 &gt; &quot;/dev/stderr&quot; }&apos;</span> /etc/passwd</span><br></pre></td></tr></table></figure>
<h4 id="&#x64CD;&#x4F5C;&#x7B26;"><a href="#&#x64CD;&#x4F5C;&#x7B26;" class="headerlink" title="&#x64CD;&#x4F5C;&#x7B26;"></a>&#x64CD;&#x4F5C;&#x7B26;</h4><ul>
<li>&#x7B97;&#x672F;&#x64CD;&#x4F5C;&#x7B26;&#xFF1A;<strong>X</strong> <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, <code>**</code>, <code>^</code> <strong>Y</strong>   (**&#x548C;^&#x540C;&#x4E3A;&#x6B21;&#x65B9;)  </li>
<li>&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#x7B26;&#xFF1A;<strong>X</strong> <code>=</code>, <code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>%=</code>, <code>**=</code>, <code>^=</code>, <strong>Y</strong>  <code>++</code>,<code>--</code>  </li>
<li>&#x6BD4;&#x8F83;&#x64CD;&#x4F5C;&#x7B26;&#xFF1A;<strong>X</strong> <code>&gt;</code>,<code>&gt;=</code>,<code>&lt;</code>,<code>&lt;=</code>,<code>==</code>,<code>!=</code>,<code>~</code>,<code>!~</code> <strong>Y</strong>  </li>
<li>&#x903B;&#x8F91;&#x5173;&#x7CFB;&#x7B26;&#xFF1A;<strong>X</strong> <code>&amp;&amp;</code>,<code>||</code> <strong>Y</strong>  </li>
<li>&#x4E09;&#x5143;&#x8FD0;&#x7B97;&#x7B26;&#xFF1A;selector <code>?</code> if-true-exp <code>:</code> if-false-exp</li>
</ul>
<h4 id="&#x6761;&#x4EF6;&#x63A7;&#x5236;"><a href="#&#x6761;&#x4EF6;&#x63A7;&#x5236;" class="headerlink" title="&#x6761;&#x4EF6;&#x63A7;&#x5236;"></a>&#x6761;&#x4EF6;&#x63A7;&#x5236;</h4><ul>
<li><strong>if-else&#xFF1A;</strong>  <code>if (condition) {then-body} else {[ else-body ]}</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&apos;{if ($1==&quot;root&quot;) print $1, &quot;Admin&quot;; else print $1, &quot;Common User&quot;}&apos;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&apos;{if ($1==&quot;root&quot;) printf &quot;%-15s: %s\n&quot;, $1,&quot;Admin&quot;; else printf &quot;%-15s: %s\n&quot;, $1, &quot;Common User&quot;}&apos;</span> /etc/passwd</span><br><span class="line">awk -F: -v sum=0 <span class="string">&apos;{if ($3&gt;=500) sum++}END{print sum}&apos;</span> /etc/passwd</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>while&#xFF1A;</strong><code>while (condition){statement1; statment2; ...}</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&apos;{i=1;while (i&lt;=3) {print $i;i++}}&apos;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&apos;{i=1;while (i&lt;=NF) { if (length($i)&gt;=4) {print $i}; i++ }}&apos;</span> /etc/passwd</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>do-while&#xFF1A;</strong><code>do {statement1, statement2, ...} while (condition)</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&apos;{i=1;do {print $i;i++}while(i&lt;=3)}&apos;</span> /etc/passwd</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>for&#xFF1A;</strong><br>  <code>for ( variable assignment; condition; iteration process) { statement1, statement2, ...}</code><br>  <code>for (i in array) {statement1, statement2, ...}</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&apos;{for(i=1;i&lt;=3;i++) print $i}&apos;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&apos;{for(i=1;i&lt;=NF;i++) { if (length($i)&gt;=4) {print $i}}}&apos;</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">&apos;$NF!~/^$/{BASH[$NF]++}END{for(A in BASH){printf &quot;%15s:%i\n&quot;,A,BASH[A]}}&apos;</span> /etc/passwd</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>case&#xFF1A;</strong><code>switch (expression) { case VALUE or /REGEXP/: statement1, statement2,... default: statement1, ...}</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&apos;BEGIN{foo=0;switch(foo){case 0:print &quot;yes&quot;;break; case 1:print &quot;no&quot;;break; default: print &quot;unknow&quot;}}&apos;</span></span><br></pre></td></tr></table></figure>
<p><em>3.1.3&#x7248;&#x672C;&#x6DFB;&#x52A0;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x9700;&#x6DFB;&#x52A0;<code>--enable-switch</code>&#x9009;&#x9879;&#x624D;&#x6709;&#x6548;&#xFF0C;&#x9AD8;&#x7248;&#x672C;4+&#x5219;&#x65E0;&#x9700;&#x52A0;</em></p>
<ul>
<li><strong>next&#xFF1A;</strong><br>  &#x63D0;&#x524D;&#x7ED3;&#x675F;&#x5BF9;&#x672C;&#x884C;&#x6587;&#x672C;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x5E76;&#x63A5;&#x7740;&#x5904;&#x7406;&#x4E0B;&#x4E00;&#x884C;</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&apos;{if($3%2==0) next;print $1,$3}&apos;</span> /etc/passwd    <span class="comment"># &#x663E;&#x793A;&#x5176;ID&#x53F7;&#x4E3A;&#x5947;&#x6570;&#x7684;&#x7528;&#x6237;</span></span><br></pre></td></tr></table></figure>
<h4 id="&#x6570;&#x7EC4;"><a href="#&#x6570;&#x7EC4;" class="headerlink" title="&#x6570;&#x7EC4;"></a>&#x6570;&#x7EC4;</h4><p><code>array[index]</code>  </p>
<p>index&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EFB;&#x610F;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5F53;&#x67D0;&#x6570;&#x636E;&#x7EC4;&#x5143;&#x7D20;&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x8981;&#x5F15;&#x7528;&#x5176;&#x65F6;&#xFF0C;awk&#x4F1A;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x6B64;&#x5143;&#x7D20;&#x5E76;&#x521D;&#x59CB;&#x5316;&#x4E3A;&#x7A7A;&#x4E32;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x8981;&#x5224;&#x65AD;&#x67D0;&#x6570;&#x636E;&#x7EC4;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x67D0;&#x5143;&#x7D20;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;index in array&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<ul>
<li>&#x904D;&#x5386;&#xFF1A;<code>for (var in array) { statement1, ... }</code></li>
<li>&#x5220;&#x9664;&#x6570;&#x7EC4;&#x53D8;&#x91CF;&#xFF1A;<code>delete  array[index]</code>  </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat -ant | awk <span class="string">&apos;/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}&apos;</span>      <span class="comment"># &#x6BCF;&#x51FA;&#x73B0;&#x4E00;&#x88AB;/^tcp/&#x6A21;&#x5F0F;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;&#xFF0C;&#x6570;&#x7EC4;S[$NF]&#x5C31;&#x52A0;1&#xFF0C;NF&#x4E3A;&#x5F53;&#x524D;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x6B64;&#x5904;&#x7528;&#x5176;&#x503C;&#x505A;&#x4E3A;&#x6570;&#x7EC4;S&#x7684;&#x5143;&#x7D20;&#x7D22;&#x5F15;&#xFF1B;</span></span><br><span class="line"></span><br><span class="line">awk <span class="string">&apos;{counts[$1]++}; END {for(url in counts) print counts[url], url}&apos;</span> /var/<span class="built_in">log</span>/httpd/access_log     <span class="comment">#&#x7EDF;&#x8BA1;&#x67D0;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x4E2D;IP&#x5730;&#x7684;&#x8BBF;&#x95EE;&#x91CF;</span></span><br></pre></td></tr></table></figure>
<h4 id="&#x5185;&#x7F6E;&#x51FD;&#x6570;"><a href="#&#x5185;&#x7F6E;&#x51FD;&#x6570;" class="headerlink" title="&#x5185;&#x7F6E;&#x51FD;&#x6570;"></a>&#x5185;&#x7F6E;&#x51FD;&#x6570;</h4><p><code>rand()</code>&#xFF1A;&#x968F;&#x673A;&#x6570;&#xFF0C;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;0&#xFF0C;&#x5C0F;&#x4E8E;1<br><code>gsub(str1, str2, str)</code>&#xFF1A;&#x5728;str&#x4E2D;&#x5C06;str1&#x5168;&#x90E8;&#x66FF;&#x6362;&#x4E3A;str2&#xFF0C;&#x652F;&#x6301;&#x914D;&#x7B26;&#x67E5;&#x627E;<br><code>index(str1, str2 )</code>&#xFF1A;&#x5728;str1&#x5185;&#x627E;&#x9996;&#x6B21;&#x51FA;&#x73B0;str2&#x51FA;&#x73B0;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x6CA1;&#x6709;&#x5219;&#x8FD4;&#x56DE;0<br><code>split(str,array[,fieldsep[,seps]])</code>&#xFF1A;&#x5C06;str&#x4EE5;fieldsep&#x4E3A;&#x5206;&#x9694;&#x7B26;&#x5206;&#x9694;&#xFF0C;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x4FDD;&#x5B58;&#x81F3;array&#x6570;&#x7EC4;&#x4E2D;&#xFF0C;&#x4E0B;&#x6807;&#x4E3A;&#x4ECE;0&#x5F00;&#x59CB;<br><code>length([str])</code>&#xFF1A;&#x8FD4;&#x56DE;string&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x5B57;&#x7B26;&#x7684;&#x4E2A;&#x6570;<br><code>substr(str, start [, length])</code>&#xFF1A;&#x622A;&#x53D6;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4ECE;start&#x5F00;&#x59CB;&#xFF0C;&#x53D6;length&#x4E2A;&#xFF0C;start&#x4ECE;1&#x5F00;&#x59CB;&#x8BA1;&#x6570;<br><code>system(command)</code>&#xFF1A;&#x6267;&#x884C;&#x7CFB;&#x7EDF;&#x547D;&#x4EE4;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x81F3;awk<br><code>systime()</code>&#xFF1A;&#x7CFB;&#x7EDF;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x6233;<br><code>mktime(&quot;YYYY MM DD HH MM SS[ DST]&quot;)</code>&#xFF1A;&#x6307;&#x5B9A;&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x6233;&#xFF0C;&#x6CE8;&#x610F;&#x52A0;&#x5F15;&#x53F7;<br><code>strftime(format [,timestamp [,utc-flage]])</code>&#xFF1A;&#x751F;&#x6210;&#x6307;&#x5B9A;&#x683C;&#x5F0F;&#x65F6;&#x95F4;&#xFF0C;&#x5177;&#x4F53;&#x683C;&#x5F0F;&#x53C2;&#x8003;date&#x547D;&#x4EE4;<br><code>tolower(str)</code>&#xFF1A;&#x8F6C;&#x4E3A;&#x5C0F;&#x5199;<br><code>toupper(str)</code>&#xFF1A;&#x8F6C;&#x4E3A;&#x5927;&#x5199;  </p>
<p><em>&#x66F4;&#x591A;&#x51FD;&#x6570;&#x5185;&#x5BB9;&#x67E5;&#x770B;man&#x5E2E;&#x52A9;</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&apos;BEGIN{str=&quot;this is a test&quot;;split(str,A,&quot; &quot;);print length(A);for(i in A){print i,A[i];}}&apos;</span></span><br><span class="line">awk <span class="string">&apos;BEGIN{str=&quot;str std str2&quot;;gsub(&quot;str&quot;,&quot;STR&quot;,str);print str}&apos;</span> </span><br><span class="line">awk <span class="string">&apos;BEGIN{str=&quot;this is a test&quot;;b=match(str,&quot;is&quot;);print b}&apos;</span></span><br><span class="line">awk <span class="string">&apos;BEGIN{str=&quot;this is a test2016&quot;;print substr(str,4,6)}&apos;</span> </span><br><span class="line">netstat -ant | awk <span class="string">&apos;/:80\&gt;/{split($5,clients,&quot;:&quot;);IP[clients[1]]++}END{for(i in IP){print IP[i],i}}&apos;</span> | sort -rn | head -50</span><br><span class="line">awk <span class="string">&apos;BEGIN{print mktime(&quot;2016 06 21 11 22 33&quot;)}&apos;</span></span><br><span class="line">awk <span class="string">&apos;BEGIN{print strftime(&quot;%Y-%m-%d %H:%M:%S&quot;,systime())}&apos;</span></span><br><span class="line">awk <span class="string">&apos;{system(&quot;mkdir &quot; ($NF-1)}&apos;</span> filename    <span class="comment"># &#x5012;&#x6570;&#x7B2C;&#x4E8C;&#x4E2A;&#x5B57;&#x6BB5;&#x505A;&#x4E3A;&#x76EE;&#x5F55;&#x540D;&#x521B;&#x5EFA;&#x76EE;&#x5F55;</span></span><br></pre></td></tr></table></figure>
<p>&#x4EE5;&#x4E0A;&#x5185;&#x5BB9;&#x53C2;&#x8003;&#x81EA;&#x9A6C;&#x54E5;&#x7B14;&#x8BB0;&#xFF0C;&#x4EE5;&#x5907;&#x65E5;&#x540E;&#x67E5;&#x770B;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux用户及权限介绍]]></title>
      <url>http://liu2lin600.github.io/2016/06/12/Linux%E7%94%A8%E6%88%B7%E5%8F%8A%E6%9D%83%E9%99%90%E4%BB%8B%E7%BB%8D/</url>
      <content type="html"><![CDATA[<p>&#x6D45;&#x8C08;linux&#x4E0A;&#x7528;&#x6237;&#x3001;&#x7EC4;&#x53CA;&#x6743;&#x9650;&#x76F8;&#x5173;&#x5185;&#x5BB9;<br><a id="more"></a></p>
<blockquote>
<p>Linux&#x6700;&#x4F18;&#x79C0;&#x7684;&#x5730;&#x65B9;&#x4E4B;&#x4E00;&#x5C31;&#x5728;&#x4E8E;&#x4ED6;&#x7684;&#x591A;&#x7528;&#x6237;&#x591A;&#x4EFB;&#x52A1;&#x73AF;&#x5883;&#xFF0C;&#x5728;&#x7CFB;&#x7EDF;&#x53EF;&#x5EFA;&#x7ACB;&#x591A;&#x4E2A;&#x7528;&#x6237;&#xFF0C;&#x800C;&#x591A;&#x4E2A;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5728;&#x540C;&#x65F6;&#x767B;&#x5F55;&#x540C;&#x6267;&#x884C;&#x5404;&#x81EA;&#x4E0D;&#x540C;&#x7684;&#x4EFB;&#x52A1;&#x800C;&#x4E92;&#x4E0D;&#x5F71;&#x54CD;&#xFF0C;&#x800C;&#x4E3A;&#x4E86;&#x8BA9;&#x5404;&#x4E2A;&#x4F7F;&#x7528;&#x8005;&#x5177;&#x6709;&#x8F83;&#x4FDD;&#x5BC6;&#x7684;&#x6587;&#x4EF6;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x6B64;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x7BA1;&#x7406;&#x5C31;&#x53D8;&#x7684;&#x5F88;&#x91CD;&#x8981;&#x4E86;&#x3002;&#x4E5F;&#x6B63;&#x662F;&#x901A;&#x8FC7;&#x5BF9;&#x4E8E;&#x6743;&#x9650;&#x7684;&#x5212;&#x5206;&#x4E0E;&#x7BA1;&#x7406;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x591A;&#x7528;&#x6237;&#x591A;&#x4EFB;&#x52A1;&#x7684;&#x8FD0;&#x884C;&#x673A;&#x5236;</p>
</blockquote>
<h3 id="&#x7528;&#x6237;&#x5206;&#x7C7B;"><a href="#&#x7528;&#x6237;&#x5206;&#x7C7B;" class="headerlink" title="&#x7528;&#x6237;&#x5206;&#x7C7B;"></a>&#x7528;&#x6237;&#x5206;&#x7C7B;</h3><ol>
<li><strong>&#x8D85;&#x7EA7;&#x7528;&#x6237;</strong>&#xFF1A;&#x9ED8;&#x8BA4;root&#x7528;&#x6237;&#xFF0C;&#x62E5;&#x6709;&#x5BF9;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x6700;&#x9AD8;&#x6743;&#x9650;&#xFF0C;&#x6743;&#x9650;&#x8BBE;&#x7F6E;&#x5BF9;&#x5176;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#xFF08;UID:0&#xFF0C;GID:0&#xFF09;</li>
<li><strong>&#x666E;&#x901A;&#x7528;&#x6237;</strong>&#xFF1A;&#x5177;&#x6709;&#x767B;&#x5F55;&#x7CFB;&#x7EDF;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x53D7;&#x76F8;&#x5E94;&#x6743;&#x9650;&#x7EA6;&#x675F;&#xFF08;UID/GID:500-60000 [centos7:1000-60000]&#xFF09;</li>
<li><strong>&#x7CFB;&#x7EDF;&#x7528;&#x6237;</strong>&#xFF1A;&#x4E0D;&#x80FD;&#x767B;&#x5F55;&#x7CFB;&#x7EDF;&#xFF0C;&#x7528;&#x4E8E;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x6765;&#x6EE1;&#x8DB3;&#x76F8;&#x5E94;&#x7684;&#x7CFB;&#x7EDF;&#x8FDB;&#x7A0B;&#x5BF9;&#x6587;&#x4EF6;&#x5C5E;&#x4E3B;&#x7684;&#x8981;&#x6C42;&#xFF08;UID/GID:1-499 [7:1-999]&#xFF09;</li>
</ol>
<h3 id="&#x7528;&#x6237;&#x7EC4;"><a href="#&#x7528;&#x6237;&#x7EC4;" class="headerlink" title="&#x7528;&#x6237;&#x7EC4;"></a>&#x7528;&#x6237;&#x7EC4;</h3><p>&#x7528;&#x6237;&#x7EC4;&#x662F;&#x5177;&#x6709;&#x76F8;&#x540C;&#x7279;&#x5F81;&#x7528;&#x6237;&#x7684;&#x903B;&#x8F91;&#x96C6;&#x5408;&#xFF0C;&#x6709;&#x65F6;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8BA9;&#x591A;&#x4E2A;&#x7528;&#x6237;&#x5177;&#x6709;&#x76F8;&#x540C;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x6BD4;&#x5982;&#x67E5;&#x770B;&#x3001;&#x4FEE;&#x6539;&#x67D0;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x7528;&#x6237;&#x52A0;&#x5165;&#x76F8;&#x5E94;&#x7EC4;&#x4E2D;&#xFF0C;&#x540C;&#x65F6;&#x8BBE;&#x7F6E;&#x8BE5;&#x7EC4;&#x62E5;&#x6709;&#x67D0;&#x4E9B;&#x6743;&#x9650;&#xFF0C;&#x8FD9;&#x6837;&#x8BE5;&#x7EC4;&#x4E0B;&#x7684;&#x7528;&#x6237;&#x5C31;&#x540C;&#x65F6;&#x5177;&#x6709;&#x76F8;&#x5173;&#x6743;&#x9650;&#xFF0C;&#x4EE5;&#x7B80;&#x5316;&#x7528;&#x6237;&#x7BA1;&#x7406;<br>&#x3002;&#x6839;&#x636E;&#x529F;&#x80FD;&#x7EC4;&#x53EF;&#x6709;3&#x79CD;&#x5206;&#x7C7B;&#x65B9;&#x5F0F;&#xFF1A;</p>
<ol>
<li>&#x666E;&#x901A;&#x7528;&#x6237;&#x7EC4;&#x548C;&#x7BA1;&#x7406;&#x5458;&#x7EC4;</li>
<li>&#x57FA;&#x672C;&#x7EC4;&#x548C;&#x9644;&#x52A0;&#x7EC4;</li>
<li>&#x79C1;&#x6709;&#x7EC4;&#x548C;&#x516C;&#x5171;&#x7EC4;</li>
</ol>
<p><em>&#x65B0;&#x5EFA;&#x7528;&#x6237;&#x65F6;&#x9ED8;&#x8BA4;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x540C;&#x540D;&#x7684;&#x7EC4;&#x4F5C;&#x4E3A;&#x5176;&#x79C1;&#x6709;&#x7EC4;</em></p>
<h3 id="&#x6587;&#x4EF6;&#x6743;&#x9650;"><a href="#&#x6587;&#x4EF6;&#x6743;&#x9650;" class="headerlink" title="&#x6587;&#x4EF6;&#x6743;&#x9650;"></a>&#x6587;&#x4EF6;&#x6743;&#x9650;</h3><p>Linux&#x4E00;&#x822C;&#x5C06;&#x6587;&#x4EF6;&#x53EF;&#x5B58;&#x53D6;&#x7684;&#x8EAB;&#x4EFD;&#x5206;&#x4E3A;&#x4E09;&#x4E2A;&#x7C7B;&#x522B;&#xFF1A;owner(&#x6240;&#x6709;&#x8005;)&#x3001;group(&#x6240;&#x5C5E;&#x7EC4;)&#x548C;others(&#x5176;&#x5B83;)&#xFF0C;&#x4E14;&#x4E09;&#x79CD;&#x8EAB;&#x4EFD;&#x5404;&#x6709;read(&#x8BFB;)&#x3001;write(&#x5199;)&#x548C;execute(&#x6267;&#x884C;) &#x7B49;&#x6743;&#x9650;&#x3002;&#x5F53;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x53D1;&#x8D77;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x65F6;&#xFF0C;&#x6B64;&#x8FDB;&#x7A0B;&#x5C06;&#x7EE7;&#x627F;&#x7528;&#x6237;&#x7684;&#x5C5E;&#x4E3B;&#x3001;&#x5C5E;&#x7EC4;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x518D;&#x4EE5;&#x8FDB;&#x7A0B;&#x7EE7;&#x627F;&#x7684;&#x6743;&#x9650;&#x6765;&#x63A7;&#x5236;&#x6587;&#x4EF6;&#x7684;&#x8BBF;&#x95EE;&#x6743;&#x9650;<br>&#x901A;&#x8FC7;<code>ls -l</code>&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x67E5;&#x770B;&#x6587;&#x4EF6;&#x6743;&#x9650;<br><img src="/2016/06/12/Linux&#x7528;&#x6237;&#x53CA;&#x6743;&#x9650;&#x4ECB;&#x7ECD;/file_mode.png" alt="&#x6587;&#x4EF6;&#x6743;&#x9650;"></p>
<p><strong>&#x6587;&#x4EF6;&#x7C7B;&#x578B;</strong>&#xFF1A;</p>
<blockquote>
<p><code>-</code>&#xFF1A;&#x4E00;&#x822C;&#x6587;&#x4EF6;<br><code>d</code>&#xFF1A;directory &#x76EE;&#x5F55;<br><code>c</code>&#xFF1A;character &#x5B57;&#x7B26;&#x8BBE;&#x5907;<br><code>b</code>&#xFF1A;block &#x5757;&#x8BBE;&#x5907;<br><code>l</code>&#xFF1A;link &#x94FE;&#x63A5;&#x6587;&#x4EF6;<br><code>p</code>&#xFF1A;pipe &#x7BA1;&#x9053;<br><code>s</code>&#xFF1A;socket &#x5957;&#x8282;&#x5B57;  </p>
</blockquote>
<p><strong>&#x7528;&#x6237;&#x6743;&#x9650;</strong>&#xFF1A;</p>
<blockquote>
<p>&#x524D;3&#x4F4D;&#xFF1A;&#x5C5E;&#x4E3B;(u)&#x6743;&#x9650;<br>&#x4E2D;3&#x4F4D;&#xFF1A;&#x5C5E;&#x7EC4;(g)&#x6743;&#x9650;<br>&#x540E;3&#x4F4D;&#xFF1A;&#x5176;&#x5B83;(o)&#x6743;&#x9650;  </p>
</blockquote>
<ul>
<li>r&#xFF1A;&#x8BFB;&#xFF0C;&#x5185;&#x6838;&#x7528;4&#x8868;&#x793A;</li>
<li>w&#xFF1A;&#x5199;&#xFF0C;2</li>
<li>x&#xFF1A;&#x6267;&#x884C;&#xFF0C;1</li>
</ul>
<p><strong>&#x76EE;&#x5F55;&#x548C;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x533A;&#x522B;</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">&#x8BFB;(read)</th>
<th style="text-align:center">&#x5199;(write)</th>
<th style="text-align:center">&#x6267;&#x884C;(execute)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&#x5BF9;&#x6587;&#x4EF6;</td>
<td style="text-align:center">cat,more,head..</td>
<td style="text-align:center">vi,echo..</td>
<td style="text-align:center">./**&#x6267;&#x884C;</td>
</tr>
<tr>
<td style="text-align:center">&#x5BF9;&#x76EE;&#x5F55;</td>
<td style="text-align:center">ls</td>
<td style="text-align:center">touch,cp,mv,rm</td>
<td style="text-align:center">cd</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x53CA;&#x914D;&#x7F6E;"><a href="#&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x53CA;&#x914D;&#x7F6E;" class="headerlink" title="&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x53CA;&#x914D;&#x7F6E;"></a>&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x53CA;&#x914D;&#x7F6E;</h3><p><strong>1. /etc/passwd</strong>&#xFF1A;&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x7528;&#x6237;&#x540D;:&#x5BC6;&#x7801;:UID:GID:&#x6CE8;&#x91CA;&#x4FE1;&#x606F;:&#x5BB6;&#x76EE;&#x5F55;:&#x9ED8;&#x8BA4;Shell</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br></pre></td></tr></table></figure>
<p>&#x6BCF;&#x4E2A;&#x7528;&#x5192;&#x53F7;&#x9694;&#x5F00;&#x7684;&#x5B57;&#x6BB5;&#x542B;&#x4E49;&#xFF1A;</p>
<ol>
<li>&#x7528;&#x6237;&#x540D;&#xFF1A;&#x7528;&#x6237;&#x7684;&#x540D;&#x79F0;</li>
<li>&#x5BC6;&#x7801;&#xFF1A;X&#x8868;&#x793A;&#x5360;&#x4F4D;&#x7B26;&#xFF0C;&#x5BC6;&#x7801;&#x4FE1;&#x606F;&#x4FDD;&#x5B58;&#x5728;/etc/shadow</li>
<li>UID&#xFF1A;&#x7528;&#x6237;&#x8BC6;&#x522B;&#x7801;</li>
<li>GID&#xFF1A;&#x7528;&#x6237;&#x6240;&#x5C5E;&#x7EC4;&#x7684;GID(&#x57FA;&#x672C;&#x7EC4;)</li>
<li>&#x6CE8;&#x91CA;&#x4FE1;&#x606F;&#xFF1A;&#x5907;&#x6CE8;&#x7528;&#x6237;&#x7684;&#x57FA;&#x672C;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x7528;&#x6237;&#x7684;&#x4F4F;&#x5740;&#x3001;&#x7535;&#x8BDD;&#x3001;&#x59D3;&#x540D;&#x7B49;</li>
<li>&#x5BB6;&#x76EE;&#x5F55;&#xFF1A;&#x7CFB;&#x7EDF;&#x767B;&#x5F55;&#x7528;&#x6237;&#x540E;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;</li>
<li>&#x9ED8;&#x8BA4;shell&#xFF1A;&#x5B9A;&#x4E49;&#x7528;&#x6237;&#x767B;&#x5F55;&#x7CFB;&#x7EDF;&#x6240;&#x4F7F;&#x7528;&#x7684;shell,&#x6307;&#x5B9A;&#x7684;shell&#x9700;&#x8981;&#x5728;/etc/shells&#x4E2D;&#x51FA;&#x73B0;</li>
</ol>
<p><strong>2. /etc/shadow</strong>&#xFF1A;&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;&#x4FE1;&#x606F;&#xFF0C;&#x53EA;&#x6709;root&#x624D;&#x6709;&#x8BFB;&#x5199;&#x6743;&#x9650;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x7528;&#x6237;&#x540D;:&#x5BC6;&#x7801;:&#x4E0A;&#x4E00;&#x6B21;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#x7684;&#x65F6;&#x95F4;:&#x5BC6;&#x7801;&#x6700;&#x77ED;&#x4F7F;&#x7528;&#x671F;&#x9650;:&#x6700;&#x957F;&#x4F7F;&#x7528;&#x671F;&#x9650;:&#x8B66;&#x544A;&#x65F6;&#x95F4;:&#x5E10;&#x53F7;&#x7981;&#x7528;&#x671F;&#x9650;:&#x5E10;&#x6237;&#x8FC7;&#x671F;&#x65F6;&#x95F4;:&#x4FDD;&#x7559;&#x5B57;&#x6BB5;</span></span><br><span class="line">liu:<span class="variable">$6</span><span class="variable">$IEfGuajTtREgj2sW</span><span class="variable">$iBPvAGGTKgkmaiUtOlqDjElzcPYGx1wvhbKgj</span>:16930:0:99999:7:::</span><br></pre></td></tr></table></figure>
<ol>
<li>&#x7528;&#x6237;&#x540D;: &#x5BF9;&#x5E94;/etc/passwd&#x6587;&#x4EF6;</li>
<li>&#x5BC6;&#x7801;: &#x52A0;&#x5BC6;&#x7684;&#x5BC6;&#x7801;</li>
<li>&#x4E0A;&#x4E00;&#x6B21;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#x7684;&#x65F6;&#x95F4;: &#x6307;&#x7528;&#x6237;&#x4E0A;&#x6B21;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#x7684;&#x65F6;&#x95F4;(&#x65F6;&#x95F4;&#x6233;)</li>
<li>&#x5BC6;&#x7801;&#x6700;&#x77ED;&#x4F7F;&#x7528;&#x671F;&#x9650;: &#x6307;&#x7528;&#x6237;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x5230;&#x591A;&#x5C11;&#x5929;&#x540E;&#x65B9;&#x53EF;&#x66F4;&#x6539;&#x5BC6;&#x7801;&#xFF0C;0&#x8868;&#x793A;&#x7981;&#x7528;</li>
<li>&#x5BC6;&#x7801;&#x6700;&#x957F;&#x4F7F;&#x7528;&#x671F;&#x9650;: &#x6307;&#x7528;&#x6237;&#x7684;&#x5BC6;&#x7801;&#x5230;&#x591A;&#x5C11;&#x5929;&#x540E;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x5BC6;&#x7801;</li>
<li>&#x8B66;&#x544A;&#x65F6;&#x95F4;: &#x6307;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x5230;&#x671F;&#x524D;&#x591A;&#x5C11;&#x5929;&#x63D0;&#x793A;&#x7528;&#x6237;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#xFF0C;0&#x548C;&#x7A7A;&#x5B57;&#x6BB5;&#x8868;&#x793A;&#x7981;&#x7528;&#x6B64;&#x529F;&#x80FD;</li>
<li>&#x5E10;&#x53F7;&#x7981;&#x7528;&#x671F;&#x9650;&#xFF1A;&#x8FC7;&#x671F;&#x540E;&#x4E0D;&#x53EF;&#x7528;&#x65F6;&#x95F4;</li>
<li>&#x5E10;&#x6237;&#x8FC7;&#x671F;&#x65F6;&#x95F4;: &#x6279;&#x5E10;&#x6237;&#x5728;&#x5BC6;&#x7801;&#x8FC7;&#x671F;&#x540E;&#x591A;&#x5C11;&#x5929;&#x8FD8;&#x672A;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#xFF0C;&#x5C06;&#x88AB;&#x505C;&#x7528;</li>
<li>&#x4FDD;&#x7559;&#x5B57;&#x6BB5;&#xFF1A;&#x4FDD;&#x7559;&#x5C06;&#x6765;&#x4F7F;&#x7528;</li>
</ol>
<p><strong>3. /etc/group</strong>&#xFF1A;&#x7528;&#x6237;&#x7EC4;&#x4FE1;&#x606F;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x7EC4;&#x540D;:&#x5BC6;&#x7801;:GID:&#x7528;&#x6237;&#x5217;&#x8868;</span></span><br><span class="line">root:x:0:</span><br><span class="line">bin:x:1:bin,daemon</span><br><span class="line">daemon:x:2:bin,daemon</span><br></pre></td></tr></table></figure>
<ol>
<li>&#x7EC4;&#x540D;&#xFF1A;&#x7EC4;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x9ED8;&#x8BA4;&#x540C;&#x540D;&#x7528;&#x6237;&#x540D;</li>
<li>&#x5BC6;&#x7801;&#xFF1A;&#x7EC4;&#x7684;&#x5BC6;&#x7801;&#x5360;&#x4F4D;&#x7B26;</li>
<li>GID&#xFF1A;&#x7EC4;ID</li>
<li>&#x7528;&#x6237;&#x5217;&#x8868;&#xFF1A;&#x96B6;&#x5C5E;&#x6B64;&#x7EC4;&#x7684;&#x7528;&#x6237;&#xFF08;&#x9644;&#x52A0;&#x7EC4;&#xFF09;</li>
</ol>
<p><strong>4. /etc/gshadow</strong>&#xFF1A;&#x7528;&#x6237;&#x7EC4;&#x5BC6;&#x7801;&#x4FE1;&#x606F;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x7EC4;&#x540D;:&#x5BC6;&#x7801;:&#x7EC4;&#x7BA1;&#x7406;&#x8005;:&#x7528;&#x6237;&#x5217;&#x8868;</span></span><br><span class="line">root:<span class="variable">$6</span><span class="variable">$PLRAiZsvLuGJqvFG3D8fbjYHDho2RQUe93glO</span>::</span><br></pre></td></tr></table></figure>
<ol>
<li>&#x7EC4;&#x540D;&#xFF1A;&#x7EC4;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x540C;&#x6B65;/etc/group&#x6587;&#x4EF6;&#x4E2D;  </li>
<li>&#x5BC6;&#x7801;&#xFF1A;&#x7B2C;&#x4E00;&#x4E2A;$&#x540E;&#x9762;&#x8868;&#x793A;&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;$&#x540E;&#x9762;&#x8868;&#x793A;&#x52A0;&#x5BC6;&#x7684;&#x5BC6;&#x7801;  </li>
<li>&#x7EC4;&#x7BA1;&#x7406;&#x8005;&#xFF1A;&#x53EF;&#x4EE5;&#x5BF9;&#x6B64;&#x7EC4;&#x6210;&#x5458;&#x6709;&#x64CD;&#x4F5C;&#x6743;&#x9650;  </li>
<li>&#x7528;&#x6237;&#x5217;&#x8868;&#xFF1A; &#x7528;&#x6237;&#x7684;&#x5217;&#x8868;</li>
</ol>
<p><strong>5. /etc/login.defs</strong>:&#x5B9A;&#x4E49;&#x521B;&#x5EFA;&#x7528;&#x6237;&#x65F6;&#x7684;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#xFF0C;&#x5982;UID&#x548C;GID&#x7684;&#x8303;&#x56F4;&#xFF0C;&#x7528;&#x6237;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x3001;&#x662F;&#x5426;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x7528;&#x6237;&#x4E3B;&#x76EE;&#x5F55;&#x7B49;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MAIL_DIR        /var/spool/mail     <span class="comment"># &#x521B;&#x5EFA;&#x7528;&#x6237;&#x7684;&#x540C;&#x65F6;&#x5728;/var/spool/mail&#x4E2D;&#x521B;&#x5EFA;&#x540C;&#x540D;&#x90AE;&#x4EF6;&#x6587;&#x4EF6;</span></span><br><span class="line">PASS_MAX_DAYS   99999               <span class="comment"># &#x6307;&#x5B9A;&#x5BC6;&#x7801;&#x4FDD;&#x6301;&#x6709;&#x6548;&#x7684;&#x6700;&#x957F;&#x5929;&#x6570;</span></span><br><span class="line">PASS_MIN_DAYS   0                   <span class="comment"># &#x8868;&#x793A;&#x81EA;&#x4ECE;&#x4E0A;&#x6B21;&#x5BC6;&#x7801;&#x4FEE;&#x6539;&#x4EE5;&#x6765;&#x591A;&#x5C11;&#x5929;&#x540E;&#x7528;&#x6237;&#x624D;&#x88AB;&#x5141;&#x8BB8;&#x4FEE;&#x6539;&#x53E3;&#x4EE4;</span></span><br><span class="line">PASS_MIN_LEN    5                   <span class="comment"># &#x6307;&#x5B9A;&#x5BC6;&#x7801;&#x7684;&#x6700;&#x5C0F;&#x957F;&#x5EA6;</span></span><br><span class="line">PASS_WARN_AGE   7                   <span class="comment"># &#x8868;&#x793A;&#x5728;&#x53E3;&#x4EE4;&#x5230;&#x671F;&#x524D;&#x591A;&#x5C11;&#x5929;&#x7CFB;&#x7EDF;&#x5F00;&#x59CB;&#x901A;&#x77E5;&#x7528;&#x6237;&#x53E3;&#x4EE4;&#x5373;&#x5C06;&#x5230;&#x671F;</span></span><br><span class="line">UID_MIN         500                 <span class="comment"># &#x521B;&#x5EFA;&#x7528;&#x6237;UID&#x4ECE;500&#x5F00;&#x59CB;</span></span><br><span class="line">UID_MAX         60000               <span class="comment"># &#x6700;&#x5927;UID&#x4E3A;60000</span></span><br><span class="line">GID_MIN         500                 <span class="comment"># &#x6700;&#x5C0F;GID&#x4E3A;500</span></span><br><span class="line">GID_MAX         60000               <span class="comment"># &#x6700;&#x5927;GID&#x4E3A;60000</span></span><br><span class="line">CREATE_HOME     yes                 <span class="comment"># &#x662F;&#x5426;&#x521B;&#x5EFA;&#x7528;&#x6237;&#x4E3B;&#x76EE;&#x5F55;&#xFF0C;yes&#x4E3A;&#x521B;&#x5EFA;&#xFF0C;no&#x4E3A;&#x4E0D;&#x521B;&#x5EFA;</span></span><br></pre></td></tr></table></figure>
<p><strong>6. /etc/default/useradd</strong>&#xFF1A;&#x6DFB;&#x52A0;&#x7528;&#x6237;&#x9ED8;&#x8BA4;&#x9009;&#x9879;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GROUP=100               <span class="comment"># </span></span><br><span class="line">HOME=/home              <span class="comment"># &#x65B0;&#x5EFA;&#x7528;&#x6237;&#x7684;&#x5BB6;&#x76EE;&#x5F55;&#x5B58;&#x653E;&#x8DEF;&#x5F84;</span></span><br><span class="line">INACTIVE=-1             <span class="comment"># &#x662F;&#x5426;&#x542F;&#x7528;&#x5E10;&#x53F7;&#x8FC7;&#x671F;&#xFF0C;-1&#x4E0D;&#x542F;&#x7528;</span></span><br><span class="line">EXPIRE=                 <span class="comment"># &#x5E10;&#x53F7;&#x8FC7;&#x671F;&#x65E5;&#x671F;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x542F;&#x7528;</span></span><br><span class="line">SHELL=/bin/bash         <span class="comment"># &#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7684;shell</span></span><br><span class="line">SKEL=/etc/skel          <span class="comment"># &#x65B0;&#x5EFA;&#x7528;&#x6237;&#x5BB6;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6587;&#x4EF6;&#x4ECE;&#x6B64;&#x76EE;&#x5F55;&#x4E0B;&#x590D;&#x5236;&#x800C;&#x6765;&#x7684;</span></span><br><span class="line">CREATE_MAIL_SPOOL=yes   <span class="comment"># &#x662F;&#x5426;&#x5EFA;&#x7ACB;&#x90AE;&#x4EF6;&#x6587;&#x4EF6;</span></span><br></pre></td></tr></table></figure>
<h3 id="&#x76F8;&#x5173;&#x547D;&#x4EE4;"><a href="#&#x76F8;&#x5173;&#x547D;&#x4EE4;" class="headerlink" title="&#x76F8;&#x5173;&#x547D;&#x4EE4;"></a>&#x76F8;&#x5173;&#x547D;&#x4EE4;</h3><p><code>useradd</code>&#x3001;<code>chown</code>&#x3001;<code>chmod</code>&#x3001;<code>usermod</code>&#x3001;<code>userdel</code>&#x3001;<code>groupadd</code>&#x3001;<code>groupmod</code>&#x3001;<code>groupdel</code>&#x3001;<code>passwd</code>&#x3001;<code>gpasswd</code>&#x3001;<code>su</code>&#x3001;<code>id</code>&#x3001;<code>newgrp</code>&#x3001;<code>chage</code>&#x3001;<code>chfn</code>&#x3001;<code>chsh</code>&#x7B49;&#xFF0C;&#x89C1;<a href="http://liu2lin600.github.io/2016/05/21/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4--%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/">&#x5E38;&#x7528;&#x547D;&#x4EE4;&#x2013;&#x7528;&#x6237;&#x7BA1;&#x7406;</a></p>
<p><em>&#x6700;&#x540E;&#xFF1A;&#x4F5C;&#x4E3A;&#x4E0A;&#x5E1D;&#x822C;&#x7684;root&#x6765;&#x8BF4;&#xFF0C;&#x4EFB;&#x4F55;&#x6743;&#x9650;&#x90FD;&#x5BF9;&#x5176;&#x65E0;&#x6548;&#xFF0C;&#x8C28;&#x614E;&#x4F7F;&#x7528;</em></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[bash基本特性介绍]]></title>
      <url>http://liu2lin600.github.io/2016/06/10/bash%E5%9F%BA%E6%9C%AC%E7%89%B9%E6%80%A7%E4%BB%8B%E7%BB%8D/</url>
      <content type="html"><![CDATA[<p>bash&#x7279;&#x6027;&#x4ECB;&#x7ECD;</p>
<a id="more"></a>
<h2 id="&#x7B80;&#x4ECB;"><a href="#&#x7B80;&#x4ECB;" class="headerlink" title="&#x7B80;&#x4ECB;"></a>&#x7B80;&#x4ECB;</h2><blockquote>
<p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#x7BA1;&#x7406;&#x6574;&#x4E2A;&#x8BA1;&#x7B97;&#x673A;&#x786C;&#x4EF6;&#x7684;&#x5176;&#x5B9E;&#x662F;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x6838;&#x5FC3;&#xFF08;kernel&#xFF09;&#xFF0C;&#x8FD9;&#x4E2A;&#x6838;&#x5FC3;&#x662F;&#x9700;&#x8981;&#x88AB;&#x4FDD;&#x62A4;&#x7684;&#xFF01; &#x4E00;&#x822C;&#x4F7F;&#x7528;&#x8005;&#x5C31;&#x53EA;&#x80FD;&#x901A;&#x8FC7;&#x5185;&#x6838;&#x63D0;&#x4F9B;&#x7684;&#x63A5;&#x53E3;shell(&#x58F3;) &#x6765;&#x8DDF;&#x6838;&#x5FC3;&#x6C9F;&#x901A;&#xFF0C;&#x4EE5;&#x8BA9;&#x6838;&#x5FC3;&#x8FBE;&#x5230;&#x6211;&#x4EEC;&#x6240;&#x60F3;&#x8981;&#x8FBE;&#x5230;&#x7684;&#x5DE5;&#x4F5C;&#x3002;&#x5728;Linux&#x5404;&#x79CD;&#x53D1;&#x884C;&#x7248;&#x4E0A;shell&#x5305;&#x62EC;sh&#x3001;csh&#x3001;bash&#x3001;ksh&#x3001;zsh&#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x67E5;&#x770B;<code>/etc/shells</code>&#x6765;&#x67E5;&#x770B;&#xFF0C;&#x5176;&#x4E2D;bash&#x662F;&#x9ED8;&#x8BA4;shell&#xFF0C;bash (Bourne-again Shell) &#x662F;&#x4E00;&#x4E2A;&#x6765;&#x81EA; GNU Project&#x7684;&#x547D;&#x4EE4;&#x884C;&#x89E3;&#x91CA;&#x5668;/&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#xFF0C;&#x5B83;&#x7684;&#x540D;&#x5B57;&#x662F;&#x5411;&#x5B83;&#x7684;&#x524D;&#x8EAB;&#x2014;&#x2014;&#x2014;&#x2014;&#x5F88;&#x65E9;&#x4EE5;&#x524D;&#x7684;Bourne shell&#x81F4;&#x656C;&#x3002;&#x65E2;&#x7136;&#x662F;&#x9ED8;&#x8BA4;shell&#xFF0C;&#x90A3;&#x4E48;&#x638C;&#x63E1;&#x5176;&#x7279;&#x6027;&#x5BF9;&#x4E8E;Linux&#x7CFB;&#x7EDF;&#x7684;&#x5B66;&#x4E60;&#x5C31;&#x5F88;&#x6709;&#x5FC5;&#x8981;&#x4E86;</p>
</blockquote>
<h2 id="Bash&#x7279;&#x6027;"><a href="#Bash&#x7279;&#x6027;" class="headerlink" title="Bash&#x7279;&#x6027;"></a>Bash&#x7279;&#x6027;</h2><h3 id="1-&#x8865;&#x5168;"><a href="#1-&#x8865;&#x5168;" class="headerlink" title="1. &#x8865;&#x5168;"></a>1. &#x8865;&#x5168;</h3><p>&#x901A;&#x8FC7;<code>Tab</code>&#x952E;&#x8865;&#x5168;&#x547D;&#x4EE4;&#x6216;&#x8DEF;&#x5F84;&#xFF0C;&#x552F;&#x4E00;&#x65F6;&#x76F4;&#x63A5;&#x8865;&#x5168;&#xFF0C;&#x5426;&#x5219;&#x6572;2&#x4E0B;&#x5217;&#x51FA;&#x6240;&#x6709;&#x7B26;&#x5408;&#x7684;</p>
<ol>
<li>&#x547D;&#x4EE4;&#xFF1A;&#x5916;&#x90E8;&#x547D;&#x4EE4;&#x901A;&#x8FC7;&#x8BFB;&#x53D6;PATH&#x73AF;&#x5883;&#x53D8;&#x91CF;</li>
<li>&#x8DEF;&#x5F84;&#xFF1A;&#x6839;&#x636E;&#x7ED9;&#x5B9A;&#x7684;&#x8D77;&#x59CB;&#x8DEF;&#x5F84;</li>
</ol>
<h3 id="2-&#x547D;&#x4EE4;&#x5386;&#x53F2;"><a href="#2-&#x547D;&#x4EE4;&#x5386;&#x53F2;" class="headerlink" title="2. &#x547D;&#x4EE4;&#x5386;&#x53F2;"></a>2. &#x547D;&#x4EE4;&#x5386;&#x53F2;</h3><p><code>history</code>&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x547D;&#x4EE4;&#x5386;&#x53F2;&#xFF0C;&#x4FDD;&#x5B58;&#x5728;<code>~/.bash_history</code>&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6253;&#x5F00;shell&#x65F6;&#x5185;&#x6838;&#x8BFB;&#x53D6;&#x6B64;&#x6587;&#x4EF6;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x5728;&#x9000;&#x51FA;shell&#x524D;&#x547D;&#x4EE4;&#x7F13;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x9000;&#x51FA;&#x65F6;&#x5C06;&#x5386;&#x53F2;&#x518D;&#x5199;&#x5165;&#x8BE5;&#x6587;&#x4EF6;</p>
<blockquote>
<p>history&#x9009;&#x9879;&#xFF1A;<br>&#x6570;&#x5B57;&#xFF1A;&#x663E;&#x793A;&#x6700;&#x8FD1;&#x51E0;&#x6761;<br><code>-c</code>&#xFF1A;&#x6E05;&#x7A7A;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x5386;&#x53F2;<br><code>-d #</code>&#xFF1A;&#x5220;&#x9664;&#x6307;&#x5B9A;&#x7F16;&#x53F7;&#x7684;&#x5386;&#x53F2;<br><code>-w</code>&#xFF1A;&#x4ECE;&#x5185;&#x5B58;&#x4E2D;&#x5199;&#x5165;&#x5230;<code>~/.bash_history</code>&#x6587;&#x4EF6;&#x4E2D;<br><code>-r</code>&#xFF1A;&#x4ECE;&#x5386;&#x53F2;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x5230;&#x5185;&#x5B58; </p>
</blockquote>
<p>&#x76F8;&#x5173;&#x73AF;&#x5883;&#x53D8;&#x91CF;</p>
<ol>
<li>HISTSIZE&#xFF1A;&#x5386;&#x53F2;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x6700;&#x5927;&#x6761;&#x6570;  </li>
<li>HISTFILE&#xFF1A;&#x5386;&#x53F2;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;  </li>
<li>HISTFILESIZE&#xFF1A;&#x5386;&#x53F2;&#x6761;&#x6570;  </li>
<li>HISTTIMEFORMAT&#xFF1A;&#x663E;&#x793A;&#x65F6;&#x95F4;&#xFF0C;&#x5982; HISTTIMEFORMAT=&#x201D;%F %T&#x201D;</li>
<li>HISTIGNORE&#xFF1A;&#x5FFD;&#x7565;&#x6307;&#x5B9A;&#x5B57;&#x7B26;&#x547D;&#x4EE4;&#x5386;&#x53F2;&#xFF0C;&#x5982; HISTIGNORE=&#x201D;str1:str2:&#x2026; &#x201C;  </li>
<li>HISTCONTROL&#xFF1A;&#x8BB0;&#x5F55;&#x65B9;&#x5F0F;&#x63A7;&#x5236;&#xFF0C;&#x503C;&#x6709;&#x5982;&#x4E0B;&#xFF1A;<blockquote>
<p>ignorespace&#xFF1A;&#x5FFD;&#x7565;&#x7A7A;&#x683C;&#x5F00;&#x5934;&#xFF0C;&#x6B64;&#x65F6;&#x6572;&#x7A7A;&#x683C;&#x518D;&#x8F93;&#x5165;&#x547D;&#x4EE4;&#x5C06;&#x4E0D;&#x4F1A;&#x88AB;&#x8BB0;&#x5F55;<br>ignoredups&#xFF1A;&#x8FDE;&#x7EED;&#x4E14;&#x91CD;&#x590D;&#x7684;&#x4E0D;&#x8BB0;&#x5F55;<br>ignoreboth&#xFF1A;&#x5305;&#x62EC;&#x4EE5;&#x4E0A;&#x4E24;&#x8005;<br><em>&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E3A;<code>/etc/profile</code>&#x548C;<code>~/.bash_profile</code></em></p>
</blockquote>
</li>
</ol>
<p>&#x5E38;&#x7528;&#x6280;&#x5DE7;</p>
<ul>
<li><code>!5</code>&#xFF1A;&#x8C03;&#x7528;&#x7B2C;5&#x4E2A;&#x5386;&#x53F2;&#xFF0C;&#x4E3A;&#x8D1F;&#x6570;&#x8868;&#x793A;&#x5012;&#x6570;    </li>
<li><code>!5:2</code>&#xFF1A;&#x8C03;&#x7528;&#x7B2C;5&#x6761;&#x5386;&#x53F2;&#x7684;&#x7B2C;2&#x4E2A;&#x53C2;&#x6570;  </li>
<li><code>!STR</code>&#xFF1A;&#x8C03;&#x7528;&#x6700;&#x8FD1;&#x4EE5;STR&#x5F00;&#x5934;&#x7684;&#x547D;&#x4EE4;  </li>
<li><code>ESC</code>+<code>.</code>&#xFF1A;&#x8C03;&#x7528;&#x6700;&#x540E;&#x4E00;&#x6761;&#x547D;&#x4EE4;&#xFF0C;&#x6CE8;&#x610F;&#x6309;<code>ESC</code>&#x540E;&#x677E;&#x5F00;&#x518D;&#x6309;<code>.</code>  </li>
<li><code>!$</code>&#xFF1A;&#x6700;&#x540E;&#x4E00;&#x6761;&#x547D;&#x4EE4;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53C2;&#x6570; (!5:$ &#x7B2C;5&#x6761;&#x547D;&#x4EE4;&#x6700;&#x540E;&#x53C2;&#x6570;&#xFF0C;&#x4E0B;&#x540C;)  </li>
<li><code>!^</code>&#xFF1A;&#x6700;&#x540E;&#x4E00;&#x6761;&#x547D;&#x4EE4;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;</li>
<li><code>!:2</code>&#xFF1A;&#x4E0A;&#x4E00;&#x547D;&#x4EE4;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;    </li>
<li><code>!*</code>&#xFF1A;&#x4E0A;&#x4E00;&#x547D;&#x4EE4;&#x5168;&#x90E8;&#x53C2;&#x6570;  </li>
<li><code>!!</code>&#xFF1A;&#x8C03;&#x7528;&#x4E0A;&#x4E00;&#x6761;&#x547D;&#x4EE4;  </li>
</ul>
<h3 id="3-&#x5FEB;&#x6377;&#x952E;"><a href="#3-&#x5FEB;&#x6377;&#x952E;" class="headerlink" title="3. &#x5FEB;&#x6377;&#x952E;"></a>3. &#x5FEB;&#x6377;&#x952E;</h3><p><code>ctrl+a</code>&#xFF1A;&#x5149;&#x6807;&#x79FB;&#x5230;&#x884C;&#x9996;<br><code>ctrl+e</code>&#xFF1A;&#x5149;&#x6807;&#x79FB;&#x5230;&#x884C;&#x5C3E;<br><code>ctrl+u</code>&#xFF1A;&#x5220;&#x9664;&#x5149;&#x6807;&#x5230;&#x884C;&#x9996;<br><code>ctrl+k</code>&#xFF1A;&#x5220;&#x9664;&#x5149;&#x6807;&#x5230;&#x884C;&#x5C3E;<br><code>ctrl+l</code>&#xFF1A;&#x6E05;&#x5C4F;<br><code>ctrl+c</code>&#xFF1A;&#x53D6;&#x6D88;&#x547D;&#x4EE4;&#x7684;&#x6267;&#x884C;<br><code>ctrl+r</code>&#xFF1A;&#x641C;&#x7D22;&#x547D;&#x4EE4;&#x5386;&#x53F2;</p>
<h3 id="4-&#x547D;&#x4EE4;&#x884C;&#x5C55;&#x5F00;"><a href="#4-&#x547D;&#x4EE4;&#x884C;&#x5C55;&#x5F00;" class="headerlink" title="4. &#x547D;&#x4EE4;&#x884C;&#x5C55;&#x5F00;"></a>4. &#x547D;&#x4EE4;&#x884C;&#x5C55;&#x5F00;</h3><p><code>~</code>&#xFF1A;&#x81EA;&#x52A8;&#x5C55;&#x5F00;&#x4E3A;&#x7528;&#x6237;&#x5BB6;&#x76EE;&#x5F55;&#xFF0C;<code>~USER</code>&#x8868;&#x793A;USER&#x7528;&#x6237;&#x5BB6;&#x76EE;&#x5F55;<br><code>{}</code>&#xFF1A;&#x5C55;&#x5F00;&#x5185;&#x5B57;&#x6BB5;&#xFF0C;&#x7528;&#x9017;&#x53F7;&#x9694;&#x5F00;  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /tmp/x{y1/{a,b},y2}      <span class="comment"># &#x751F;&#x6210;/tmp/xy1/a, /tmp/xy1/b, /tmp/xy2</span></span><br><span class="line">mkdir -p /tmp/m/{a,b}_{x,y}       <span class="comment"># /tmp/m/a_x, /tmp/m/a_y, /tmp/m/b_x, /tmp/m/b_y</span></span><br><span class="line">cp /tmp/<span class="built_in">test</span>{,.bak}               <span class="comment"># &#x5728;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B;&#x5907;&#x4EFD;&#x6587;&#x4EF6;</span></span><br></pre></td></tr></table></figure>
<h3 id="5-&#x547D;&#x4EE4;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x72B6;&#x6001;"><a href="#5-&#x547D;&#x4EE4;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x72B6;&#x6001;" class="headerlink" title="5. &#x547D;&#x4EE4;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x72B6;&#x6001;"></a>5. &#x547D;&#x4EE4;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x72B6;&#x6001;</h3><p>&#x547D;&#x4EE4;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x72B6;&#x6001;&#x8FD4;&#x56DE;&#x503C;&#xFF1A;&#x6210;&#x529F;&#x4E3A;0&#xFF0C;&#x5931;&#x8D25;&#x4E3A;1-255<br>&#x67E5;&#x770B;&#xFF1A;<code>echo $?</code></p>
<h3 id="6-&#x6587;&#x4EF6;&#x540D;&#x901A;&#x914D;-glob"><a href="#6-&#x6587;&#x4EF6;&#x540D;&#x901A;&#x914D;-glob" class="headerlink" title="6. &#x6587;&#x4EF6;&#x540D;&#x901A;&#x914D;(glob)"></a>6. &#x6587;&#x4EF6;&#x540D;&#x901A;&#x914D;(glob)</h3><p>&#x901A;&#x914D;&#x7B26;&#x6709;&#x5982;&#x4E0B;&#xFF1A;</p>
<blockquote>
<p><code>*</code>: &#x4EE3;&#x8868;&#x4EFB;&#x610F;&#x957F;&#x5EA6;&#x7684;&#x4EFB;&#x610F;&#x5B57;&#x7B26;<br><code>?</code>&#xFF1A; &#x4EE3;&#x8868;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x5B57;&#x7B26;<br><code>[]</code>&#xFF1A;&#x4EE3;&#x8868;&#x5339;&#x914D;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x5185;&#x7684;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x5B57;&#x7B26;  </p>
<blockquote>
<p><code>[a-z]</code>&#xFF1A;&#x5C0F;&#x5199;&#x5B57;&#x6BCD;&#xFF0C;&#x540C;[[:lower:]]<br><code>[A-Z]</code>&#xFF1A;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#xFF0C;&#x540C;[[:upper:]]<br><code>[0-9]</code>&#xFF1A;&#x6570;&#x5B57;&#xFF0C;&#x540C;[[:digit:]]  </p>
</blockquote>
</blockquote>
<blockquote>
<p><code>[^]</code>: &#x5339;&#x914D;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x4E4B;&#x5916;&#x7684;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x5B57;&#x7B26;<br><code>[[:space:]]</code>&#xFF1A;&#x7A7A;&#x767D;&#x5B57;&#x7B26;<br><code>[[:punct:]]</code>&#xFF1A;&#x6807;&#x70B9;&#x7B26;&#x53F7;<br><code>[[:lower:]]</code>&#xFF1A;&#x5C0F;&#x5199;&#x5B57;&#x6BCD;&#xFF0C;&#x5982;&#x540C;[a-z]<br><code>[[:upper:]]</code>: &#x5927;&#x5199;&#x5B57;&#x6BCD;&#xFF0C;&#x5982;&#x540C;[A-Z]<br><code>[[:alpha:]]</code>: &#x5927;&#x5C0F;&#x5199;&#x5B57;&#x6BCD;&#xFF0C;&#x5982;&#x540C;[a-zA-Z]<br><code>[[:digit:]]</code>: &#x6570;&#x5B57;&#xFF0C;&#x5982;&#x540C;[0-9]<br><code>[[:alnum:]]</code>: &#x6570;&#x5B57;&#x548C;&#x5927;&#x5C0F;&#x5199;&#x5B57;&#x6BCD;&#xFF0C;&#x5982;&#x540C;[0-9a-zA-Z]  </p>
</blockquote>
<p><em>&#x53EF;&#x901A;&#x8FC7;<code>man 7 glob</code>&#x67E5;&#x770B;&#x66F4;&#x591A;&#x5E2E;&#x52A9;</em></p>
<h3 id="7-IO&#x91CD;&#x5B9A;&#x5411;"><a href="#7-IO&#x91CD;&#x5B9A;&#x5411;" class="headerlink" title="7. IO&#x91CD;&#x5B9A;&#x5411;"></a>7. IO&#x91CD;&#x5B9A;&#x5411;</h3><ul>
<li>&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;&#xFF1A;&#x5C06;&#x539F;&#x672C;&#x663E;&#x793A;&#x5230;&#x5C4F;&#x5E55;&#x7684;&#x5185;&#x5BB9;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x6587;&#x4EF6;&#x6216;&#x5176;&#x5B83;&#x547D;&#x4EE4;&#x4E2D;  </li>
<li>&#x8F93;&#x5165;&#x91CD;&#x5B9A;&#x5411;&#xFF1A;&#x5C06;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x4F5C;&#x4E3A;&#x6807;&#x51C6;&#x8F93;&#x5165;</li>
<li>&#x62A5;&#x9519;&#x91CD;&#x5B9A;&#x5411;&#xFF1A;&#x5C06;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x7684;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x6587;&#x4EF6;&#x6216;&#x5176;&#x5B83;&#x5730;&#x65B9;</li>
</ul>
<p><code>&gt;</code>&#xFF1A;&#x8986;&#x76D6;&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;&#xFF0C;<code>set -C</code>&#xFF1A;&#x5173;&#x95ED;&#x8986;&#x76D6;&#x529F;&#x80FD;&#xFF0C;<code>set +C</code>&#xFF1A;&#x5F00;&#x542F;<br><code>&gt;&gt;</code>&#xFF1A;&#x8FFD;&#x52A0;&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;<br><code>&gt;1</code>&#xFF1A;&#x5F3A;&#x884C;&#x8986;&#x76D6;&#x8F93;&#x51FA;<br><code>2&gt;</code>,<code>2&gt;&gt;</code>&#xFF1A;&#x9519;&#x8BEF;&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;<br><code>&amp;&gt;</code>, <code>&amp;&gt;&gt;</code>&#xFF1A;&#x6B63;&#x5E38;&#x6216;&#x9519;&#x8BEF;&#x5408;&#x5E76;&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;<br><code>&lt;</code>&#xFF1A;&#x8F93;&#x5165;&#x91CD;&#x5B9A;&#x5411;<br><code>&lt;&lt;</code>&#xFF1A;&#x4ECE;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x4E2D;&#x8BFB;&#x5165;&#xFF0C;&#x77E5;&#x9053;&#x9047;&#x5230;delimiter&#x5206;&#x754C;&#x7B26;  </p>
<blockquote>
<p>&#x8BF4;&#x660E;&#xFF1A;shell&#x5728;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x65B0;&#x8FDB;&#x7A0B;&#x540E;&#xFF0C;&#x65B0;&#x8FDB;&#x7A0B;&#x7684;&#x524D;&#x4E09;&#x4E2A;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x90FD;&#x9ED8;&#x8BA4;&#x6307;&#x5411;&#x4E09;&#x4E2A;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x3002;&#x8FD9;&#x4E09;&#x4E2A;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x5206;&#x522B;&#x4E3A;0&#xFF0C;1&#xFF0C;2&#x3002;0&#x5BF9;&#x5E94;&#x7684;&#x6587;&#x4EF6;&#x53EB;&#x505A;&#x6807;&#x51C6;&#x8F93;&#x5165;&#xFF08;stdin&#xFF09;&#xFF0C;1&#x5BF9;&#x5E94;&#x7684;&#x6587;&#x4EF6;&#x53EB;&#x505A;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#xFF08;stdout&#xFF09;&#xFF0C;2&#x5BF9;&#x5E94;&#x7684;&#x6587;&#x4EF6;&#x53EB;&#x505A;&#x6807;&#x51C6;&#x62A5;&#x9519;(stderr)&#x3002;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x9ED8;&#x8BA4;&#x8DDF;&#x4EBA;&#x4EA4;&#x4E92;&#x7684;&#x8F93;&#x5165;&#x662F;&#x952E;&#x76D8;&#x3001;&#x9F20;&#x6807;&#xFF0C;&#x8F93;&#x51FA;&#x662F;&#x663E;&#x793A;&#x5668;&#x5C4F;&#x5E55;&#xFF0C;&#x8FD9;&#x4E9B;&#x786C;&#x4EF6;&#x8BBE;&#x5907;&#x5BF9;&#x4E8E;&#x7A0B;&#x5E8F;&#x6765;&#x8BF4;&#x90FD;&#x662F;&#x4E0D;&#x8BA4;&#x8BC6;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x501F;&#x7528;&#x4E86;&#x539F;&#x6765;&#x201C;&#x7EC8;&#x7AEF;&#x201D;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x5C06;&#x952E;&#x76D8;&#x9F20;&#x6807;&#x663E;&#x793A;&#x5668;&#x90FD;&#x8868;&#x73B0;&#x6210;&#x4E00;&#x4E2A;&#x7EC8;&#x7AEF;&#x6587;&#x4EF6;&#x3002;&#x4E8E;&#x662F;stdin&#x3001;stdout&#x548C;stderr&#x5C31;&#x6700;&#x7EC8;&#x90FD;&#x6307;&#x5411;&#x4E86;&#x8FD9;&#x6240;&#x8C13;&#x7684;&#x7EC8;&#x7AEF;&#x6587;&#x4EF6;&#x4E0A;&#x3002;&#x4E8E;&#x662F;&#xFF0C;&#x4ECE;&#x952E;&#x76D8;&#x8F93;&#x5165;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x4ECE;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x7684;0&#x53F7;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x8BFB;&#x53D6;&#xFF0C;&#x6B63;&#x5E38;&#x7684;&#x8F93;&#x51FA;&#x5185;&#x5BB9;&#x4ECE;1&#x53F7;&#x63CF;&#x8FF0;&#x7B26;&#x5199;&#x51FA;&#xFF0C;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x88AB;&#x5B9A;&#x4E49;&#x4E3A;&#x4ECE;2&#x53F7;&#x63CF;&#x8FF0;&#x7B26;&#x5199;&#x51FA;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x3001;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x548C;&#x6807;&#x51C6;&#x62A5;&#x9519;&#x5BF9;&#x5E94;&#x7684;&#x63CF;&#x8FF0;&#x7B26;&#x7F16;&#x53F7;&#x662F;0&#x3001;1&#x3001;2&#x7684;&#x539F;&#x56E0;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x5BF9;&#x62A5;&#x9519;&#x8FDB;&#x884C;&#x91CD;&#x5B9A;&#x5411;&#x8981;&#x4F7F;&#x7528;2&gt;&#x7684;&#x539F;&#x56E0;  </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">COMMAND &gt; filename          # &#x6807;&#x51C6;&#x8F93;&#x51FA;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x4E00;&#x4E2A;&#x65B0;&#x6587;&#x4EF6;&#x4E2D;</span><br><span class="line">COMMAND 2&gt; filename         # &#x628A;&#x6807;&#x51C6;&#x9519;&#x8BEF;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;</span><br><span class="line">COMMAND 1&gt; file 2&gt;&amp;1        # &#x628A;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x548C;&#x9519;&#x8BEF;&#x4E00;&#x8D77;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x540C;&amp;&gt;</span><br><span class="line">COMMAND &lt; file1 &gt; file2     # &#x547D;&#x4EE4;&#x4EE5;file1&#x4F5C;&#x4E3A;&#x6807;&#x51C6;&#x8F93;&#x5165;&#xFF0C;&#x4EE5;file2&#x6587;&#x4EF6;&#x4F5C;&#x4E3A;&#x6807;&#x51C6;&#x8F93;&#x51FA;</span><br><span class="line">COMMAND &lt; filename          # &#x4EE5;filename&#x6587;&#x4EF6;&#x4F5C;&#x4E3A;&#x6807;&#x51C6;&#x8F93;&#x5165;</span><br><span class="line"></span><br><span class="line">COMMAND &lt;&lt;EOF               # &#x4ECE;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x4E2D;&#x8BFB;&#x5165;&#xFF0C;&#x77E5;&#x9053;&#x9047;&#x5230;delimiter&#x5206;&#x754C;&#x7B26;&#x4E3A;&#x6B62;&#xFF0C;&#x4E00;&#x822C;&#x7528;EOF    </span><br><span class="line">xxxxxxxx</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h3 id="8-&#x7BA1;&#x9053;"><a href="#8-&#x7BA1;&#x9053;" class="headerlink" title="8. &#x7BA1;&#x9053;"></a>8. &#x7BA1;&#x9053;</h3><p>linux&#x7684;&#x53E6;&#x4E00;&#x91CD;&#x8981;&#x54F2;&#x5B66;&#x601D;&#x60F3;&#xFF1A;<strong>&#x7531;&#x529F;&#x80FD;&#x5355;&#x4E00;&#x7684;&#x7A0B;&#x5E8F;&#x7EC4;&#x5408;&#x5B8C;&#x6210;&#x590D;&#x6742;&#x64CD;&#x4F5C;</strong>&#xFF0C;&#x8FD9;&#x5176;&#x4E2D;&#x7684;&#x91CD;&#x8981;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x5C31;&#x662F;<code>|</code>&#x7BA1;&#x9053;<br>&#x5373;&#x5C06;&#x4E0A;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x4F20;&#x9012;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;&#xFF0C;&#x53EF;&#x4EE5;&#x591A;&#x6B21;&#x4F20;&#x9012;&#x4EE5;&#x8FBE;&#x5230;&#x7279;&#x522B;&#x5F3A;&#x5927;&#x7684;&#x529F;&#x80FD;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tail -9 /etc/passwd | head -1 | cut -d: -f1,7 | tee /tmp/users</span><br><span class="line">netstat -ant | awk <span class="string">&apos;{print $NF}&apos;</span> | grep -v <span class="string">&apos;[a-z]&apos;</span> | sort | uniq -c</span><br></pre></td></tr></table></figure>
<h3 id="9-&#x547D;&#x4EE4;hash"><a href="#9-&#x547D;&#x4EE4;hash" class="headerlink" title="9. &#x547D;&#x4EE4;hash"></a>9. &#x547D;&#x4EE4;hash</h3><p>&#x7F13;&#x5B58;&#x5916;&#x90E8;&#x547D;&#x4EE4;&#x5230;&#x5185;&#x5B58;hash&#x8868;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x52A0;&#x5FEB;&#x4E0B;&#x6B21;&#x6267;&#x884C;&#x901F;&#x5EA6;&#xFF0C;&#x901A;&#x8FC7;<code>hash</code>&#x6765;&#x67E5;&#x770B;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">hash</span>                <span class="comment"># &#x67E5;&#x770B;hash&#x8868;&#x4E2D;&#x7F13;&#x5B58;&#x7684;&#x547D;&#x4EE4;</span></span><br><span class="line"><span class="built_in">hash</span> -d COMMAND     <span class="comment"># &#x5220;&#x9664;&#x6307;&#x5B9A;&#x547D;&#x4EE4;&#x7F13;&#x5B58; </span></span><br><span class="line"><span class="built_in">hash</span> -r             <span class="comment"># &#x6E05;&#x7A7A;hash&#x7F13;&#x5B58;&#x8868;</span></span><br></pre></td></tr></table></figure>
<h3 id="10-&#x591A;&#x547D;&#x4EE4;&#x6267;&#x884C;"><a href="#10-&#x591A;&#x547D;&#x4EE4;&#x6267;&#x884C;" class="headerlink" title="10. &#x591A;&#x547D;&#x4EE4;&#x6267;&#x884C;"></a>10. &#x591A;&#x547D;&#x4EE4;&#x6267;&#x884C;</h3><p>&#x591A;&#x4E2A;&#x547D;&#x4EE4;&#x95F4;&#x4F7F;&#x7528;&#x7279;&#x6B8A;&#x7B26;&#x53F7;&#x8FDE;&#x63A5;&#xFF0C;&#x5F62;&#x6210;&#x4E00;&#x5B9A;&#x7684;&#x903B;&#x8F91;&#x5173;&#x7CFB;&#xFF0C;&#x5305;&#x62EC;&#x5982;&#x4E0B;&#xFF1A;<br><code>;</code>&#xFF1A;&#x547D;&#x4EE4;&#x95F4;&#x65E0;&#x903B;&#x8F91;&#x5173;&#x7CFB;&#xFF0C;&#x4ECE;&#x5DE6;&#x5230;&#x53F3;&#x6267;&#x884C;<br><code>||</code>&#xFF1A;&#x6216;&#xFF0C;&#x524D;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x9519;&#x8BEF;&#x624D;&#x6267;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;<br><code>&amp;&amp;</code>&#xFF1A;&#x4E0E;&#xFF0C;&#x524D;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x6B63;&#x786E;&#x6267;&#x884C;&#x624D;&#x6267;&#x884C;&#x4E0B;&#x4E00;&#x4E2A;<br><code>!</code>&#xFF1A;&#x975E;&#xFF0C;&#x53D6;&#x53CD;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">COMMAND1 ; COMMAND2 ; COMMAND3      <span class="comment"># 3&#x4E2A;&#x547D;&#x4EE4;&#x90FD;&#x6267;&#x884C;</span></span><br><span class="line">COMMAND1 &amp;&amp; COMMAND2 || COMMAND3    <span class="comment"># 1&#x6B63;&#x786E;&#x5219;&#x518D;&#x6267;&#x884C;2&#xFF0C;&#x5426;&#x5219;&#x6267;&#x884C;3</span></span><br><span class="line">! COMMAND1 || COMMAND2              <span class="comment"># 1&#x6B63;&#x786E;&#x65F6;&#x6267;&#x884C;2</span></span><br></pre></td></tr></table></figure>
<h3 id="11-&#x547D;&#x4EE4;&#x522B;&#x540D;"><a href="#11-&#x547D;&#x4EE4;&#x522B;&#x540D;" class="headerlink" title="11. &#x547D;&#x4EE4;&#x522B;&#x540D;"></a>11. &#x547D;&#x4EE4;&#x522B;&#x540D;</h3><p>&#x5408;&#x7406;&#x5B9A;&#x4E49;&#x547D;&#x4EE4;&#x522B;&#x540D;&#x4F1A;&#x5927;&#x5927;&#x63D0;&#x9AD8;&#x5DE5;&#x4F5C;&#x6548;&#x7387;<br><code>alias</code>&#x3001;<code>unalias</code>&#xFF1A;&#x4E34;&#x65F6;&#x5B9A;&#x4E49;&#x5220;&#x9664;&#xFF0C;&#x5199;&#x5165;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<code>~/.bashrc</code>&#x6216;<code>/etc/bashrc</code>&#x6C38;&#x4E45;&#x6709;&#x6548;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span>                           <span class="comment"># &#x67E5;&#x770B;&#x7528;&#x6237;&#x522B;&#x540D;</span></span><br><span class="line"><span class="built_in">alias</span> l=<span class="string">&apos;ls -Alh --color=auto&apos;</span>  <span class="comment"># &#x5B9A;&#x4E49;&#x522B;&#x540D;</span></span><br><span class="line"><span class="built_in">unalias</span> l                       <span class="comment"># &#x5220;&#x9664;&#x522B;&#x540D;</span></span><br></pre></td></tr></table></figure>
<p><em>&#x5982;&#x679C;&#x522B;&#x540D;&#x540C;&#x539F;&#x547D;&#x4EE4;&#x540C;&#x540D;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x6267;&#x884C;&#x539F;&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4F7F;&#x7528;&#x5982;&#x4E0B;</em></p>
<ul>
<li>\COMMAND</li>
<li>&#x2018;COMMAND&#x2019;</li>
<li>/PATH/COMMAND&#xFF1A;&#x5916;&#x90E8;&#x547D;&#x4EE4;&#x8DEF;&#x5F84;</li>
</ul>
<h3 id="12-&#x547D;&#x4EE4;&#x5F15;&#x7528;"><a href="#12-&#x547D;&#x4EE4;&#x5F15;&#x7528;" class="headerlink" title="12. &#x547D;&#x4EE4;&#x5F15;&#x7528;"></a>12. &#x547D;&#x4EE4;&#x5F15;&#x7528;</h3><p>&#x4F7F;&#x7528;&#x53CD;&#x5F15;&#x53F7;<strong>`COMMAND`</strong>&#x6216;<strong>$(COMMAND)</strong>&#x6765;&#x53D6;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x3002;&#xFF08;&#x5355;&#x5F15;&#x53F7;&#xFF1A;&#x4E0D;&#x89E3;&#x6790;&#x53D8;&#x91CF;&#xFF0C;&#x539F;&#x6837;&#x8F93;&#x51FA;&#xFF0C;&#x53CC;&#x5F15;&#x53F7;&#xFF1A;&#x89E3;&#x6790;&#x53D8;&#x91CF;&#xFF09;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file `<span class="built_in">which</span> cat`</span><br><span class="line">touch $(date +%F).<span class="built_in">log</span></span><br></pre></td></tr></table></figure>
<h3 id="13-&#x5176;&#x5B83;"><a href="#13-&#x5176;&#x5B83;" class="headerlink" title="13. &#x5176;&#x5B83;"></a>13. &#x5176;&#x5B83;</h3><ul>
<li>&#x6267;&#x884C;&#x4E0A;&#x6761;&#x547D;&#x4EE4;&#xFF0C;&#x53D6;&#x4EE3;&#x6307;&#x5B9A;&#x5B57;&#x7B26;</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp xxx data02:/ect/</span><br><span class="line">^data02^data03 			<span class="comment"># &#x7B49;&#x6548;&#x4E8E;scp xxx data03:/ect/</span></span><br></pre></td></tr></table></figure>
<ul>
<li>&#x6392;&#x9664;</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm !(*.py) 		<span class="comment"># &#x5220;&#x9664;&#x9664;py&#x7ED3;&#x5C3E;&#x7684;&#x5176;&#x5B83;&#x6587;&#x4EF6;</span></span><br></pre></td></tr></table></figure>
<p>&#x5927;&#x4F53;&#x4E0A;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x591A;&#xFF0C;&#x4EE5;&#x540E;&#x78B0;&#x5230;&#x518D;&#x6DFB;&#x52A0;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux程序包管理之yum]]></title>
      <url>http://liu2lin600.github.io/2016/06/03/Linux%E7%A8%8B%E5%BA%8F%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Byum/</url>
      <content type="html"><![CDATA[<p>&#x7B80;&#x8981;&#x4ECB;&#x7ECD;yum&#x7684;&#x5E38;&#x89C1;&#x7528;&#x6CD5;<br><a id="more"></a></p>
<h2 id="&#x7B80;&#x4ECB;"><a href="#&#x7B80;&#x4ECB;" class="headerlink" title="&#x7B80;&#x4ECB;"></a>&#x7B80;&#x4ECB;</h2><blockquote>
<p>&#x3000;&#x3000;yum(Yellow dog Updater, Modified)&#x662F;RedHat&#x7CFB;&#x7EDF;&#x7684;&#x524D;&#x7AEF;&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x57FA;&#x4E8E;&#x5BF9;RPM&#x5305;&#x7684;&#x7BA1;&#x7406;&#xFF0C;&#x80FD;&#x591F;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4ECE;&#x6307;&#x5B9A;&#x7684;&#x670D;&#x52A1;&#x5668;&#x81EA;&#x52A8;&#x4E0B;&#x8F7D;RPM&#x5305;&#x8FDB;&#x884C;&#x5B89;&#x88C5;&#xFF0C;&#x5E76;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x4F9D;&#x8D56;&#x6027;&#x5173;&#x7CFB;&#xFF0C;&#x4ECE;&#x800C;&#x5728;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x89E3;&#x51B3;&#x4E86;&#x5728;&#x624B;&#x52A8;&#x5B89;&#x88C5;RPM&#x5305;&#x65F6;&#x70E6;&#x4EBA;&#x7684;&#x4F9D;&#x8D56;&#x95EE;&#x9898;<br>&#x3000;&#x3000;yum&#x4F9D;&#x8D56;&#x4E8E;&#x57FA;&#x4E8E;C/S&#x67B6;&#x6784;&#x7684;&#x6587;&#x4EF6;&#x670D;&#x52A1;&#x5668;&#xFF0C;Server&#x7AEF;&#x53EF;&#x4EE5;&#x662F;&#x6765;&#x81EA;&#x4E92;&#x8054;&#x7F51;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6765;&#x81EA;&#x5C40;&#x57DF;&#x7F51;&#xFF0C;&#x8FD9;&#x4E9B;&#x6587;&#x4EF6;&#x670D;&#x52A1;&#x5668;&#x7528;&#x6765;&#x5B58;&#x653E;yum&#x5728;&#x5B89;&#x88C5;&#x7A0B;&#x5E8F;&#x5305;&#x548C;&#x6240;&#x4F9D;&#x8D56;&#x7684;&#x5404;&#x79CD;&#x7A0B;&#x5E8F;&#x5305;&#xFF0C;&#x6839;&#x636E;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x63D0;&#x4F9B;&#x7684;&#x591A;&#x4E2A;&#x4ED3;&#x5E93;&#x5730;&#x5740;&#x627E;&#x5230;&#x8BE5;&#x4ED3;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#xFF0C;&#x4ED3;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x627E;&#x5230;&#x540E;&#x4F1A;&#x901A;&#x8FC7;&#x4E0B;&#x8F7D;&#x534F;&#x8BAE;&#x628A;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x5305;&#x4E0B;&#x8F7D;&#x5230;&#x672C;&#x5730;&#x7684;&#x7F13;&#x5B58;(&#x542B;&#x5143;&#x6570;&#x636E;&#x548C;&#x7A0B;&#x5E8F;&#x5305;)&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x5B89;&#x88C5;&#x64CD;&#x4F5C;&#xFF0C;&#x4E4B;&#x540E;&#x518D;&#x5220;&#x9664;&#x76F8;&#x5173;&#x7F13;&#x5B58;&#x3002;<br>&#x3000;&#x3000;&#x4E0D;&#x8FC7;&#x5728;&#x5B89;&#x88C5;&#x6709;&#x4F9D;&#x8D56;&#x7A0B;&#x5E8F;&#x8FC7;&#x7A0B;&#x4E2D;&#x5982;&#x679C;&#x53D1;&#x751F;&#x65AD;&#x7535;&#x7B49;&#x975E;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x65F6;&#xFF0C;yum&#x5C06;&#x5F88;&#x96BE;&#x5728;&#x4E0B;&#x6B21;&#x5B89;&#x88C5;&#x65F6;&#x89E3;&#x51B3;&#x6B64;&#x95EE;&#x9898;&#xFF0C;&#x65B0;&#x4E00;&#x4EE3;&#x7684;&#x7BA1;&#x7406;&#x5DE5;&#x5177;dnf&#x5728;&#x8FD9;&#x65B9;&#x9762;&#x5DF2;&#x7ECF;&#x6709;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x5904;&#x7406;&#x65B9;&#x6CD5;&#xFF0C;&#x76F8;&#x4FE1;dnf&#x53D6;&#x4EE3;yum&#x5E94;&#x8BE5;&#x4E5F;&#x662F;&#x8FDF;&#x65E9;&#x7684;&#x4E8B;&#xFF0C;&#x4F46;&#x76EE;&#x524D;yum&#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x666E;&#x904D;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x5F0F;&#xFF0C;&#x800C;&#x4E14;dnf&#x7684;&#x7528;&#x6CD5;&#x57FA;&#x672C;&#x8DDF;yum&#x4E00;&#x6837;&#xFF0C;&#x5B66;&#x597D;yum&#x4E3A;&#x4E86;&#x5C06;&#x6765;&#x66F4;&#x597D;&#x7684;&#x4F7F;&#x7528;dnf&#x2026;&#x2026;</p>
</blockquote>
<h2 id="&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h2><p><strong>/etc/yum.conf</strong>&#xFF1A;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x6587;&#x4EF6;  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[main]</span><br><span class="line">cachedir=/var/cache/yum/<span class="variable">$basearch</span>/<span class="variable">$releasever</span>   <span class="comment">#yum&#x4E0B;&#x8F7D;RPM&#x5305;&#x65F6;&#x7684;&#x7F13;&#x5B58;&#x76EE;&#x5F55;</span></span><br><span class="line">keepcache=0                                     <span class="comment">#&#x7F13;&#x5B58;&#x662F;&#x5426;&#x9700;&#x8981;&#x4FDD;&#x5B58; 1&#x8868;&#x793A;&#x4FDD;&#x5B58; 0&#x8868;&#x793A;&#x4E0D;&#x4FDD;&#x5B58;</span></span><br><span class="line">debuglevel=2                                    <span class="comment">#&#x8C03;&#x8BD5;&#x7EA7;&#x522B; &#x9ED8;&#x8BA4;&#x4E3A;2</span></span><br><span class="line">logfile=/var/<span class="built_in">log</span>/yum.log                        <span class="comment">#&#x5B9A;&#x4E49;yum&#x9ED8;&#x8BA4;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x540D;&#x79F0;</span></span><br><span class="line">exactarch=1                                     <span class="comment">#&#x662F;&#x5426;&#x53EA;&#x5347;&#x7EA7;&#x4E0E;&#x548C;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;&#x5305;&#x7684;cpu&#x4F53;&#x7CFB;&#x4E00;&#x81F4;&#x7684;&#x5305;</span></span><br><span class="line">obsoletes=1                                     <span class="comment">#&#x662F;&#x5426;&#x5141;&#x8BB8;&#x66F4;&#x65B0;&#x9648;&#x65E7;&#x7684;RPM&#x5305; 1&#x5141;&#x8BB8;&#xFF0C;2&#x4E0D;&#x5141;&#x8BB8;</span></span><br><span class="line">gpgcheck=1                                      <span class="comment">#&#x662F;&#x5426;&#x6267;&#x884C;GPG&#x7B7E;&#x540D;&#x68C0;&#x67E5;&#xFF0C;1&#x6267;&#x884C;&#xFF0C;0&#x4E0D;&#x6267;&#x884C;</span></span><br><span class="line">plugins=1                                       <span class="comment">#&#x662F;&#x5426;&#x5141;&#x8BB8;&#x4F7F;&#x7528;&#x63D2;&#x4EF6; 1&#x5141;&#x8BB8; 0&#x4E0D;&#x5141;&#x8BB8;</span></span><br><span class="line">installonly_limit=5                             <span class="comment">#&#x5141;&#x8BB8;&#x4FDD;&#x7559;&#x591A;&#x5C11;&#x4E2A;&#x5185;&#x6838;&#x5305;</span></span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p><strong>/etc/yum.repos.d/*.repo</strong>&#xFF1A;&#x5404;yum&#x4ED3;&#x5E93;&#x76F8;&#x5173;&#x914D;&#x7F6E;<br>&#x3000;&#x3000;&#x9ED8;&#x8BA4;&#x751F;&#x6210;&#x7684;&#x6709;&#xFF1A;CentOS-Base.repo(&#x9ED8;&#x8BA4;&#x542F;&#x7528;)&#x3001;CentOS-Debuginfo.repo&#x3001;CentOS-fasttrack.repo&#x3001;CentOS-Media.repo&#x3001;CentOS-Vault.repo&#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x4EE5;<code>.conf</code>&#x7ED3;&#x5C3E;&#x6587;&#x4EF6;&#x6307;&#x5B9A;&#x76F8;&#x5E94;&#x4ED3;&#x5E93;&#xFF0C;<strong>&#x8BBE;&#x7F6E;<font color="red">enabled=1</font>&#x6216;&#x4E0D;&#x5199;&#x5219;&#x5F00;&#x542F;&#x6B64;&#x4ED3;</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[base]                                  <span class="comment">#repo-ID&#xFF0C;base&#x4E3A;&#x57FA;&#x7840;&#x4ED3;&#xFF0C;&#x9ED8;&#x8BA4;&#x8FD8;&#x6709;updates&#x3001;extras&#x7B49;</span></span><br><span class="line">name=                                   <span class="comment">#yum&#x6E90;&#x7684;&#x8BF4;&#x660E;&#x4FE1;&#x606F;</span></span><br><span class="line">mirrorlist=                             <span class="comment">#yum&#x6E90;&#x7684;&#x955C;&#x50CF;&#x5730;&#x5740;</span></span><br><span class="line"><span class="comment">#baseurl={http://|ftp://|file://}       #yum&#x6E90;&#x7684;&#x771F;&#x6B63;&#x5730;&#x5740;&#xFF0C;&#x4E3A;repodata&#x76EE;&#x5F55;&#x6240;&#x5728;&#x76EE;&#x5F55;&#x8DEF;&#x5F84;&#xFF0C;&#x53EF;&#x591A;&#x4E2A;&#x8DEF;&#x5F84;&#x3002;&#x4E0E;mirrorlist&#x4E8C;&#x9009;&#x4E00;</span></span><br><span class="line">enabled=1                               <span class="comment">#1&#x4E3A;&#x751F;&#x6548;&#xFF0C;0&#x4E0D;&#x751F;&#x6548;&#xFF0C;&#x4E0D;&#x5199;&#x9ED8;&#x8BA4;&#x4E3A;1</span></span><br><span class="line">gpgcheck=1                              <span class="comment">#&#x662F;&#x5426;&#x8FDB;&#x884C;&#x6570;&#x5B57;&#x8BC1;&#x4E66;&#x9A8C;&#x8BC1;</span></span><br><span class="line">gpgkey=                                 <span class="comment">#&#x6570;&#x5B57;&#x8BC1;&#x4E66;&#x516C;&#x94A5;&#x7684;&#x4FDD;&#x5B58;&#x4F4D;&#x7F6E;&#xFF0C;&#x81EA;&#x5E26;&#x5149;&#x76D8;&#x4E3A;/etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</span></span><br><span class="line">enablegroups={1|0}&#xFF1A;                    <span class="comment">#&#x662F;&#x5426;&#x57FA;&#x4E8E;&#x7EC4;&#x6765;&#x6279;&#x91CF;&#x7BA1;&#x7406;&#x7A0B;&#x5E8F;&#x5305;</span></span><br><span class="line">failovermethod={roundrobin|priority}&#xFF1A;  <span class="comment">#&#x6709;&#x591A;&#x4E2A;url&#x65F6;&#xFF0C;&#x9009;&#x62E9;&#x7684;&#x6B21;&#x5E8F;&#xFF0C;roundrobin&#x968F;&#x673A;&#x9009;&#x62E9;&#xFF0C;&#x9ED8;&#x8BA4;&#x8F6E;&#x8BE2;</span></span><br><span class="line">cost=                                   <span class="comment">#&#x4ED3;&#x5E93;&#x4F18;&#x5148;&#x7EA7; ,&#x9ED8;&#x8BA4;&#x4E3A;1000</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>yum&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53EF;&#x7528;&#x53D8;&#x91CF;</strong><br><code>$releasever</code>&#xFF1A; &#x5F53;&#x524D;OS&#x53D1;&#x884C;&#x7248;&#x672C;&#x4E3B;&#x7248;&#x672C;&#x53F7; &#x5982;6&#x6216;7<br><code>$arch</code>&#xFF1A; &#x5E73;&#x53F0; &#x5982;ia32e&#x67B6;&#x6784;<br><code>$basearch</code>&#xFF1A; &#x57FA;&#x7840;&#x5E73;&#x53F0; &#x5982;x86_64<br><code>$uuid</code>&#xFF1A;&#x4E3A;&#x672C;&#x673A;&#x751F;&#x6210;&#x552F;&#x4E00;&#x7801;&#xFF0C;&#x5B58;&#x653E;/var/lib/yum/uuid<br><code>$YUM0-$YUM9</code>&#xFF1A;&#x53EF;&#x4F7F;&#x7528;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;    </p>
</blockquote>
<p><em>&#x66F4;&#x591A;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x67E5;&#x770B;<code>man yum.conf</code></em></p>
<h2 id="&#x4E3B;&#x8981;&#x7528;&#x6CD5;"><a href="#&#x4E3B;&#x8981;&#x7528;&#x6CD5;" class="headerlink" title="&#x4E3B;&#x8981;&#x7528;&#x6CD5;"></a>&#x4E3B;&#x8981;&#x7528;&#x6CD5;</h2><p><code>yum [options] [command] [package ...]</code></p>
<p><strong>[options]</strong></p>
<blockquote>
<p>-y&#xFF1A;&#x6240;&#x6709;&#x4EA4;&#x4E92;&#x5F0F;&#x81EA;&#x52A8;&#x56DE;&#x7B54;&#x4E3A;yes<br>-q&#xFF1A;&#x5B89;&#x9759;&#x6A21;&#x5F0F;&#x64CD;&#x4F5C;<br>&#x2013;nogpgcheck&#xFF1A; &#x7981;&#x6B62;gpg&#x68C0;&#x67E5;<br>&#x2013;disablerepo=repoidglob&#xFF1A; &#x4E34;&#x65F6;&#x7981;&#x7528;&#x6B64;&#x5904;&#x6307;&#x5B9A;&#x7684;&#x4ED3;&#x5E93;&#xFF08;&#x9ED8;&#x8BA4;enabled=1&#xFF09;<br>&#x2013;enablerepo=repoidglob&#xFF1A; &#x4E34;&#x65F6;&#x542F;&#x7528;<br>&#x2013;noplugins&#xFF1A; &#x7981;&#x7528;&#x6240;&#x6709;&#x63D2;&#x4EF6;  </p>
</blockquote>
<p><strong>[command]</strong></p>
<blockquote>
<p><code>repolist</code> [all|enabled|disabled]&#xFF1A;&#x663E;&#x793A;&#x914D;&#x7F6E;&#x4ED3;&#x5E93;&#x4FE1;&#x606F;<br><code>list</code> [all|glob_exp1]&#xFF1A;&#x53EF;&#x5B89;&#x88C5;&#x6216;&#x66F4;&#x65B0;&#x53CA;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x7684;rpm&#x5305;<br><code>list</code> {available|installed|updates} [glob_exp]&#xFF1A;&#x52A0;&#x901A;&#x914D;&#x7B26;&#x67E5;&#x8BE2;&#x76F8;&#x5173;&#x5339;&#x914D;&#x5305;  </p>
<blockquote>
<p>list available &#x53EF;&#x7528;&#x5305;<br>list updates &#x53EF;&#x7528;&#x5347;&#x7EA7;&#x5305;<br>list installed &#x5DF2;&#x5B89;&#x88C5;&#x5305;  </p>
</blockquote>
</blockquote>
<blockquote>
<p><code>install</code> package1&#x2026;&#xFF1A;&#x5B89;&#x88C5;&#x65B0;&#x8F6F;&#x4EF6;&#x5305;&#xFF0C;&#x4E5F;&#x53EF;&#x6307;&#x5B9A;&#x7248;&#x672C;&#x53F7;&#x5B89;&#x88C5;&#xFF0C;&#x9ED8;&#x8BA4;&#x5B89;&#x88C5;&#x6700;&#x65B0;&#x7248;  </p>
<blockquote>
<p><code>reinstall</code> package1&#x2026;&#xFF1A;&#x91CD;&#x65B0;&#x5B89;&#x88C5;  </p>
</blockquote>
</blockquote>
<blockquote>
<p><code>update</code> package1&#x2026;&#xFF1A; &#x5347;&#x7EA7;&#x7A0B;&#x5E8F;&#x5305;  </p>
<blockquote>
<p><code>check-update</code> package&#x2026;&#xFF1A;&#x68C0;&#x6D4B;&#x53EF;&#x7528;&#x5347;&#x7EA7;  </p>
</blockquote>
</blockquote>
<blockquote>
<p><code>remove|erase</code> package1&#x2026;&#xFF1A;&#x5378;&#x8F7D;<br><code>info</code> package&#xFF1A;&#x67E5;&#x770B;&#x4FE1;&#x606F;<br><code>provides|whatprovides</code> feature1&#x2026;&#xFF1A; &#x67E5;&#x770B;&#x7279;&#x6027;&#x6216;&#x6587;&#x4EF6;&#x7531;&#x54EA;&#x4E2A;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;<br><code>clean</code> [packages|metadata|expire-cache|rpmdb|plugins|all]&#xFF1A;&#x6E05;&#x7406;&#x672C;&#x5730;&#x7F13;&#x5B58;<br><code>search</code> string1&#x2026;&#xFF1A; &#x641C;&#x7D22;&#x5305;&#x540D;&#x53CA;&#x7B80;&#x4ECB;<br><code>makecache</code>&#xFF1A; &#x6784;&#x5EFA;&#x7F13;&#x5B58;<br><code>downgrade</code> package&#xFF1A;&#x964D;&#x7EA7;<br><code>deplist</code> package1&#x2026;&#xFF1A; &#x5305;&#x7684;&#x4F9D;&#x8D56;&#x4FE1;&#x606F;<br><code>history</code>&#xFF1A;&#x67E5;&#x770B;yum&#x4E8B;&#x52A1;&#x5386;&#x53F2;(&#x5B89;&#x88C5;&#xFF0C;&#x5378;&#x8F7D;&#xFF0C;&#x5347;&#x7EA7;)  </p>
<blockquote>
<p>history info<br>history list<br>history summary<br>history stats  </p>
</blockquote>
</blockquote>
<blockquote>
<p><code>group*</code>&#xFF1A; &#x5305;&#x7EC4;&#x7BA1;&#x7406;  </p>
<blockquote>
<p>grouplist&#xFF1A;&#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x4E2D;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x7684;&#x548C;&#x53EF;&#x7528;&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#x7EC4;<br>groupinfo&#xFF1A;&#x67E5;&#x8BE2;&#x5305;&#x7EC4;&#x5185;&#x8F6F;&#x4EF6;&#x5305;&#x5217;&#x8868;<br>groupinstall&#xFF1A;&#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x8F6F;&#x4EF6;&#x7EC4;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x8F6F;&#x4EF6;&#x5305;<br>groupupdate&#xFF1A;&#x66F4;&#x65B0;&#x6307;&#x5B9A;&#x8F6F;&#x4EF6;&#x7EC4;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x8F6F;&#x4EF6;&#x5305;<br>groupremove&#xFF1A;&#x5378;&#x8F7D;&#x6307;&#x5B9A;&#x8F6F;&#x4EF6;&#x7EC4;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x8F6F;&#x4EF6;&#x5305;</p>
</blockquote>
</blockquote>
<p>&#x5E38;&#x7528;&#x4F8B;&#x5B50;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yum repolist                           <span class="comment">#&#x5217;&#x51FA;&#x5F53;&#x524D;yum&#x4ED3;&#x4FE1;&#x606F;</span></span><br><span class="line">yum list php*                          <span class="comment">#&#x5217;&#x51FA;&#x8981;php&#x76F8;&#x5173;&#x7A0B;&#x5E8F;&#x5305;</span></span><br><span class="line">yum -y install httpd                   <span class="comment">#&#x5B89;&#x88C5;apache</span></span><br><span class="line">yum -y update httpd                    <span class="comment">#&#x5347;&#x7EA7;</span></span><br><span class="line">yum info tree                          <span class="comment">#&#x67E5;&#x770B;&#x7A0B;&#x5E8F;&#x5305;tree&#x4FE1;&#x606F;</span></span><br><span class="line">yum clean all                          <span class="comment">#&#x6E05;&#x7406;&#x7F13;&#x5B58;</span></span><br><span class="line">yum makecache                          <span class="comment">#&#x751F;&#x6210;yum&#x7F13;&#x5B58;</span></span><br><span class="line">yum <span class="built_in">history</span>                            <span class="comment">#&#x663E;&#x793A;yum&#x5386;&#x53F2;</span></span><br><span class="line">yum grouplist                          <span class="comment">#&#x67E5;&#x770B;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x7EC4;&#x5305;&#x4FE1;&#x606F;</span></span><br><span class="line">yum groupinstall <span class="string">&apos;Development Tools&apos;</span>   <span class="comment">#&#x5B89;&#x88C5;&#x7EC4;&#x5305;&#x4E2D;&#x6240;&#x6709;&#x7A0B;&#x5E8F;</span></span><br><span class="line">yum groupremove <span class="string">&apos;Development Tools&apos;</span>    <span class="comment">#&#x79FB;&#x9664;&#x7EC4;&#x5305;&#x4E2D;&#x6240;&#x6709;&#x7A0B;&#x5E8F;</span></span><br></pre></td></tr></table></figure>
<h2 id="&#x672C;&#x5730;&#x5149;&#x76D8;&#x505A;yum&#x6E90;"><a href="#&#x672C;&#x5730;&#x5149;&#x76D8;&#x505A;yum&#x6E90;" class="headerlink" title="&#x672C;&#x5730;&#x5149;&#x76D8;&#x505A;yum&#x6E90;"></a>&#x672C;&#x5730;&#x5149;&#x76D8;&#x505A;yum&#x6E90;</h2><ol>
<li><code>mount -r -t iso9660 /dev/sr0 /mnt/cdrom</code>&#xFF1A;&#x6302;&#x8F7D;&#x5149;&#x76D8;</li>
<li><code>vim /etc/yum.repo.d/CentOS-Local.repo</code>&#xFF1A;&#x65B0;&#x5EFA;&#x4ED3;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x5199;&#x5165;&#x4EE5;&#x4E0B;&#x4FE1;&#x606F;</li>
<li><code>yum repolist</code>&#xFF1A;&#x67E5;&#x770B;&#x4ED3;&#x4FE1;&#x606F;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[centos7]  </span><br><span class="line">name=yum local cdrom</span><br><span class="line">baseurl=file:///mnt/cdrom</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure>
<h2 id="&#x7B80;&#x5355;&#x642D;&#x5EFA;&#x672C;&#x5730;yum&#x4ED3;"><a href="#&#x7B80;&#x5355;&#x642D;&#x5EFA;&#x672C;&#x5730;yum&#x4ED3;" class="headerlink" title="&#x7B80;&#x5355;&#x642D;&#x5EFA;&#x672C;&#x5730;yum&#x4ED3;"></a>&#x7B80;&#x5355;&#x642D;&#x5EFA;&#x672C;&#x5730;yum&#x4ED3;</h2><ol>
<li>&#x5B89;&#x88C5;createrepo&#x5DE5;&#x5177;</li>
<li>&#x51C6;&#x5907;&#x597D;rpm&#x5305;&#x653E;&#x7F6E;/mnt/yum&#x76EE;&#x5F55;&#x4E0B;</li>
<li>createrepo /mnt/yum&#xFF1A;&#x521B;&#x5EFA;&#x4ED3;&#xFF0C;&#x4F1A;&#x5728;&#x5305;&#x76EE;&#x5F55;&#x4E0B;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;repodata&#x76EE;&#x5F55;</li>
<li>&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;.repo&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;&#x540C;&#x4E0A;&#xFF09;</li>
<li>yum repolist&#xFF1A;&#x67E5;&#x770B;&#x4ED3;&#x4FE1;&#x606F;</li>
</ol>
<h2 id="&#x5176;&#x5B83;"><a href="#&#x5176;&#x5B83;" class="headerlink" title="&#x5176;&#x5B83;"></a>&#x5176;&#x5B83;</h2><p>centos&#x9ED8;&#x8BA4;&#x5728;&#x7EBF;&#x6E90;&#x4E3A;&#x5B98;&#x65B9;&#xFF0C;&#x6709;&#x65F6;&#x8BBF;&#x95EE;&#x4F1A;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x7B80;&#x5355;&#x4E0B;&#x8F7D;&#x963F;&#x91CC;&#x6216;163&#x63D0;&#x4F9B;&#x7684;&#x955C;&#x50CF;repo&#x6587;&#x4EF6;&#xFF0C;&#x66F4;&#x6362;&#x7CFB;&#x7EDF;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak                  <span class="comment">#&#x5907;&#x4EFD;&#x539F;repo</span></span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repos     <span class="comment">#&#x4E0B;&#x8F7D;&#x5E76;&#x91CD;&#x547D;&#x540D;&#xFF0C;&#x5BF9;&#x5E94;&#x7248;&#x672C;5&#xFF0C;6&#xFF0C;7</span></span><br><span class="line">yum clean all                                                                               <span class="comment">#&#x6E05;&#x9664;&#x7F13;&#x5B58;</span></span><br><span class="line">yum makecache                                                                               <span class="comment">#&#x751F;&#x6210;&#x7F13;&#x5B58;</span></span><br></pre></td></tr></table></figure>
<p>&#x4EE5;&#x4E0A;&#x5185;&#x5BB9;&#x6574;&#x7406;&#x81EA;&#x9A6C;&#x54E5;&#x7B14;&#x8BB0;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux程序包管理之编译安装]]></title>
      <url>http://liu2lin600.github.io/2016/06/03/Linux%E7%A8%8B%E5%BA%8F%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8B%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<p>&#x7A0B;&#x5E8F;&#x5305;&#x5B89;&#x88C5;&#x6700;&#x540E;&#x4E00;&#x8BFE;<br><a id="more"></a></p>
<h2 id="&#x7B80;&#x4ECB;"><a href="#&#x7B80;&#x4ECB;" class="headerlink" title="&#x7B80;&#x4ECB;"></a>&#x7B80;&#x4ECB;</h2><p>&#x76F8;&#x6BD4;rpm&#x5305;&#x5B89;&#x88C5;&#xFF0C;&#x6E90;&#x7801;&#x5B89;&#x88C5;&#x7684;&#x597D;&#x5904;&#x5982;&#x4E0B;&#xFF1A; </p>
<ol>
<li>&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x8C03;&#x6574;&#x7F16;&#x8BD1;&#x53C2;&#x6570;&#xFF0C;&#x6700;&#x5927;&#x5316;&#x5730;&#x5B9A;&#x5236;&#x5B89;&#x88C5;&#x7ED3;&#x679C;   </li>
<li>&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x6700;&#x65B0;&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#xFF0C;&#x800C;Linux&#x53D1;&#x884C;&#x7248;&#x81EA;&#x5E26;&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x6700;&#x7A33;&#x5B9A;&#x7684;&#x8001;&#x7248;&#x672C;  </li>
<li>&#x76F8;&#x5BF9;&#x800C;&#x8A00;&#xFF0C;&#x6E90;&#x7801;&#x5B89;&#x88C5;&#x7684;&#x6027;&#x80FD;&#x662F;&#x6700;&#x4F18;&#x5F02;&#x7684;  </li>
<li>&#x5378;&#x8F7D;&#x4E5F;&#x6BD4;&#x8F83;&#x65B9;&#x4FBF;&#x548C;&#x7B80;&#x5355;&#xFF0C;&#x76F4;&#x63A5;&#x5220;&#x9664;&#x5B89;&#x88C5;&#x7684;&#x6307;&#x5B9A;&#x7684;&#x76EE;&#x5F55;&#x5373;&#x53EF;&#xFF0C;&#x540C;&#x65F6;&#x5B83;&#x6BD4;&#x8F83;&#x5B89;&#x5168; </li>
</ol>
<h2 id="&#x5B89;&#x88C5;"><a href="#&#x5B89;&#x88C5;" class="headerlink" title="&#x5B89;&#x88C5;"></a>&#x5B89;&#x88C5;</h2><p>Linux&#x4E0A;&#x771F;&#x6B63;&#x8BA4;&#x8BC6;&#x7684;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x4E5F;&#x662F;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#xFF0C;&#x6E90;&#x7801;&#x5305;&#x7684;&#x5B89;&#x88C5;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x901A;&#x8FC7;&#x81EA;&#x5DF1;&#x7684;&#x914D;&#x7F6E;&#x751F;&#x6210;&#x4E8C;&#x8FDB;&#x5236;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x4E00;&#x822C;&#x7684;&#x8FC7;&#x7A0B;&#x4E3A;&#xFF1A;<strong>&#x6E90;&#x7A0B;&#x5E8F;&#x2013;&gt;&#x9884;&#x5904;&#x7406;&#x2013;&gt;&#x7F16;&#x8BD1;&#x2013;&gt;&#x6C47;&#x7F16;&#x2013;&gt;&#x94FE;&#x63A5;&#x2013;&gt;&#x4E8C;&#x8FDB;&#x5236;&#x683C;&#x5F0F;</strong>&#x3002;&#x800C;&#x5728;linux&#x7684;&#x5927;&#x90E8;&#x5206;&#x7A0B;&#x5E8F;&#x662F;&#x7531;C&#x8BED;&#x8A00;&#x6765;&#x7F16;&#x5199;&#x7684;&#xFF0C;gcc&#x5C31;&#x662F;&#x7528;&#x6765;&#x7F16;&#x8BD1;C&#x7684;&#x7F16;&#x8BD1;&#x5668;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5B89;&#x88C5;&#x524D;&#x9700;&#x8981;&#x5148;&#x5B89;&#x88C5;gcc&#x3002;&#x4EE5;&#x4E0B;&#x5C31;&#x662F;C&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;&#x4E09;&#x6B65;&#x9AA4;&#xFF08;&#x5148;&#x4E0B;&#x8F7D;&#x6E90;&#x7801;&#x5E76;&#x89E3;&#x538B;cd&#x8FDB;&#x53BB;&#xFF09;  </p>
<p><strong>&#x5EFA;&#x8BAE;&#xFF1A;&#x5B89;&#x88C5;&#x524D;&#x67E5;&#x770B;INSTALL&#xFF0C;README</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure     <span class="comment"># &#x751F;&#x6210;makefile&#x6587;&#x4EF6;</span></span><br><span class="line">make            <span class="comment"># &#x5C06;&#x6E90;&#x4EE3;&#x7801;&#x6587;&#x4EF6;&#x53D8;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x7684;&#x53EF;&#x6267;&#x884C;&#x7A0B;&#x5E8F;</span></span><br><span class="line">make install    <span class="comment"># &#x5C06;&#x7F16;&#x8BD1;&#x597D;&#x7684;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#x590D;&#x5236;&#x5230;&#x7CFB;&#x7EDF;&#x4E2D;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>./configure</code>&#xFF1A;&#x8FD9;&#x6B65;&#x5728;&#x6E90;&#x7801;&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;&#x4E2D;&#x662F;&#x6BD4;&#x8F83;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x6B65;&#xFF0C;&#x901A;&#x8FC7;&#x9009;&#x9879;&#x4F20;&#x9012;&#x53C2;&#x6570;&#xFF0C;&#x6307;&#x5B9A;&#x542F;&#x7528;&#x7279;&#x6027;&#x3001;&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#x7B49;&#xFF0C;&#x6267;&#x884C;&#x65F6;&#x4F1A;&#x53C2;&#x8003;&#x7528;&#x6237;&#x7684;&#x6307;&#x5B9A;&#x4EE5;&#x53CA;Makefile.in&#x6587;&#x4EF6;&#x751F;&#x6210;makefile&#xFF0C;&#x540C;&#x65F6;&#x68C0;&#x6D4B;&#x5B89;&#x88C5;&#x73AF;&#x5883;&#xFF08;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x7531;autoconf&#x6765;&#x751F;&#x6210;configure&#x811A;&#x672C;&#xFF0C;automake&#x6765;&#x751F;&#x6210;Makefile.in&#xFF09;&#xFF0C;&#x4E00;&#x822C;&#x6709;&#x4EE5;&#x4E0B;&#x9009;&#x9879;<blockquote>
<p><code>--help</code>&#xFF1A;&#x67E5;&#x770B;&#x5E2E;&#x52A9;&#x4FE1;&#x606F;<br><code>--prefix=/usr/local/xxx</code>&#xFF1A;&#x6307;&#x660E;&#x9ED8;&#x8BA4;&#x5B89;&#x88C5;&#x4F4D;&#x7F6E;&#xFF0C;&#x5EFA;&#x8BAE;&#x5B89;&#x88C5;&#x5728;/usr/local&#x4E0B;<br><code>--sysconfdir=/PATH/TO/CONFFILE_PATH</code>&#xFF1A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B89;&#x88C5;&#x4F4D;&#x7F6E;<br><code>--with-PACKAGE[=ARG]</code>&#xFF1A;&#x4F9D;&#x8D56;&#x5305;&#x9009;&#x9879;<br><code>--without-PACKAGE</code>&#xFF1A;<br><code>--disable-FEATURE</code>&#xFF1A;&#x5F00;&#x542F;&#x6216;&#x5173;&#x95ED;&#x67D0;&#x7279;&#x6027;<br><code>--enable-FEATURE[=ARG]</code>  </p>
</blockquote>
</li>
</ul>
<h2 id="&#x5B89;&#x88C5;&#x540E;&#x914D;&#x7F6E;"><a href="#&#x5B89;&#x88C5;&#x540E;&#x914D;&#x7F6E;" class="headerlink" title="&#x5B89;&#x88C5;&#x540E;&#x914D;&#x7F6E;"></a>&#x5B89;&#x88C5;&#x540E;&#x914D;&#x7F6E;</h2><ol>
<li>&#x5C06;&#x7A0B;&#x5E8F;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x52A0;&#x5165;<strong><em>PATH&#x73AF;&#x5883;&#x53D8;&#x91CF;</em></strong>  <blockquote>
<p>&#x65B0;&#x5EFA;/etc/profile.d/NAME.sh&#xFF0C;&#x6DFB;&#x52A0;<code>export PATH=$PATH:/usr/local/xxx/bin</code></p>
</blockquote>
</li>
<li>&#x5BFC;&#x51FA;<strong><em>&#x5E93;&#x6587;&#x4EF6;</em></strong>&#xFF1A;&#x9ED8;&#x8BA4;&#x7CFB;&#x7EDF;&#x641C;&#x7D22;&#x5E93;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;/lib[64], /usr/lib[64]&#xFF0C;&#x8981;&#x589E;&#x6DFB;&#x989D;&#x5916;&#x641C;&#x5BFB;&#x8DEF;&#x5F84;<blockquote>
<p>&#x65B0;&#x5EFA;/etc/ld.so.conf.d/xxx.conf&#xFF0C;&#x5199;&#x5165;<code>/usr/local/xxx/lib</code><br>&#x4F7F;&#x7528;<code>ldconfig [-v]</code>&#x547D;&#x4EE4;&#xFF0C;&#x901A;&#x77E5;&#x7CFB;&#x7EDF;&#x91CD;&#x65B0;&#x641C;&#x5BFB;&#x5E93;&#x6587;&#x4EF6;(-v: &#x663E;&#x793A;&#x8FC7;&#x7A0B;)</p>
</blockquote>
</li>
<li>&#x5BFC;&#x51FA;<strong><em>&#x5934;&#x6587;&#x4EF6;</em></strong>&#xFF1A;&#x9ED8;&#x8BA4;&#x8DEF;&#x5F84;&#x4E3A;/usr/include&#xFF0C;&#x589E;&#x6DFB;&#x5934;&#x6587;&#x4EF6;&#x641C;&#x5BFB;&#x8DEF;&#x5F84;<blockquote>
<p>&#x65B9;&#x5F0F;1&#xFF1A;ln -s /usr/local/xxx/include/* /usr/include/<br>&#x65B9;&#x5F0F;2&#xFF1A;ln -s /usr/local/xxx/include  /usr/include/xxx</p>
</blockquote>
</li>
<li>&#x5BFC;&#x51FA;<strong><em>man&#x6587;&#x4EF6;</em></strong>&#x8DEF;&#x5F84;&#xFF1A;&#x4F7F;man&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x641C;&#x7D22;&#x5230;&#x7A0B;&#x5E8F;&#x7684;&#x5E2E;&#x52A9;&#x4FE1;&#x606F;  <blockquote>
<p>&#x5728;/etc/man.config&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x6761;<code>MANPATH /usr/local/xx/man</code>&#xFF08;centos7: /etc/man_db.conf&#xFF09;</p>
</blockquote>
</li>
</ol>
<p>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x7B80;&#x8981;&#x7684;&#x6E90;&#x7801;&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;&#xFF0C;&#x66F4;&#x591A;&#x5185;&#x5BB9;&#x4EE5;&#x540E;&#x518D;&#x6DFB;&#x52A0;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[LVM2简介及实现]]></title>
      <url>http://liu2lin600.github.io/2016/05/31/LVM2%E7%AE%80%E4%BB%8B%E5%8F%8A%E5%AE%9E%E7%8E%B0/</url>
      <content type="html"><![CDATA[<p>&#x7B80;&#x8981;&#x4ECB;&#x7ECD;LVM&#x903B;&#x8F91;&#x5377;&#x53CA;&#x7B80;&#x5355;&#x8FD0;&#x7528;</p>
<a id="more"></a>
<h2 id="&#x7B80;&#x4ECB;"><a href="#&#x7B80;&#x4ECB;" class="headerlink" title="&#x7B80;&#x4ECB;"></a>&#x7B80;&#x4ECB;</h2><p>LVM&#x662F;&#x903B;&#x8F91;&#x5377;&#x7BA1;&#x7406;&#xFF08;Logical Volume Manager&#xFF09;&#x7684;&#x7B80;&#x79F0;&#xFF0C;&#x5B83;&#x662F;&#x5EFA;&#x7ACB;&#x5728;&#x7269;&#x7406;&#x5B58;&#x50A8;&#x8BBE;&#x5907;&#x4E4B;&#x4E0A;&#x7684;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x5C42;&#xFF0C;&#x5141;&#x8BB8;&#x4F60;&#x751F;&#x6210;&#x903B;&#x8F91;&#x5B58;&#x50A8;&#x5377;,&#x4E0E;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x7269;&#x7406;&#x5B58;&#x50A8;&#x5728;&#x7BA1;&#x7406;&#x4E0A;&#x76F8;&#x6BD4;,&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x597D;&#x7075;&#x6D3B;&#x6027;&#x3002;LVM&#x5C06;&#x5B58;&#x50A8;&#x865A;&#x62DF;&#x5316;,&#x4F7F;&#x7528;&#x903B;&#x8F91;&#x5377;,&#x4F60;&#x4E0D;&#x4F1A;&#x53D7;&#x9650;&#x4E8E;&#x7269;&#x7406;&#x78C1;&#x76D8;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x53E6;&#x5916;&#xFF0C;&#x4E0E;&#x786C;&#x4EF6;&#x76F8;&#x5173;&#x7684;&#x5B58;&#x50A8;&#x8BBE;&#x7F6E;&#x88AB;&#x5176;&#x9690;&#x85CF;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x505C;&#x6B62;&#x5E94;&#x7528;&#x6216;&#x5378;&#x8F7D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6765;&#x8C03;&#x6574;&#x5377;&#x5927;&#x5C0F;&#x6216;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#xFF0C;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x7684;&#x6765;&#x6269;&#x5C55;&#x6216;&#x7F29;&#x5C0F;&#x903B;&#x8F91;&#x5377;&#x5927;&#x5C0F;&#xFF0C;&#x540C;&#x65F6;&#x903B;&#x8F91;&#x5377;&#x652F;&#x6301;&#x5FEB;&#x7167;&#x529F;&#x80FD;<br><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/lvm2.png" alt="LVM&#x793A;&#x610F;&#x56FE;"></p>
<p><strong>&#x8BF4;&#x660E;</strong></p>
<ul>
<li><strong>PV</strong>&#xFF1A;physical volume &#x7269;&#x7406;&#x5377;&#x5728;&#x903B;&#x8F91;&#x5377;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x6700;&#x5E95;&#x5C42;&#xFF0C;&#x53EF;&#x4E3A;&#x6574;&#x4E2A;&#x7269;&#x7406;&#x786C;&#x76D8;&#x6216;&#x5B9E;&#x9645;&#x7269;&#x7406;&#x786C;&#x76D8;&#x4E0A;&#x7684;&#x5206;&#x533A;</li>
<li><strong>VG</strong>&#xFF1A;volume group &#x5377;&#x7EC4;&#x5EFA;&#x7ACB;&#x5728;&#x7269;&#x7406;&#x5377;&#x4E0A;&#xFF0C;&#x4E00;&#x5377;&#x7EC4;&#x4E2D;&#x81F3;&#x5C11;&#x8981;&#x5305;&#x62EC;&#x4E00;&#x7269;&#x7406;&#x5377;&#xFF0C;&#x5377;&#x7EC4;&#x5EFA;&#x7ACB;&#x540E;&#x53EF;&#x52A8;&#x6001;&#x7684;&#x6DFB;&#x52A0;&#x5377;&#x5230;&#x5377;&#x7EC4;&#x4E2D;&#xFF0C;&#x7C7B;&#x4F3C;&#x78C1;&#x76D8;&#x7684;&#x6269;&#x5C55;&#x5206;&#x533A;&#xFF0C;&#x672C;&#x8EAB;&#x4E0D;&#x80FD;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x9700;&#x518D;&#x5212;&#x5206;&#x6210;LV&#x6765;&#x4F7F;&#x7528;&#xFF0C;&#x4E00;&#x4E2A;&#x903B;&#x8F91;&#x5377;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x5DE5;&#x7A0B;&#x4E2D;&#x53EF;&#x6709;&#x591A;&#x4E2A;&#x5377;&#x7EC4;</li>
<li><strong>LV</strong>&#xFF1A;logical volume &#x903B;&#x8F91;&#x5377;&#x5EFA;&#x7ACB;&#x5728;&#x5377;&#x7EC4;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x5377;&#x7EC4;&#x4E2D;&#x672A;&#x5206;&#x914D;&#x7A7A;&#x95F4;&#x53EF;&#x7528;&#x4E8E;&#x5EFA;&#x7ACB;&#x65B0;&#x7684;&#x903B;&#x8F91;&#x5377;&#xFF0C;&#x903B;&#x8F91;&#x5377;&#x5EFA;&#x7ACB;&#x540E;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x6269;&#x5C55;&#x548C;&#x7F29;&#x5C0F;&#x7A7A;&#x95F4;</li>
<li><strong>PE</strong>&#xFF1A;physical extent &#x7269;&#x7406;&#x533A;&#x57DF;&#x662F;&#x7269;&#x7406;&#x5377;&#x4E2D;&#x53EF;&#x7528;&#x4E8E;&#x5206;&#x914D;&#x7684;&#x6700;&#x5C0F;&#x5B58;&#x50A8;&#x5355;&#x5143;&#xFF0C;&#x7269;&#x7406;&#x533A;&#x57DF;&#x5927;&#x5C0F;&#x5728;&#x5EFA;&#x7ACB;&#x5377;&#x7EC4;&#x65F6;&#x6307;&#x5B9A;&#xFF0C;&#x4E00;&#x65E6;&#x786E;&#x5B9A;&#x4E0D;&#x80FD;&#x66F4;&#x6539;&#xFF0C;&#x540C;&#x4E00;&#x5377;&#x7EC4;&#x6240;&#x6709;&#x7269;&#x7406;&#x5377;&#x7684;&#x7269;&#x7406;&#x533A;&#x57DF;&#x5927;&#x5C0F;&#x9700;&#x4E00;&#x81F4;&#xFF0C;&#x65B0;PV&#x52A0;&#x5165;&#x5230;VG&#x540E;&#xFF0C;PE&#x5927;&#x5C0F;&#x81EA;&#x52A8;&#x66F4;&#x6539;&#x4E3A;VG&#x4E2D;&#x5B9A;&#x4E49;&#x7684;PE&#x5927;&#x5C0F;</li>
</ul>
<p><strong>&#x7BA1;&#x7406;&#x5DE5;&#x5177;</strong></p>
<blockquote>
<p>PV&#x7BA1;&#x7406;&#x5DE5;&#x5177;</p>
<ul>
<li>pvs: &#x7B80;&#x8981;&#x663E;&#x793A;&#x7269;&#x7406;&#x5377;&#x4FE1;&#x606F;  </li>
<li>pvdisplay: &#x663E;&#x793A;&#x7269;&#x7406;&#x5377;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;    </li>
<li>pvcreate: &#x521B;&#x5EFA;&#x7269;&#x7406;&#x5377;  </li>
<li>pvremove: &#x79FB;&#x9664;&#x7269;&#x7406;&#x5377; </li>
</ul>
</blockquote>
<blockquote>
<p>VG&#x7BA1;&#x7406;&#x5DE5;&#x5177;</p>
<ul>
<li>vgs: &#x7B80;&#x8981;&#x663E;&#x793A;&#x5377;&#x7EC4;&#x4FE1;&#x606F;</li>
<li>vgdisplay: &#x663E;&#x793A;&#x5377;&#x7EC4;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;   </li>
<li>vgcreate: &#x521B;&#x5EFA;&#x5377;&#x7EC4;</li>
<li>vgextend: &#x6269;&#x5C55;&#x5377;&#x7EC4;</li>
<li>vgreduce: &#x7F29;&#x5C0F;&#x5377;&#x7EC4;  </li>
<li>vgremove&#xFF1A;&#x5220;&#x9664;&#x5377;&#x7EC4;</li>
</ul>
</blockquote>
<blockquote>
<p>LV&#x7BA1;&#x7406;&#x5DE5;&#x5177;</p>
<ul>
<li>lvs: &#x7B80;&#x8981;&#x663E;&#x793A;&#x903B;&#x8F91;&#x5377;&#x4FE1;&#x606F;</li>
<li>lvdisplay: &#x663E;&#x793A;&#x903B;&#x8F91;&#x5377;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;</li>
<li>lvcreate: &#x521B;&#x5EFA;&#x903B;&#x8F91;&#x5377;<br>-L: &#x5927;&#x5C0F;[mMgGtT]<br>-n: &#x6307;&#x5B9A;&#x521B;&#x5EFA;&#x5377;&#x540D;<br>-s: &#x6307;&#x5B9A;&#x521B;&#x5EFA;&#x4E3A;&#x5FEB;&#x7167;<br>-p: &#x6743;&#x9650;[r|rw],&#x9ED8;&#x8BA4;rw  </li>
<li>lvextend: &#x6269;&#x5C55;&#x903B;&#x8F91;&#x5377;<br>-L: &#x6307;&#x5B9A;&#x5927;&#x5C0F;  </li>
<li>resize2fs: &#x8C03;&#x6574;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</li>
<li>lvremove: &#x7F29;&#x5C0F;&#x903B;&#x8F91;&#x5377;</li>
</ul>
</blockquote>
<h2 id="&#x521B;&#x5EFA;LVM"><a href="#&#x521B;&#x5EFA;LVM" class="headerlink" title="&#x521B;&#x5EFA;LVM"></a>&#x521B;&#x5EFA;LVM</h2><p>&#x521B;&#x5EFA;LVM&#x524D;&#xFF0C;&#x4F7F;&#x7528;<code>fdisk</code>&#x5C06;&#x78C1;&#x76D8;&#x5206;&#x533A;&#xFF0C;&#x5E76;&#x8C03;&#x6574;&#x5206;&#x533A;&#x7C7B;&#x578B;&#x4E3A;8e(Linux LVM)<br><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/lvm_8e.png" alt="lvm&#x5206;&#x533A;&#x7C7B;&#x578B;"></p>
<ol>
<li><p>&#x521B;&#x5EFA;&#x7269;&#x7406;&#x5377;PV<br><code>pvcreate /dev/sdc5 /dev/sdc6</code><br><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/pvcreate.png" alt="&#x521B;&#x5EFA;PV"></p>
</li>
<li><p>&#x521B;&#x5EFA;&#x5377;&#x7EC4;VG&#xFF0C;&#x5E76;&#x5C06;PV&#x52A0;&#x5165;&#x5377;&#x7EC4;&#x4E2D;<br><code>vgcreate VG_name /dev/sdc5 /dev/sdc6</code><br><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/vgcreate.png" alt="&#x521B;&#x5EFA;VG"></p>
</li>
<li><p>&#x57FA;&#x4E8E;&#x5377;&#x7EC4;&#x521B;&#x5EFA;&#x903B;&#x8F91;&#x5377;LV<br><code>lvcreate -n LV_name -L 2[mMgGtT] VG_name</code><br><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/lvcreate.png" alt="&#x521B;&#x5EFA;PV"></p>
</li>
<li><p>&#x4E3A;LV&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;<br><code>mkfs -t ext4 [-b 1024 -L MYLV] /dev/VG_name/LV_name</code><br><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/lv_mkfs.png" alt="&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;"></p>
</li>
<li><p>&#x6302;&#x8F7D;&#x4F7F;&#x7528;<br><code>mount /dev/VG_name/LV_name /mnt/LV</code><br><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/lv_mount.png" alt="&#x6302;&#x8F7D;&#x903B;&#x8F91;&#x5377;"></p>
</li>
</ol>
<ul>
<li><strong>&#x8865;&#x5145;&#x8BF4;&#x660E;</strong><br><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/lvm_link.png" alt="lvm&#x8BBE;&#x5907;&#x6620;&#x5C04;&#x5173;&#x7CFB;"></li>
</ul>
<p>&#x4EE5;&#x4E0A;&#x4E3A;&#x7B80;&#x5355;&#x7684;&#x521B;&#x5EFA;&#x903B;&#x8F91;&#x5377;&#x8FC7;&#x7A0B;</p>
<h2 id="&#x79FB;&#x9664;&#x64CD;&#x4F5C;"><a href="#&#x79FB;&#x9664;&#x64CD;&#x4F5C;" class="headerlink" title="&#x79FB;&#x9664;&#x64CD;&#x4F5C;"></a>&#x79FB;&#x9664;&#x64CD;&#x4F5C;</h2><p>PV/VG&#x7684;&#x79FB;&#x9664;&#x9700;&#x786E;&#x4FDD;&#x5728;LV&#x672A;&#x4F7F;&#x7528;&#x7684;&#x7A7A;&#x95F4;&#x4E0A;&#x8FDB;&#x884C;&#xFF0C;&#x5220;&#x9664;&#x6574;&#x4E2A;lvm&#x9700;&#x5148;&#x79FB;&#x9664;LV&#xFF0C;&#x518D;&#x5220;VG&#xFF0C;&#x6700;&#x540E;&#x5220;PV</p>
<ul>
<li><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/vg_reduce.png" alt="PV/VG&#x6DFB;&#x52A0;&#x79FB;&#x9664;&#x64CD;&#x4F5C;"></li>
<li><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/lvm_remove.png" alt="lvm&#x5220;&#x9664;"></li>
</ul>
<h2 id="&#x6269;&#x5C55;&#x903B;&#x8F91;&#x5377;"><a href="#&#x6269;&#x5C55;&#x903B;&#x8F91;&#x5377;" class="headerlink" title="&#x6269;&#x5C55;&#x903B;&#x8F91;&#x5377;"></a>&#x6269;&#x5C55;&#x903B;&#x8F91;&#x5377;</h2><p>&#x5728;VG&#x5927;&#x5C0F;&#x8303;&#x56F4;&#x5185;&#x53EF;&#x521B;&#x5EFA;&#x591A;&#x4E2A;&#x903B;&#x8F91;&#x5377;&#xFF0C;&#x6BCF;&#x4E2A;&#x5377;&#x53EF;&#x4EE5;&#x6269;&#x5C55;&#x7F29;&#x5C0F;&#xFF0C;&#x7F29;&#x5C0F;&#x6709;&#x98CE;&#x9669;&#xFF0C;&#x6269;&#x5C55;&#x53EF;&#x4EE5;&#x5728;&#x7EBF;&#x6267;&#x884C;&#xFF0C;&#x65E0;&#x9700;&#x5378;&#x8F7D;&#x903B;&#x8F91;&#x5377;&#xFF0C;&#x5982;&#x679C;&#x5377;&#x7EC4;&#x7A7A;&#x95F4;&#x4E0D;&#x591F;&#xFF0C;&#x5219;&#x9700;PV&#x6765;&#x6269;&#x5145;VG&#x7A7A;&#x95F4;&#x518D;&#x8FDB;&#x884C;&#x6269;&#x5C55;LV(&#x6269;&#x5145;&#x89C1;&#x4E0A;&#x56FE;)  </p>
<ol>
<li><code>lvextend -L [+]1G /dev/VG_name/LV_name</code> : &#x6269;&#x5C55;&#x903B;&#x8F91;&#x5377;(+&#x8868;&#x793A;&#x589E;&#x52A0;&#x7684;&#x91CF;&#xFF0C;&#x4E0D;&#x52A0;&#x8868;&#x793A;&#x589E;&#x52A0;&#x81F3;)    </li>
<li><code>resize2fs /dev/VG_name/LV_name</code>: &#x8C03;&#x6574;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;(&#x7269;&#x7406;&#x8FB9;&#x754C;)<br><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/lvextend.png" alt="&#x903B;&#x8F91;&#x5377;&#x6269;&#x5C55;"></li>
</ol>
<h2 id="&#x7F29;&#x5C0F;&#x903B;&#x8F91;&#x5377;"><a href="#&#x7F29;&#x5C0F;&#x903B;&#x8F91;&#x5377;" class="headerlink" title="&#x7F29;&#x5C0F;&#x903B;&#x8F91;&#x5377;"></a>&#x7F29;&#x5C0F;&#x903B;&#x8F91;&#x5377;</h2><p>&#x7F29;&#x5C0F;&#x903B;&#x8F91;&#x5377;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x5728;&#x7EBF;&#x6267;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x7EBF;&#x6267;&#x884C;&#x7F29;&#x5C0F;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x6570;&#x636E;&#x4E22;&#x5931;&#x3002;&#x5982;&#x9700;&#x7F29;&#x5C0F;&#x8981;&#x5148;&#x5378;&#x8F7D;&#x518D;&#x6267;&#x884C;&#xFF0C;&#x4F46;&#x662F;&#x6B64;&#x64CD;&#x4F5C;&#x6709;&#x98CE;&#x9669;&#xFF0C;&#x975E;&#x5FC5;&#x8981;&#x60C5;&#x51B5;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#xFF0C;&#x540C;&#x65F6;&#x786E;&#x4FDD;&#x7A7A;&#x95F4;&#x8DB3;&#x591F;&#x5BB9;&#x7EB3;&#x5DF2;&#x6709;&#x6570;&#x636E;</p>
<ol>
<li><code>umount /dev/VG_name/LV_name</code></li>
<li><code>e2fsck -f /dev/VG/LV</code></li>
<li><code>resize2fs /dev/VG_name/LV_name [+]2[mMgGtT]</code></li>
<li><code>lvreduce [+]2[mMgGtT] /dev/VG_name/LV_name</code></li>
<li><code>mount /dev/VG_name/LV_name /mnt/mylv</code><br><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/lvreduce.png" alt="&#x903B;&#x8F91;&#x5377;&#x7F29;&#x5C0F;"></li>
</ol>
<h2 id="&#x903B;&#x8F91;&#x5377;&#x5FEB;&#x7167;"><a href="#&#x903B;&#x8F91;&#x5377;&#x5FEB;&#x7167;" class="headerlink" title="&#x903B;&#x8F91;&#x5377;&#x5FEB;&#x7167;"></a>&#x903B;&#x8F91;&#x5377;&#x5FEB;&#x7167;</h2><p>&#x5FEB;&#x7167;&#x5377;(snapshot)&#x4E3A;&#x786E;&#x4FDD;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x5206;&#x533A;&#x7684;&#x5B8C;&#x6574;&#x67D0;&#x4E00;&#x65F6;&#x523B;&#x7684;&#x5907;&#x4EFD;&#x521B;&#x5EFA;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x5907;&#x4EFD;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4E00;&#x4E2A;&#x5206;&#x533A;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x6570;&#x636E;&#x5E93;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x800C;&#x5BFC;&#x81F4;&#x5907;&#x4EFD;&#x51FA;&#x6765;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x5B8C;&#x6574;&#xFF0C;&#x5FEB;&#x7167;&#x521B;&#x5EFA;&#x521D;&#x671F;&#x4E0D;&#x5360;&#x7528;&#x5B9E;&#x9645;&#x7A7A;&#x95F4;&#xFF0C;&#x5168;&#x90E8;&#x6570;&#x636E;&#x5747;&#x6307;&#x5411;&#x6E90;&#x6570;&#x636E;&#xFF0C;&#x540C;&#x65F6;&#x76D1;&#x63A7;&#x6570;&#x636E;&#x53D8;&#x5316;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#x624D;&#x5C06;&#x539F;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x5230;&#x5FEB;&#x7167;&#xFF0C;&#x6240;&#x4EE5;&#x5FEB;&#x7167;&#x7684;&#x5927;&#x5C0F;&#x53D6;&#x51B3;&#x4E8E;&#x539F;&#x6570;&#x636E;&#x7684;&#x53D8;&#x5316;&#x91CF;&#x3002;</p>
<ol>
<li><code>lvcreate -L 2[mMgGtT] -p r -s -n snapshot_lv_name original_lv_name</code></li>
<li><code>mount /dev/VG_NAME/snapshot_lv_name /mnt/snap</code><br><img src="/2016/05/31/LVM2&#x7B80;&#x4ECB;&#x53CA;&#x5B9E;&#x73B0;/lvm_snapshot.png" alt="lvm&#x5FEB;&#x7167;"></li>
</ol>
<p>LVM2&#x5C31;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x5230;&#x6B64;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[RAID简介及软件实践]]></title>
      <url>http://liu2lin600.github.io/2016/05/30/RAID%E7%AE%80%E4%BB%8B%E5%8F%8A%E8%BD%AF%E4%BB%B6%E5%AE%9E%E8%B7%B5/</url>
      <content type="html"><![CDATA[<p>&#x72EC;&#x7ACB;&#x78C1;&#x76D8;&#x5197;&#x4F59;&#x9635;&#x5217;&#x7B80;&#x8981;&#x4ECB;&#x7ECD;&#x53CA;&#x8F6F;&#x4EF6;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x5B9E;&#x4F8B;<br><a id="more"></a></p>
<h2 id="RAID&#x7B80;&#x4ECB;"><a href="#RAID&#x7B80;&#x4ECB;" class="headerlink" title="RAID&#x7B80;&#x4ECB;"></a>RAID&#x7B80;&#x4ECB;</h2><blockquote>
<p>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;RAID&#x5168;&#x79F0;&#x72EC;&#x7ACB;&#x78C1;&#x76D8;&#x5197;&#x4F59;&#x9635;&#x5217;&#xFF08;Redundant Array of Independent Disks&#xFF09;&#xFF0C;&#x65E7;&#x79F0;&#x5EC9;&#x4EF7;&#x78C1;&#x76D8;&#x5197;&#x4F59;&#x9635;&#x5217;&#xFF08;Redundant Array of Inexpensive Disks&#xFF09;&#xFF0C;&#x7B80;&#x79F0;&#x78C1;&#x76D8;&#x9635;&#x5217;&#x3002;&#x5176;&#x57FA;&#x672C;&#x601D;&#x60F3;&#x5C31;&#x662F;&#x628A;&#x591A;&#x4E2A;&#x76F8;&#x5BF9;&#x4FBF;&#x5B9C;&#x7684;&#x786C;&#x76D8;&#x7EC4;&#x5408;&#x8D77;&#x6765;&#xFF0C;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x786C;&#x76D8;&#x9635;&#x5217;&#x7EC4;&#xFF0C;&#x4F7F;&#x6027;&#x80FD;&#x8FBE;&#x5230;&#x751A;&#x81F3;&#x8D85;&#x8FC7;&#x4E00;&#x4E2A;&#x4EF7;&#x683C;&#x6602;&#x8D35;&#x3001;&#x5BB9;&#x91CF;&#x5DE8;&#x5927;&#x7684;&#x786C;&#x76D8;&#x3002;&#x6839;&#x636E;&#x9009;&#x62E9;&#x7684;&#x7248;&#x672C;&#x4E0D;&#x540C;&#xFF0C;RAID&#x6BD4;&#x5355;&#x9897;&#x786C;&#x76D8;&#x6709;&#x4EE5;&#x4E0B;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x65B9;&#x9762;&#x7684;&#x597D;&#x5904;&#xFF1A;&#x589E;&#x5F3A;&#x6570;&#x636E;&#x96C6;&#x6210;&#x5EA6;&#xFF0C;&#x589E;&#x5F3A;&#x5BB9;&#x9519;&#x529F;&#x80FD;&#xFF0C;&#x589E;&#x52A0;&#x5904;&#x7406;&#x91CF;&#x6216;&#x5BB9;&#x91CF;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x78C1;&#x76D8;&#x9635;&#x5217;&#x5BF9;&#x4E8E;&#x7535;&#x8111;&#x6765;&#x8BF4;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x5C31;&#x50CF;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x786C;&#x76D8;&#x6216;&#x903B;&#x8F91;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x3002;&#x5206;&#x4E3A;RAID-0&#xFF0C;RAID-1&#xFF0C;RAID-1E&#xFF0C;RAID-5&#xFF0C;RAID-6&#xFF0C;RAID-7&#xFF0C;RAID-10&#xFF0C;RAID-50&#xFF0C;RAID-60&#x7B49;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#x7B80;&#x5355;&#x6765;&#x8BF4;&#xFF0C;RAID&#x628A;&#x591A;&#x4E2A;&#x786C;&#x76D8;&#x7EC4;&#x5408;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x903B;&#x8F91;&#x6247;&#x533A;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x53EA;&#x4F1A;&#x628A;&#x5B83;&#x5F53;&#x4F5C;&#x4E00;&#x4E2A;&#x786C;&#x76D8;&#x3002;RAID&#x5E38;&#x88AB;&#x7528;&#x5728;&#x670D;&#x52A1;&#x5668;&#x7535;&#x8111;&#x4E0A;&#xFF0C;&#x5E76;&#x4E14;&#x5E38;&#x4F7F;&#x7528;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#x7684;&#x786C;&#x76D8;&#x4F5C;&#x4E3A;&#x7EC4;&#x5408;&#x3002;&#x7531;&#x4E8E;&#x786C;&#x76D8;&#x4EF7;&#x683C;&#x7684;&#x4E0D;&#x65AD;&#x4E0B;&#x964D;&#x4E0E;RAID&#x529F;&#x80FD;&#x66F4;&#x52A0;&#x6709;&#x6548;&#x5730;&#x4E0E;&#x4E3B;&#x677F;&#x96C6;&#x6210;&#xFF0C;&#x5B83;&#x4E5F;&#x6210;&#x4E3A;&#x73A9;&#x5BB6;&#x7684;&#x4E00;&#x4E2A;&#x9009;&#x62E9;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x9700;&#x8981;&#x5927;&#x5BB9;&#x91CF;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x5982;&#xFF1A;&#x89C6;&#x9891;&#x4E0E;&#x97F3;&#x9891;&#x5236;&#x4F5C;&#x3002;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#x6700;&#x521D;&#x7684;RAID&#x5206;&#x6210;&#x4E86;&#x4E0D;&#x540C;&#x7684;&#x6863;&#x6B21;&#xFF0C;&#x6BCF;&#x79CD;&#x6863;&#x6B21;&#x90FD;&#x6709;&#x5176;&#x7406;&#x8BBA;&#x4E0A;&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x6863;&#x6B21;&#x5728;&#x4E24;&#x4E2A;&#x76EE;&#x6807;&#x95F4;&#x83B7;&#x53D6;&#x5E73;&#x8861;&#xFF0C;&#x5206;&#x522B;&#x662F;&#x589E;&#x52A0;&#x6570;&#x636E;&#x53EF;&#x9760;&#x6027;&#x4EE5;&#x53CA;&#x589E;&#x52A0;&#x5B58;&#x50A8;&#x5668;&#xFF08;&#x7FA4;&#xFF09;&#x8BFB;&#x5199;&#x6027;&#x80FD;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#x76EE;&#x524D;RAID&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x6709;&#x786C;&#x4EF6;RAID&#x548C;&#x8F6F;&#x4EF6;RAID&#xFF0C;&#x786C;&#x4EF6;RAID&#x662F;&#x901A;&#x8FC7;RAID&#x5361;&#x8FDE;&#x63A5;&#x591A;&#x4E2A;&#x786C;&#x76D8;&#xFF0C;&#x6216;&#x8005;&#x4E3B;&#x677F;&#x4E2D;&#x96C6;&#x6210;&#x4E86;RAID&#x63A7;&#x5236;&#x5668;&#x6765;&#x5B9E;&#x73B0;RAID&#x7684;&#x76F8;&#x5173;&#x529F;&#x80FD;&#x3002;&#x8F6F;&#x4EF6;RAID&#x5219;&#x901A;&#x8FC7;&#x8F6F;&#x4EF6;&#x5C42;&#x9762;&#x6A21;&#x62DF;&#x5B9E;&#x73B0;RAID&#x7684;&#x76F8;&#x5173;&#x529F;&#x80FD;</p>
</blockquote>
<p>&#x4E0B;&#x9762;&#x6765;&#x4ECB;&#x7ECD;&#x5E38;&#x7528;RAID&#x4E0D;&#x540C;&#x7684;&#x7EA7;&#x522B;&#x7684;&#x533A;&#x522B;&#xFF1A;</p>
<h2 id="RAID-0"><a href="#RAID-0" class="headerlink" title="RAID 0"></a>RAID 0</h2><blockquote>
<p>&#x6761;&#x5E26;&#x5316;&#xFF08;Stripe&#xFF09;&#x5B58;&#x50A8;&#xFF0C;&#x5B83;&#x5C06;&#x4E24;&#x4E2A;&#x4EE5;&#x4E0A;&#x7684;&#x78C1;&#x76D8;&#x5E76;&#x8054;&#x8D77;&#x6765;&#xFF0C;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x5927;&#x5BB9;&#x91CF;&#x7684;&#x78C1;&#x76D8;&#x3002;&#x5728;&#x5B58;&#x653E;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5206;&#x6BB5;&#x540E;&#x5206;&#x6563;&#x5B58;&#x50A8;&#x5728;&#x8FD9;&#x4E9B;&#x78C1;&#x76D8;&#x4E2D;&#xFF0C;&#x56E0;&#x4E3A;&#x8BFB;&#x5199;&#x65F6;&#x90FD;&#x53EF;&#x4EE5;&#x5E76;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x6240;&#x6709;&#x7684;&#x7EA7;&#x522B;&#x4E2D;&#xFF0C;RAID 0&#x7684;&#x901F;&#x5EA6;&#x662F;&#x6700;&#x5FEB;&#x7684;&#x3002;&#x4F46;&#x662F;RAID 0&#x65E2;&#x6CA1;&#x6709;&#x5197;&#x4F59;&#x529F;&#x80FD;&#xFF0C;&#x4E5F;&#x4E0D;&#x5177;&#x5907;&#x5BB9;&#x9519;&#x80FD;&#x529B;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x78C1;&#x76D8;&#xFF08;&#x7269;&#x7406;&#xFF09;&#x635F;&#x574F;&#xFF0C;&#x6240;&#x6709;&#x6570;&#x636E;&#x90FD;&#x4F1A;&#x4E22;&#x5931;&#xFF0C;&#x5371;&#x9669;&#x7A0B;&#x5EA6;&#x4E0E;JBOD&#x76F8;&#x5F53;,&#x56E0;&#x6B64;RAID 0&#x5E38;&#x7528;&#x4E8E;&#x56FE;&#x8C61;&#xFF0C;&#x89C6;&#x9891;&#x7B49;&#x9886;&#x57DF;&#xFF0C;&#x4E0D;&#x80FD;&#x5E94;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#x8981;&#x6C42;&#x9AD8;&#x7684;&#x573A;&#x5408;</p>
</blockquote>
<p><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid0.png" alt="raid0"> </p>
<h2 id="RAID-1"><a href="#RAID-1" class="headerlink" title="RAID 1"></a>RAID 1</h2><blockquote>
<p>&#x955C;&#x50CF;&#xFF08;Mirror&#xFF09;&#x5B58;&#x50A8;&#xFF0C;&#x5B83;&#x662F;&#x901A;&#x8FC7;&#x78C1;&#x76D8;&#x6570;&#x636E;&#x955C;&#x50CF;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x5197;&#x4F59;&#xFF0C;&#x5728;&#x6210;&#x5BF9;&#x7684;&#x72EC;&#x7ACB;&#x78C1;&#x76D8;&#x4E0A;&#x4EA7;&#x751F;&#x4E92;&#x4E3A;&#x5907;&#x4EFD;&#x7684;&#x6570;&#x636E;&#x3002;&#x5F53;&#x539F;&#x59CB;&#x6570;&#x636E;&#x7E41;&#x5FD9;&#x65F6;&#xFF0C;&#x53EF;&#x76F4;&#x63A5;&#x4ECE;&#x955C;&#x50CF;&#x62F7;&#x8D1D;&#x4E2D;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x6B64;RAID 1&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x8BFB;&#x53D6;&#x6027;&#x80FD;&#x3002;RAID 1&#x662F;&#x78C1;&#x76D8;&#x9635;&#x5217;&#x4E2D;&#x5355;&#x4F4D;&#x6210;&#x672C;&#x6700;&#x9AD8;&#x7684;&#xFF0C;&#x4F46;&#x63D0;&#x4F9B;&#x4E86;&#x5F88;&#x9AD8;&#x7684;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#x548C;&#x53EF;&#x7528;&#x6027;&#x3002;&#x5F53;&#x4E00;&#x4E2A;&#x78C1;&#x76D8;&#x5931;&#x6548;&#x65F6;&#xFF0C;&#x7CFB;&#x7EDF;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x5207;&#x6362;&#x5230;&#x955C;&#x50CF;&#x78C1;&#x76D8;&#x4E0A;&#x8BFB;&#x5199;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x91CD;&#x7EC4;&#x5931;&#x6548;&#x7684;&#x6570;&#x636E;&#x3002;&#x56E0;&#x6B64;RAID 1&#x5E38;&#x7528;&#x4E8E;&#x5BF9;&#x5BB9;&#x9519;&#x8981;&#x6C42;&#x6781;&#x4E25;&#x7684;&#x5E94;&#x7528;&#x573A;&#x5408;&#xFF0C;&#x5982;&#x8D22;&#x653F;&#x3001;&#x91D1;&#x878D;&#x7B49;&#x9886;&#x57DF;</p>
</blockquote>
<p><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid1.png" alt="raid1"></p>
<h2 id="RAID-4"><a href="#RAID-4" class="headerlink" title="RAID 4"></a>RAID 4</h2><blockquote>
<p>&#x5947;&#x5076;&#x6821;&#x9A8C;&#xFF08;XOR&#xFF09;&#x6761;&#x5E26;&#x5B58;&#x50A8;&#xFF0C;&#x5171;&#x4EAB;&#x6821;&#x9A8C;&#x76D8;&#xFF0C;&#x6570;&#x636E;&#x6761;&#x5E26;&#x5B58;&#x50A8;&#x5355;&#x4F4D;&#x4E3A;&#x5757;&#x3002;&#x7531;3&#x5757;&#x6216;3&#x5757;&#x4EE5;&#x4E0A;&#x8BBE;&#x5907;&#x7EC4;&#x6210;&#xFF0C;&#x5E76;&#x884C;&#x5904;&#x7406;&#x63D0;&#x9AD8;&#x78C1;&#x76D8;&#x6027;&#x80FD;&#xFF0C;&#x4E00;&#x4E2A;&#x786C;&#x76D8;&#x5B58;&#x50A8;&#x5197;&#x4F59;&#x6821;&#x9A8C;&#x7801;&#xFF0C;&#x901A;&#x8FC7;&#x5F02;&#x6216;&#x8FD0;&#x7B97;&#x8FD8;&#x539F;&#x6570;&#x636E;&#x3002;&#x4E09;&#x4E2A;&#x6216;&#x4E09;&#x4E2A;&#x4EE5;&#x4E0A;&#x7684;&#x786C;&#x76D8;&#x7EC4;&#x6210;&#x9635;&#x5217;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5F53;&#x67D0;&#x4E00;&#x4E2A;&#x786C;&#x76D8;&#x635F;&#x574F;&#x53EF;&#x4EE5;&#x4F7F;&#x5176;&#x6570;&#x636E;&#x901A;&#x8FC7;&#x5F02;&#x6216;&#x8FD0;&#x7B97;&#x8FD8;&#x539F;&#xFF0C;&#x901A;&#x8FC7;&#x8BFB;&#x5199;&#x5E76;&#x884C;&#x5904;&#x7406;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x56E0;&#x4E3A;&#x5197;&#x4F59;&#x6821;&#x9A8C;&#x7801;&#x90FD;&#x662F;&#x5B58;&#x653E;&#x5728;&#x5355;&#x4E00;&#x786C;&#x76D8;&#x4E0A;&#xFF0C;&#x6240;&#x4EE5;&#x6B64;&#x786C;&#x76D8;&#x6027;&#x80FD;&#x53EF;&#x80FD;&#x4F1A;&#x5F88;&#x5DEE;&#xFF0C;&#x5E76;&#x4E14;&#x6613;&#x635F;&#x574F;&#xFF0C;&#x5728;&#x751F;&#x4EA7;&#x4E2D;&#x4E0D;&#x5E38;&#x7528;</p>
</blockquote>
<p><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid4.png" alt="raid4"></p>
<h2 id="RAID-5"><a href="#RAID-5" class="headerlink" title="RAID 5"></a>RAID 5</h2><blockquote>
<p>&#x76F8;&#x6BD4;&#x4E8E;RAID-4&#x800C;&#x8A00;&#xFF0C;&#x5197;&#x4F59;&#x6821;&#x9A8C;&#x7801;&#x5206;&#x522B;&#x5B58;&#x653E;&#x5728;&#x6BCF;&#x4E2A;&#x786C;&#x76D8;&#x4E2D;&#x3002;RAID-5&#x5C31;&#x662F;RAID-4&#x7684;&#x5347;&#x7EA7;&#x7248;&#xFF0C;&#x5F25;&#x8865;&#x4E86;RAID-4&#x7684;&#x7F3A;&#x9677;&#xFF0C;&#x5C06;RAID-4&#x4E2D;&#x88AB;&#x8BDF;&#x75C5;&#x7684;&#x7F3A;&#x70B9;&#xFF1A;&#x201C;&#x5197;&#x4F59;&#x6821;&#x9A8C;&#x7801;&#x5B58;&#x653E;&#x5728;&#x4E00;&#x4E2A;&#x786C;&#x76D8;&#x4E0A;&#x201D;&#x5F97;&#x4EE5;&#x89E3;&#x51B3;&#xFF0C;RAID-5&#x91C7;&#x7528;&#x5C06;&#x5197;&#x4F59;&#x6821;&#x9A8C;&#x7801;&#x5206;&#x522B;&#x5B58;&#x653E;&#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#x78C1;&#x76D8;&#x4E0A;&#x6765;&#x8FBE;&#x5230;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x800C;&#x4E14;&#x6781;&#x5927;&#x7684;&#x63D0;&#x9AD8;&#x4E86;&#x6574;&#x4F53;&#x6027;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x53EA;&#x80FD;&#x63D0;&#x4F9B;&#x4E00;&#x5757;&#x786C;&#x76D8;&#x7684;&#x5197;&#x4F59;&#xFF0C;&#x5F53;&#x6709;&#x4E24;&#x5757;&#x76D8;&#x574F;&#x6389;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6574;&#x4E2A;RAID&#x7684;&#x6570;&#x636E;&#x5931;&#x6548;</p>
</blockquote>
<p><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid5.png" alt="raid5"></p>
<h2 id="RAID-6"><a href="#RAID-6" class="headerlink" title="RAID 6"></a>RAID 6</h2><blockquote>
<p>RAID 6&#x5728;RAID 5&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x628A;&#x6821;&#x9A8C;&#x5B58;&#x50A8;&#x589E;&#x52A0;&#x5230;&#x4E86;2&#x53F0;&#xFF0C;&#x5BB9;&#x9519;&#x80FD;&#x529B;&#x6BD4;RAID 5&#x6709;&#x6240;&#x63D0;&#x5347;&#xFF0C;&#x66F4;&#x5927;&#x7684;&#x201C;&#x5199;&#x635F;&#x5931;&#x201D;&#xFF0C;&#x201C;&#x5199;&#x6027;&#x80FD;&#x201D;&#x975E;&#x5E38;&#x5DEE;&#xFF0C;&#x751F;&#x4EA7;&#x4E2D;&#x4E0D;&#x5E38;&#x7528;</p>
</blockquote>
<p><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid6.png" alt="raid6"></p>
<h2 id="RAID-10-01"><a href="#RAID-10-01" class="headerlink" title="RAID 10/01"></a>RAID 10/01</h2><blockquote>
<p>RAID-10/01&#x662F;&#x4E24;&#x79CD;&#x6DF7;&#x5408;&#x578B;RAID&#xFF0C;RAID 10&#x662F;&#x5148;&#x955C;&#x5C04;&#x518D;&#x5206;&#x533A;&#x6570;&#x636E;&#xFF0C;&#x518D;&#x5C06;&#x6240;&#x6709;&#x786C;&#x76D8;&#x5206;&#x4E3A;&#x4E24;&#x7EC4;&#xFF0C;&#x89C6;&#x4E3A;&#x662F;RAID 0&#x7684;&#x6700;&#x4F4E;&#x7EC4;&#x5408;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x8FD9;&#x4E24;&#x7EC4;&#x5404;&#x81EA;&#x89C6;&#x4E3A;RAID 1&#x8FD0;&#x4F5C;&#x3002;RAID 01&#x4E0E;RAID 10&#x76F8;&#x53CD;&#xFF0C;&#x5F53;RAID 10&#x6709;&#x4E00;&#x4E2A;&#x786C;&#x76D8;&#x53D7;&#x635F;&#xFF0C;&#x5176;&#x4F59;&#x786C;&#x76D8;&#x4F1A;&#x7EE7;&#x7EED;&#x8FD0;&#x4F5C;&#x3002;RAID 01&#x53EA;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x786C;&#x76D8;&#x53D7;&#x635F;&#xFF0C;&#x540C;&#x7EC4;RAID 0&#x7684;&#x6240;&#x6709;&#x786C;&#x76D8;&#x90FD;&#x4F1A;&#x505C;&#x6B62;&#x8FD0;&#x4F5C;&#xFF0C;&#x53EA;&#x5269;&#x4E0B;&#x5176;&#x4ED6;&#x7EC4;&#x7684;&#x786C;&#x76D8;&#x8FD0;&#x4F5C;&#xFF0C;&#x53EF;&#x9760;&#x6027;&#x8F83;&#x4F4E;&#x3002;&#x5982;&#x679C;&#x4EE5;&#x516D;&#x4E2A;&#x786C;&#x76D8;&#x5EFA;RAID 01&#xFF0C;&#x955C;&#x5C04;&#x518D;&#x7528;&#x4E09;&#x4E2A;&#x5EFA;RAID 0&#xFF0C;&#x90A3;&#x4E48;&#x574F;&#x4E00;&#x4E2A;&#x786C;&#x76D8;&#x4FBF;&#x4F1A;&#x6709;&#x4E09;&#x4E2A;&#x786C;&#x76D8;&#x8131;&#x673A;&#x3002;RAID 10&#x8FDC;&#x8F83;RAID 01&#x5E38;&#x7528;</p>
</blockquote>
<p><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid10.png" alt="raid10"></p>
<p>&#x7BC7;&#x5E45;&#x6240;&#x9650;&#xFF0C;&#x53EA;&#x5217;&#x4E3E;&#x4EE5;&#x4E0A;&#x51E0;&#x4E2A;&#x5E38;&#x7528;&#x7EA7;&#x522B;&#xFF0C;&#x4EE5;&#x4E0B;&#x662F;&#x5404;&#x7EA7;&#x522B;&#x7279;&#x70B9;&#x7684;&#x5BF9;&#x6BD4;&#x56FE;<br><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid.png" alt="&#x78C1;&#x76D8;&#x9635;&#x5217;&#x6BD4;&#x8F83;&#x8868;" title="&#x78C1;&#x76D8;&#x9635;&#x5217;&#x6BD4;&#x8F83;&#x8868;"></p>
<blockquote>
<p>&#x6CE8;&#xFF1A;RAID2&#x3001;3&#x3001;4&#x8F83;&#x5C11;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;RAID5&#x5DF2;&#x7ECF;&#x6DB5;&#x76D6;&#x4E86;&#x6240;&#x9700;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x56E0;&#x6B64;RAID2&#x3001;3&#x3001;4&#x5927;&#x591A;&#x53EA;&#x5728;&#x7814;&#x7A76;&#x9886;&#x57DF;&#x6709;&#x5B9E;&#x73B0;&#xFF0C;&#x800C;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x4E0A;&#x5219;&#x4EE5;RAID5&#x4E3A;&#x4E3B;&#x3002;RAID4&#x6709;&#x5E94;&#x7528;&#x5728;&#x67D0;&#x4E9B;&#x5546;&#x7528;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x50CF;&#x662F;NetApp&#x516C;&#x53F8;&#x8BBE;&#x8BA1;&#x7684;NAS&#x7CFB;&#x7EDF;&#x5C31;&#x662F;&#x4F7F;&#x7528;RAID4&#x7684;&#x8BBE;&#x8BA1;&#x6982;&#x5FF5;</p>
</blockquote>
<h2 id="RAID&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;"><a href="#RAID&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;" class="headerlink" title="RAID&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;"></a>RAID&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;</h2><p>Linux&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;md(multi devices)&#x6A21;&#x5757;&#x6765;&#x5B9E;&#x73B0;&#x8F6F;RAID&#xFF0C;&#x4F7F;&#x7528;<code>mdadm</code>&#x547D;&#x4EE4;&#x6765;&#x7BA1;&#x7406;&#x521B;&#x5EFA;&#x8F6F;RAID&#x8BBE;&#x5907;,mdadm&#x652F;&#x6301;&#x7684;RAID&#x7EA7;&#x522B;&#xFF1A;LINEAR,RAID0, RAID1,RAID4,RAID5,RAID6,RAID10<br><code>mdadm [mode] &lt;raiddevice&gt; [options] &lt;component-device&gt;</code></p>
<blockquote>
<p>-C: &#x521B;&#x5EFA;</p>
<blockquote>
<p>-n #&#xFF1A;&#x4F7F;&#x7528;#&#x4E2A;&#x5757;&#x8BBE;&#x5907;&#x6765;&#x521B;&#x5EFA;&#x6B64;RAID<br>-l #&#xFF1A;&#x6307;&#x660E;RAID&#x7684;&#x7EA7;&#x522B;<br>-a {yes|no}&#xFF1A;&#x662F;&#x5426;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x76EE;&#x6807;RAID&#x8BBE;&#x5907;&#x7684;&#x8BBE;&#x5907;&#x6587;&#x4EF6;<br>-c CHUNK_SIZE&#xFF1A;&#x6307;&#x660E;&#x5757;&#x5927;&#x5C0F;<br>-x #&#xFF1A;&#x6307;&#x660E;&#x7A7A;&#x95F2;&#x76D8;&#x7684;&#x4E2A;&#x6570;    </p>
</blockquote>
</blockquote>
<ul>
<li><code>mdadm -C /dev/md0 -n 3 -l 5 -a yes -c 64k -x 1 /dev/sdb{5,6,7,8}</code></li>
</ul>
<blockquote>
<p>-D&#xFF1A;&#x67E5;&#x770B;&#x8BE6;&#x60C5;  <code>mdadm -D /dev/md0</code><br>-f&#xFF1A;&#x6807;&#x8BB0;&#x78C1;&#x76D8;&#x6765;&#x4E3A;&#x635F;&#x574F;  <code>mdadm /dev/md0 -f /dev/sdb5</code><br>-r&#xFF1A;&#x79FB;&#x9664;&#x78C1;&#x76D8;  <code>mdadm /dev/md0 -f /dev/sdb5</code><br>-a&#xFF1A;&#x6DFB;&#x52A0;&#x78C1;&#x76D8;  <code>mdadm /dev/md0 -r /dev/sdb5</code><br>-S&#xFF1A;&#x505C;&#x6B62;md&#x8BBE;&#x5907;  <code>mdadm -S /dev/md0</code>    </p>
</blockquote>
<p><strong>&#x5B9E;&#x4F8B;&#xFF1A;</strong>  </p>
<blockquote>
<p>&#x5728;CentOS6.7&#x4E0A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x53EF;&#x7528;&#x7A7A;&#x95F4;&#x4E3A;10G&#x7684;RAID5&#x8BBE;&#x5907;, &#x8981;&#x6C42;&#x5176;chunk&#x5927;&#x5C0F;&#x4E3A;64K, &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E3A;ext4, &#x5F00;&#x673A;&#x53EF;&#x81EA;&#x52A8;&#x6302;&#x8F7D;&#x81F3;/mnt/raid&#x76EE;&#x5F55;&#xFF0C;&#x540C;&#x65F6;&#x4E00;&#x4E2A;&#x7A7A;&#x95F2;&#x76D8;&#x505A;&#x5907;&#x4EFD;  </p>
</blockquote>
<blockquote>
<p><strong>&#x601D;&#x8DEF;&#xFF1A;</strong>  </p>
<ol>
<li>&#x65B0;&#x5EFA;&#x5206;&#x533A;&#x5E76;&#x8C03;&#x6574;&#x7C7B;&#x578B;: <code>fdisk /dev/sdb</code>   </li>
<li>&#x5185;&#x6838;&#x91CD;&#x8BFB;&#x5206;&#x533A;: <code>partx -a /dev/sdb</code>  </li>
<li>&#x521B;&#x5EFA;RAID: <code>mdadm -C /dev/md0 -n 3 -l 5 -a yes -c 64k -x 1 /dev/sdb{5,6,7,8}</code>  </li>
<li>&#x683C;&#x5F0F;&#x5316;: <code>mke2fs -t ext4 /dev/md0</code>  </li>
<li>&#x6302;&#x8F7D;: <code>mount /dev/md0 /mnt/raid</code>    </li>
<li>&#x5F00;&#x673A;&#x81EA;&#x52A8;&#x6302;&#x8F7D;&#xFF1A;<code>vim /fstab</code>  </li>
</ol>
</blockquote>
<ol>
<li><p>&#x51C6;&#x5907;&#x73AF;&#x5883;: &#x6DFB;&#x52A0;/dev/sdb&#x78C1;&#x76D8;&#xFF0C;&#x5206;&#x51FA;4&#x4E2A;&#x533A;&#x8C03;&#x6574;&#x4E3A;Linux raid auto(system id: fd)<br><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid_fdisk.png" alt="raid&#x7C7B;&#x578B;&#x8C03;&#x6574;"></p>
</li>
<li><p>&#x5185;&#x6838;&#x91CD;&#x8BFB;&#x5206;&#x533A;<br><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid_partx.png" alt="&#x5185;&#x6838;&#x91CD;&#x8BFB;&#x5206;&#x533A;"></p>
</li>
<li><p>&#x521B;&#x5EFA;RAID&#x8BBE;&#x5907;<br><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid_mdadm.png" alt="raid&#x521B;&#x5EFA;"></p>
</li>
<li><p>&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;<br><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid_mkfs.png" alt="&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;"></p>
</li>
<li><p>&#x6302;&#x8F7D;&#x4F7F;&#x7528;&#x5E76;&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x52A8;&#x6302;&#x8F7D;<br><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid_mount.png" alt="raid&#x6302;&#x8F7D;"></p>
</li>
</ol>
<p><strong>&#x6A21;&#x62DF;&#x6545;&#x969C;</strong></p>
<ol>
<li>&#x590D;&#x5236;&#x4E00;&#x6587;&#x4EF6;&#x5230;RAID&#x8BBE;&#x5907;&#x4E0A;&#xFF0C;&#x4EE5;&#x5907;&#x67E5;&#x770B;RAID&#x662F;&#x5426;&#x6B63;&#x5E38;</li>
<li>&#x6A21;&#x62DF;&#x635F;&#x574F;&#x3001;&#x79FB;&#x9664;&#x548C;&#x6DFB;&#x52A0;&#x78C1;&#x76D8;&#x7B49;&#x64CD;&#x4F5C;</li>
<li>&#x67E5;&#x770B;RAID&#x662F;&#x5426;&#x6B63;&#x5E38;&#x8FD0;&#x884C;</li>
</ol>
<p><img src="/2016/05/30/RAID&#x7B80;&#x4ECB;&#x53CA;&#x8F6F;&#x4EF6;&#x5B9E;&#x8DF5;/raid_faulty.png" alt="raid&#x6302;&#x8F7D;"></p>
<p>&#x4EE5;&#x4E0A;&#x5185;&#x5BB9;&#x6574;&#x7406;&#x81EA;&#x9A6C;&#x54E5;&#x7B14;&#x8BB0;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux程序包管理之rpm]]></title>
      <url>http://liu2lin600.github.io/2016/05/28/Linux%E7%A8%8B%E5%BA%8F%E5%8C%85%E7%AE%A1%E7%90%86%E4%B9%8Brpm/</url>
      <content type="html"><![CDATA[<p>RPM&#x5305;&#x7BA1;&#x7406;&#x5DE5;&#x5177;rpm<br><a id="more"></a></p>
<h2 id="&#x7B80;&#x4ECB;"><a href="#&#x7B80;&#x4ECB;" class="headerlink" title="&#x7B80;&#x4ECB;"></a>&#x7B80;&#x4ECB;</h2><p>Linux&#x4E0B;&#x7684;&#x7A0B;&#x5E8F;&#x5B89;&#x88C5;&#x5305;&#x5206;&#x4E3A;<code>&#x4E8C;&#x8FDB;&#x5236;&#x5305;(Binary)</code>&#x548C;<code>&#x6E90;&#x7801;&#x5305;(Source)</code>&#xFF0C;&#x6E90;&#x4EE3;&#x7801;&#x5305;&#x5219;&#x9700;&#x8981;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;&#xFF0C;&#x5C06;&#x5728;&#x4EE5;&#x540E;&#x7BC7;&#x5E45;&#x4ECB;&#x7ECD;&#x3002;&#x4E8C;&#x8FDB;&#x5236;&#x5305;&#x4E2D;&#x7684;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x4EE5;Debian&#x7684;deb&#x5305;&#x548C;RedHat&#x7684;rpm&#x5305;&#x8F83;&#x4E3A;&#x6D41;&#x884C;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;RPM&#x7684;&#x7528;&#x6CD5;<br>RPM&#x662F;RPM Package Manager&#xFF08;RPM&#x8F6F;&#x4EF6;&#x5305;&#x7BA1;&#x7406;&#x5668;&#xFF09;&#x7684;&#x7F29;&#x5199;&#xFF0C;&#x5728;&#x591A;&#x79CD;Linux&#x53D1;&#x884C;&#x7248;&#x4E2D;&#x88AB;&#x91C7;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x7B97;&#x662F;&#x516C;&#x8BA4;&#x7684;&#x884C;&#x4E1A;&#x6807;&#x51C6;&#x4E86;&#xFF0C;&#x9ED8;&#x8BA4;&#x4EE5;.rpm&#x4F5C;&#x4E3A;&#x6587;&#x4EF6;&#x7684;&#x540E;&#x7F00;&#x540D; </p>
<h3 id="&#x5BB6;&#x65CF;"><a href="#&#x5BB6;&#x65CF;" class="headerlink" title="&#x5BB6;&#x65CF;"></a>&#x5BB6;&#x65CF;</h3><p><strong>Debian(.deb)</strong>&#xFF1A;Debian, Ubuntu, Xandros, Linspire<br><strong>Red Hat(.rpm)</strong>&#xFF1A;RHEL, Fedora, CentOS, OpenSUSE, Mandriva, PCLinuxOS</p>
<h3 id="&#x5DE5;&#x5177;"><a href="#&#x5DE5;&#x5177;" class="headerlink" title="&#x5DE5;&#x5177;"></a>&#x5DE5;&#x5177;</h3><p>&#x524D;&#x7AEF;&#x5DE5;&#x5177;&#xFF1A;yum(.rpm), apt-get(.deb), zypper(suse&#x4E0A;rpm), dnf(Fedora 22+&#x4E0A;rpm)<br>&#x540E;&#x7AEF;&#x5DE5;&#x5177;&#xFF1A;rpm, dpkg</p>
<h3 id="&#x547D;&#x540D;"><a href="#&#x547D;&#x540D;" class="headerlink" title="&#x547D;&#x540D;"></a>&#x547D;&#x540D;</h3><p><strong>&#x6E90;&#x7801;&#x5305;</strong>&#xFF1A;thrift-0.9.3.tar.gz<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">thrift: &#x5305;&#x540D;  </span><br><span class="line">0.9.3:  &#x7248;&#x672C;&#x4FE1;&#x606F;&#xFF0C;0&#x4E3A;&#x4E3B;&#x7248;&#x672C;&#x53F7;&#xFF0C;9&#x8868;&#x793A;&#x6B21;&#x7248;&#x672C;&#x4FE1;&#x606F;&#xFF0C;3&#x4E3A;&#x6E90;&#x7801;&#x5305;&#x53D1;&#x884C;&#x53F7;  </span><br><span class="line">tar.gz&#xFF1A;&#x4EE5;gz&#x683C;&#x5F0F;&#x538B;&#x7F29;</span><br></pre></td></tr></table></figure></p>
<p><strong>RPM&#x5305;</strong>&#xFF1A;httpd-devel-2.4.6-40.el7.centos.x86_64.rpm<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">httpd: &#x4E3B;&#x5305;&#x540D;</span><br><span class="line">devel: &#x5206;&#x5305;&#x540D;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x4E3B;&#x5305;&#x5219;&#x65E0;&#x6B64;&#x9879;</span><br><span class="line">2.4.6: &#x7248;&#x672C;&#x4FE1;&#x606F;&#xFF0C;2&#x4E3A;&#x4E3B;&#x7248;&#x672C;&#x53F7;&#xFF0C;0&#x8868;&#x793A;&#x6B21;&#x7248;&#x672C;&#x4FE1;&#x606F;&#xFF0C;35&#x4E3A;&#x6E90;&#x7801;&#x5305;&#x53D1;&#x884C;&#x53F7;&#xFF0C;&#x4E5F;&#x53EB;&#x4FEE;&#x8BA2;&#x53F7;</span><br><span class="line">40.el7: &#x53D1;&#x884C;&#x4FE1;&#x606F;&#xFF0C;40&#x8868;&#x793A;rpm&#x7684;&#x53D1;&#x884C;&#x53F7;&#xFF0C;el6&#x8868;&#x793A;REHL7</span><br><span class="line">x86_64: &#x9002;&#x7528;&#x5E73;&#x53F0;&#xFF0C;&#x5E38;&#x6709;i386-i686,x86_64,noarch,powerpc,ppc</span><br><span class="line">rpm: &#x540E;&#x7F00;&#x540D;</span><br></pre></td></tr></table></figure></p>
<h3 id="&#x83B7;&#x53D6;&#x8F6F;&#x4EF6;&#x5305;&#x7684;&#x9014;&#x5F84;&#xFF1A;"><a href="#&#x83B7;&#x53D6;&#x8F6F;&#x4EF6;&#x5305;&#x7684;&#x9014;&#x5F84;&#xFF1A;" class="headerlink" title="&#x83B7;&#x53D6;&#x8F6F;&#x4EF6;&#x5305;&#x7684;&#x9014;&#x5F84;&#xFF1A;"></a>&#x83B7;&#x53D6;&#x8F6F;&#x4EF6;&#x5305;&#x7684;&#x9014;&#x5F84;&#xFF1A;</h3><ol>
<li>&#x7CFB;&#x7EDF;&#x53D1;&#x7248;&#x7684;&#x5149;&#x76D8;&#x6216;&#x5B98;&#x65B9;&#x7684;&#x670D;&#x52A1;&#x5668;<br><a href="http://mirrors.aliyun.com" target="_blank" rel="noopener">http://mirrors.aliyun.com</a><br><a href="http://mirrors.163.com" target="_blank" rel="noopener">http://mirrors.163.com</a></li>
<li>&#x9879;&#x76EE;&#x5B98;&#x65B9;&#x7AD9;&#x70B9;<br><a href="https://thrift.apache.org/" target="_blank" rel="noopener">https://thrift.apache.org/</a><br><a href="http://redis.io/" target="_blank" rel="noopener">http://redis.io/</a></li>
<li>&#x7B2C;&#x4E09;&#x65B9;&#x7EC4;&#x7EC7;&#xFF08;EPEL&#xFF09;<br><a href="http://pkgs.org" target="_blank" rel="noopener">http://pkgs.org</a><br><a href="http://rpmfind.net" target="_blank" rel="noopener">http://rpmfind.net</a><br><a href="http://rpm.pbone.net" target="_blank" rel="noopener">http://rpm.pbone.net</a></li>
<li>&#x81EA;&#x5DF1;&#x5236;&#x4F5C;rpm&#x5305;</li>
</ol>
<h2 id="&#x7528;&#x6CD5;"><a href="#&#x7528;&#x6CD5;" class="headerlink" title="&#x7528;&#x6CD5;"></a>&#x7528;&#x6CD5;</h2><p>&#x8BF4;&#x660E;&#xFF1A;  </p>
<ul>
<li>PACKAGE_FILE&#xFF1A;&#x5305;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x5982;zsh-5.0.2-14.el7.x86_64.rpm  </li>
<li>PACKAGE_NAME&#xFF1A;&#x5305;&#x540D;&#xFF0C;&#x5982;zsh</li>
</ul>
<p>&#x4E3B;&#x8981;&#x7528;&#x6CD5;&#x5982;&#x4E0B;&#xFF0C;&#x5176;&#x4E2D;&#x67E5;&#x8BE2;&#x529F;&#x80FD;&#x4E3A;&#x5B66;&#x4E60;&#x91CD;&#x70B9;  </p>
<ul>
<li>&#x5B89;&#x88C5;&#xFF1A;rpm -i [install-options] PACKAGE_FILE</li>
<li>&#x5347;&#x7EA7;&#xFF1A;rpm -U|F [install-options] PACKAGE_FILE  </li>
<li>&#x5378;&#x8F7D;&#xFF1A;rpm -e [&#x2013;allmatches] [&#x2013;nodeps] [&#x2013;noscripts] [&#x2013;test] PACKAGE_NAME</li>
<li>&#x67E5;&#x8BE2;&#xFF1A;rpm -q [select-options] [query-options] PACKAGE_NAME</li>
<li>&#x6821;&#x9A8C;&#xFF1A;rpm -V [select-options] [verify-options] PACKAGE_NAME</li>
</ul>
<h3 id="&#x5B89;&#x88C5;"><a href="#&#x5B89;&#x88C5;" class="headerlink" title="&#x5B89;&#x88C5;"></a>&#x5B89;&#x88C5;</h3><p><code>rpm -i [install-options] PACKAGE_FILE</code>  </p>
<blockquote>
<p><code>-i</code>: &#x4E3B;&#x9009;&#x9879;&#x5B89;&#x88C5;<br><code>-v</code>&#xFF1A;&#x663E;&#x793A;&#x5B89;&#x88C5;&#x8BE6;&#x60C5;<br><code>-h</code>: &#x7528;#&#x663E;&#x793A;&#x8FDB;&#x5EA6;&#x6761;  </p>
<blockquote>
<p><code>--test</code>: &#x6D4B;&#x8BD5;&#x5B89;&#x88C5;&#xFF0C;&#x67E5;&#x770B;&#x662F;&#x5426;&#x6709;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x7B49;<br><code>--replacepkgs</code>: &#x91CD;&#x65B0;&#x5B89;&#x88C5;<br><code>--nodeps</code>: &#x5FFD;&#x7565;&#x4F9D;&#x8D56;&#x5B89;&#x88C5;&#xFF0C;&#x4E0D;&#x63A8;&#x8350;<br><code>--noscripts</code>&#xFF1A;&#x4E0D;&#x6267;&#x884C;&#x7A0B;&#x5E8F;&#x5305;&#x811A;&#x672C;&#x7247;&#x6BB5;&#xFF0C;&#x5305;&#x62EC;&#x5B89;&#x88C5;&#x524D;%pre, &#x5B89;&#x88C5;&#x540E;%post, &#x5378;&#x8F7D;&#x524D;%preun, &#x548C;&#x5378;&#x8F7D;&#x540E;%postun&#x811A;&#x672C;<br><code>--nosignature</code>: &#x4E0D;&#x68C0;&#x6D4B;&#x6570;&#x5B57;&#x7B7E;&#x540D;  </p>
</blockquote>
</blockquote>
<ul>
<li>&#x6CE8;&#x610F;&#xFF1A;&#x5F88;&#x591A;&#x7A0B;&#x5E8F;&#x5B58;&#x5728;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;RPM&#x65B9;&#x5F0F;&#x4E0D;&#x80FD;&#x5F88;&#x597D;&#x89E3;&#x51B3;&#xFF0C;&#x9700;&#x624B;&#x52A8;&#x5B89;&#x88C5;&#x6240;&#x4F9D;&#x8D56;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x6709;&#x65F6;&#x4F1A;&#x51FA;&#x73B0;&#x73AF;&#x5F62;&#x4F9D;&#x8D56;&#xFF0C;&#x5373;a-&gt;b-&gt;c-&gt;a&#xFF0C;&#x89E3;&#x51B3;&#x76F8;&#x5BF9;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;<br><img src="/2016/05/28/Linux&#x7A0B;&#x5E8F;&#x5305;&#x7BA1;&#x7406;&#x4E4B;rpm/rpmInstall.png" alt="rpm&#x5305;&#x5B89;&#x88C5;"></li>
</ul>
<h3 id="&#x5347;&#x7EA7;"><a href="#&#x5347;&#x7EA7;" class="headerlink" title="&#x5347;&#x7EA7;"></a>&#x5347;&#x7EA7;</h3><p><code>rpm -U [install-options] PACKAGE_FILE</code><br><code>rpm -F [install-options] PACKAGE_FILE</code></p>
<blockquote>
<p><code>-U</code>: &#x4E3B;&#x9009;&#x9879;&#x5347;&#x7EA7;&#xFF0C;&#x5B58;&#x5728;&#x8001;&#x7248;&#x672C;&#x5219;&#x5347;&#x7EA7;&#xFF0C;&#x5426;&#x5219;&#xFF0C;&#x5219;&#x5B89;&#x88C5;<br><code>-F</code>: &#x4E3B;&#x9009;&#x9879;&#x5347;&#x7EA7;&#xFF0C;&#x5B58;&#x5728;&#x8001;&#x7248;&#x672C;&#x5219;&#x5347;&#x7EA7;&#xFF0C;&#x5426;&#x5219;&#xFF0C;&#x5219;&#x9000;&#x51FA;<br><code>-v</code>&#xFF1A;&#x663E;&#x793A;&#x5347;&#x7EA7;&#x8BE6;&#x60C5;<br><code>-h</code>: &#x7528;#&#x663E;&#x793A;&#x8FDB;&#x5EA6;&#x6761;  </p>
<blockquote>
<p><code>--oldpackage</code>: &#x964D;&#x7EA7;<br><code>--force</code>: &#x5F3A;&#x5236;&#x5347;&#x7EA7;</p>
</blockquote>
</blockquote>
<p><img src="/2016/05/28/Linux&#x7A0B;&#x5E8F;&#x5305;&#x7BA1;&#x7406;&#x4E4B;rpm/rpmUpdate.png" alt="rpm&#x5305;&#x5347;&#x7EA7;"></p>
<ul>
<li>&#x6CE8;&#x610F;</li>
</ul>
<ol>
<li>&#x4E0D;&#x8981;&#x5BF9;&#x5185;&#x6838;&#x505A;&#x5347;&#x7EA7;&#x64CD;&#x4F5C;&#xFF1B;Linux&#x652F;&#x6301;&#x591A;&#x5185;&#x6838;&#x7248;&#x672C;&#x5E76;&#x5B58;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5C06;&#x76F4;&#x63A5;&#x5B89;&#x88C5;&#x65B0;&#x7248;&#x672C;&#x5185;&#x6838;</li>
<li>&#x5982;&#x679C;&#x67D0;&#x539F;&#x7A0B;&#x5E8F;&#x5305;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5B89;&#x88C5;&#x540E;&#x66FE;&#x88AB;&#x4FEE;&#x6539;&#x8FC7;&#xFF0C;&#x5347;&#x7EA7;&#x65F6;&#xFF0C;&#x65B0;&#x7248;&#x672C;&#x7684;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x7684;&#x540C;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E0D;&#x4F1A;&#x8986;&#x76D6;&#x539F;&#x6709;&#x7248;&#x672C;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x662F;&#x628A;&#x65B0;&#x7248;&#x672C;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x91CD;&#x547D;&#x540D;(FILENAME.rpmnew)&#x540E;&#x63D0;&#x4F9B;</li>
</ol>
<h3 id="&#x5378;&#x8F7D;"><a href="#&#x5378;&#x8F7D;" class="headerlink" title="&#x5378;&#x8F7D;"></a>&#x5378;&#x8F7D;</h3><p><code>rpm -e [--allmatches] [--nodeps] [--noscripts] [--test] PACKAGE_NAME</code></p>
<blockquote>
<p><code>-e</code>: &#x4E3B;&#x9009;&#x9879;&#x5378;&#x8F7D;  </p>
<blockquote>
<p><code>--allmatches</code>: &#x5378;&#x8F7D;&#x6240;&#x6709;&#x5339;&#x914D;&#x7684;&#x6307;&#x5B9A;&#x7A0B;&#x5E8F;&#x5305;<br><code>--nodeps</code>: &#x5FFD;&#x7565;&#x4F9D;&#x8D56;&#x5378;&#x8F7D;<br><code>--test</code>: &#x6D4B;&#x8BD5;&#x5378;&#x8F7D;<br><code>--noscripts</code>: </p>
</blockquote>
</blockquote>
<p><img src="/2016/05/28/Linux&#x7A0B;&#x5E8F;&#x5305;&#x7BA1;&#x7406;&#x4E4B;rpm/rpmErase.png" alt="rpm&#x5378;&#x8F7D;"></p>
<h3 id="&#x67E5;&#x8BE2;"><a href="#&#x67E5;&#x8BE2;" class="headerlink" title="&#x67E5;&#x8BE2;"></a><font color="red">&#x67E5;&#x8BE2;</font></h3><p><code>rpm -q [select-options] [query-options] PACKAGE_NAME</code><br><code>rpm -qp[dil] PACKAGE_FILE</code></p>
<h4 id="&#x5DF2;&#x5B89;&#x88C5;&#x67E5;&#x8BE2;"><a href="#&#x5DF2;&#x5B89;&#x88C5;&#x67E5;&#x8BE2;" class="headerlink" title="&#x5DF2;&#x5B89;&#x88C5;&#x67E5;&#x8BE2;"></a>&#x5DF2;&#x5B89;&#x88C5;&#x67E5;&#x8BE2;</h4><blockquote>
<p><code>-q</code>&#xFF1A;&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x7684;&#x5305;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;<br><code>-qa</code>: &#x67E5;&#x8BE2;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x7684;&#x6240;&#x6709;&#x5305;<br><code>-qf file</code>: &#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x662F;&#x7531;&#x54EA;&#x4E2A;rpm&#x5305;&#x5B89;&#x88C5;&#x751F;&#x6210;&#x7684;<br><code>-q --whatprovides CAP</code>: &#x6307;&#x5B9A;&#x529F;&#x80FD;&#x7531;&#x54EA;&#x4E2A;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;<br><code>-q --whatrequires CAP</code>: &#x6307;&#x5B9A;&#x529F;&#x80FD;&#x7531;&#x54EA;&#x4E2A;&#x5305;&#x6240;&#x4F9D;&#x8D56;<br><code>-q --provice</code>: &#x7A0B;&#x5E8F;&#x5305;&#x63D0;&#x4F9B;&#x54EA;&#x4E2A;CAPABILITY(&#x529F;&#x80FD;)<br><code>-qi</code>: &#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x5305;&#x7684;&#x8BF4;&#x660E;&#x4FE1;&#x606F;<br><code>-ql</code>: &#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x5305;&#x5B89;&#x88C5;&#x540E;&#x751F;&#x6210;&#x7684;&#x6587;&#x4EF6;&#x5217;&#x8868;<br><code>-qc</code>&#xFF1A;&#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x5305;&#x5B89;&#x88C5;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br><code>-qd</code>: &#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x5305;&#x5B89;&#x88C5;&#x7684;&#x5E2E;&#x52A9;&#x6587;&#x4EF6;<br><code>-q</code> &#x2013;changelog: &#x7A0B;&#x5E8F;&#x5305;&#x66F4;&#x65B0;&#x5386;&#x53F2;&#x4FE1;&#x606F;<br><code>-qR</code>: &#x4F9D;&#x8D56;&#x5173;&#x7CFB;<br><code>-q --script</code>: &#x76F8;&#x5E94;&#x6267;&#x884C;&#x811A;&#x672C;  </p>
</blockquote>
<h4 id="&#x672A;&#x5B89;&#x88C5;"><a href="#&#x672A;&#x5B89;&#x88C5;" class="headerlink" title="&#x672A;&#x5B89;&#x88C5;"></a>&#x672A;&#x5B89;&#x88C5;</h4><blockquote>
<p><code>-qpl</code>: &#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x5305;&#x5B89;&#x88C5;&#x540E;&#x751F;&#x6210;&#x7684;&#x6587;&#x4EF6;&#x5217;&#x8868;<br><code>-qpi</code>: &#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x5305;&#x8BF4;&#x660E;&#x4FE1;&#x606F;<br><code>-qpd</code>: &#x67E5;&#x8BE2;&#x6307;&#x5B9A;&#x5305;&#x5B89;&#x88C5;&#x540E;&#x751F;&#x6210;&#x7684;&#x6587;&#x6863;  </p>
</blockquote>
<p><img src="/2016/05/28/Linux&#x7A0B;&#x5E8F;&#x5305;&#x7BA1;&#x7406;&#x4E4B;rpm/rpmQuery.png" alt="rpm&#x67E5;&#x8BE2;"></p>
<h3 id="&#x6821;&#x9A8C;"><a href="#&#x6821;&#x9A8C;" class="headerlink" title="&#x6821;&#x9A8C;"></a>&#x6821;&#x9A8C;</h3><p><code>rpm -K PACKAGE_FILE</code><br><code>rpm -V PACKAGE_NAME</code></p>
<blockquote>
<p>-K &#x2013;nosignature: &#x5FFD;&#x7565;&#x9A8C;&#x8BC1;&#x6765;&#x6E90;&#x5408;&#x6CD5;&#x6027;&#xFF0C;&#x4E5F;&#x5373;&#x9A8C;&#x6B63;&#x7B7E;&#x540D;(dsa, gpg)<br>-K &#x2013;nodigest&#xFF1A;&#x5FFD;&#x7565;&#x9A8C;&#x8BC1;&#x8F6F;&#x4EF6;&#x5305;&#x5B8C;&#x6574;&#x6027;(sha1, md5)<br>&#x2013;import: &#x5BFC;&#x5165;&#x5BC6;&#x94A5;  </p>
</blockquote>
<ul>
<li>rpm &#x2013;import /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release<br>&#x5BFC;&#x5165;&#x5BC6;&#x94A5;&#x6587;&#x4EF6;</li>
</ul>
<p><img src="/2016/05/28/Linux&#x7A0B;&#x5E8F;&#x5305;&#x7BA1;&#x7406;&#x4E4B;rpm/rpmVertify.png" alt="rpm&#x6821;&#x9A8C;"><br>&#x9A8C;&#x8BC1;&#x5185;&#x5BB9;&#x4E2D;&#x7684;9&#x4F4D;&#x4FE1;&#x606F;&#x7684;&#x5177;&#x4F53;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">S   Size &#x5927;&#x5C0F;&#x662F;&#x5426;&#x6539;&#x53D8;</span><br><span class="line">M   Mode &#x7C7B;&#x578B;&#x6216;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x662F;&#x5426;&#x6539;&#x53D8;</span><br><span class="line">5   MD5 MD5&#x6548;&#x9A8C;&#x548C;&#x662F;&#x5426;&#x6539;&#x53D8;</span><br><span class="line">D   Device &#x8BBE;&#x5907;&#x4E3B;&#x4ECE;&#x7801;&#x662F;&#x5426;&#x6539;&#x53D8;</span><br><span class="line">L   readLink &#x8DEF;&#x5F84;&#x662F;&#x5426;&#x6539;&#x53D8;</span><br><span class="line">U   User &#x5C5E;&#x4E3B;&#x662F;&#x5426;&#x6539;&#x53D8;</span><br><span class="line">G   Group &#x5C5E;&#x7EC4;&#x662F;&#x5426;&#x6539;&#x53D8;</span><br><span class="line">T   mTime &#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x662F;&#x5426;&#x6539;&#x53D8;</span><br><span class="line">P   caPabilities &#x529F;&#x80FD;&#x662F;&#x5426;&#x53D8;&#x5316;</span><br></pre></td></tr></table></figure></p>
<h3 id="&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;"><a href="#&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;" class="headerlink" title="&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;"></a>&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;</h3><p>rpm&#x7BA1;&#x7406;&#x5668;&#x6570;&#x636E;&#x5E93;&#x8DEF;&#x5F84;<code>/var/lib/rpm/</code>&#xFF0C;&#x901A;&#x8FC7;rpm &#x547D;&#x4EE4;&#x67E5;&#x8BE2;&#x4E00;&#x4E2A;rpm &#x5305;&#x662F;&#x5426;&#x5B89;&#x88C5;&#x4E86;&#xFF0C;&#x4E5F;&#x662F;&#x901A;&#x8FC7;&#x67E5;&#x8BE2;rpm &#x6570;&#x636E;&#x5E93;&#x6765;&#x5B8C;&#x6210;&#x7684;&#xFF0C;&#x5F53;&#x7136;&#x6CA1;&#x4E8B;&#x522B;&#x8FDB;&#x884C;&#x6B64;&#x64CD;&#x4F5C;</p>
<blockquote>
<p>&#x2013;initdb&#xFF1A;&#x4E8B;&#x5148;&#x5B58;&#x5728;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5219;&#x4E0D;&#x6267;&#x884C;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;&#xFF0C;&#x5426;&#x5219;&#xFF0C;&#x65B0;&#x5EFA;<br>&#x2013;rebuilddb&#xFF1A;&#x76F4;&#x63A5;&#x91CD;&#x5EFA;&#xFF0C;&#x8986;&#x76D6;&#x539F;&#x6709;&#x7684;&#x6570;&#x636E;&#x5E93;<br>&#x2013;dbpath&#xFF1A;&#x6307;&#x660E;&#x8981;&#x521B;&#x5EFA;&#x6570;&#x636E;&#x5E93;&#x7684;&#x76EE;&#x5F55;</p>
</blockquote>
<p>&#x4EE5;&#x4E0A;&#x5185;&#x5BB9;&#x6574;&#x7406;&#x81EA;&#x9A6C;&#x54E5;&#x7B14;&#x8BB0;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[vim操作小结]]></title>
      <url>http://liu2lin600.github.io/2016/05/26/vim%E6%93%8D%E4%BD%9C%E5%B0%8F%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>vim&#x64CD;&#x4F5C;&#x5C0F;&#x7ED3;&#xFF0C;&#x4F9B;&#x590D;&#x4E60;&#x4F7F;&#x7528;<br><a id="more"></a><br><img src="/2016/05/26/vim&#x64CD;&#x4F5C;&#x5C0F;&#x7ED3;/vimModels.png" alt="vim" title="vim&#x6A21;&#x5F0F;&#x5207;&#x6362;&#x793A;&#x610F;&#x56FE;"></p>
<h3 id="&#x547D;&#x4EE4;&#x6A21;&#x5F0F;"><a href="#&#x547D;&#x4EE4;&#x6A21;&#x5F0F;" class="headerlink" title="&#x547D;&#x4EE4;&#x6A21;&#x5F0F;"></a>&#x547D;&#x4EE4;&#x6A21;&#x5F0F;</h3><h4 id="&#x5149;&#x6807;&#x79FB;&#x52A8;"><a href="#&#x5149;&#x6807;&#x79FB;&#x52A8;" class="headerlink" title="&#x5149;&#x6807;&#x79FB;&#x52A8;"></a>&#x5149;&#x6807;&#x79FB;&#x52A8;</h4><blockquote>
<p><code>h</code> <code>j</code> <code>k</code> <code>l</code>&#xFF1A;&#x5DE6;&#x4E0B;&#x53F3;&#x4E0A;<br><code>w</code>&#xFF1A;&#x79FB;&#x5230;&#x4E0B;&#x4E00;&#x8BCD;&#x9996;<br><code>b</code>&#xFF1A;&#x79FB;&#x5230;&#x4E0A;&#x4E00;&#x8BCD;&#x9996;<br><code>e</code>&#xFF1A;&#x79FB;&#x5230;&#x4E0B;&#x4E00;&#x8BCD;&#x5C3E;  </p>
<blockquote>
<ul>
<li><code>&#x4EE5;&#x4E0A;&#x652F;&#x6301;&#x524D;&#x52A0;&#x6570;&#x5B57;&#x7EC4;&#x5408;&#x64CD;&#x4F5C;</code>  </li>
<li>5w&#xFF1A;&#x5411;&#x540E;&#x79FB;5&#x4E2A;&#x5355;&#x8BCD;    </li>
</ul>
</blockquote>
</blockquote>
<blockquote>
<p><code>gg</code>&#xFF1A;&#x79FB;&#x5230;&#x9996;&#x884C;<br><code>G</code>&#xFF1A;&#x79FB;&#x5230;&#x5C3E;&#x884C;<br><code>^</code>&#xFF1A;&#x79FB;&#x5230;&#x884C;&#x9996;&#x975E;&#x7A7A;&#x5B57;&#x7B26;<br><code>0</code>&#xFF1A;&#x79FB;&#x5230;&#x884C;&#x9996;<br><code>$</code>&#xFF1A;&#x79FB;&#x5230;&#x884C;&#x5C3E;<br><code>nG</code>&#xFF1A;&#x79FB;&#x5230;&#x7B2C;n&#x884C;<br><code>H</code>&#xFF1A;&#x79FB;&#x5230;&#x5F53;&#x524D;&#x5C4F;&#x9996;&#x884C;<br><code>M</code>&#xFF1A;&#x79FB;&#x5230;&#x5F53;&#x524D;&#x5C4F;&#x4E2D;&#x95F4;&#x884C;<br><code>L</code>&#xFF1A;&#x79FB;&#x5230;&#x5F53;&#x524D;&#x5C4F;&#x5C3E;&#x884C;<br><code>%</code>&#xFF1A;&#x5339;&#x914D;&#x5149;&#x6807;&#x6240;&#x5728;&#x5355;&#x8BCD;&#xFF0C;&#x79FB;&#x52A8;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;&#x76F8;&#x540C;&#x5355;&#x8BCD;<br><code>#</code>&#xFF1A;&#x5339;&#x914D;&#x5149;&#x6807;&#x6240;&#x5728;&#x5355;&#x8BCD;&#xFF0C;&#x79FB;&#x52A8;&#x5230;&#x4E0A;&#x4E00;&#x4E2A;&#x76F8;&#x540C;&#x5355;&#x8BCD;</p>
</blockquote>
<h4 id="&#x7FFB;&#x5C4F;"><a href="#&#x7FFB;&#x5C4F;" class="headerlink" title="&#x7FFB;&#x5C4F;"></a>&#x7FFB;&#x5C4F;</h4><blockquote>
<p><code>ctrl+f</code>&#xFF1A;&#x5411;&#x540E;&#x7FFB;&#x4E00;&#x5C4F;<br><code>ctrl+b</code>&#xFF1A;&#x5411;&#x524D;&#x7FFB;&#x4E00;&#x5C4F;<br><code>ctrl+d</code>&#xFF1A;&#x5411;&#x540E;&#x7FFB;&#x534A;&#x5C4F;<br><code>ctrl+u</code>&#xFF1A;&#x5411;&#x524D;&#x7FFB;&#x534A;&#x5C4F;  </p>
</blockquote>
<h4 id="&#x5220;&#x9664;&#x526A;&#x5207;"><a href="#&#x5220;&#x9664;&#x526A;&#x5207;" class="headerlink" title="&#x5220;&#x9664;&#x526A;&#x5207;"></a>&#x5220;&#x9664;&#x526A;&#x5207;</h4><blockquote>
<p><code>x</code>&#xFF1A;&#x5220;&#x9664;&#x5149;&#x6807;&#x6240;&#x5728;&#x5355;&#x4E2A;&#x5B57;&#x7B26;<br><code>dd</code>&#xFF1A;&#x5220;&#x9664;&#x5149;&#x6807;&#x6240;&#x5728;&#x884C;<br><code>dw</code>&#xFF1A;&#x5220;&#x9664;&#x5149;&#x6807;&#x6240;&#x5728;&#x7684;&#x8BCD;&#xFF0C;&#x4E0D;&#x5305;&#x62EC;&#x5149;&#x6807;&#x5904;&#x53CA;&#x4E4B;&#x524D;  </p>
<blockquote>
<ul>
<li><code>&#x4EE5;&#x4E0A;&#x652F;&#x6301;&#x52A0;&#x6570;&#x5B57;&#x7EC4;&#x5408;</code>  </li>
<li>5dw&#xFF1A;&#x5411;&#x540E;&#x5220;5&#x4E2A;&#x8BCD;</li>
</ul>
</blockquote>
</blockquote>
<blockquote>
<p><code>da{</code>&#xFF1A; &#x5220;&#x9664;&#x5F53;&#x524D;&#x5149;&#x6807;&#x6240;&#x5728;&#x7684;&#x6700;&#x8FD1;&#x4E00;&#x5BF9;&#x5927;&#x62EC;&#x53F7;(&#x5305;&#x62EC;&#x62EC;&#x53F7;)&#x7684;&#x5185;&#x5BB9;<br><code>ya[</code>&#xFF1A; &#x590D;&#x5236;&#x5F53;&#x524D;&#x5149;&#x6807;&#x6240;&#x5728;&#x7684;&#x6700;&#x8FD1;&#x4E00;&#x5BF9;&#x4E2D;&#x62EC;&#x53F7;(&#x5305;&#x62EC;&#x62EC;&#x53F7;)&#x7684;&#x5185;&#x5BB9;</p>
<blockquote>
<ul>
<li>&#x5927;&#x62EC;&#x53F7;&#xFF0C;&#x4E2D;&#x62EC;&#x53F7;&#x548C;&#x5C0F;&#x62EC;&#x53F7;&#x90FD;&#x9002;&#x7528;</li>
</ul>
</blockquote>
</blockquote>
<blockquote>
<p><code>d$</code>&#xFF1A;&#x5220;&#x9664;&#x5149;&#x6807;&#x5230;&#x884C;&#x5C3E;<br><code>dgg</code>&#xFF1A;&#x5220;&#x9664;&#x5149;&#x6807;&#x6240;&#x5728;&#x884C;&#x81F3;&#x9996;&#x884C;<br><code>dG</code>&#xFF1A;&#x5220;&#x9664;&#x5149;&#x6807;&#x6240;&#x5728;&#x884C;&#x81F3;&#x5C3E;&#x884C;<br><code>c</code>&#xFF1A;&#x6539;&#x53D8;&#x547D;&#x4EE4;&#xFF0C;&#x4F5C;&#x7528;&#x7B49;&#x540C;&#x4E8E;<code>d</code>&#x518D;&#x5207;&#x6362;&#x63D2;&#x5165;&#x6A21;&#x5F0F;  </p>
<ul>
<li><code>cc</code>&#xFF1A;&#x5220;&#x9664;&#x5F53;&#x524D;&#x884C;&#x5E76;&#x5207;&#x6362;&#x63D2;&#x5165;&#x6A21;&#x5F0F;  </li>
<li><code>c$</code>&#xFF1A;&#x5220;&#x5230;&#x884C;&#x5C3E;&#x5E76;&#x5207;&#x6362;&#x63D2;&#x5165;&#x6A21;&#x5F0F;  </li>
<li><code>c0</code>&#xFF0C;<code>c^</code>&#xFF0C;<code>cw</code>&#xFF0C;<code>cb</code>&#x2026;.  </li>
</ul>
</blockquote>
<h4 id="&#x590D;&#x5236;&#x7C98;&#x8D34;"><a href="#&#x590D;&#x5236;&#x7C98;&#x8D34;" class="headerlink" title="&#x590D;&#x5236;&#x7C98;&#x8D34;"></a>&#x590D;&#x5236;&#x7C98;&#x8D34;</h4><blockquote>
<p><code>yy</code>&#xFF1A;&#x590D;&#x5236;&#x5149;&#x6807;&#x6240;&#x5728;&#x884C;&#xFF0C;<code>5yy</code>&#x590D;&#x5236;5&#x884C;<br><code>p</code>&#xFF1A;&#x5728;&#x5149;&#x6807;&#x4E0B;&#x884C;&#x7C98;&#x8D34;<br><code>P</code>&#xFF1A;&#x5728;&#x5149;&#x6807;&#x4E0A;&#x884C;&#x7C98;&#x8D34;  </p>
</blockquote>
<h4 id="&#x64A4;&#x9500;"><a href="#&#x64A4;&#x9500;" class="headerlink" title="&#x64A4;&#x9500;"></a>&#x64A4;&#x9500;</h4><blockquote>
<p><code>u</code>&#xFF1A;&#x64A4;&#x9500;&#x4E0A;&#x4E00;&#x6B21;&#x64CD;&#x4F5C;&#xFF0C;<code>3u</code>&#x64A4;&#x9500;3&#x6B21;<br><code>ctrl+r</code>&#xFF1A;&#x53CD;&#x64A4;&#x9500;&#x4E00;&#x6B21;  </p>
</blockquote>
<h4 id="&#x67E5;&#x627E;"><a href="#&#x67E5;&#x627E;" class="headerlink" title="&#x67E5;&#x627E;"></a>&#x67E5;&#x627E;</h4><blockquote>
<p><code>/STR</code>&#xFF1A;&#x5411;&#x4E0B;&#x67E5;&#x627E;STR&#x5B57;&#x7B26;<br><code>/\CSTR</code>&#xFF1A;&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#x5411;&#x4E0B;&#x67E5;&#xFF0C;&#x4E0B;&#x540C;<br><code>?STR</code>&#xFF1A;&#x5411;&#x524D;&#x67E5;&#x627E;STR&#x5B57;&#x7B26;  </p>
<blockquote>
<p><code>n</code>&#xFF1A;&#x4E0B;&#x4E00;&#x4E2A;&#x67E5;&#x627E;&#x7ED3;&#x679C;&#xFF0C;<code>?STR</code>&#x65F6;&#x5411;&#x524D;&#x67E5;&#x627E;<br><code>N</code>&#xFF1A;&#x4E0A;&#x4E00;&#x4E2A;&#x67E5;&#x627E;&#x7ED3;&#x679C;&#xFF0C;<code>?STR</code>&#x65F6;&#x5411;&#x540E;&#x67E5;&#x627E;  </p>
</blockquote>
</blockquote>
<h4 id="&#x5207;&#x6362;&#x63D2;&#x5165;&#x6A21;&#x5F0F;"><a href="#&#x5207;&#x6362;&#x63D2;&#x5165;&#x6A21;&#x5F0F;" class="headerlink" title="&#x5207;&#x6362;&#x63D2;&#x5165;&#x6A21;&#x5F0F;"></a>&#x5207;&#x6362;&#x63D2;&#x5165;&#x6A21;&#x5F0F;</h4><blockquote>
<p><code>i</code>&#xFF1A;&#x5149;&#x6807;&#x524D;<br><code>a</code>&#xFF1A;&#x5149;&#x6807;&#x540E;<br><code>o</code>&#xFF1A;&#x4E0B;&#x4E00;&#x884C;<br><code>I</code>&#xFF1A;&#x884C;&#x9996;<br><code>A</code>&#xFF1A;&#x884C;&#x5C3E;<br><code>O</code>&#xFF1A;&#x4E0A;&#x4E00;&#x884C;  </p>
</blockquote>
<h4 id="&#x5207;&#x6362;&#x53EF;&#x89C6;&#x5316;&#x6A21;&#x5F0F;"><a href="#&#x5207;&#x6362;&#x53EF;&#x89C6;&#x5316;&#x6A21;&#x5F0F;" class="headerlink" title="&#x5207;&#x6362;&#x53EF;&#x89C6;&#x5316;&#x6A21;&#x5F0F;"></a>&#x5207;&#x6362;&#x53EF;&#x89C6;&#x5316;&#x6A21;&#x5F0F;</h4><p>&#x8FDB;&#x5165;&#x53EF;&#x89C6;&#x5316;&#x6A21;&#x5F0F;&#x540E;&#x901A;&#x8FC7;&#x4E0A;&#x4E0B;&#x5DE6;&#x53F3;&#x9009;&#x62E9;&#x5185;&#x5BB9;&#x540E;&#xFF0C;&#x53EF;&#x8FDB;&#x884C;&#x590D;&#x5236;&#xFF0C;&#x526A;&#x5207;&#x7B49;&#x64CD;&#x4F5C;</p>
<blockquote>
<p><code>v</code>&#xFF1A;&#x6309;&#x5B57;&#x7B26;&#x9009;&#x62E9;<br><code>V</code>&#xFF1A;&#x6309;&#x884C;&#x9009;&#x62E9;<br><code>ctrl+v</code>&#xFF1A;&#x6309;&#x5757;&#x9009;&#x62E9;</p>
</blockquote>
<p><em>&#x6279;&#x91CF;&#x64CD;&#x4F5C;</em></p>
<ol>
<li>&#x5728;&#x9996;&#x884C;&#x6279;&#x91CF;&#x52A0;#&#x6CE8;&#x91CA;&#xFF1A;<code>v</code> =&gt; <code>&#x9009;&#x62E9;&#x884C;</code> =&gt; <code>ctrl+v</code> =&gt; <code>I</code> =&gt; <code>#+ESC+ESC</code></li>
<li>&#x53D6;&#x6D88;&#x9996;&#x884C;#&#x64CD;&#x4F5C;&#xFF1A;<code>ctrl+v</code>=&gt; <code>&#x9009;&#x62E9;&#x884C;</code> =&gt; <code>d</code></li>
</ol>
<h4 id="&#x5BC4;&#x5B58;&#x5668;"><a href="#&#x5BC4;&#x5B58;&#x5668;" class="headerlink" title="&#x5BC4;&#x5B58;&#x5668;"></a>&#x5BC4;&#x5B58;&#x5668;</h4><p>&#x76F8;&#x5F53;&#x4E8E;&#x526A;&#x5207;&#x677F;&#xFF0C;linux&#x4E0A;&#x6709;a-z&#x53CA;&#x4E00;&#x4E2A;&#x672A;&#x547D;&#x540D;&#x5171;27&#x4E2A;&#x5BC4;&#x5B58;&#x5668;</p>
<blockquote>
<p>3<code>&quot;a</code>yy&#xFF1A;&#x590D;&#x5236;3&#x884C;&#x5B58;&#x653E;&#x5F00;a&#x5BC4;&#x5B58;&#x5668;<br><code>&quot;a</code>p&#xFF1A;&#x7C98;&#x8D34;&#x5BC4;&#x5B58;&#x5668;&#x4E0A;&#x7684;&#x5185;&#x5BB9;</p>
</blockquote>
<h4 id="&#x5C0F;&#x6280;&#x5DE7;"><a href="#&#x5C0F;&#x6280;&#x5DE7;" class="headerlink" title="&#x5C0F;&#x6280;&#x5DE7;"></a>&#x5C0F;&#x6280;&#x5DE7;</h4><blockquote>
<p><code>~</code>&#xFF1A;&#x5927;&#x5C0F;&#x5199;&#x8F6C;&#x6362;<br><code>.</code>&#xFF1A;&#x91CD;&#x590D;&#x4E0A;&#x6B21;&#x64CD;&#x4F5C;<br><code>r</code>&#xFF1A;&#x8FDB;&#x5165;&#x66FF;&#x6362;&#x72B6;&#x6001;&#xFF0C;&#x518D;&#x6309;&#x66FF;&#x6362;&#x5F53;&#x524D;&#x5B57;&#x7B26;<br><code>R</code>&#xFF1A;&#x5207;&#x6362;&#x66FF;&#x6362;&#x6A21;&#x5F0F;&#xFF0C;&#x518D;&#x8F93;&#x5165;&#x66FF;&#x6362;&#x591A;&#x4E2A;&#x5B57;&#x7B26;<br><code>ZZ</code>&#xFF1A;&#x4FDD;&#x5B58;&#x9000;&#x51FA;&#xFF0C;&#x540C;<code>:wq</code><br><code>20iSTR</code>+<code>ESC</code>&#xFF1A;&#x8F93;&#x5165;20&#x4E2A;STR  </p>
</blockquote>
<h3 id="&#x672B;&#x884C;&#x6A21;&#x5F0F;"><a href="#&#x672B;&#x884C;&#x6A21;&#x5F0F;" class="headerlink" title="&#x672B;&#x884C;&#x6A21;&#x5F0F;"></a>&#x672B;&#x884C;&#x6A21;&#x5F0F;</h3><p>&#x672B;&#x884C;&#x6A21;&#x5F0F;&#x4E0B;&#x8F93;&#x5165;&#x5B8C;&#x540E;&#x6309;<code>ENTER</code>&#x6267;&#x884C;&#xFF0C;&#x5728;&#x672B;&#x884C;&#x6A21;&#x5F0F;&#x4E2D;</p>
<blockquote>
<p><code>.</code>&#xFF1A;&#x5F53;&#x524D;&#x884C;<br><code>$</code>&#xFF1A;&#x6700;&#x540E;&#x4E00;&#x884C;<br><code>+n</code>&#xFF1A;&#x5411;&#x4E0B;n&#x884C;<br><code>%</code>&#xFF1A;&#x5168;&#x6587;  </p>
</blockquote>
<h4 id="&#x5730;&#x5740;&#x5B9A;&#x754C;"><a href="#&#x5730;&#x5740;&#x5B9A;&#x754C;" class="headerlink" title="&#x5730;&#x5740;&#x5B9A;&#x754C;"></a>&#x5730;&#x5740;&#x5B9A;&#x754C;</h4><blockquote>
<p><code>:.,$</code>&#xFF1A;&#x5F53;&#x524D;&#x884C;&#x5230;&#x5C3E;&#x884C;<br><code>:%</code>&#xFF1A;&#x5168;&#x6587;&#xFF0C;&#x7B49;&#x540C;<code>:1,$</code>  </p>
</blockquote>
<h4 id="&#x67E5;&#x627E;&#x66FF;&#x6362;"><a href="#&#x67E5;&#x627E;&#x66FF;&#x6362;" class="headerlink" title="&#x67E5;&#x627E;&#x66FF;&#x6362;"></a>&#x67E5;&#x627E;&#x66FF;&#x6362;</h4><p><code>&#x6709;&#x5173;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5185;&#x5BB9;&#x89C1;grep&#x7528;&#x6CD5;&#x7BC7;</code></p>
<blockquote>
<p><code>:m,ns/old/new/gic</code><br><code>:m,ns@old@new@gic</code></p>
<blockquote>
<p>m,n&#xFF1A;&#x7B2C;m&#x884C;&#x5230;n&#x884C;<br>s&#xFF1A;&#x66FF;&#x6362;<br>g&#xFF1A;&#x5168;&#x6587;<br>i&#xFF1A;&#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;<br>c&#xFF1A;&#x66FF;&#x6362;&#x65F6;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x786E;&#x8BA4;</p>
</blockquote>
</blockquote>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:<span class="number">1</span>,<span class="number">10</span>s/old/<span class="keyword">new</span>/g                # &#x66FF;&#x6362;<span class="number">1</span>&#x5230;<span class="number">10</span>&#x884C;&#x7684;old&#x4E3A;<span class="keyword">new</span>  </span><br><span class="line">:<span class="number">2</span>,<span class="number">7</span>s/^/#/g                     # &#x6CE8;&#x91CA;<span class="number">2</span>&#x5230;<span class="number">7</span>&#x884C;  </span><br><span class="line">:<span class="number">6</span>,<span class="number">11</span>s@^#@@g                    # &#x5220;&#x9664;<span class="number">6</span>&#x5230;<span class="number">11</span>&#x884C;&#x7684;&#x5F00;&#x5934;#  </span><br><span class="line">:.,$s@^@//@g                    # &#x5F53;&#x524D;&#x884C;&#x5230;&#x5C3E;&#x884C;&#x5F00;&#x5934;&#x6DFB;&#x52A0;//(&#x5982;&#x7528;`/`&#x65F6;&#xFF0C;&#x5185;&#x5BB9;&#x51FA;&#x73B0;`/`&#x9700;&#x8981;&#x7528;`\`&#x8F6C;&#x4E49;) &#x5373;&#xFF1A;:.,$s/^/\/\//g</span><br><span class="line">:%s@^t\([[:alph<span class="variable">a:</span>]]\+\)@T\<span class="number">1</span>@g   # &#x5168;&#x6587;&#x4EE5;t&#x5F00;&#x5934;&#x5355;&#x8BCD;&#x6362;&#x6210;T&#x5F00;&#x5934;&#xFF0C;&#x652F;&#x6301;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x76F8;&#x5173;&#x89C4;&#x5219;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;`&amp;`&#x8868;&#x793A;&#x524D;&#x9762;&#x62EC;&#x53F7;&#x5339;&#x914D;&#x5230;&#x7684;&#x5185;&#x5BB9;</span><br></pre></td></tr></table></figure>
<h4 id="&#x914D;&#x7F6E;"><a href="#&#x914D;&#x7F6E;" class="headerlink" title="&#x914D;&#x7F6E;"></a>&#x914D;&#x7F6E;</h4><blockquote>
<p><code>:set nu</code>&#xFF1A;&#x663E;&#x793A;&#x884C;&#x53F7;&#xFF0C;<code>:set nonu</code><br><code>:set ic</code>&#xFF1A;&#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;&#xFF0C;<code>:set noic</code><br><code>:set hlsearch</code>&#xFF1A;&#x641C;&#x7D22;&#x9AD8;&#x4EAE;&#xFF0C;<code>:set nohlsearch</code><br><code>:set ai</code>&#xFF1A;&#x6309;&#x56DE;&#x8F66;&#x81EA;&#x52A8;&#x7F29;&#x8FDB;&#xFF0C;<code>:set ai</code><br><code>:syntax on</code>&#xFF1A;&#x8BED;&#x6CD5;&#x989C;&#x8272;&#x5F00;&#xFF0C;<code>:syntax on</code><br><code>:set ts=4</code>&#xFF1A;&#x8BBE;&#x5B9A;<code>TAB</code>&#x4E3A;4&#x7A7A;&#x683C;<br><code>:set list</code>&#xFF1A;&#x663E;&#x793A;&#x5236;&#x8868;&#x7B26;&#x548C;&#x6362;&#x884C;&#x7B26; </p>
<ul>
<li>&#x4EE5;&#x4E0A;&#x8BBE;&#x7F6E;&#x53EA;&#x5BF9;&#x5F53;&#x524D;&#x7A97;&#x53E3;&#x751F;&#x6548;&#xFF0C;&#x5982;&#x9700;&#x4E00;&#x76F4;&#x751F;&#x6548;&#xFF0C;&#x5219;&#x5C06;&#x8BBE;&#x7F6E;&#x5199;&#x5165; <code>~/.vimrc</code>&#xFF0C;&#x6B64;&#x6587;&#x4EF6;&#x9700;&#x624B;&#x5DE5;&#x521B;&#x5EFA;</li>
</ul>
</blockquote>
<h4 id="&#x4FDD;&#x5B58;&#x9000;&#x51FA;"><a href="#&#x4FDD;&#x5B58;&#x9000;&#x51FA;" class="headerlink" title="&#x4FDD;&#x5B58;&#x9000;&#x51FA;"></a>&#x4FDD;&#x5B58;&#x9000;&#x51FA;</h4><blockquote>
<p><code>:q</code>&#xFF1A;&#x4E0D;&#x4FDD;&#x5B58;&#x9000;&#x51FA;<br><code>:q!</code>&#xFF1A;&#x5F3A;&#x5236;&#x4E0D;&#x4FDD;&#x5B58;&#x9000;&#x51FA;<br><code>:w</code>&#xFF1A;&#x4FDD;&#x5B58;&#x4E0D;&#x9000;&#x51FA;<br><code>:w!</code>&#xFF1A;&#x5F3A;&#x5236;&#x4FDD;&#x5B58;<br><code>:wq</code>&#xFF1A;&#x4FDD;&#x5B58;&#x9000;&#x51FA; &#xFF0C;&#x7B49;&#x540C;<code>x</code><br><code>:wq!</code>&#xFF1A;&#x5F3A;&#x5236;&#x4FDD;&#x5B58;&#x9000;&#x51FA;<br><code>:e!</code>&#xFF1A;&#x6062;&#x590D;&#x539F;&#x6837;  </p>
</blockquote>
<h4 id="&#x5C0F;&#x6280;&#x5DE7;-1"><a href="#&#x5C0F;&#x6280;&#x5DE7;-1" class="headerlink" title="&#x5C0F;&#x6280;&#x5DE7;"></a>&#x5C0F;&#x6280;&#x5DE7;</h4><blockquote>
<p><code>:w filename</code>&#xFF1A;&#x53E6;&#x5B58;&#x4E3A;filename<br><code>:r filename</code>&#xFF1A;&#x5C06;filename&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x7C98;&#x5230;&#x5149;&#x6807;&#x4E0B;&#x4E00;&#x884C;<br><code>:!&lt;&#x547D;&#x4EE4;&gt;</code>&#xFF1A;&#x5728;&#x4E0D;&#x9000;&#x51FA;&#x60C5;&#x51B5;&#x4E0B;&#x6267;&#x884C;&lt;&#x547D;&#x4EE4;&gt;&#x64CD;&#x4F5C;<br><code>:r!&lt;&#x547D;&#x4EE4;&gt;</code>&#xFF1A;&#x5C06;&lt;&#x547D;&#x4EE4;&gt;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x63D2;&#x5165;&#x5230;&#x5149;&#x6807;&#x4E0B;&#x4E00;&#x884C;  </p>
</blockquote>
<h4 id="&#x591A;&#x6587;&#x4EF6;&#x591A;&#x7A97;&#x53E3;"><a href="#&#x591A;&#x6587;&#x4EF6;&#x591A;&#x7A97;&#x53E3;" class="headerlink" title="&#x591A;&#x6587;&#x4EF6;&#x591A;&#x7A97;&#x53E3;"></a>&#x591A;&#x6587;&#x4EF6;&#x591A;&#x7A97;&#x53E3;</h4><p><code>vim -[o|O] file1 file2...</code>&#x53EF;&#x5B9E;&#x73B0;&#x5F00;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x591A;&#x7A97;&#x53E3;&#x6A21;&#x5F0F;</p>
<ul>
<li>-o&#xFF1A;&#x6C34;&#x5E73;&#x53E0;&#x653E;</li>
<li>-O&#xFF1A;&#x5782;&#x76F4;</li>
</ul>
<blockquote>
<p><code>:next</code>&#xFF1A;&#x4E0B;&#x4E00;&#x6587;&#x4EF6;<br><code>:prev</code>&#xFF1A;&#x4E0A;&#x4E00;&#x6587;&#x4EF6;<br><code>:first</code>&#xFF1A;&#x7B2C;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;<br><code>:last</code>&#xFF1A;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;<br><code>:qall</code>&#xFF1A;&#x9000;&#x51FA;&#x6240;&#x6709;&#x4E0D;&#x4FDD;&#x5B58;<br><code>:wall</code>&#xFF1A;&#x4FDD;&#x5B58;&#x6240;&#x6709;<br><code>:wqall</code>&#xFF1A;&#x4FDD;&#x5B58;&#x9000;&#x51FA;&#x6240;&#x6709;  </p>
</blockquote>
<ul>
<li>&#x5355;&#x6587;&#x4EF6;&#x4E5F;&#x53EF;&#x4EE5;&#x6253;&#x5F00;&#x591A;&#x7A97;&#x53E3;<br><code>ctrl+w</code>,<code>s</code>&#xFF1A;&#x6C34;&#x5E73;<br><code>ctrl+w</code>,<code>v</code>&#xFF1A;&#x5782;&#x76F4;<br><code>ctrl+w</code>,<code>hjkl</code>&#xFF1A;&#x5207;&#x6362;</li>
</ul>
<h3 id="&#x5176;&#x5B83;"><a href="#&#x5176;&#x5B83;" class="headerlink" title="&#x5176;&#x5B83;"></a>&#x5176;&#x5B83;</h3><p><code>~/.viminfo</code>&#xFF1A;&#x8BB0;&#x5F55;vim&#x64CD;&#x4F5C;&#x5386;&#x53F2;<br><code>./.filename.swp</code>&#xFF1A;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x8BB0;&#x5F55;&#x5F53;&#x524D;vim&#x64CD;&#x4F5C;&#xFF0C;&#x5982;&#x679C;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#x5219;&#x81EA;&#x52A8;&#x5220;&#x9664;&#xFF0C;&#x4E0D;&#x6B63;&#x5E38;&#x9000;&#x51FA;&#x65F6;&#x9700;&#x624B;&#x52A8;&#x5220;&#x9664;&#x624D;&#x80FD;&#x6B63;&#x5E38;&#x6253;&#x5F00;&#x539F;&#x6587;&#x4EF6;</p>
<p>&#x4EE5;&#x4E0A;&#x4E3A;vim&#x5E38;&#x7528;&#x7684;&#x6280;&#x5DE7;&#xFF0C;&#x4F46;vim&#x7684;&#x529F;&#x80FD;&#x8FDC;&#x4E0D;&#x6B62;&#x6B64;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x53EF;&#x81EA;&#x884C;google&#xFF0C;&#x4E5F;&#x53EF;<code>vimtutor</code>&#x6253;&#x5F00;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x7EC3;&#x4E60;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux文本处理三剑客之sed]]></title>
      <url>http://liu2lin600.github.io/2016/05/26/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bsed/</url>
      <content type="html"><![CDATA[<p>&#x901A;&#x8FC7;vim&#xFF0C;grep&#x53CA;&#x6B63;&#x5219;&#x7684;&#x8E42;&#x8E8F;&#x4EE5;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x53E6;&#x4E00;&#x628A;&#x5229;&#x5668;sed<br><a id="more"></a></p>
<h2 id="&#x7B80;&#x4ECB;"><a href="#&#x7B80;&#x4ECB;" class="headerlink" title="&#x7B80;&#x4ECB;"></a>&#x7B80;&#x4ECB;</h2><p>sed&#x5168;&#x79F0;Stream Editor&#xFF0C;&#x987E;&#x540D;&#x601D;&#x4E49;&#x4E3A;&#x6D41;&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x4E5F;&#x4E60;&#x60EF;&#x53EB;&#x884C;&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x5904;&#x7406;&#x6587;&#x672C;&#x7684;&#x65B9;&#x5F0F;&#x4E3A;&#x6309;&#x884C;&#x81F3;&#x4E0A;&#x800C;&#x4E0B;&#x8BFB;&#x53D6;&#xFF0C;&#x5339;&#x914D;&#xFF0C;&#x5904;&#x7406;&#x5E76;&#x663E;&#x793A;&#x6216;&#x8005;&#x505A;&#x5176;&#x5B83;&#x5904;&#x7406;&#xFF0C;&#x533A;&#x522B;&#x4E0E;vim&#x90A3;&#x79CD;&#x5168;&#x5C4F;&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x76F4;&#x63A5;&#x4E0A;&#x4E2A;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x56FE;</p>
<p><img src="/2016/05/26/Linux&#x6587;&#x672C;&#x5904;&#x7406;&#x4E09;&#x5251;&#x5BA2;&#x4E4B;sed/sed.png" alt="sed&#x539F;&#x7406;&#x56FE;" title="sed&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x793A;&#x610F;&#x56FE;"></p>
<blockquote>
<p>&#x547D;&#x4EE4;&#x8FD0;&#x884C;&#x4F1A;&#x5728;&#x5185;&#x5B58;&#x5F00;&#x8F9F;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x548C;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;2&#x4E2A;&#x7A7A;&#x95F4;&#x7528;&#x6765;&#x5904;&#x7406;&#x6587;&#x672C;&#x5185;&#x5BB9;</p>
<ol>
<li>&#x8BFB;&#x53D6;&#x6587;&#x672C;&#x7B2C;&#x4E00;&#x884C;&#x5185;&#x5BB9;&#x81F3;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;</li>
<li>&#x5F53;&#x5185;&#x5BB9;&#x6CA1;&#x6709;&#x5339;&#x914D;&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F1A;&#x8F93;&#x51FA;&#xFF0C;&#x5F53;&#x6709;&#x5339;&#x914D;&#x65F6;&#x5219;&#x8FDB;&#x884C;&#x7F16;&#x8F91;&#x64CD;&#x4F5C;&#xFF08;&#x4FEE;&#x6539;&#xFF0C;&#x66FF;&#x6362;&#xFF0C;&#x5220;&#x9664;&#xFF0C;&#x8FFD;&#x52A0;&#xFF0C;&#x663E;&#x793A;&#x7B49;&#xFF09;</li>
<li>&#x5904;&#x7406;&#x7B2C;&#x4E00;&#x884C;&#x540E;,&#x5C06;&#x5185;&#x5BB9;&#x8F93;&#x51FA;&#xFF0C;&#x518D;&#x5BF9;&#x7B2C;&#x4E8C;&#x884C;&#x5904;&#x7406;&#x76F4;&#x5230;&#x6587;&#x672C;&#x7ED3;&#x675F;</li>
</ol>
</blockquote>
<h2 id="&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x548C;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;"><a href="#&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x548C;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;" class="headerlink" title="&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x548C;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;"></a>&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x548C;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;</h2><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;sed&#x662F;&#x5C06;&#x8F93;&#x5165;&#x5185;&#x5BB9;&#x4E00;&#x884C;&#x4E00;&#x884C;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x7684;&#xFF0C;&#x5982;&#xFF1A;<code>sed &#x2018;1,$p&#x2019; /etc/passwd</code>&#x3002;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;sed&#x4F1A;&#x4E00;&#x884C;&#x4E00;&#x884C;&#x7684;&#x8BFB;&#x5165;/etc/passwd&#x6587;&#x4EF6;&#xFF0C;&#x67E5;&#x770B;&#x6BCF;&#x884C;&#x662F;&#x5426;&#x5339;&#x914D;&#x5B9A;&#x5740;&#x6761;&#x4EF6;&#xFF08;1,$&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x5339;&#x914D;&#x6761;&#x4EF6;&#xFF0C;&#x5C31;&#x8BB2;&#x884C;&#x5185;&#x5BB9;&#x653E;&#x5165;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#xFF0C;&#x5E76;&#x6253;&#x5370;&#xFF08;p&#x547D;&#x4EE4;&#xFF09;&#x3002;&#x7531;&#x4E8E;&#x6587;&#x672C;&#x6D41;&#x672C;&#x8EAB;&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x800C;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x5185;&#x5BB9;&#x53C8;&#x88AB;&#x6253;&#x5370;&#x4E00;&#x904D;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x6700;&#x540E;&#x4F1A;&#x5C06;&#x6BCF;&#x4E00;&#x884C;&#x90FD;&#x663E;&#x793A;2&#x904D;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;sed&#x7A0B;&#x5E8F;&#x5728;&#x6240;&#x6709;&#x7684;&#x811A;&#x672C;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x5C06;&#x81EA;&#x52A8;&#x6253;&#x5370;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;p&#x547D;&#x4EE4;&#x8F93;&#x51FA;&#x76F8;&#x5173;&#x884C;&#x4E24;&#x904D;&#xFF0C;<code>-n</code>&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x5C4F;&#x853D;&#x81EA;&#x52A8;&#x6253;&#x5370;</p>
<h3 id="&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#xFF08;pattern-space&#xFF09;"><a href="#&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#xFF08;pattern-space&#xFF09;" class="headerlink" title="&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#xFF08;pattern space&#xFF09;"></a>&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#xFF08;pattern space&#xFF09;</h3><p>&#x7528;&#x4E8E;&#x7F13;&#x5B58;&#x8981;&#x5904;&#x7406;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x662F;sed&#x5904;&#x7406;&#x6700;&#x6838;&#x5FC3;&#x7684;&#x7F13;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C;&#x6240;&#x6709;&#x8981;&#x5904;&#x7406;&#x7684;&#x884C;&#x5185;&#x5BB9;&#x90FD;&#x4F1A;&#x590D;&#x5236;&#x8FDB;&#x8FD9;&#x4E2A;&#x7A7A;&#x95F4;&#x518D;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x6216;&#x6839;&#x636E;&#x9700;&#x8981;&#x663E;&#x793A;&#x3002;&#x9ED8;&#x8BA4;sed&#x4E0D;&#x4F1A;&#x4FEE;&#x6539;&#x539F;&#x6587;&#x4EF6;&#x672C;&#x8EAB;&#x5185;&#x5BB9;&#xFF0C;&#x53EA;&#x4FEE;&#x6539;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x5185;&#x5BB9;</p>
<h3 id="&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#xFF08;hold-space&#xFF09;"><a href="#&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#xFF08;hold-space&#xFF09;" class="headerlink" title="&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#xFF08;hold space&#xFF09;"></a>&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#xFF08;hold space&#xFF09;</h3><p>&#x9664;&#x4E86;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4EE5;&#x5916;&#xFF0C;sed&#x8FD8;&#x5B9E;&#x73B0;&#x4E86;&#x53E6;&#x4E00;&#x4E2A;&#x5185;&#x5BB9;&#x7F13;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C;&#x53EB;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#x3002;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x8FD9;&#x4E2A;&#x7A7A;&#x95F4;&#x8DDF;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E00;&#x6837;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E00;&#x6BB5;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x4E0D;&#x7528;&#xFF0C;&#x9664;&#x975E;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x76F8;&#x5173;&#x6307;&#x4EE4;&#x624D;&#x4F1A;&#x5BF9;&#x5B83;&#x8FDB;&#x884C;&#x4F7F;&#x7528;</p>
<h2 id="&#x8BED;&#x6CD5;"><a href="#&#x8BED;&#x6CD5;" class="headerlink" title="&#x8BED;&#x6CD5;"></a>&#x8BED;&#x6CD5;</h2><p><code>sed [OPTION] &apos;script&apos; FILE...</code><br>script&#x4E2D;&#x6709;&#x53D8;&#x91CF;&#x5F15;&#x7528;&#x65F6;&#x7528;&#x53CC;&#x5F15;&#x53F7;</p>
<h3 id="&#x5E38;&#x7528;&#x7684;&#x9009;&#x9879;"><a href="#&#x5E38;&#x7528;&#x7684;&#x9009;&#x9879;" class="headerlink" title="&#x5E38;&#x7528;&#x7684;&#x9009;&#x9879;"></a>&#x5E38;&#x7528;&#x7684;&#x9009;&#x9879;</h3><blockquote>
<p><code>-n</code>: &#x4E0D;&#x8F93;&#x51FA;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;<br><code>-r</code>: &#x4F7F;&#x7528;&#x6269;&#x5C55;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;<br><code>-e</code>: &#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x591A;&#x4E2A;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;<br><code>-f sed_script</code>: &#x4ECE;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x672C;&#x4E2D;&#x8BFB;&#x53D6;&#x5904;&#x7406;&#x811A;&#x672C;<br><code>-i</code>: &#x76F4;&#x63A5;&#x7F16;&#x8F91;&#x539F;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x5BF9;&#x539F;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;  </p>
</blockquote>
<h3 id="script"><a href="#script" class="headerlink" title="script"></a>script</h3><p>script&#x7531;<code>&#x5730;&#x5740;&#x5B9A;&#x754C;</code>&#x548C;<code>&#x7F16;&#x8F91;&#x547D;&#x4EE4;</code>&#x7EC4;&#x6210;&#xFF0C;&#x4E8C;&#x8005;&#x95F4;&#x4E0D;&#x80FD;&#x6709;&#x7A7A;&#x683C;&#xFF0C;&#x5982;&#xFF1A;&#x2019;2,5d&#x2019;</p>
<h4 id="&#x5730;&#x5740;&#x5B9A;&#x754C;"><a href="#&#x5730;&#x5740;&#x5B9A;&#x754C;" class="headerlink" title="&#x5730;&#x5740;&#x5B9A;&#x754C;"></a>&#x5730;&#x5740;&#x5B9A;&#x754C;</h4><p>&#x754C;&#x5B9A;&#x5904;&#x7406;&#x7684;&#x8303;&#x56F4;</p>
<blockquote>
<ol>
<li><code>&#x7A7A;&#x5730;&#x5740;</code>&#xFF1A;&#x5168;&#x6587;</li>
<li><code>m</code>&#xFF1A;&#x6307;&#x5B9A;&#x7B2C;m&#x884C;<br><code>$</code>&#xFF1A;&#x6700;&#x540E;&#x4E00;&#x884C;<br><code>/pattern/</code>&#xFF1A;&#x88AB;&#x6B64;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#x5230;&#x7684;&#x6BCF;&#x4E00;&#x884C;</li>
<li><code>m,n</code>&#xFF1A;&#x4ECE;&#x7B2C;m&#x884C;&#x5230;n&#x884C;<br><code>m,+n</code>&#xFF1A;&#x4ECE;&#x7B2C;m&#x884C;&#x5230;m+n&#x884C;<br><code>m,/pattern/</code>&#xFF1A;&#x4ECE;&#x7B2C;m&#x884C;&#x5230;<strong>&#x7B2C;&#x4E00;&#x6B21;</strong>&#x6A21;&#x5F0F;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;<br><code>/pat1/,/pat2/</code>&#xFF1A;&#x7B2C;&#x4E00;&#x6B21;&#x88AB;&#x6A21;&#x5F0F;1&#x5339;&#x914D;&#x7684;&#x884C;&#x5230;&#x7B2C;&#x4E00;&#x6B21;&#x88AB;&#x6A21;&#x5F0F;2&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;  </li>
<li><code>1~2</code>&#xFF1A;&#x5947;&#x6570;&#x884C;<br><code>2~2</code>&#xFF1A;&#x5076;&#x6570;&#x884C;</li>
</ol>
</blockquote>
<h4 id="&#x7F16;&#x8F91;&#x547D;&#x4EE4;"><a href="#&#x7F16;&#x8F91;&#x547D;&#x4EE4;" class="headerlink" title="&#x7F16;&#x8F91;&#x547D;&#x4EE4;"></a>&#x7F16;&#x8F91;&#x547D;&#x4EE4;</h4><p>&#x5BF9;&#x5730;&#x5740;&#x5B9A;&#x754C;&#x4E0B;&#x5339;&#x914D;&#x5230;&#x7684;&#x5185;&#x5BB9;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;</p>
<blockquote>
<p><code>d</code>&#xFF1A;&#x5220;&#x9664;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;<br><code>p</code>&#xFF1A;&#x6253;&#x5370;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x628A;&#x201C;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x201D;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x5168;&#x90E8;&#x8FDB;&#x884C;&#x663E;&#x793A;&#xFF0C;&#x6240;&#x4EE5;&#x5176;&#x663E;&#x793A;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x201C;&#x9ED8;&#x8BA4;&#x7684;&#x663E;&#x793A;&#x5185;&#x5BB9;+p&#x7684;&#x5185;&#x5BB9;&#x201D;&#xFF0C;&#x5373;&#x5339;&#x914D;&#x7684;&#x884C;&#x663E;&#x793A;2&#x6B21;&#xFF0C;&#x901A;&#x5E38;&#x4E0E;-n&#x9009;&#x9879;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x8868;&#x793A;&#x53EA;&#x663E;&#x793A;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;</p>
</blockquote>
<p><code>a \text</code>&#xFF1A;append,&#x5728;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;&#x4E4B;&#x540E;&#x8FFD;&#x52A0;text&#xFF0C;&#x652F;&#x6301;\n&#x5B9E;&#x73B0;&#x591A;&#x884C;&#x63D2;&#x5165;<br><code>i \text</code>&#xFF1A;insert,&#x5728;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;&#x4E4B;&#x524D;&#x8FFD;&#x52A0;text<br><code>c \text</code>&#xFF1A;change,&#x628A;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;&#x548C;&#x7ED9;&#x5B9A;&#x7684;&#x6587;&#x672C;&#x8FDB;&#x884C;&#x4EA4;&#x6362;<br><code>w file</code>&#xFF1A;&#x5C06;&#x5339;&#x914D;&#x5230;&#x7684;&#x5185;&#x5BB9;&#x53E6;&#x5B58;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x4E2D;<br><code>r file</code>&#xFF1A;&#x5C06;&#x8BFB;&#x53D6;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5230;&#x5339;&#x914D;&#x7684;&#x884C;&#x5904;&#xFF08;&#x5982;&#x679C;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x4E3A;&#x591A;&#x884C;&#x65F6;&#xFF0C;&#x8FFD;&#x52A0;&#x5230;&#x5339;&#x914D;&#x884C;&#x4E4B;&#x540E;&#xFF09;<br><code>=</code>&#xFF1A;&#x4E3A;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;&#x5728;&#x4E0A;&#x4E00;&#x884C;&#x6DFB;&#x52A0;&#x884C;&#x53F7; &#xFF0C;&#x5982;sed &#x2018;=&#x2019; /etc/fstab<br><code>!</code>&#xFF1A;&#x6761;&#x4EF6;&#x53D6;&#x53CD;&#xFF0C;&#x683C;&#x5F0F;&#x4E3A;<strong><u>&#x5730;&#x5740;&#x5B9A;&#x754C;&#xFF01;&#x7F16;&#x8F91;&#x547D;&#x4EE4;</u></strong>&#xFF0C;&#x5982;&#x2019;5!d&#x2019;&#x8868;&#x7B2C;5&#x884C;&#x4E0D;&#x5220;<br><code>s/pattern/str/[&#x4FEE;&#x9970;&#x7B26;]</code>&#xFF1A;&#x67E5;&#x627E;&#x66FF;&#x6362;&#xFF0C;&#x5E38;&#x7528;s@@@&#x548C;s###  </p>
<blockquote>
<p>&#x4FEE;&#x9970;&#x7B26;&#xFF1A;g&#x5168;&#x5C40;&#xFF0C;&#x9ED8;&#x8BA4;&#x53EA;&#x5339;&#x914D;&#x6BCF;&#x4E00;&#x884C;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;; i&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;; p&#x663E;&#x793A;&#x66FF;&#x6362;&#x6210;&#x529F;&#x7684;&#x884C;<br>&#x540E;&#x5411;&#x5F15;&#x7528;&#xFF1A;<code>\(**\)</code>&#xFF0C;<code>\1&#xFF0C;\2...</code>&#x5BF9;&#x5E94;&#x62EC;&#x53F7;&#x5185;&#x5BB9;&#xFF0C;&amp;&#x8868;&#x793A;&#x5F15;&#x7528;&#x5339;&#x914D;&#x5230;&#x6574;&#x4E2A;<br><code>y/inchars/outchars/</code>&#xFF1A;&#x5168;&#x5C40;&#x8F6C;&#x6362;&#x547D;&#x4EE4;&#xFF0C;&#x4F1A;&#x8FDB;&#x884C;inchars&#x548C;outchars&#x7684;&#x4E00;&#x5BF9;&#x4E00;&#x8F6C;&#x6362;</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x6253;&#x5370;&#x7B2C;&#x4E8C;&#x884C;&#x5230;&#x7B2C;&#x4E00;&#x6B21;&#x4EE5;#&#x5F00;&#x5934;&#x7684;&#x884C;  </span></span><br><span class="line">sed -n <span class="string">&apos;2,/^#/p&apos;</span> /tmp/file1  </span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x53BB;&#x9664;&#x6587;&#x672C;&#x4E2D;&#x7684;html&#x6807;&#x7B7E;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This &lt;b&gt; is &lt;/b&gt; an &lt;i&gt;example&lt;/i&gt;.&quot;</span> | sed -e <span class="string">&apos;s/&lt;[^&gt;]*&gt;//g&apos;</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5168;&#x6587;&#x6BCF;&#x884C;&#x540E;&#x6DFB;&#x52A0;2&#x884C;&#x5185;&#x5BB9;  </span></span><br><span class="line">sed <span class="string">&apos;a \new line\nother&apos;</span> /tmp/file2  </span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5220;&#x9664;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x7A7A;&#x767D;&#x884C;</span></span><br><span class="line">sed -r <span class="string">&apos;/^[[:space:]]*$/d&apos;</span> file3  </span><br><span class="line"></span><br><span class="line"><span class="comment"># file4&#x4E2D;&#x7B2C;&#x4E00;&#x6B21;&#x4EE5;#&#x5F00;&#x5934;&#x7684;&#x884C;&#x5230;&#x7B2C;&#x4E00;&#x6B21;&#x4EE5;ID&#x7ED3;&#x5C3E;&#x7684;&#x884C;&#x5199;&#x5165;sed.txt&#x4E2D;    </span></span><br><span class="line">sed -n <span class="string">&apos;/^#/,/ID$/w sed.txt&apos;</span> file4  </span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x53D6;&#x57FA;&#x540D;&#xFF0C;&#x5305;&#x62EC;&#x6709;&#x65E0;&#x6700;&#x540E;&#x2018;/&#x2019;&#x7684;&#x60C5;&#x51B5;  </span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;/etc/rc.d/&quot;</span> | sed -r <span class="string">&apos;s@^/.*/([^/]+)/?@\1@g&apos;</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x53D6;&#x76EE;&#x5F55;&#x540D;&#xFF0C;&#xFF08;&#x5C06;&#x57FA;&#x540D;&#x5220;&#x9664;&#xFF09;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&apos;/etc/rc.d/init.d/function&apos;</span> | sed -r <span class="string">&apos;s@[^/]+/?$@@&apos;</span></span><br></pre></td></tr></table></figure>
<h3 id="&#x9AD8;&#x7EA7;&#x547D;&#x4EE4;"><a href="#&#x9AD8;&#x7EA7;&#x547D;&#x4EE4;" class="headerlink" title="&#x9AD8;&#x7EA7;&#x547D;&#x4EE4;"></a>&#x9AD8;&#x7EA7;&#x547D;&#x4EE4;</h3><p>&#x6240;&#x8C13;&#x7684;&#x9AD8;&#x7EA7;&#x5C31;&#x662F;&#x7528;&#x4E0A;&#x56FE;&#x793A;&#x4E2D;&#x7684;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E0E;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x4E92;&#x76F8;&#x66FF;&#x6362;&#xFF0C;&#x8FFD;&#x52A0;&#xFF0C;&#x5220;&#x9664;&#x7B49;&#x64CD;&#x4F5C;&#xFF0C;&#x4EE5;&#x5F97;&#x5230;&#x5404;&#x79CD;&#x532A;&#x5937;&#x6240;&#x601D;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x505A;&#x4E86;&#x89E3;&#x5373;&#x53EF;</p>
<blockquote>
<p>h&#xFF1A;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x2013;&gt;&#x8986;&#x76D6;&#x2013;&gt;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;<br>H&#xFF1A;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x2013;&gt;&#x8FFD;&#x52A0;&#x2013;&gt;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;&#xFF08;&#x52A0;&#x5728;&#x539F;&#x6709;&#x5185;&#x5BB9;&#x4E4B;&#x540E;&#xFF09;<br>g&#xFF1A;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;&#x2013;&gt;&#x8986;&#x76D6;&#x2013;&gt;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;<br>G&#xFF1A;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;&#x2013;&gt;&#x8FFD;&#x52A0;&#x2013;&gt;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#xFF08;&#x52A0;&#x5728;&#x539F;&#x6709;&#x5185;&#x5BB9;&#x4E4B;&#x540E;&#xFF09;<br>x&#xFF1A;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&lt;&#x2013;&#x4EA4;&#x6362;&#x2013;&gt;&#x4FDD;&#x6301;&#x7A7A;&#x95F4;<br>d&#xFF1A;&#x5220;&#x9664;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;<br>D&#xFF1A;&#x5982;&#x679C;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x4E3A;&#x591A;&#x884C;&#x65F6;&#xFF0C;&#x5220;&#x9664;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x884C;<br>n&#xFF1A;&#x8BFB;&#x53D6;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;&#x7684;&#x4E0B;&#x4E00;&#x884C;&#x5230;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#xFF08;&#x8986;&#x76D6;&#x539F;&#x5185;&#x5BB9;&#xFF09;<br>N&#xFF1A;&#x8BFB;&#x53D6;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;&#x7684;&#x4E0B;&#x4E00;&#x884C;&#x5230;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#xFF08;&#x8FFD;&#x52A0;&#x5728;&#x539F;&#x5185;&#x5BB9;&#x4E4B;&#x540E;&#xFF09;  </p>
</blockquote>
<p><em>*&#x6CE8;&#xFF1A;&#x591A;&#x5904;&#x547D;&#x4EE4;&#x95F4;&#x7528;&#x5206;&#x53F7;&#x9694;&#x5F00;&#xFF0C;&#x5B9E;&#x73B0;&#x591A;&#x70B9;&#x7F16;&#x8F91;&#xFF0C;&#x8FFD;&#x52A0;&#x6216;&#x8986;&#x76D6;&#x64CD;&#x4F5C;&#x65F6;&#x539F;&#x7A7A;&#x95F4;&#x5185;&#x5BB9;&#x4F9D;&#x7136;&#x5B58;&#x5728;</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">&apos;n;p&apos;</span> file        <span class="comment"># &#x663E;&#x793A;&#x5076;&#x6570;&#x884C;</span></span><br><span class="line">sed <span class="string">&apos;/^$/d;G&apos;</span> file       <span class="comment"># &#x5220;&#x9664;&#x6587;&#x4EF6;&#x4E2D;&#x7A7A;&#x767D;&#x884C;&#xFF0C;&#x518D;&#x4E3A;&#x6BCF;&#x884C;&#x540E;&#x6DFB;&#x52A0;&#x7A7A;&#x767D;&#x884C;(&#x4FDD;&#x6301;&#x7A7A;&#x95F4;&#x4E3A;&#x7A7A;&#x8FFD;&#x52A0;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x5373;&#x52A0;&#x7A7A;&#x767D;&#x884C;)</span></span><br><span class="line">sed -r <span class="string">&apos;$!N;$!D&apos;</span> file    <span class="comment"># &#x53D6;&#x51FA;&#x6700;&#x540E;&#x4E24;&#x884C;</span></span><br><span class="line">sed <span class="string">&apos;1!G;h;$!d&apos;</span> file     <span class="comment"># &#x9006;&#x5E8F;&#x663E;&#x793A;</span></span><br></pre></td></tr></table></figure>
<h3 id="&#x793A;&#x4F8B;&#x8BF4;&#x660E;"><a href="#&#x793A;&#x4F8B;&#x8BF4;&#x660E;" class="headerlink" title="&#x793A;&#x4F8B;&#x8BF4;&#x660E;"></a>&#x793A;&#x4F8B;&#x8BF4;&#x660E;</h3><p>&#x8F6C;&#x8F7D;&#x81EA;&#xFF1A;<a href="http://liwei.life/2016/07/04/sed/" target="_blank" rel="noopener">http://liwei.life/2016/07/04/sed/</a></p>
<p><code>ifconfig</code>&#x4FE1;&#x606F;&#x4FDD;&#x5B58;&#x81F3;<code>ifconfig.out</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &apos;/^[^ ]/{s/^\([^ ]*\) .*/\1/g;h;: top;n;/^$/b;s/^.*RX bytes:\([0-9]\{1,\}\).*/\1/g;T top;H;x;s/\n/:/g;p}&apos; ifconfig.out</span><br></pre></td></tr></table></figure>
<p>&#x4E3A;&#x65B9;&#x4FBF;&#x5206;&#x6790;&#xFF0C;&#x5C06;&#x5176;&#x5199;&#x6210;sed&#x811A;&#x672C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[zorro@zorrozou-pc0 ~]$ cat -n ifconfig.sed </span><br><span class="line">1 #!/usr/bin/sed -f</span><br><span class="line">2 </span><br><span class="line">3 /^[^ ]/{</span><br><span class="line">4 s/^\([^ ]*\) .*/\1/g;</span><br><span class="line">5 h;</span><br><span class="line">6 : top;</span><br><span class="line">7 n;</span><br><span class="line">8 /^$/b;</span><br><span class="line">9 s/^.*RX bytes:\([0-9]\{1,\}\).*/\1/g;</span><br><span class="line">10 T top;</span><br><span class="line">11 H;</span><br><span class="line">12 x;</span><br><span class="line">13 s/\n/:/g;</span><br><span class="line">14 # p;</span><br><span class="line">15 w result</span><br><span class="line">16 }</span><br></pre></td></tr></table></figure>
<p><strong>&#x7B2C;3&#xFF0C;4&#x884C;</strong>&#xFF1A;&#x627E;&#x5230;&#x7F51;&#x5361;&#x540D;&#x7684;&#x884C;&#x5E76;&#x4E14;&#x5728;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x91CC;&#x53EA;&#x4FDD;&#x7559;&#x7F51;&#x5361;&#x540D;&#x79F0;</p>
<p><strong>&#x7B2C;5&#x884C;</strong>&#xFF1A;h&#x547D;&#x4EE4;&#x7684;&#x610F;&#x601D;&#x662F;&#xFF0C;&#x5C06;&#x73B0;&#x5728;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x653E;&#x5230;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#x3002;&#x4E8E;&#x662F;&#xFF0C;&#x7F51;&#x5361;&#x540D;&#x5C31;&#x653E;&#x8FDB;&#x4E86;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;</p>
<p><strong>&#x7B2C;6&#x884C;</strong>&#xFF1A;top&#x5728;&#x8FD9;&#x91CC;&#x53EA;&#x8D77;&#x5230;&#x4E00;&#x4E2A;&#x6807;&#x8BB0;&#x7684;&#x4F5C;&#x7528;&#x3002;&#x6211;&#x4EEC;&#x4F7F;&#x7528;:&#x6807;&#x8BB0;&#x4E86;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x540D;&#x53EB;top&#x3002;&#x6211;&#x4EEC;&#x5148;&#x6682;&#x65F6;&#x8BB0;&#x4F4F;&#x5B83;</p>
<p><strong>&#x7B2C;7&#x884C;</strong>&#xFF1A;n&#x547D;&#x4EE4;&#x3002;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x5C31;&#x662F;&#x8BFB;&#x53D6;&#x4E0B;&#x4E00;&#x884C;&#x5230;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x3002;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x7F51;&#x5361;&#x884C;&#x5DF2;&#x7ECF;&#x5904;&#x7406;&#x5B8C;&#xFF0C;&#x5E76;&#x4E14;&#x4FDD;&#x5B58;&#x597D;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;n&#x8BFB;&#x5165;&#x4E0B;&#x4E00;&#x884C;&#x4E86;&#x3002;n&#x4E4B;&#x540E;&#xFF0C;&#x4E0B;&#x4E00;&#x884C;&#x7684;&#x5185;&#x5BB9;&#x5C31;&#x8FDB;&#x5165;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#xFF0C;&#x7136;&#x540E;&#x7EE7;&#x7EED;&#x4ECE;n&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x5F00;&#x59CB;&#x5904;&#x7406;</p>
<p><strong>&#x7B2C;8&#x884C;</strong>&#xFF1A;&#x4F7F;&#x7528;&#x7684;&#x662F;b&#x547D;&#x4EE4;&#xFF0C;&#x7528;&#x6765;&#x8DF3;&#x51FA;&#x672C;&#x6B21;sed&#x5904;&#x7406;&#x3002;&#x8FD9;&#x91CC;&#x7684;&#x542B;&#x4E49;&#x662F;&#x68C0;&#x67E5;&#x4E0B;&#x4E00;&#x884C;&#x5185;&#x5BB9;&#x5982;&#x679C;&#x662F;&#x7A7A;&#x884C;/^$/&#xFF0C;&#x5C31;&#x8DF3;&#x51FA;&#x672C;&#x6BB5;&#x7684;sed&#x5904;&#x7406;&#xFF0C;&#x8BF4;&#x660E;&#x8FD9;&#x6BB5;&#x7F51;&#x5361;&#x4FE1;&#x606F;&#x5206;&#x6790;&#x5B8C;&#x6BD5;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x6BB5;&#x5206;&#x6790;&#x4E86;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x7A7A;&#x884C;&#xFF0C;&#x8FD9;&#x884C;&#x5C31;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#xFF0C;&#x4E8E;&#x662F;&#x7EE7;&#x7EED;&#x5904;&#x7406;&#x7B2C;9&#x884C;&#x3002;b&#x547D;&#x4EE4;&#x9664;&#x4E86;&#x53EF;&#x4EE5;&#x8DF3;&#x51FA;&#x672C;&#x6B21;&#x5904;&#x7406;&#x4EE5;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x8DF3;&#x8F6C;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x6BD4;&#x5982;&#x4E0A;&#x6587;&#x4E2D;&#x4F7F;&#x7528;:&#x6807;&#x8BB0;&#x7684;top</p>
<p><strong>&#x7B2C;9&#x884C;</strong>&#xFF1A;&#x4F7F;&#x7528;s&#x66FF;&#x6362;&#x547D;&#x4EE4;&#x53D6;&#x51FA;&#x884C;&#x4E2D;RX bytes:&#x5B57;&#x7B26;&#x4E4B;&#x540E;&#x7684;&#x6240;&#x6709;&#x6570;&#x5B57;&#x3002;&#x8FD9;&#x91CC;&#x672C;&#x8EAB;&#x5E76;&#x6CA1;&#x6709;&#x5206;&#x652F;&#x5224;&#x65AD;&#xFF0C;&#x5206;&#x652F;&#x5224;&#x65AD;&#x51FA;&#x73B0;&#x5728;&#x4E0B;&#x4E00;&#x884C;</p>
<p><strong>&#x7B2C;10&#x884C;</strong>&#xFF1A;T&#x547D;&#x4EE4;&#x662F;&#x4E00;&#x4E2A;&#x903B;&#x8F91;&#x5224;&#x65AD;&#x6307;&#x4EE4;&#x3002;&#x5B83;&#x7684;&#x542B;&#x4E49;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x524D;&#x9762;&#x51FA;&#x73B0;&#x7684;s&#x66FF;&#x6362;&#x6307;&#x4EE4;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x7B26;&#x5408;&#x6761;&#x4EF6;&#x7684;&#x884C;&#xFF0C;&#x5219;&#x8DF3;&#x8F6C;&#x5230;T&#x540E;&#x9762;&#x6240;&#x6307;&#x5B9A;&#x7684;&#x6807;&#x8BB0;&#x4F4D;&#x7F6E;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x7684;&#x6807;&#x8BB0;&#x4F4D;&#x7F6E;&#x4E3A;top&#xFF0C;&#x662F;&#x6211;&#x4EEC;&#x5728;&#x4E0A;&#x9762;&#x4F7F;&#x7528;:&#x6807;&#x8BB0;&#x51FA;&#x6765;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x4E0A;&#x9762;&#x7684;s&#x66FF;&#x6362;&#x627E;&#x4E0D;&#x5230;RX bytes:&#x5173;&#x952E;&#x5B57;&#x7684;&#x884C;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4F1A;&#x8DF3;&#x56DE;top&#x4F4D;&#x7F6E;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#xFF0C;&#x5C31;&#x662F;&#x63A5;&#x7740;&#x518D;&#x770B;&#x4E0B;&#x4E00;&#x884C;&#x8FDB;&#x884C;&#x68C0;&#x67E5;</p>
<p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x7528;&#x4E86;&#x5192;&#x53F7;&#x6807;&#x7B7E;&#x548C;T&#x6307;&#x4EE4;&#x6784;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#x3002;&#x5F53;&#x6761;&#x4EF6;&#x662F;s&#x66FF;&#x6362;&#x627E;&#x4E0D;&#x5230;&#x6307;&#x5B9A;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x672C;&#x5FAA;&#x73AF;&#xFF0C;&#x76F4;&#x5230;&#x627E;&#x5230;&#x4E3A;&#x6B62;&#x3002;&#x627E;&#x5230;&#x4E4B;&#x540E;&#x5C31;&#x4E0D;&#x4F1A;&#x518D;&#x8DF3;&#x56DE;top&#x4F4D;&#x7F6E;&#x4E86;&#xFF0C;&#x800C;&#x662F;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x7B2C;11&#x884C;</p>
<p><strong>&#x7B2C;11&#x884C;</strong>&#xFF1A;H&#x6307;&#x4EE4;&#xFF0C;&#x610F;&#x601D;&#x662F;&#x5C06;&#x5F53;&#x524D;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x8FFD;&#x52A0;&#x8FDB;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#x3002;&#x5F53;&#x524D;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x5DF2;&#x7ECF;&#x7531;s&#x66FF;&#x6362;&#x6307;&#x4EE4;&#x5904;&#x7406;&#x6210;&#x53EA;&#x4FDD;&#x7559;&#x4E86;&#x63A5;&#x53D7;&#x7684;&#x5B57;&#x8282;&#x6570;&#x3002;&#x4E4B;&#x524D;&#x7684;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#x4E2D;&#x5DF2;&#x7ECF;&#x5B58;&#x4E86;&#x7F51;&#x5361;&#x540D;&#xFF0C;&#x8FFD;&#x52A0;&#x8FDB;&#x5B57;&#x8282;&#x6570;&#x4E4B;&#x540E;&#xFF0C;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#x91CC;&#x7684;&#x5185;&#x5BB9;&#x5C06;&#x7531;&#x4E24;&#x884C;&#x6784;&#x6210;&#xFF0C;&#x7B2C;&#x4E00;&#x884C;&#x662F;&#x7F51;&#x5361;&#x540D;&#xFF0C;&#x7B2C;&#x4E8C;&#x884C;&#x662F;&#x63A5;&#x6536;&#x5B57;&#x8282;&#x6570;&#x3002;&#x6CE8;&#x610F;h&#x548C;H&#x6307;&#x4EE4;&#x7684;&#x533A;&#x522B;&#xFF0C;h&#x662F;&#x5C06;&#x5F53;&#x524D;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x4FDD;&#x5B58;&#x8FDB;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x4F1A;&#x4F7F;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x539F;&#x6709;&#x5185;&#x5BB9;&#x4E22;&#x5931;&#x3002;&#x800C;H&#x662F;&#x5C06;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x5185;&#x5BB9;&#x8FFD;&#x52A0;&#x8FDB;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x539F;&#x6765;&#x5185;&#x5BB9;&#x8FD8;&#x5728;</p>
<p>&#x6B64;&#x65F6;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#x4E2D;&#x5DF2;&#x7ECF;&#x5B58;&#x6709;&#x6211;&#x4EEC;&#x6240;&#x6709;&#x60F3;&#x8981;&#x7684;&#x5185;&#x5BB9;&#x4E86;&#xFF0C;&#x7F51;&#x5361;&#x540D;&#x548C;&#x63A5;&#x6536;&#x5B57;&#x8282;&#x6570;&#x3002;&#x5B83;&#x4EEC;&#x662F;&#x653E;&#x5728;&#x4E24;&#x884C;&#x5B58;&#x7684;&#xFF0C;&#x8FD9;&#x4ECD;&#x7136;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x80FD;&#x591F;&#x5728;&#x4E00;&#x884C;&#x4E2D;&#x663E;&#x793A;&#xFF0C;&#x5E76;&#x7528;&#x5192;&#x53F7;&#x5206;&#x9694;&#x3002;&#x6240;&#x4EE5;&#x4E0B;&#x9762;&#x8981;&#x505A;&#x7684;&#x662F;&#x66FF;&#x6362;&#xFF0C;&#x5C06;&#x6362;&#x884C;&#x66FF;&#x6362;&#x6210;&#x5192;&#x53F7;&#x3002;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x64CD;&#x4F5C;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x5C06;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#x7684;&#x5185;&#x5BB9;&#x62FF;&#x56DE;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x624D;&#x80FD;&#x64CD;&#x4F5C;</p>
<p><strong>&#x7B2C;12&#x884C;</strong>&#xFF1A;x&#x6307;&#x4EE4;&#xFF0C;&#x610F;&#x601D;&#x662F;&#x5C06;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x5185;&#x5BB9;&#x548C;&#x4FDD;&#x5B58;&#x7A7A;&#x95F4;&#x5185;&#x5BB9;&#x4E92;&#x6362;&#x3002;&#x4E92;&#x6362;&#x4E4B;&#x540E;&#xFF0C;&#x7F51;&#x5361;&#x548C;&#x63A5;&#x6536;&#x5B57;&#x8282;&#x6570;&#x5C31;&#x56DE;&#x5230;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E86;&#x3002;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;s&#x6307;&#x4EE4;&#x5BF9;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x5185;&#x5BB9;&#x505A;&#x66FF;&#x6362;</p>
<p><strong>&#x7B2C;13&#x884C;</strong>&#xFF1A;s/\n/:/g&#xFF0C;&#x5C06;&#x6362;&#x884C;&#x66FF;&#x6362;&#x6210;&#x5192;&#x53F7;&#x3002;&#x4E4B;&#x540E;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x771F;&#x6B63;&#x60F3;&#x8981;&#x7684;&#x201C;&#x7F51;&#x5361;&#x540D;:&#x63A5;&#x6536;&#x5B57;&#x8282;&#x6570;&#x201D;&#x4E86;&#x3002;&#x4E8E;&#x662F;&#x5C31;&#x53EF;&#x4EE5;p&#x6253;&#x5370;&#x6216;&#x8005;&#x4F7F;&#x7528;w&#x6307;&#x4EE4;&#xFF0C;&#x4FDD;&#x5B58;&#x6A21;&#x5F0F;&#x7A7A;&#x95F4;&#x5185;&#x5BB9;&#x5230;&#x67D0;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;</p>
<p>&#x6240;&#x6709;&#x6307;&#x4EE4;&#x7684;&#x9000;&#x51FA;&#x6761;&#x4EF6;&#x6709;&#x4E24;&#x4E2A;&#xFF1A;</p>
<p><strong>&#x7B2C;8&#x884C;</strong>&#xFF0C;&#x9047;&#x5230;&#x7A7A;&#x683C;&#x4E4B;&#x540E;&#x672C;&#x6BB5;&#x89E3;&#x6790;&#x7ED3;&#x675F;&#x3002;<br>&#x6240;&#x6709;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x5B8C;&#xFF0C;&#x6253;&#x5370;&#x6216;&#x4FDD;&#x5B58;&#x4E86;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x4E4B;&#x540E;&#x6267;&#x884C;&#x5B8C;&#x3002;<br>&#x6267;&#x884C;&#x5B8C;&#x9000;&#x51FA;&#x540E;&#xFF0C;sed&#x4F1A;&#x63A5;&#x7740;&#x627E;&#x4E0B;&#x4E00;&#x4E2A;&#x7F51;&#x5361;&#x4FE1;&#x606F;&#x5F00;&#x59CB;&#x7684;&#x6BB5;&#xFF0C;&#x7EE7;&#x7EED;&#x4E0B;&#x4E00;&#x4E2A;&#x7F51;&#x5361;&#x7684;&#x89E3;&#x6790;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x8FD9;&#x4E2A;&#x590D;&#x6742;sed&#x547D;&#x4EE4;&#x7684;&#x6574;&#x4F53;&#x5904;&#x7406;&#x8FC7;&#x7A0B;</p>
<p>&#x66F4;&#x591A;&#x8D44;&#x6599;&#xFF1A;<br><a href="http://sed.sourceforge.net/sed1line_zh-CN.html" target="_blank" rel="noopener">http://sed.sourceforge.net/sed1line_zh-CN.html</a><br><a href="http://zuyunfei.com/2015/07/13/sed-in-shell-3/" target="_blank" rel="noopener">http://zuyunfei.com/2015/07/13/sed-in-shell-3/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux文本处理三剑客之grep]]></title>
      <url>http://liu2lin600.github.io/2016/05/24/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2%E4%B9%8Bgrep/</url>
      <content type="html"><![CDATA[<p>&#x7B80;&#x8FF0;grep &#x5DE5;&#x5177;&#x548C;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x4F7F;&#x7528;<br><a id="more"></a></p>
<h3 id="&#x5B9A;&#x4E49;"><a href="#&#x5B9A;&#x4E49;" class="headerlink" title="&#x5B9A;&#x4E49;"></a>&#x5B9A;&#x4E49;</h3><blockquote>
<p><strong>&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</strong>&#x4F7F;&#x7528;&#x5355;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6765;&#x63CF;&#x8FF0;&#x3001;&#x5339;&#x914D;&#x4E00;&#x7CFB;&#x5217;&#x5339;&#x914D;&#x67D0;&#x4E2A;&#x53E5;&#x6CD5;&#x89C4;&#x5219;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x5728;&#x5F88;&#x591A;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x91CC;&#xFF0C;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x901A;&#x5E38;&#x88AB;&#x7528;&#x6765;&#x68C0;&#x7D22;&#x3001;&#x66FF;&#x6362;&#x90A3;&#x4E9B;&#x5339;&#x914D;&#x67D0;&#x4E2A;&#x6A21;&#x5F0F;&#x7684;&#x6587;&#x672C;&#x3002;&#x8BB8;&#x591A;&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x8BED;&#x8A00;&#x90FD;&#x652F;&#x6301;&#x5229;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x8FDB;&#x884C;&#x5B57;&#x7B26;&#x4E32;&#x64CD;&#x4F5C;</p>
</blockquote>
<p><strong>grep</strong>&#xFF1A;Global search Regular Expression and Print out the line&#xFF0C;&#x5168;&#x9762;&#x641C;&#x7D22;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5E76;&#x628A;&#x884C;&#x6253;&#x5370;&#x51FA;&#x6765;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x5F3A;&#x5927;&#x7684;&#x6587;&#x672C;&#x641C;&#x7D22;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x80FD;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x641C;&#x7D22;&#x6587;&#x672C;&#xFF0C;&#x5E76;&#x628A;&#x5339;&#x914D;&#x7684;&#x884C;&#x6253;&#x5370;&#x51FA;&#x6765;&#x3002;<br>GUN/linux&#x4E0B;grep&#x5305;&#x62EC; <strong>grep</strong>&#x3001;<strong>egrep</strong>&#x548C; <strong>fgrep</strong>&#x3002;  </p>
<ul>
<li>egrep&#x662F;grep&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x7B49;&#x540C;<code>grep -E</code>   </li>
<li>fgrep&#x5C31;&#x662F;fixed grep&#x6216;fast grep&#xFF0C;&#x7B49;&#x540C;<code>grep -F</code>&#x4E0D;&#x4F7F;&#x7528;&#x4EFB;&#x4F55;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x5B57;&#x7B26;&#x4E32;&#x5339;&#x914D;</li>
</ul>
<h3 id="&#x8BED;&#x6CD5;"><a href="#&#x8BED;&#x6CD5;" class="headerlink" title="&#x8BED;&#x6CD5;"></a>&#x8BED;&#x6CD5;</h3><p><strong>grep [OPTION] PATTERN [FILE]&#x2026;</strong>  </p>
<blockquote>
<p><code>-o</code>&#xFF1A;&#x53EA;&#x663E;&#x793A;&#x88AB;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#x5230;&#x7684;&#x5185;&#x5BB9;<br><code>-i</code>&#xFF1A;ignore case&#xFF0C;&#x4E0D;&#x533A;&#x5206;&#x5B57;&#x7B26;&#x5927;&#x5C0F;&#x5199;<br><code>-E</code>&#xFF1A;&#x4F7F;&#x7528;&#x6269;&#x5C55;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;<br><code>-w</code>&#xFF1A;&#x5339;&#x914D;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x5355;&#x8BCD;<br><code>-v</code>&#xFF1A;&#x6CA1;&#x6709;&#x5339;&#x914D;&#x5230;&#x7684;&#x884C;<br><code>-n</code>&#xFF1A;&#x6253;&#x5370;&#x51FA;&#x5339;&#x914D;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5728;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x884C;&#x53F7;<br><code>-c</code>&#xFF1A;&#x7EDF;&#x8BA1;&#x4E2A;&#x6570;<br><code>--color</code>&#xFF1A;&#x5BF9;&#x5339;&#x914D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7740;&#x8272;&#x6253;&#x5370;<br><code>-5</code>&#xFF1A;&#x5339;&#x914D;&#x5B57;&#x7B26;&#x53CA;&#x524D;&#x540E;&#x5404;5&#x884C;<br><code>-A 5</code>&#xFF1A;&#x5339;&#x914D;&#x5B57;&#x7B26;&#x53CA;&#x540E;5&#x884C;&#xFF0C;&#x540C;<code>-C 5</code><br><code>-B 5</code>&#xFF1A;&#x5339;&#x914D;&#x5B57;&#x7B26;&#x53CA;&#x524D;5&#x884C;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -oin <span class="string">&apos;root&apos;</span> /etc/passwd    <span class="comment"># &#x663E;&#x793A;&#x884C;&#x53F7;&#xFF0C;&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#x53EA;&#x663E;&#x793A;&#x5339;&#x914D;&#x5230;&#x7684;&#x5B57;&#x7B26;&#x672C;&#x8EAB;</span></span><br></pre></td></tr></table></figure>
<h3 id="&#x6B63;&#x5219;&#x7528;&#x6CD5;"><a href="#&#x6B63;&#x5219;&#x7528;&#x6CD5;" class="headerlink" title="&#x6B63;&#x5219;&#x7528;&#x6CD5;"></a>&#x6B63;&#x5219;&#x7528;&#x6CD5;</h3><h4 id="&#x5B57;&#x7B26;&#x5339;&#x914D;"><a href="#&#x5B57;&#x7B26;&#x5339;&#x914D;" class="headerlink" title="&#x5B57;&#x7B26;&#x5339;&#x914D;"></a>&#x5B57;&#x7B26;&#x5339;&#x914D;</h4><blockquote>
<p><code>.</code>&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x5B57;&#x7B26;<br><code>[]</code>&#xFF1A;&#x5339;&#x914D;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x5185;&#x7684;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x5B57;&#x7B26;<br><code>[^]</code>&#xFF1A;&#x5339;&#x914D;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x5916;&#x7684;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x5B57;&#x7B26;<br><code>[0-9]</code>&#xFF1A;&#x5339;&#x914D;&#x6570;&#x7EC4; 0-9 &#x7684;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;<br><code>[0-z]</code>&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x4E00;&#x6570;&#x5B57;&#x53CA;&#x5C0F;&#x5199;&#x5B57;&#x6BCD;<br><code>[0-Z]</code>&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x4E00;&#x6570;&#x5B57;&#x53CA;&#x5927;&#x5C0F;&#x5199;&#x5B57;&#x6BCD;<br><code>[[:digit:]]</code>&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x6570;&#x5B57;<br><code>[[:lower:]]</code>&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x5C0F;&#x5199;&#x5B57;&#x6BCD;&#xFF0C;&#x7B49;&#x540C;<code>[a-z]</code><br><code>[[:upper:]]</code>&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#xFF0C;&#x7B49;&#x540C;<code>[A-Z]</code><br><code>[[:space:]]</code>&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x7A7A;&#x767D;&#x5B57;&#x7B26;<br><code>[[:punct:]]</code>&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x6807;&#x70B9;&#x7B26;&#x53F7;<br><code>[[:alpha:]]</code>&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x82F1;&#x6587;&#x5B57;&#x6BCD;<br><code>[[:alnum:]]</code>&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x610F;&#x5355;&#x4E2A;&#x5B57;&#x6BCD;&#x6216;&#x6570;&#x5B57;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep  [^0-9[:lower:]]  /etc/passwd      <span class="comment"># &#x5339;&#x914D;&#x9664;&#x6570;&#x5B57;&#x548C;&#x5C0F;&#x5199;&#x5B57;&#x6BCD;&#x4EE5;&#x5916;&#x7684;&#x5B57;&#x7B26;</span></span><br></pre></td></tr></table></figure>
<h4 id="&#x5339;&#x914D;&#x6B21;&#x6570;"><a href="#&#x5339;&#x914D;&#x6B21;&#x6570;" class="headerlink" title="&#x5339;&#x914D;&#x6B21;&#x6570;"></a>&#x5339;&#x914D;&#x6B21;&#x6570;</h4><blockquote>
<p><code>*</code>&#xFF1A;&#x5339;&#x914D;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26;&#x4EFB;&#x610F;&#x6B21;<br><code>.*</code>&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x610F;&#x6B21; .&#xFF0C;&#x5373;&#x5339;&#x914D;&#x4EFB;&#x610F;&#x957F;&#x5EA6;&#x7684;&#x4EFB;&#x610F;&#x5B57;&#x7B26;<br><code>\?</code> &#xFF1A;&#x5339;&#x914D;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26; 0 &#x6B21;&#x6216;&#x8005; 1 &#x6B21;<br><code>\+</code> &#xFF1A; &#x5339;&#x914D;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26; 1 &#x6B21;&#x6216;&#x591A;&#x6B21;<br><code>\{m\}</code>&#xFF1A;&#x5339;&#x914D;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26; m &#x6B21;<br><code>\{m,n\}</code>&#xFF1A;&#x5339;&#x914D;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26;&#x81F3;&#x5C11; m &#x6B21;&#xFF0C;&#x81F3;&#x591A; n &#x6B21;<br><code>\{m,\}</code>&#xFF1A;&#x5339;&#x914D;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26;&#x81F3;&#x5C11; m &#x6B21;<br><code>\{,n\}</code>&#xFF1A;&#x5339;&#x914D;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26;&#x81F3;&#x591A; n &#x6B21;  </p>
<ul>
<li><code>&#x4F7F;&#x7528;egrep&#x6216;grep -E&#x65F6;&#xFF0C;&#x53EF;&#x53BB;&#x6389;&#x524D;&#x9762;&#x7684;&#x8F6C;&#x4E49;&#x7B26;\</code></li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&quot;[0-9]\+.*[[:punct:]]\{3,\}&quot;</span> /etc/passwd    <span class="comment"># &#x81F3;&#x5C11;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x53CA;3&#x4E2A;&#x4EE5;&#x4E0A;&#x6807;&#x70B9;&#x7B26;&#x53F7;</span></span><br></pre></td></tr></table></figure>
<h4 id="&#x4F4D;&#x7F6E;&#x951A;&#x5B9A;"><a href="#&#x4F4D;&#x7F6E;&#x951A;&#x5B9A;" class="headerlink" title="&#x4F4D;&#x7F6E;&#x951A;&#x5B9A;"></a>&#x4F4D;&#x7F6E;&#x951A;&#x5B9A;</h4><blockquote>
<p><code>^</code>&#xFF1A;&#x951A;&#x5B9A;&#x884C;&#x9996;<br><code>$</code>&#xFF1A;&#x951A;&#x5B9A;&#x884C;&#x5C3E;<br><code>\&lt;</code> &#x6216; <code>\b</code>&#xFF1A;&#x951A;&#x5B9A;&#x8BCD;&#x9996;<br><code>\&gt;</code> &#x6216; <code>\b</code>&#xFF1A;&#x951A;&#x5B9A;&#x8BCD;&#x5C3E;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">&quot;^[[:space:]]\+$&quot;</span> mydata.txt                  <span class="comment"># &#x627E;&#x51FA;&#x7A7A;&#x767D;&#x884C;&#x7684;&#x884C;&#x53F7;</span></span><br><span class="line">grep <span class="string">&quot;^#[[:space:]]\{1,\}[^[:space:]]&quot;</span> /etc/inittab   <span class="comment"># &#x4EE5;#&#x5F00;&#x5934;&#xFF0C;&#x4E14;&#x540E;&#x9762;&#x8DDF;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#xFF0C;&#x800C;&#x540E;&#x53C8;&#x8DDF;&#x4E86;&#x4EFB;&#x610F;&#x975E;&#x7A7A;&#x767D;&#x5B57;&#x7B26;&#x7684;&#x884C;</span></span><br><span class="line">grep <span class="string">&apos;^\([0-9]\).*\1$&apos;</span> /etc/inittab                   <span class="comment"># &#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x5F00;&#x5934;&#x5E76;&#x4EE5;&#x4E00;&#x4E2A;&#x4E0E;&#x5F00;&#x5934;&#x6570;&#x5B57;&#x76F8;&#x540C;&#x7684;&#x6570;&#x5B57;&#x7ED3;&#x5C3E;&#x7684;&#x884C;</span></span><br></pre></td></tr></table></figure>
<h4 id="&#x5206;&#x7EC4;&#x5F15;&#x7528;"><a href="#&#x5206;&#x7EC4;&#x5F15;&#x7528;" class="headerlink" title="&#x5206;&#x7EC4;&#x5F15;&#x7528;"></a>&#x5206;&#x7EC4;&#x5F15;&#x7528;</h4><blockquote>
<p>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x62EC;&#x53F7;<code>\(***\)</code>&#x5C06;&#x4E00;&#x7EC4;&#x5B57;&#x7B26;&#x62EC;&#x8D77;&#x6765;&#xFF0C;&#x8868;&#x793A;&#x8FD9;&#x4E00;&#x7EC4;&#x5B57;&#x7B26;&#x88AB;&#x5F53;&#x4F5C;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; \1, \2&#x2026; &#x5BF9;&#x524D;&#x9762;&#x62EC;&#x53F7;&#x5339;&#x914D;&#x6240;&#x5339;&#x914D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x8FDB;&#x884C;&#x5F15;&#x7528;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x9996;&#x4E2A;&#x5355;&#x8BCD;&#x548C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5355;&#x8BCD;&#x4E00;&#x6837;&#x7684;&#x884C;</span></span><br><span class="line">grep <span class="string">&quot;^\(\&lt;[[:alpha:]]\+\&gt;\).*\1$&quot;</span> /etc/passwd  </span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5339;&#x914D;&#x5305;&#x542B;mysql&#x6216;apache&#x6216;redis&#x7684;&#x884C;&#xFF0C;`|`&#x8868;&#x793A;&#x6216;  </span></span><br><span class="line">egrep <span class="string">&quot;mysql|apache|redis&quot;</span> mydata.txt  </span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x5339;&#x914D;ipv4&#x7684;&#x5730;&#x5740;  </span></span><br><span class="line">egrep <span class="string">&quot;(\&lt;([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\&gt;\.){3}\&lt;([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\&gt;&quot;</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x53D6;&#x51FA;&#x9ED8;&#x8BA4;shell&#x4E3A;bash&#xFF0C;&#x4E14;&#x5176;&#x7528;&#x6237;ID&#x53F7;&#x6700;&#x5C0F;&#x7684;&#x7528;&#x6237;&#x7684;&#x7528;&#x6237;&#x540D;  </span></span><br><span class="line">grep <span class="string">&apos;bash$&apos;</span> /etc/passwd | sort -n -t: -k3 | head -1 | cut -d: -f1</span><br></pre></td></tr></table></figure>
<h4 id="&#x96F6;&#x5BBD;&#x65AD;&#x8A00;"><a href="#&#x96F6;&#x5BBD;&#x65AD;&#x8A00;" class="headerlink" title="&#x96F6;&#x5BBD;&#x65AD;&#x8A00;"></a>&#x96F6;&#x5BBD;&#x65AD;&#x8A00;</h4><p>&#x4EC5;&#x5217;2&#x4E2A;&#x6BD4;&#x8F83;&#x5E38;&#x7528;&#x7684;</p>
<ul>
<li><code>(?=exp)</code>&#xFF1A;&#x5339;&#x914D;exp&#x524D;&#x9762;&#x7684;&#x4F4D;&#x7F6E;</li>
<li><code>(?&lt;=exp)</code>&#xFF1A;&#x5339;&#x914D;exp&#x540E;&#x9762;&#x7684;&#x4F4D;&#x7F6E;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;Nice to meet you&apos; | grep -oP &apos;(.+(?=eet))&apos;</span><br><span class="line">echo &apos;Nice to meet you&apos; | grep -oP &apos;((?&lt;=Nice).+)&apos;</span><br><span class="line"></span><br><span class="line"># &#x63D0;&#x53D6;&#x672C;&#x673A;IP</span><br><span class="line">ip a | grep -v &apos;127.0.0.1&apos;| grep -oP &apos;(?&lt;=inet )[\d\.]+&apos;</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[常用命令--网络管理]]></title>
      <url>http://liu2lin600.github.io/2016/05/21/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4--%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86/</url>
      <content type="html"><![CDATA[<p>&#x5E38;&#x89C1;&#x7684;&#x7F51;&#x7EDC;&#x76F8;&#x5173;&#x64CD;&#x4F5C;&#x547D;&#x4EE4;<br><a id="more"></a></p>
<h4 id="&#x7F51;&#x7EDC;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x6587;&#x4EF6;-REHL&#x7CFB;"><a href="#&#x7F51;&#x7EDC;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x6587;&#x4EF6;-REHL&#x7CFB;" class="headerlink" title="&#x7F51;&#x7EDC;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x6587;&#x4EF6;(REHL&#x7CFB;)"></a>&#x7F51;&#x7EDC;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x6587;&#x4EF6;(REHL&#x7CFB;)</h4><h5 id="&#x7F51;&#x5361;&#x4FE1;&#x606F;"><a href="#&#x7F51;&#x5361;&#x4FE1;&#x606F;" class="headerlink" title="&#x7F51;&#x5361;&#x4FE1;&#x606F;"></a>&#x7F51;&#x5361;&#x4FE1;&#x606F;</h5><p><code>/etc/sysconfig/network-scripts/ifcfg-eth0</code>  (centos7&#x4E3A;enoX)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0                 <span class="comment"># &#x8BBE;&#x5907;&#x540D;</span></span><br><span class="line">TYPE=Ethernet               <span class="comment"># &#x63A5;&#x53E3;&#x7C7B;&#x578B;&#xFF0C;&#x5305;&#x62EC;Ethernet,Bridge</span></span><br><span class="line">ONBOOT=yes                  <span class="comment"># &#x7F51;&#x5361;&#x5F00;&#x673A;&#x542F;&#x52A8;</span></span><br><span class="line">NM_CONTROLLED=yes           <span class="comment"># &#x662F;&#x5426;&#x542F;&#x7528;NetworkManager&#x670D;&#x52A1;&#x6765;&#x63A7;&#x5236;&#x63A5;&#x53E3;&#xFF0C;centos6&#x4E0A;&#x4E0D;&#x5B8C;&#x5584;</span></span><br><span class="line">BOOTPROTO=none              <span class="comment"># &#x5F15;&#x5BFC;&#x534F;&#x8BAE;&#xFF0C;&#x5305;&#x62EC;static, none, dhcp, bootp&#x3002;&#x7F51;&#x5361;&#x522B;&#x540D;&#x4E0D;&#x652F;&#x6301;&#x52A8;&#x6001;&#x83B7;&#x53D6;</span></span><br><span class="line">NETMASK=255.255.0.0         <span class="comment"># &#x5B50;&#x7F51;&#x63A9;&#x7801;&#xFF0C;centos7&#x7528;PREFIX&#x8868;&#x793A;&#x5982;24</span></span><br><span class="line">IPV6INIT=no                 <span class="comment"># &#x662F;&#x5426;&#x521D;&#x59CB;&#x5316;IPv6</span></span><br><span class="line">IPADDR=172.16.60.2          <span class="comment"># IP&#x5730;&#x5740;</span></span><br><span class="line">GATEWAY=172.16.0.1          <span class="comment"># &#x9ED8;&#x8BA4;&#x7F51;&#x5173;</span></span><br><span class="line">DNS1=172.16.0.1             <span class="comment"># DNS&#x670D;&#x52A1;&#xFF0C;&#x6700;&#x591A;&#x53EF;&#x6DFB;&#x52A0;3&#x4E2A;&#xFF0C;DNS1&#xFF0C;DNS2&#xFF0C;DNS3</span></span><br><span class="line">HWADDR=00:0C:29:24:3D:58    <span class="comment"># MAC&#x5730;&#x5740;</span></span><br><span class="line">USERCTL=no                  <span class="comment"># &#x662F;&#x5426;&#x5141;&#x8BB8;&#x666E;&#x901A;&#x7528;&#x6237;&#x63A7;&#x5236;</span></span><br><span class="line">PEERDNS=no                  <span class="comment"># dhcp&#x5F15;&#x5BFC;&#x65F6;&#x662F;&#x5426;&#x63A5;&#x53D7;&#x7531;DHCP&#x670D;&#x52A1;&#x5668;&#x6307;&#x5B9A;DNS&#x6765;&#x8986;&#x76D6;&#x672C;&#x5730;</span></span><br><span class="line">UUID=9e1481bd-d10f-48c2-8d21-54fb9be702a9   <span class="comment"># &#x7F51;&#x5361;&#x552F;&#x4E00;&#x8BC6;&#x522B;&#x7801;</span></span><br></pre></td></tr></table></figure>
<h5 id="&#x8DEF;&#x7531;&#x4FE1;&#x606F;"><a href="#&#x8DEF;&#x7531;&#x4FE1;&#x606F;" class="headerlink" title="&#x8DEF;&#x7531;&#x4FE1;&#x606F;"></a>&#x8DEF;&#x7531;&#x4FE1;&#x606F;</h5><p><code>/etc/sysconfig/network-script/route-eth0</code>  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x65B9;&#x5F0F;1&#xFF1A;&#x6BCF;1&#x884C;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x6761;&#x76EE;</span></span><br><span class="line">10.0.0.0/24 via 192.168.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x65B9;&#x5F0F;2&#xFF1A;&#x6BCF;3&#x884C;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x6761;&#x76EE;&#xFF0C;&#x6761;&#x76EE;&#x6570;&#x5B57;0,1,2...</span></span><br><span class="line">ADDRESS0=20.0.0.1</span><br><span class="line">NETMASK0=255.255.255.0</span><br><span class="line">GATEWAY0=192.168.0.2</span><br></pre></td></tr></table></figure>
<p><em>&#x6CE8;&#xFF1A;2&#x79CD;&#x65B9;&#x5F0F;&#x4E0D;&#x80FD;&#x6DF7;&#x7528;</em></p>
<h5 id="&#x4E3B;&#x673A;&#x540D;"><a href="#&#x4E3B;&#x673A;&#x540D;" class="headerlink" title="&#x4E3B;&#x673A;&#x540D;"></a>&#x4E3B;&#x673A;&#x540D;</h5><p><code>/etc/sysconfig/network</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NETWORKING=yes                    <span class="comment">#&#x5F00;&#x542F;</span></span><br><span class="line">HOSTNAME=localhost.localdomain    <span class="comment">#&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;</span></span><br></pre></td></tr></table></figure>
<h5 id="DNS&#x914D;&#x7F6E;"><a href="#DNS&#x914D;&#x7F6E;" class="headerlink" title="DNS&#x914D;&#x7F6E;"></a>DNS&#x914D;&#x7F6E;</h5><p><code>/etc/resolv.conf</code>  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nameserver 202.106.0.20</span><br><span class="line">search localhost</span><br></pre></td></tr></table></figure>
<h5 id="hosts"><a href="#hosts" class="headerlink" title="hosts"></a>hosts</h5><p><code>/etc/hosts</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#   IP&#x5730;&#x5740;       &#x7F51;&#x5740;      &#x522B;&#x540D;(&#x53EF;&#x591A;&#x4E2A;)          </span></span><br><span class="line">172.16.1.100  www.liu.com   www liu</span><br><span class="line">127.0.0.1     localhost</span><br></pre></td></tr></table></figure>
<p><strong>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540E;&#x9700;&#x8981;&#x91CD;&#x542F;&#x7F51;&#x7EDC;&#x624D;&#x80FD;&#x751F;&#x6548;</strong></p>
<ul>
<li>CentOS6&#xFF1A;<code>service network {restart|stop|start|status}</code></li>
<li>CentOS7&#xFF1A;<code>systemctl {restart|stop|start|status} network[.service]</code></li>
</ul>
<p><strong>&#x5907;&#x6CE8;</strong>&#xFF1A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4FEE;&#x6539;&#x8FD8;&#x53EF;&#x901A;&#x8FC7;&#x4E13;&#x7528;&#x547D;&#x4EE4;&#x6765;&#x4FEE;&#x6539;&#xFF1A;  </p>
<ul>
<li>CentOS6&#xFF1A;<code>setup</code>&#x6216;<code>system-config-network</code>  </li>
<li>CentOS7&#xFF1A;<code>nmtui</code></li>
</ul>
<hr>
<h4 id="hostname"><a href="#hostname" class="headerlink" title="hostname"></a>hostname</h4><p>&#x663E;&#x793A;&#x548C;&#x4E34;&#x65F6;&#x8BBE;&#x7F6E;&#x4E3B;&#x673A;&#x540D;&#xFF0C;<em>centos7&#x53EF;&#x4F7F;&#x7528;<code>hostnamectl</code>, &#x8BBE;&#x7F6E;&#x53EF;&#x6C38;&#x4E45;&#x6709;&#x6548;</em></p>
<blockquote>
<p><code>-d</code>&#xFF1A;&#x663E;&#x793A;&#x673A;&#x5668;&#x57DF;&#x540D;<br><code>-i</code>&#xFF1A;&#x663E;&#x793A;ip<br><code>-I</code>&#xFF1A;&#x663E;&#x793A;&#x673A;&#x5668;&#x4E0A;&#x6240;&#x6709;ip<br><code>-f</code>&#xFF1A;&#x663E;&#x793A;FQDN</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hostname                <span class="comment"># &#x67E5;&#x770B;&#x4E3B;&#x673A;&#x540D;</span></span><br><span class="line">hostname liu2lin600     <span class="comment"># &#x4E34;&#x65F6;&#x8BBE;&#x7F6E;&#x4E3B;&#x673A;&#x540D;</span></span><br></pre></td></tr></table></figure>
<h4 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h4><p><code>ping [OPTION] {IP|ADDR}</code><br>&#x6D4B;&#x8BD5;&#x4E3B;&#x673A;&#x4E4B;&#x95F4;&#x7F51;&#x7EDC;&#x7684;&#x8FDE;&#x901A;&#x6027;&#xFF0C;&#x4F7F;&#x7528;ICMP&#x4F20;&#x8F93;&#x534F;&#x8BAE;</p>
<blockquote>
<p><code>-c #</code>&#xFF1A;&#x6307;&#x5B9A;ping&#x6B21;&#x6570;<br><code>-W #</code>&#xFF1A;&#x4E00;&#x6B21;ping&#x4E2D;&#x7B49;&#x5F85;&#x54CD;&#x5E94;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;<br><code>-w #</code>&#xFF1A;ping&#x547D;&#x4EE4;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#xFF0C;&#x5230;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x7ED3;&#x675F;<br><code>-i #</code>&#xFF1A;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#xFF0C;&#x9ED8;&#x8BA4;1&#x79D2;ping&#x4E00;&#x6B21;<br><code>-s #</code>&#xFF1A;&#x53D1;&#x9001;&#x5305;&#x5927;&#x5C0F;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;64bytes    </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c 2 -W 1 -s 128 -i 3 www.163.com      <span class="comment"># &#x9009;&#x9879;&#x548C;&#x6570;&#x503C;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x7A7A;&#x683C;&#x9694;&#x5F00;</span></span><br></pre></td></tr></table></figure>
<h4 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h4><p><code>traceroute ADDR</code><br>&#x8FFD;&#x8E2A;&#x6570;&#x636E;&#x5305;&#x5728;&#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x4F20;&#x8F93;&#x65F6;&#x7684;&#x5168;&#x90E8;&#x8DEF;&#x5F84;&#xFF0C;&#x5B83;&#x9ED8;&#x8BA4;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x5305;&#x5927;&#x5C0F;&#x662F;40&#x5B57;&#x8282;</p>
<h4 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h4><p>&#x663E;&#x793A;&#x7F51;&#x7EDC;&#x72B6;&#x6001;&#xFF0C;&#x5305;&#x62EC;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#xFF0C;&#x8DEF;&#x7531;&#xFF0C;&#x63A5;&#x53E3;&#x72B6;&#x6001;&#x7B49;</p>
<blockquote>
<p><code>-t</code>&#xFF1A;&#x5217;&#x51FA;TCP&#x534F;&#x8BAE;&#x76F8;&#x5173;&#x8FDE;&#x63A5;&#xFF0C;&#x8FDE;&#x63A5;&#x5747;&#x6709;&#x72B6;&#x6001;<br><code>-u</code>&#xFF1A;UDP<br><code>-w</code>&#xFF1A;raw socket&#x76F8;&#x5173;&#x8FDE;&#x63A5;<br><code>-n</code>&#xFF1A;&#x6570;&#x5B57;&#x65B9;&#x5F0F;&#x663E;&#x793A;IP&#x548C;&#x7AEF;&#x53E3;&#x53F7;<br><code>-l</code>&#xFF1A;&#x4EC5;&#x5217;&#x51FA;&#x5728;&#x76D1;&#x542C;&#x72B6;&#x6001;&#x7684;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;<br><code>-p</code>&#xFF1A;&#x663E;&#x793A;&#x76D1;&#x542C;&#x6307;&#x5B9A;&#x7684;&#x5957;&#x63A5;&#x5B57;&#x7684;&#x8FDB;&#x7A0B;&#x7684;&#x8FDB;&#x7A0B;&#x53F7;&#x53CA;&#x8FDB;&#x7A0B;&#x540D;<br><code>-a</code>&#xFF1A;&#x5217;&#x51FA;&#x6240;&#x6709;&#x7684;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;<br><code>-r</code>&#xFF1A;&#x5217;&#x51FA;&#x8DEF;&#x7531;&#x5217;&#x8868;&#xFF0C;&#x540C;route&#x547D;&#x4EE4;<br><code>-i</code>&#xFF1A;&#x663E;&#x793A;&#x6240;&#x6709;&#x63A5;&#x53E3;&#x4FE1;&#x606F;<br><code>-I</code>&lt; IFace&gt;&#xFF1A;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x63A5;&#x53E3;&#x4FE1;&#x606F;&#xFF0C;&#x6CE8;&#x610F;I&#x548C;&#x63A5;&#x53E3;&#x95F4;&#x6CA1;&#x6709;&#x7A7A;&#x683C;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x5E38;&#x7528;&#x9009;&#x9879;</span></span><br><span class="line">netstat -tunl</span><br><span class="line">netstat -tan</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#x67E5;&#x770B;&#x8FDE;&#x63A5;&#x67D0;&#x670D;&#x52A1;&#x7AEF;&#x53E3;&#x6700;&#x591A;&#x7684;&#x7684;IP&#x5730;&#x5740;</span></span><br><span class="line">netstat -ntu | grep :80 | awk <span class="string">&apos;{print $5}&apos;</span> | cut -d: -f1 | awk <span class="string">&apos;{++ip[$1]} END {for(i in ip) print ip[i],&quot;\t&quot;,i}&apos;</span> | sort -nr</span><br><span class="line"></span><br><span class="line"><span class="comment">#TCP&#x5404;&#x79CD;&#x72B6;&#x6001;&#x5217;&#x8868;</span></span><br><span class="line">netstat -nt | grep -e 127.0.0.1 -e 0.0.0.0 -e ::: -v | awk <span class="string">&apos;/^tcp/ {++state[$NF]} END {for(i in state) print i,&quot;\t&quot;,state[i]}&apos;</span></span><br></pre></td></tr></table></figure>
<h4 id="ftp"><a href="#ftp" class="headerlink" title="ftp"></a>ftp</h4><p><code>ftp HOST</code><br>&#x8FDE;&#x63A5;&#x5230;&#x6307;&#x5B9A;ftp&#x670D;&#x52A1;&#x5668;</p>
<p>&#x8FDE;&#x63A5;&#x540E;&#x7684;&#x76F8;&#x5173;&#x64CD;&#x4F5C;&#x547D;&#x4EE4;&#xFF1A;<br><code>help</code>&#xFF1A;&#x67E5;&#x770B;&#x5E2E;&#x52A9;<br><code>get</code>&#xFF1A;&#x4E0B;&#x8F7D;&#x6307;&#x5B9A;&#x5355;&#x4E2A;&#x6587;&#x4EF6;&#x5230;&#x767B;&#x5F55;&#x65F6;&#x6587;&#x4EF6;&#x5939;&#x4E2D;<br><code>mget</code>&#xFF1A;&#x4E0B;&#x8F7D;&#x591A;&#x4E2A;<br><code>put</code>&#xFF1A;&#x4E0A;&#x4F20;&#xFF0C;&#x9700;&#x8981;&#x6709;&#x4E0A;&#x4F20;&#x6743;&#x9650;<br><code>bye</code>&#xFF1A;&#x9000;&#x51FA;ftp  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ftp 172.16.0.1     <span class="comment"># &#x533F;&#x540D;&#x7528;&#x6237;&#x540D;&#x4E3A;anonymous&#x6216;ftp</span></span><br></pre></td></tr></table></figure>
<h4 id="lftp"><a href="#lftp" class="headerlink" title="lftp"></a>lftp</h4><p><code>lftp [-p port] [-u user[,pass]] [site]</code><br>&#x589E;&#x5F3A;&#x7248;ftp&#xFF0C;&#x53EF;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#xFF0C;&#x7528;&#x6237;&#x540D;&#x53CA;&#x5BC6;&#x7801;&#xFF0C;&#x9ED8;&#x8BA4;&#x533F;&#x540D;&#x767B;&#x5F55;&#xFF0C;&#x652F;&#x6301;tab&#x81EA;&#x52A8;&#x8865;&#x5168;  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lftp -u liu,123123 192.168.1.100   <span class="comment"># &#x6307;&#x5B9A;liu&#x7528;&#x6237;&#x5BC6;&#x7801;&#x4E3A;123123</span></span><br></pre></td></tr></table></figure>
<h4 id="lftpget"><a href="#lftpget" class="headerlink" title="lftpget"></a>lftpget</h4><p><code>lftpget URL</code><br>&#x4E0B;&#x8F7D;&#x6307;&#x5B9A;ftp&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6587;&#x4EF6;</p>
<blockquote>
<p><code>-c</code>&#xFF1A;&#x65AD;&#x70B9;&#x7EED;&#x4F20;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lftpget -c ftp://172.16.0.1/pub/a.txt</span><br></pre></td></tr></table></figure>
<h4 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h4><p><code>wget [OPTION] URL</code><br>&#x4ECE;&#x6307;&#x5B9A;&#x7684;URL&#x4E0B;&#x8F7D;&#x6587;&#x4EF6;</p>
<blockquote>
<p><code>-b</code>&#xFF1A;&#x540E;&#x53F0;&#x4E0B;&#x8F7D;&#xFF0C;&#x53EF;&#x4F7F;&#x7528;<code>tail -f wget-log</code>&#x67E5;&#x770B;<br><code>-c</code>&#xFF1A;&#x65AD;&#x70B9;&#x7EED;&#x4F20;<br><code>-O</code>&#xFF1A;&#x91CD;&#x547D;&#x540D;<br><code>--limit-rate=#</code>&#xFF1A;&#x9650;&#x901F;<br>&#x2026;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/tmux/xxx/tmux-2.2.tar.gz        <span class="comment"># &#x4E0B;&#x8F7D;&#x6307;&#x5B9A;&#x6587;&#x4EF6;</span></span><br><span class="line">wget -O xxx.zip http://www.xxx.com/download.php?id=12   <span class="comment"># &#x91CD;&#x547D;&#x540D;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;/&#x540E;&#x7684;&#x540D;&#x5B57;&#x4FDD;&#x5B58;</span></span><br><span class="line">wget --<span class="built_in">limit</span>-rate=300k http://www.xx.cn/xx.zip          <span class="comment"># &#x9650;&#x901F;300k</span></span><br><span class="line">wget -c http://www.xx.cn/xx.zip                         <span class="comment"># &#x65AD;&#x70B9;&#x7EED;&#x4F20;</span></span><br><span class="line">wget -b http://www.xx.cn/xx.zip                         <span class="comment"># &#x540E;&#x53F0;&#x4E0B;&#x8F7D;</span></span><br><span class="line">wget --tries=40 http://www.xx.cn/xx.zip                 <span class="comment"># &#x9ED8;&#x8BA4;&#x91CD;&#x8BD5;20&#x6B21;&#xFF0C;&#x4FEE;&#x6539;&#x4E3A;40</span></span><br><span class="line">wget -i file.txt                                        <span class="comment"># &#x5728;file.txt&#x6587;&#x4EF6;&#x4E2D;&#x5199;&#x5165;&#x591A;&#x4E2A;url&#x5730;&#x5740;</span></span><br><span class="line">wget -o msg.log http://www.xx.cn/xx.zip                 <span class="comment"># &#x4E0B;&#x8F7D;&#x4FE1;&#x606F;&#x5199;&#x5165;msg.log&#x6587;&#x4EF6;</span></span><br><span class="line">wget -r -A.pdf http://www.xx.cn/xx.zip                  <span class="comment"># &#x9012;&#x5F52;&#x4E0B;&#x8F7D;&#x6240;&#x6709;pdf&#x6587;&#x4EF6;&#xFF0C;&#x614E;&#x7528;</span></span><br><span class="line">wget --ftp-user=NAME --ftp-password=PASSWD URL          <span class="comment"># &#x5E26;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#x7684;ftp&#x4E0B;&#x8F7D;</span></span><br><span class="line">wget --spider URL                                       <span class="comment"># &#x6D4B;&#x8BD5;&#x4E0B;&#x8F7D;</span></span><br><span class="line">wget --user-agent=<span class="string">&quot;Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.204 Safari/534.16&quot;</span> URL    <span class="comment"># &#x4F2A;&#x88C5;&#x4E0B;&#x8F7D;</span></span><br></pre></td></tr></table></figure>
<h4 id="axel"><a href="#axel" class="headerlink" title="axel"></a>axel</h4><p><code>axel [opt] url1 [url2] [&#x2026;]</code><br>&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5B89;&#x88C5;</p>
<blockquote>
<p><code>-s x</code>  &#xFF1A;&#x6307;&#x5B9A;&#x6700;&#x5927;&#x901F;&#x7387;&#xFF08;&#x5B57;&#x8282;/&#x79D2;&#xFF09;<br><code>-n x</code>  &#xFF1A;&#x6307;&#x5B9A;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;<br><code>-o f</code>  &#xFF1A;&#x6307;&#x5B9A;&#x672C;&#x5730;&#x8F93;&#x51FA;&#x6587;&#x4EF6;<br><code>-S [x]</code>&#xFF1A;&#x641C;&#x7D22;&#x955C;&#x50CF;&#x5E76;&#x4ECE; X &#x670D;&#x52A1;&#x5668;&#x4E0B;&#x8F7D;<br><code>-H x</code>  &#xFF1A;&#x6DFB;&#x52A0;&#x62A5;&#x5934;&#x5B57;&#x7B26;&#x4E32;<br><code>-U x</code>  &#xFF1A;&#x8BBE;&#x7F6E;&#x7528;&#x6237;&#x4EE3;&#x7406;<br><code>-N</code>    &#xFF1A;&#x4E0D;&#x4F7F;&#x7528;&#x4EFB;&#x4F55;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;<br><code>-k</code>    &#xFF1A;&#x4E0D;&#x6821;&#x9A8C; SSL &#x8BC1;&#x4E66;<br><code>-q</code>    &#xFF1A;&#x4F7F;&#x7528;&#x8F93;&#x51FA;&#x7B80;&#x5355;&#x4FE1;&#x606F;&#x6A21;&#x5F0F;<br><code>-v</code>    &#xFF1A;&#x66F4;&#x591A;&#x72B6;&#x6001;&#x4FE1;&#x606F;<br><code>-a</code>    &#xFF1A;&#x53E6;&#x4E00;&#x79CD;&#x8FDB;&#x5EA6;&#x6307;&#x793A;&#x5668;</p>
</blockquote>
<h4 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h4><p>&#x57FA;&#x4E8E;URL&#x8BED;&#x6CD5;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x65B9;&#x5F0F;&#x4E0B;&#x5DE5;&#x4F5C;&#x7684;&#x6587;&#x4EF6;&#x4F20;&#x8F93;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x652F;&#x6301;FTP, FTPS, HTTP, HTTPS, GOPHER, TELNET, DICT, FILE&#x53CA;LDAP&#x7B49;&#x534F;&#x8BAE;&#x3002;curl&#x652F;&#x6301;HTTPS&#x8BA4;&#x8BC1;&#xFF0C;&#x5E76;&#x4E14;&#x652F;&#x6301;HTTP&#x7684;POST&#x3001;PUT&#x7B49;&#x65B9;&#x6CD5;&#xFF0C; FTP&#x4E0A;&#x4F20;&#xFF0C; kerberos&#x8BA4;&#x8BC1;&#xFF0C;HTTP&#x4E0A;&#x4F20;&#xFF0C;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#xFF0C; cookies&#xFF0C; &#x7528;&#x6237;&#x540D;/&#x5BC6;&#x7801;&#x8BA4;&#x8BC1;&#xFF0C; &#x4E0B;&#x8F7D;&#x6587;&#x4EF6;&#x65AD;&#x70B9;&#x7EED;&#x4F20;&#xFF0C;&#x4E0A;&#x8F7D;&#x6587;&#x4EF6;&#x65AD;&#x70B9;&#x7EED;&#x4F20;,&#xFF0C;http&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x7BA1;&#x9053;&#xFF08; proxy tunneling&#xFF09;&#xFF0C;&#x751A;&#x81F3;&#x5B83;&#x8FD8;&#x652F;&#x6301;IPv6&#xFF0C;socks5&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x901A;&#x8FC7;http&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x5230;FTP&#x670D;&#x52A1;&#x5668;&#x7B49;&#xFF0C;&#x603B;&#x4E4B;&#x529F;&#x80FD;&#x5F88;&#x5F3A;&#x5927;&#xFF0C;curl&#x8FD8;&#x6709;&#x5F3A;&#x5927;&#x7684;&#x8F6C;&#x53D1;&#x529F;&#x80FD;&#xFF0C;&#x4F1A;&#x5355;&#x72EC;&#x5F00;&#x7BC7;&#x8BF4;&#x660E;</p>
<p><code>-I/--head</code>&#xFF1A;&#x53EA;&#x663E;&#x793A;&#x54CD;&#x5E94;&#x62A5;&#x6587;&#x9996;&#x90E8;&#x4FE1;&#x606F;<br><code>-XPUT</code>&#xFF1A;&#x6307;&#x5B9A;&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;&#xFF0C;&#x5305;&#x62EC;GET, HEAD, POST&#x53CA;PUT<br><code>-H/--header &lt;str&gt;</code>&#xFF1A;&#x81EA;&#x5B9A;&#x4E49;&#x5934;&#x4FE1;&#x606F;&#x4F20;&#x9012;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x53EF;&#x53E0;&#x52A0;&#x4F7F;&#x7528;&#x4F20;&#x9012;&#x591A;&#x4E2A;&#x503C;<br><code>-L</code>&#xFF1A;&#x5904;&#x7406;&#x91CD;&#x5B9A;&#x5411;&#x6216;https<br><code>-o</code>&#xFF1A;&#x5C06;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x4E3A;&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x7684;&#x6587;&#x4EF6;&#x4E2D;<br><code>-O</code>&#xFF1A;&#x4F7F;&#x7528;URL&#x4E2D;&#x9ED8;&#x8BA4;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x4FDD;&#x5B58;&#x6587;&#x4EF6;&#x5230;&#x672C;&#x5730;<br><code>-C</code>&#xFF1A;&#x65AD;&#x70B9;&#x7EED;&#x4F20;&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x504F;&#x79FB;&#x91CF;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;<code>-</code>&#x81EA;&#x52A8;&#x8BC6;&#x522B;<br><code>-A/--user-agent &lt;str&gt;</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x7528;&#x6237;&#x4EE3;&#x7406;&#x53D1;&#x9001;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5373;&#x544A;&#x8BC9;&#x670D;&#x52A1;&#x5668;&#x6D4F;&#x89C8;&#x5668;&#x662F;&#x4EC0;&#x4E48;<br><code>-d DATA</code>&#xFF1A;&#x4F20;&#x8F93;&#x6570;&#x636E;<br><code>--tcp-nodelay</code>&#xFF1A;&#x4F7F;&#x7528;TCP_NODELAY&#x9009;&#x9879;<br><code>-e/--referer &lt;URL&gt;</code>&#xFF1A;&#x6765;&#x6E90;&#x7F51;&#x5740;&#xFF0C;&#x8DF3;&#x8F6C;&#x8FC7;&#x6765;&#x7684;&#x7F51;&#x5740;<br><code>--cacert &lt;file&gt;</code>&#xFF1A;&#x6307;&#x5B9A;CA&#x8BC1;&#x4E66; (SSL)<br><code>--compressed</code>&#xFF1A;&#x8981;&#x6C42;&#x8FD4;&#x56DE;&#x662F;&#x538B;&#x7F29;&#x7684;&#x5F62;&#x52BF;&#xFF0C;&#x5982;&#x679C;&#x6587;&#x4EF6;&#x672C;&#x8EAB;&#x4E3A;&#x4E00;&#x4E2A;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4E0B;&#x8F7D;&#x81F3;&#x672C;&#x5730;<br><code>--limit-rate &lt;rate&gt;</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x4F20;&#x8F93;&#x901F;&#x5EA6;<br><code>-u/--user &lt;user[:password]&gt;</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7528;&#x6237;&#x548C;&#x5BC6;&#x7801;&#xFF0C;&#x53EF;&#x4E0D;&#x52A0;&#x5BC6;&#x7801;&#xFF0C;&#x56DE;&#x8F66;&#x540E;&#x8F93;&#x5165;<br><code>-#/--progress</code>&#xFF1A;&#x663E;&#x793A;&#x8FDB;&#x5EA6;<br><code>-r</code>&#xFF1A;&#x5206;&#x6BB5;&#x4E0B;&#x8F7D;<br><code>-D</code>&#xFF1A;&#x5C06;&#x54CD;&#x5E94;&#x7684;header&#x4FE1;&#x606F;&#x4FDD;&#x5B58;&#x5728;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x4E2D;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"># &#x5C06;&#x6587;&#x4EF6;&#x4E0B;&#x8F7D;&#x5230;&#x672C;&#x5730;&#x5E76;&#x547D;&#x540D;&#x4E3A;a.html</span><br><span class="line">curl -o a.html http://www.a.com/a.html</span><br><span class="line"></span><br><span class="line"># &#x5C06;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x5230;&#x672C;&#x5730;&#x5E76;&#x547D;&#x540D;&#x4E3A;a.html</span><br><span class="line">curl -O http://www.a.com/a.html</span><br><span class="line"></span><br><span class="line"># &#x63D0;&#x4F9B;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#x8FDB;&#x884C;&#x6388;&#x6743;</span><br><span class="line">curl -u username:password URL</span><br><span class="line"></span><br><span class="line"># &#x5217;&#x51FA;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x5939;&#x548C;&#x6587;&#x4EF6;</span><br><span class="line">curl -u ftpuser:ftppass -O ftp://ftp_server/public_html/</span><br><span class="line"></span><br><span class="line"># &#x4E0B;&#x8F7D;&#x6307;&#x5B9A;&#x6587;&#x4EF6;</span><br><span class="line">curl -u ftpuser:ftppass -O ftp://ftp_server/public_html/xss.php</span><br><span class="line"></span><br><span class="line"># &#x5C06;myfile.txt&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x5230;&#x670D;&#x52A1;&#x5668;</span><br><span class="line">curl -u ftpuser:ftppass -T myfile.txt ftp://ftp.testserver.com</span><br><span class="line"></span><br><span class="line"># &#x540C;&#x65F6;&#x4E0A;&#x4F20;&#x591A;&#x4E2A;&#x6587;&#x4EF6;</span><br><span class="line">curl -u ftpuser:ftppass -T &quot;{file1,file2}&quot; ftp://ftp.testserver.com</span><br><span class="line"></span><br><span class="line"># &#x4ECE;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x83B7;&#x53D6;&#x5185;&#x5BB9;&#x4FDD;&#x5B58;&#x5230;&#x670D;&#x52A1;&#x5668;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x4E2D;</span><br><span class="line">curl -u ftpuser:ftppass -T - ftp://ftp.testserver.com/myfile_1.txt</span><br><span class="line"></span><br><span class="line"># &#x6307;&#x5B9A;&#x4EE3;&#x7406;&#x4E3B;&#x673A;&#x548C;&#x7AEF;&#x53E3;</span><br><span class="line">curl -x proxysever.test.com:3128 http://google.co.in</span><br><span class="line"></span><br><span class="line"># GET</span><br><span class="line">curl -u username https://api.github.com/user?access_token=XXXXXXXXXX</span><br><span class="line"></span><br><span class="line"># POST</span><br><span class="line">curl -u username --data &quot;param1=value1&amp;param2=value&quot; https://api.github.com</span><br><span class="line"></span><br><span class="line"># &#x4E5F;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5C06;&#x8BE5;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x5F53;&#x4F5C;&#x6570;&#x636E;&#x4F20;&#x9012;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x7AEF;</span><br><span class="line">curl --data @filename https://github.api.com/authorizations</span><br><span class="line"></span><br><span class="line"># &#x9650;&#x901F;&#x4E0B;&#x8F7D;</span><br><span class="line">curl --limit-rate 50k www.a.com</span><br><span class="line"></span><br><span class="line"># &#x8BBE;&#x7F6E;&#x7528;&#x6237;&#x4EE3;&#x7406;</span><br><span class="line">curl -A &apos;Mozilla/5.0&apos; www.a.com</span><br><span class="line"></span><br><span class="line"># &#x8BBE;&#x7F6E;referer&#x5730;&#x5740;</span><br><span class="line">curl --referer www.google.com www.a.com</span><br><span class="line"></span><br><span class="line"># &#x5206;&#x6BB5;&#x4E0B;&#x8F7D;</span><br><span class="line">curl -r 0-100 -o part1.JPG http://www.goo.com/dodo1.JPG</span><br><span class="line">curl -r 100- -o part2.JPG http://www.goo.com/dodo1.JPG</span><br><span class="line">cat part* &gt; dodo1.JPG</span><br></pre></td></tr></table></figure>
<h4 id="route"><a href="#route" class="headerlink" title="route"></a>route</h4><p>&#x663E;&#x793A;&#x6216;&#x4E34;&#x65F6;&#x8BBE;&#x7F6E;Linux&#x5185;&#x6838;&#x4E2D;&#x7684;&#x7F51;&#x7EDC;&#x8DEF;&#x7531;&#x8868;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;<code>ip</code>&#x6765;&#x4EE3;&#x66FF;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">route -n[ee]                                    # &#x4EE5;&#x6570;&#x5B57;&#x683C;&#x5F0F;&#x663E;&#x793A;&#x8DEF;&#x7531;&#x6761;&#x76EE;</span><br><span class="line">route add -net 192.168.2.0/24 dev eth0          # &#x6DFB;&#x52A0;&#x4E00;&#x6761;&#x5230;&#x8FBE;192.168.2.0&#x7F51;&#x7EDC;&#x7684;&#x8DEF;&#x7531;&#xFF0C;&#x63A9;&#x7801;255.255.255.0,&#x6570;&#x636E;&#x5305;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;eth0</span><br><span class="line">route add -net 10.0.0.1/8 gw 192.168.1.1        # &#x4E0B;&#x4E00;&#x8DF3;(192.168.1.1)&#x5FC5;&#x987B;&#x5728;&#x672C;&#x5730;&#x67D0;&#x4E00;&#x7F51;&#x5361;&#x7684;&#x7F51;&#x6BB5;&#x4E2D;&#x624D;&#x884C;</span><br><span class="line">route add -host 192.57.66.200 gw 192.168.2.1    # &#x6240;&#x6709;&#x53BB;&#x5F80;192.57.66.200&#x4E3B;&#x673A;&#x7684;&#x6570;&#x636E;&#x5305;&#x53D1;&#x5F80;&#x7F51;&#x5173;&#x5730;&#x5740;192.168.2.1</span><br><span class="line">route add default gw 192.168.1.1                # &#x6DFB;&#x52A0;&#x9ED8;&#x8BA4;&#x7F51;&#x5173;</span><br><span class="line">route del -net 192.168.2.0/24                   # &#x5220;&#x9664;&#x7F51;&#x7EDC;&#x8DEF;&#x7531;</span><br><span class="line">route del default                               # &#x5220;&#x9664;&#x9ED8;&#x8BA4;&#x8DEF;&#x7531;</span><br></pre></td></tr></table></figure>
<p>&#x8DEF;&#x7531;&#x8868;&#x4FE1;&#x606F;&#x8BF4;&#x660E;</p>
<blockquote>
<p>Destination&#xFF1A;&#x76EE;&#x6807;&#x7F51;&#x7EDC;&#x6216;&#x4E3B;&#x673A;(0.0.0.0&#x8868;&#x793A;&#x9ED8;&#x8BA4;&#x7F51;&#x5173;)<br>Gateway&#xFF1A;&#x4E0B;&#x4E00;&#x8DF3;&#x7F51;&#x5173;&#x5730;&#x5740;(0.0.0.0&#x8868;&#x672C;&#x5730;&#x4E3B;&#x673A;&#x6240;&#x5728;&#x7F51;&#x7EDC;&#xFF0C;&#x65E0;&#x9700;&#x7F51;&#x5173;&#xFF0C;&#x4E5F;&#x79F0;&#x76F4;&#x8FDE;&#x8DEF;&#x7531;)<br>Genmask&#xFF1A;&#x76EE;&#x6807;&#x7F51;&#x7EDC;&#x7684;&#x7F51;&#x7EDC;&#x63A9;&#x7801;&#x3002;&#x201D;255.255.255.255&#x201D;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x4E3B;&#x673A;&#xFF0C;&#x201D;0.0.0.0&#x201D;&#x8868;&#x793A;&#x7F51;&#x5173;<br>Flags&#xFF1A;&#x6807;&#x8BB0;  </p>
<blockquote>
<p>U&#xFF1A;&#x8DEF;&#x7531;&#x88AB;&#x542F;&#x7528;<br>H&#xFF1A;&#x76EE;&#x6807;&#x662F;&#x4E00;&#x4E2A;&#x4E3B;&#x673A;<br>G&#xFF1A;&#x9700;&#x8981;&#x900F;&#x8FC7;&#x5916;&#x90E8;&#x7684;&#x4E3B;&#x673A; (gateway) &#x6765;&#x8F6C;&#x9012;&#x5C01;&#x5305;<br>UG&#xFF1A;&#x672A;&#x5F00;&#x542F;<br>M&#xFF1A;&#x8BE5;&#x8DEF;&#x7531;&#x5DF2;&#x88AB;&#x4FEE;&#x6539;   </p>
</blockquote>
</blockquote>
<blockquote>
<p>Metric&#xFF1A;&#x5230;&#x8FBE;&#x76EE;&#x6807;&#x7684;&#x5F00;&#x9500;<br>Iface&#xFF1A;&#x5230;&#x8FBE;&#x76EE;&#x6807;&#x4F7F;&#x7528;&#x7684;&#x672C;&#x673A;&#x7F51;&#x5361;&#x63A5;&#x53E3;   </p>
</blockquote>
<h4 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a>ifconfig</h4><p><code>ifconfig [OPTION]</code><br>&#x914D;&#x7F6E;&#x6216;&#x67E5;&#x770B;&#x7F51;&#x7EDC;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#xFF0C;&#x6BD4;&#x8F83;&#x8001;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;<code>ip</code>&#x547D;&#x4EE4;&#x6765;&#x5B8C;&#x6210;&#x76F8;&#x5173;&#x64CD;&#x4F5C;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ifconfig&#x7684;&#x8BBE;&#x7F6E;&#x4E3A;&#x4E34;&#x65F6;&#xFF0C;&#x7ACB;&#x5373;&#x751F;&#x6548;&#x4F46;&#x91CD;&#x542F;&#x7F51;&#x7EDC;&#x5931;&#x6548;</span></span><br><span class="line">ifconfig                            <span class="comment">#&#x663E;&#x793A;&#x6D3B;&#x52A8;&#x7F51;&#x5361;&#x4FE1;&#x606F;&#xFF0C;&#x52A0;-a&#x663E;&#x793A;&#x5168;&#x90E8;</span></span><br><span class="line">ifconfig eth0 up|down               <span class="comment">#&#x542F;&#x7528;&#x6216;&#x5173;&#x95ED;eth0&#x7F51;&#x5361;&#xFF0C;(&#x540C;ifup/ifdown&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6765;&#x5B8C;&#x6210;)</span></span><br><span class="line">ifconfig eth0:1 192.168.1.100/24    <span class="comment">#&#x7ED9;eth0&#x6DFB;&#x52A0;&#x4E00;ip&#xFF0C;&#x522B;&#x8BBE;&#x7F6E;&#x522B;&#x540D;&#x4E3A;eth0:1</span></span><br><span class="line">ifconfig eth0 [-]arp                <span class="comment">#&#x5F00;&#x542F;&#x6216;&#x5173;&#x95ED;eth0&#x7684;arp&#x534F;&#x8BAE;&#xFF0C;&#x5305;&#x62EC;promisc, allmulti&#x7B49;</span></span><br><span class="line">ifconfig eth0 mtu 1500              <span class="comment">#&#x8BBE;&#x7F6E;&#x80FD;&#x901A;&#x8FC7;&#x7684;&#x6700;&#x5927;&#x5305;&#x5355;&#x5143;&#x4E3A;1500bytes</span></span><br></pre></td></tr></table></figure>
<h4 id="ip"><a href="#ip" class="headerlink" title="ip"></a><font color="red">ip</font></h4><p><code>ip [OPTIONS] COMMAND</code><br>&#x5F3A;&#x5927;&#x7684;&#x7F51;&#x7EDC;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x53EF;&#x5B8C;&#x5168;&#x66FF;&#x4EE3;<code>ifconfig</code>,<code>ifup</code>,<code>ifdown</code>,<code>route</code>&#x7B49;&#x529F;&#x80FD;  </p>
<blockquote>
<p><strong>OPTIONS</strong><br><code>-s</code>&#xFF1A;&#x66F4;&#x8BE6;&#x7EC6;&#x663E;&#x793A;<br><strong>COMMAND</strong><br><code>link</code>&#xFF1A;&#x8BBE;&#x5907;&#x76F8;&#x5173;&#x8BBE;&#x7F6E;&#xFF0C;&#x53EF;&#x7B80;&#x5199;&#x4E3A;<code>l</code> </p>
<blockquote>
<p><code>show</code>&#xFF1A;&#x663E;&#x793A;&#x8BBE;&#x5907;&#x4FE1;&#x606F;&#xFF0C;&#x540C;list&#xFF0C;&#x53EF;&#x7B80;&#x5199;&#x4E3A;<code>lst</code>&#x3001;<code>sh</code>&#x3001;<code>ls</code>&#x3001;<code>l</code><br><code>set</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x8BBE;&#x5907;&#x5C5E;&#x6027;&#xFF0C;&#x53EF;&#x7B80;&#x5199;&#x4E3A;<code>s</code><br><code>help</code>&#xFF1A;&#x663E;&#x793A;&#x7B80;&#x8981;&#x5E2E;&#x52A9;&#xFF0C;&#x5176;&#x5B83;&#x5B50;&#x547D;&#x4EE4;&#x540C;&#x6837;&#x652F;&#x6301;  </p>
</blockquote>
</blockquote>
<blockquote>
<p><code>addr</code>&#xFF1A;IP&#x5730;&#x5740;&#x67E5;&#x770B;&#x6DFB;&#x52A0;&#x5220;&#x9664;&#x7B49;&#xFF0C;&#x53EF;&#x7B80;&#x5199;&#x4E3A;<code>a</code>  </p>
<blockquote>
<p><code>show</code>&#xFF1A;&#x663E;&#x793A;IP&#x4FE1;&#x606F;&#xFF0C;&#x540C;list&#xFF0C;&#x53EF;&#x7B80;&#x5199;&#x4E3A;<code>lst</code>&#x3001;<code>sh</code>&#x3001;<code>ls</code>&#x3001;<code>l</code><br><code>add</code>&#xFF1A;&#x6DFB;&#x52A0;&#xFF0C;&#x4E00;&#x4E2A;&#x7F51;&#x5361;&#x53EF;&#x8BBE;&#x7F6E;&#x591A;&#x4E2A;IP&#xFF0C;&#x591A;&#x4E2A;&#x7F51;&#x6BB5;&#x65F6;&#x6BCF;&#x4E2A;&#x7F51;&#x6BB5;&#x7531;&#x4E00;&#x4E2A;&#x4E3B;&#x5730;&#x5740;&#xFF0C;&#x591A;&#x4E2A;&#x8F85;&#x52A9;&#x5730;&#x5740;<br><code>del</code>&#xFF1A;&#x5220;&#x9664;<br><code>flush</code>&#xFF1A;&#x6E05;&#x7A7A;IP&#x5730;&#x5740;  </p>
</blockquote>
</blockquote>
<blockquote>
<p><code>route</code>&#xFF1A;&#x548C;&#x8DEF;&#x7531;&#x76F8;&#x5173;&#x7684;&#x8BBE;&#x7F6E; &#xFF0C;&#x53EF;&#x7B80;&#x5199;&#x4E3A;<code>r</code> </p>
<blockquote>
<p><code>show</code>&#xFF1A;&#x663E;&#x793A;&#x8DEF;&#x7531;&#x4FE1;&#x606F;&#xFF0C;&#x540C;list&#xFF0C;&#x53EF;&#x7B80;&#x5199;&#x4E3A;<code>lst</code>&#x3001;<code>sh</code>&#x3001;<code>ls</code>&#x3001;<code>l</code><br><code>add</code>&#xFF1A;&#x6DFB;&#x52A0;&#xFF0C;<strong>via&#x4E0B;&#x4E00;&#x8DF3;&#x5FC5;&#x987B;&#x662F;&#x672C;&#x673A;&#x4E0A;&#x7684;&#x67D0;&#x4E00;&#x7F51;&#x6BB5;</strong><br><code>del</code>&#xFF1A;&#x5220;&#x9664;<br><code>flush</code>&#xFF1A;&#x6E05;&#x7A7A;&#x8DEF;&#x7531;  </p>
</blockquote>
</blockquote>
<blockquote>
<p><code>netns</code>&#xFF1A;&#x7F51;&#x7EDC;&#x7A7A;&#x95F4;(centos7)  </p>
<blockquote>
<p><code>list</code>&#xFF1A;&#x5217;&#x51FA;&#x6240;&#x6709;&#x7F51;&#x7EDC;&#x7A7A;&#x95F4;<br><code>add NAME</code>&#xFF1A;&#x6DFB;&#x52A0;&#x6307;&#x5B9A;&#x7F51;&#x7EDC;&#x7A7A;&#x95F4;<br><code>del NAME</code>&#xFF1A;&#x5220;&#x9664;<br><code>exec NAME COMMAND</code>&#xFF1A;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x7A7A;&#x95F4;&#x4E2D;&#x4F7F;&#x7528;COMMAND  </p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ip link [show|set] [DEV] [&#x53C2;&#x6570;]</span></span><br><span class="line">ip [-s] link show [eth0]                <span class="comment"># &#x663E;&#x793A;&#x7F51;&#x5361;&#x4FE1;&#x606F;</span></span><br><span class="line">ip link <span class="built_in">set</span> eth0 {up|down}              <span class="comment"># &#x5F00;&#x542F;&#x6216;&#x5173;&#x95ED;eth0&#x7F51;&#x5361;</span></span><br><span class="line">ip link <span class="built_in">set</span> eth0 multicast {on|off}     <span class="comment"># &#x5F00;&#x542F;&#x6216;&#x5173;&#x95ED;&#x591A;&#x64AD;&#x529F;&#x80FD;  </span></span><br><span class="line">ip link <span class="built_in">set</span> eth0 mtu 1000               <span class="comment"># &#x8BBE;&#x7F6E;&#x6700;&#x5927;&#x5305;&#x901A;&#x8FC7;&#x5927;&#x5C0F;&#x4E3A;1000bytes&#xFF0C;&#x9ED8;&#x8BA4;1500</span></span><br><span class="line">ip link <span class="built_in">set</span> eth0 name liu               <span class="comment"># &#x4FEE;&#x6539;&#x7F51;&#x5361;&#x540D;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5173;&#x95ED;&#x624D;&#x80FD;&#x4FEE;&#x6539;</span></span><br><span class="line">ip link <span class="built_in">set</span> eth0 address xxx            <span class="comment"># &#x4FEE;&#x6539;&#x7F51;&#x5361;MAC&#x5730;&#x5740;&#xFF0C;&#x9700;&#x7F51;&#x5361;&#x652F;&#x6301;&#xFF0C;&#x6700;&#x597D;&#x4E0D;&#x8981;&#x6539;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ip addr [show|add|del] [IP&#x53C2;&#x6570;] [dev &#x8BBE;&#x5907;&#x540D;] [&#x76F8;&#x5173;&#x53C2;&#x6570;]</span></span><br><span class="line">ip addr show [eth0]                                         <span class="comment"># &#x663E;&#x793A;&#x7F51;&#x5361;&#x5730;&#x5740;&#x4FE1;&#x606F; </span></span><br><span class="line">ip addr add 192.168.1.100/24 dev eth0 label eth0:1          <span class="comment"># &#x7ED9;eth0&#x6DFB;&#x52A0;IP&#x5E76;&#x8BBE;&#x7F6E;&#x522B;&#x540D;&#x4E3A;eth0:1&#xFF0C;&#x522B;&#x540D;&#x53EF;&#x7701;</span></span><br><span class="line">ip addr add 10.0.0.1 dev eth0 scope {global|link|host}      <span class="comment"># &#x4F5C;&#x7528;&#x57DF;&#xFF0C;global&#x5168;&#x5C40;, link&#x63A5;&#x53E3;, host&#x4EC5;&#x672C;&#x673A;</span></span><br><span class="line">ip addr del 192.168.1.100/24 dev eth0                       <span class="comment"># &#x5220;&#x9664;eth0&#x7684;IP</span></span><br><span class="line">ip addr flush dev eth1                                      <span class="comment"># &#x6E05;&#x9664;eth0&#x63A5;&#x53E3;&#x6240;&#x6709;IP</span></span><br><span class="line">ip addr flush to 10/8                                       <span class="comment"># &#x6E05;&#x7A7A;&#x524D;&#x7F00;&#x4E3A;10&#xFF0C;8&#x4F4D;&#x63A9;&#x7801;&#x7684;&#x6240;&#x6709;IP</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ip route [show|add|del] [IP&#x6216;&#x7F51;&#x57DF;] [via gateway] [dev &#x8BBE;&#x5907;] [src SRC_IP]</span></span><br><span class="line">ip route show                                               <span class="comment"># &#x663E;&#x793A;&#x8DEF;&#x7531;&#x8868;&#x4FE1;&#x606F;</span></span><br><span class="line">ip route add 192.168.10.0/24 via 192.168.5.100 dev eth0     <span class="comment"># &#x589E;&#x52A0;&#x53EF;&#x4EE5;&#x901A;&#x5F80;&#x5916;&#x90E8;&#x7684;&#x8DEF;&#x7531;</span></span><br><span class="line">ip route add default via 192.168.1.2 dev eth0               <span class="comment"># &#x6DFB;&#x52A0;&#x9ED8;&#x8BA4;&#x8DEF;&#x7531;</span></span><br><span class="line">ip route del 192.168.10.0/24                                <span class="comment"># &#x5220;&#x9664;&#x8DEF;&#x7531;</span></span><br><span class="line">ip route flush 192.168/24                                   <span class="comment"># &#x6E05;&#x7A7A;&#x8DEF;&#x7531;&#xFF0C;&#x4E5F;&#x53EF;&#x6307;&#x5B9A;&#x5177;&#x4F53;&#x6761;&#x76EE;</span></span><br></pre></td></tr></table></figure>
<h4 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a><font color="red">ssh</font></h4><p><code>ssh [OPTION] [USER@HOSTNAME] [COMMAND]</code><br>&#x57FA;&#x4E8E;ssh&#x534F;&#x8BAE;&#x65B9;&#x5F0F;&#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;</p>
<blockquote>
<p><code>-p PORT</code>&#xFF1A;&#x6307;&#x5B9A;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x7AEF;&#x53E3;&#xFF0C;&#x9ED8;&#x8BA4;22<br><code>-l USER</code>&#xFF1A;&#x6307;&#x5B9A;&#x7528;&#x6237;<br><code>-X</code>&#xFF1A;&#x652F;&#x6301;X11&#x8F6C;&#x53D1;&#xFF0C;&#x5982;&#x4F7F;&#x7528;<code>system-config-kickstart</code>&#x547D;&#x4EE4;&#x65F6;&#x4F7F;&#x7528;<br><code>-Y</code>&#xFF1A;&#x652F;&#x6301;&#x4FE1;&#x4EFB;&#x7684;X11&#x8F6C;&#x53D1;<br><code>-o</code>&#xFF1A;&#x8FDE;&#x63A5;&#x9009;&#x9879;&#xFF0C;&#x5982;<code>ServerAliveInterval</code>&#xFF0C;&#x4E5F;&#x53EF;&#x4FEE;&#x6539;<code>/etc/ssh/ssh_config</code>&#x6DFB;&#x52A0;&#x5BF9;&#x5E94;&#x9009;&#x9879;<br><code>-i</code>&#xFF1A;&#x6307;&#x5B9A;&#x79C1;&#x94A5;&#x8DEF;&#x5F84;</p>
</blockquote>
<p>&#x5728;Linux&#x4E0A;&#x7684;&#x5B9E;&#x73B0;&#x4EE5;OpenSSH&#x8F6F;&#x4EF6;&#x4E3A;&#x4E3B;&#xFF0C;&#x57FA;&#x672C;&#x6D41;&#x7A0B;&#x4E3A;&#xFF1A;  </p>
<p>&#x4E00;&#x3001;&#x4E3B;&#x673A;&#x8BA4;&#x8BC1;</p>
<ol>
<li>&#x7528;&#x6237;&#x5411;&#x8FDC;&#x7A0B;&#x53D1;&#x9001;&#x767B;&#x5F55;&#x8BF7;&#x6C42;</li>
<li>&#x8FDC;&#x7A0B;&#x5C06;&#x81EA;&#x5DF1;&#x7684;&#x516C;&#x94A5;&#x53D1;&#x7ED9;&#x7528;&#x6237;</li>
<li>&#x7528;&#x6237;&#x786E;&#x8BA4;&#x540E;&#xFF0C;&#x4FDD;&#x5B58;&#x5728;&#x7528;&#x6237;<code>~/.ssh/know_hosts</code>&#x4E2D;&#xFF0C;&#x4EE5;&#x540E;&#x767B;&#x5F55;&#x8BFB;&#x53D6;&#x6B64;&#x6587;&#x4EF6;&#x65E0;&#x9700;&#x518D;&#x4FDD;&#x5B58;</li>
<li>&#x53CC;&#x65B9;&#x534F;&#x5546;&#x4E00;&#x4E2A;&#x5BF9;&#x79F0;&#x52A0;&#x5BC6;&#x5BC6;&#x7801;&#xFF0C;&#x7528;&#x4E8E;&#x4E4B;&#x540E;&#x7684;&#x6570;&#x636E;&#x52A0;&#x5BC6;&#xFF0C;&#x9ED8;&#x8BA4;&#x6B64;&#x5BC6;&#x7801;&#x4F1A;&#x4E00;&#x76F4;&#x6539;&#x53D8;</li>
</ol>
<p>&#x4E8C;&#x3001;&#x8EAB;&#x4EFD;&#x8BA4;&#x8BC1;</p>
<ol>
<li>&#x57FA;&#x4E8E;&#x53E3;&#x4EE4;&#x8BA4;&#x8BC1;&#xFF1A;&#x7528;&#x6237;&#x540D;&#x5BC6;&#x7801;&#x4F7F;&#x7528;&#x53CC;&#x65B9;&#x534F;&#x5546;&#x7684;&#x5BC6;&#x7801;&#x52A0;&#x5BC6;&#x53D1;&#x9001;&#xFF0C;&#x786E;&#x8BA4;&#x8EAB;&#x4EFD;</li>
<li>&#x57FA;&#x4E8E;&#x5BC6;&#x94A5;&#x8BA4;&#x8BC1;&#xFF1A;&#x5C06;&#x672C;&#x5730;&#x516C;&#x94A5;&#x53D1;&#x7ED9;&#x4E3B;&#x673A;&#xFF0C;&#x4FDD;&#x5B58;&#x5728;&#x7279;&#x5B9A;&#x4F4D;&#x7F6E;&#xFF0C;&#x4EE5;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x5BC6;&#x7801;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;</li>
</ol>
<p><strong>&#x4F7F;&#x7528;&#x516C;&#x94A5;&#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#xFF0C;&#x65E0;&#x9700;&#x518D;&#x8F93;&#x5BC6;&#x7801;</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen              <span class="comment"># &#x751F;&#x6210;&#x516C;&#x94A5;&#x79C1;&#x94A5;&#xFF0C;&#x4FDD;&#x5B58;&#x5728; ~/.ssh &#x4E0B;&#x7684;id_rsa&#x548C;id_rsa.pub&#xFF0C;&#x5982;&#x5DF2;&#x751F;&#x6210;&#x8FC7;&#x6B64;&#x6B65;&#x65E0;&#x9700;&#x8FDB;&#x884C;</span></span><br><span class="line">ssh-copy-id USER@HOST   <span class="comment"># &#x5C06;&#x516C;&#x94A5;&#x53D1;&#x9001;&#x7ED9;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#xFF0C;&#x4FDD;&#x5B58;&#x5728;~/.ssh/authorized_keys&#x4E2D;&#xFF0C;&#x6B64;&#x6B65;&#x9700;&#x8F93;&#x5BC6;&#x7801;&#x786E;&#x8BA4;</span></span><br><span class="line">ssh USER@HOST           <span class="comment"># &#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#xFF0C;&#x6B64;&#x65F6;&#x65E0;&#x9700;&#x5BC6;&#x7801;&#xFF0C;&#x5982;&#x65E0;&#x6CD5;&#x767B;&#x5F55;&#x6B64;&#x9700;&#x4FEE;&#x6539;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x914D;&#x7F6E;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x4FEE;&#x6539;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;/etc/ssh/sshd_config&#x6587;&#x4EF6;&#xFF0C;&#x786E;&#x4FDD;&#x4EE5;&#x4E0B;&#x9009;&#x9879;&#x5F00;&#x542F;&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x542F;sshd&#x670D;&#x52A1;</span></span><br><span class="line">RSAAuthentication yes</span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line">AuthorizedKeysFile .ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x5C06;&#x516C;&#x94A5;&#x53D1;&#x9001;&#x7ED9;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x65B9;&#x5F0F;</span></span><br><span class="line">ssh USER@HOST <span class="string">&apos;mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys&apos;</span> &lt; ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure>
<p><em>&#x6CE8;&#xFF1A;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x79C1;&#x94A5;&#x6743;&#x9650;&#x4E3A;600&#xFF0C;&#x5982;&#x679C;&#x8FC7;&#x5927;&#x4E5F;&#x4F1A;&#x62A5;&#x201D;WARNING: UNPROTECTED PRIVATE KEY FILE&#x201D;&#xFF0C;&#x4FEE;&#x6539;&#x4E3A;600&#x5373;&#x53EF;</em></p>
<p><img src="/2016/05/21/&#x5E38;&#x7528;&#x547D;&#x4EE4;--&#x7F51;&#x7EDC;&#x7BA1;&#x7406;/ssh_first.png" alt="&#x9996;&#x6B21;&#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;" title="&#x9996;&#x6B21;&#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;"><br><img src="/2016/05/21/&#x5E38;&#x7528;&#x547D;&#x4EE4;--&#x7F51;&#x7EDC;&#x7BA1;&#x7406;/ssh_pub.png" alt="&#x516C;&#x94A5;&#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;" title="&#x516C;&#x94A5;&#x65B9;&#x5F0F;&#x767B;&#x5F55;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;"></p>
<p><strong>&#x7B80;&#x5355;&#x68B3;&#x7406;~/.ssh/&#x76EE;&#x5F55;&#x4E0B;&#x51E0;&#x4E2A;&#x6587;&#x4EF6;&#x5185;&#x5BB9;</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">authorized_keys   <span class="comment"># &#x5176;&#x5B83;&#x4E3B;&#x673A;&#x516C;&#x94A5;&#xFF0C;&#x8BB0;&#x5F55;&#x5728;&#x6B64;&#x7684;&#x4E3B;&#x673A;&#x53EF;&#x4EE5;&#x8FDC;&#x7A0B;&#x65E0;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x5230;&#x672C;&#x673A;</span></span><br><span class="line">id_rsa            <span class="comment"># &#x672C;&#x673A;&#x79C1;&#x94A5;</span></span><br><span class="line">id_rsa.pub        <span class="comment"># &#x672C;&#x673A;&#x516C;&#x94A5;</span></span><br><span class="line">know_hosts        <span class="comment"># &#x672C;&#x673A;&#x4FE1;&#x4EFB;&#x7684;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x5217;&#x8868;</span></span><br></pre></td></tr></table></figure>
<h4 id="scp"><a href="#scp" class="headerlink" title="scp"></a>scp</h4><p><code>scp [OPTION] SRC DST</code><br>&#x4E24;&#x53F0;&#x4E3B;&#x673A;&#x95F4;&#x7684;&#x52A0;&#x5BC6;&#x4F20;&#x8F93;&#xFF0C;&#x4F7F;&#x7528;ssh&#x534F;&#x8BAE;</p>
<blockquote>
<p><code>-P</code>&#xFF1A;&#x6307;&#x5B9A;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x7AEF;&#x53E3;&#xFF0C;&#x9ED8;&#x8BA4;22<br><code>-r</code>&#xFF1A;&#x590D;&#x5236;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x9012;&#x5F52;&#x590D;&#x5236;<br><code>-p</code>&#xFF1A;&#x4FDD;&#x7559;&#x539F;&#x6587;&#x4EF6;&#x6743;&#x9650;&#x53CA;&#x6700;&#x540E;&#x8BBF;&#x95EE;&#x548C;&#x4FEE;&#x6539;&#x65F6;&#x95F4;<br><code>-q</code>&#xFF1A;&#x9759;&#x9ED8;&#x6A21;&#x5F0F;<br><code>-v</code>&#xFF1A;&#x663E;&#x793A;&#x8FC7;&#x7A0B;&#x8BE6;&#x60C5;  </p>
</blockquote>
<p>&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x683C;&#x5F0F;&#xFF1A;<strong>&#x7528;&#x6237;&#x540D;@&#x4E3B;&#x673A;&#x540D;:&#x6587;&#x4EF6;&#x8DEF;&#x5F84;</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scp [-P1008] root@192.168.1.100:/data/xx.gz /tmp/       <span class="comment"># &#x4E0B;&#x8F7D;&#x6587;&#x4EF6;</span></span><br><span class="line">scp [-P1008] -r root@192.168.1.100:/data/aa/ /tmp/      <span class="comment"># &#x4E0B;&#x8F7D;&#x76EE;&#x5F55;</span></span><br><span class="line">scp [-P1008] /tmp/xx.gz root@192.168.1.100:/data/       <span class="comment"># &#x4E0A;&#x4F20;&#x6587;&#x4EF6;</span></span><br><span class="line">scp [-P1008] -r /tmp/aa/ root@192.168.1.100:/data/      <span class="comment"># &#x4E0A;&#x4F20;&#x76EE;&#x5F55;</span></span><br></pre></td></tr></table></figure>
<h4 id="sshpass"><a href="#sshpass" class="headerlink" title="sshpass"></a>sshpass</h4><p><code>sshpass -{p|f|e} {ssh|scp} USER@HOST</code><br>&#x5F53;&#x4E0D;&#x4F7F;&#x7528;&#x516C;&#x94A5;SSH&#x8FDE;&#x63A5;&#x65F6;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x4EA4;&#x4E92;&#x5F0F;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#xFF0C;&#x6B64;&#x547D;&#x4EE4;&#x53EF;&#x5B8C;&#x6210;&#x975E;&#x4EA4;&#x4E92;SSH&#x5BC6;&#x7801;&#x9A8C;&#x8BC1;&#xFF0C;&#x4F46;&#x9700;&#x624B;&#x52A8;&#x6E90;&#x7801;&#x5B89;&#x88C5;</p>
<blockquote>
<p><code>-p PASSWD</code>&#xFF1A;&#x6307;&#x5B9A;&#x5BC6;&#x7801;<br><code>-f FILE</code>&#xFF1A;&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x5BC6;&#x7801;<br><code>-e</code>&#xFF1A;&#x4ECE;&#x73AF;&#x5883;&#x53D8;&#x91CF; <code>SSHPASS</code> &#x4E2D;&#x8BFB;&#x53D6;&#x5BC6;&#x7801;&#xFF0C;&#x987B;&#x5148;&#x8BBE;&#x7F6E;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sshpass -p <span class="string">&apos;123123&apos;</span> ssh root@192.168.1.100          <span class="comment"># &#x6307;&#x5B9A;&#x5BC6;&#x7801;ssh&#x767B;&#x5F55;</span></span><br><span class="line">sshpass -f pwd.txt  ssh root@192.168.1.100          <span class="comment"># &#x4ECE;pwd.txt&#x6587;&#x4EF6;&#x8BFB;&#x53D6;&#x5BC6;&#x7801;</span></span><br><span class="line">sshpass -e scp -r ~/ab/ root@192.168.1.100:/root/   <span class="comment"># &#x4ECE;&#x73AF;&#x5883;&#x53D8;&#x91CF; SSPHPASS &#x4E2D;&#x8BFB;&#x53D6;</span></span><br></pre></td></tr></table></figure>
<h4 id="telnet"><a href="#telnet" class="headerlink" title="telnet"></a>telnet</h4><p><code>telnet [option] [ip[:port]]</code><br>&#x6267;&#x884C;telnet&#x6307;&#x4EE4;&#x5F00;&#x542F;&#x7EC8;&#x7AEF;&#x673A;&#x9636;&#x6BB5;&#x4F5C;&#x4E1A;&#xFF0C;&#x5E76;&#x767B;&#x5165;&#x8FDC;&#x7AEF;&#x4E3B;&#x673A;&#xFF0C;&#x9700;&#x624B;&#x52A8;&#x5B89;&#x88C5;</p>
<blockquote>
<p><code>-a</code>&#xFF1A;&#x5C1D;&#x8BD5;&#x81EA;&#x52A8;&#x767B;&#x5165;&#x8FDC;&#x7AEF;&#x7CFB;&#x7EDF;<br><code>-c</code>&#xFF1A;&#x4E0D;&#x8BFB;&#x53D6;&#x7528;&#x6237;&#x4E13;&#x5C5E;&#x76EE;&#x5F55;&#x91CC;&#x7684;.telnetrc&#x6587;&#x4EF6;<br><code>-d</code>&#xFF1A;&#x542F;&#x52A8;&#x6392;&#x9519;&#x6A21;&#x5F0F;<br><code>-k&lt;&#x57DF;&#x540D;&gt;</code>&#xFF1A;&#x4F7F;&#x7528;Kerberos&#x8BA4;&#x8BC1;&#x65F6;&#xFF0C;&#x52A0;&#x4E0A;&#x6B64;&#x53C2;&#x6570;&#x8BA9;&#x8FDC;&#x7AEF;&#x4E3B;&#x673A;&#x91C7;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x9886;&#x57DF;&#x540D;&#xFF0C;&#x800C;&#x975E;&#x8BE5;&#x4E3B;&#x673A;&#x7684;&#x57DF;&#x540D;<br><code>-l&lt;&#x7528;&#x6237;&#x540D;&#x79F0;&gt;</code>&#xFF1A;&#x6307;&#x5B9A;&#x8981;&#x767B;&#x5165;&#x8FDC;&#x7AEF;&#x4E3B;&#x673A;&#x7684;&#x7528;&#x6237;&#x540D;&#x79F0;<br><code>-S&lt;&#x670D;&#x52A1;&#x7C7B;&#x578B;&gt;</code>&#xFF1A;&#x8BBE;&#x7F6E;telnet&#x8FDE;&#x7EBF;&#x6240;&#x9700;&#x7684;IP TOS&#x4FE1;&#x606F;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet 172.16.60.1 22       <span class="comment"># &#x63A2;&#x6D4B;22&#x53F7;&#x7AEF;&#x53E3;&#x662F;&#x5426;&#x5F00;&#x542F;</span></span><br></pre></td></tr></table></figure>
<h4 id="nslookup"><a href="#nslookup" class="headerlink" title="nslookup"></a>nslookup</h4><p>&#x67E5;&#x770B;&#x57DF;&#x540D;&#x89E3;&#x6790;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup www.baidu.com</span><br></pre></td></tr></table></figure>
<h4 id="tcpdump"><a href="#tcpdump" class="headerlink" title="tcpdump"></a>tcpdump</h4><p>&#x6253;&#x5370;&#x6240;&#x6709;&#x7ECF;&#x8FC7;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x7684;&#x6570;&#x636E;&#x5305;&#x7684;&#x5934;&#x4FE1;&#x606F;&#xFF0C;&#x66F4;&#x5F3A;&#x5927;&#x7684;&#x5DE5;&#x5177;&#x53EF;&#x5B89;&#x88C5;<code>wireshark</code></p>
<blockquote>
<p><code>-i</code>&#xFF1A;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x63A5;&#x53E3;&#x4E0A;&#x83B7;&#x53D6;&#x5305;&#x4FE1;&#x606F;<br><code>-w FILE</code>&#xFF1A;&#x4FDD;&#x5B58;&#x7ED3;&#x679C;&#x5230;&#x6307;&#x5B9A;&#x6587;&#x4EF6;<br><code>-r FILE</code>&#xFF1A;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x5206;&#x6790;<br><code>-A</code>&#xFF1A;ASCII<br><code>-x</code>&#xFF1A;hex and ascii<br><code>-XX</code>&#xFF1A;<br><code>-v</code>&#xFF1A;<br><code>-vv</code>&#xFF1A;<br><code>-nn</code>&#xFF1A;&#x6BCF;&#x4E00;&#x4E2A;n&#x8868;&#x793A;&#x4E0D;&#x628A;ip&#x53CD;&#x89E3;&#x4E3A;&#x4E3B;&#x673A;&#x540D;, &#x7B2C;2&#x4E2A;n&#x8868;&#x793A;&#x4E0D;&#x628A;&#x7AEF;&#x53E3;&#x53CD;&#x89E3;&#x4E3A;&#x670D;&#x52A1;&#x540D;<br><code>expression</code>&#xFF1A;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5173;&#x952E;&#x5B57;&#x6709;type,direction,protocol&#xFF0C;&#x53EF;&#x4EE5;<code>man pcap-filter</code>&#xFF0C;&#x7EC4;&#x5408;&#x6709;and,or,not</p>
<blockquote>
<p><code>type</code>&#xFF1A;host,net,port,portrange<br><code>direction</code>&#xFF1A;src,dst,src or dst,src and dst<br><code>protocol</code>&#xFF1A;ether,ip,arp,tcp,udp,wlan</p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i eth0 [src|dst] host 192.168.0.1      <span class="comment"># &#x6293;&#x53D6;&#x6240;&#x6709;&#x7ECF;&#x8FC7;eth0&#xFF0C;&#x76EE;&#x7684;&#x6216;&#x6E90;&#x5730;&#x5740;&#x662F;192.168.0.1&#x7684;&#x7F51;&#x7EDC;&#x6570;&#x636E;</span></span><br><span class="line">tcpdump -i eth0 [src|dst] port 80               <span class="comment"># &#x6293;&#x53D6;&#x6240;&#x6709;&#x7ECF;&#x8FC7;eth0&#xFF0C;&#x76EE;&#x7684;&#x6216;&#x6E90;&#x7AEF;&#x53E3;&#x662F;80&#x7684;&#x7F51;&#x7EDC;&#x6570;&#x636E; </span></span><br><span class="line">tcpdump -i eth0 [src|dst] net 192.168           <span class="comment"># &#x7F51;&#x7EDC;&#x8FC7;&#x6EE4;</span></span><br><span class="line">tcpdump -i eth0 [src|dst] {arp|ip|tcp|icmp}     <span class="comment"># &#x534F;&#x8BAE;&#x8FC7;&#x6EE4;</span></span><br><span class="line">tcpdump -i eth2 tcp port 80 and dst host 172.16.60.1 and src host 192.168.0.1 -nn</span><br></pre></td></tr></table></figure>
<p><em>tcpdump&#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x4EE5;&#x540E;&#x518D;&#x6DFB;&#x52A0;</em></p>
<h4 id="dig"><a href="#dig" class="headerlink" title="dig"></a>dig</h4><p><code>dig [@global-server] [domain] [q-type] [q-class] {q-opt} {d-opt}</code><br>&#x5E38;&#x7528;dns&#x67E5;&#x8BE2;&#x547D;&#x4EE4;&#xFF0C;&#x7531;bind-utils&#x5305;&#x63D0;&#x4F9B;</p>
<p><em>&#x53C2;&#x6570;&#x8BF4;&#x660E;&#xFF1A;</em></p>
<blockquote>
<p><code>@global-server</code>&#xFF1A;&#x9ED8;&#x8BA4;&#x662F;&#x4EE5;/etc/resolv.conf&#x4F5C;&#x4E3A;DNS&#x67E5;&#x8BE2;&#x7684;&#x4E3B;&#x673A;&#xFF0C;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x586B;&#x5165;&#x5176;&#x5B83;DNS&#x4E3B;&#x673A;IP<br><code>domain</code>&#xFF1A;&#x8981;&#x67E5;&#x8BE2;&#x7684;&#x57DF;&#x540D;<br><code>q-type</code>&#xFF1A;&#x67E5;&#x8BE2;&#x8BB0;&#x5F55;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x4F8B;&#x5982;a&#x3001;any&#x3001;mx&#x3001;ns&#x3001;soa&#x3001;hinfo&#x3001;axfr&#x3001;txt&#x7B49;&#xFF0C;&#x9ED8;&#x8BA4;&#x67E5;&#x8BE2;a<br><code>q-class</code>&#xFF1A;&#x67E5;&#x8BE2;&#x7684;&#x7C7B;&#x522B;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;nslookup&#x4E2D;&#x7684;set class&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;in&#xFF08;Internet&#xFF09;<br><code>q-opt</code>&#xFF1A;&#x67E5;&#x8BE2;&#x9009;&#x9879;&#xFF0C;&#x53EF;&#x4EE5;&#x6709;&#x597D;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;</p>
<blockquote>
<p><code>-f file</code>&#xFF1A;&#x4E3A;&#x901A;&#x8FC7;&#x6279;&#x5904;&#x7406;&#x6587;&#x4EF6;&#x89E3;&#x6790;&#x591A;&#x4E2A;&#x5730;&#x5740;<br><code>-p port</code>&#xFF1A;&#x6307;&#x5B9A;&#x53E6;&#x4E00;&#x4E2A;&#x7AEF;&#x53E3;&#xFF08;&#x7F3A;&#x7701;&#x7684;DNS&#x7AEF;&#x53E3;&#x4E3A;53&#xFF09;</p>
</blockquote>
</blockquote>
<blockquote>
<p><code>d-opt</code>&#xFF1A;dig&#x7279;&#x6709;&#x7684;&#x9009;&#x9879;&#x3002;&#x4F7F;&#x7528;&#x65F6;&#x8981;&#x5728;&#x53C2;&#x6570;&#x524D;&#x52A0;&#x4E0A;&#x4E00;&#x4E2A;&#x201C;+&#x201D;&#x53F7;</p>
<blockquote>
<p><code>[no]+vc</code>&#xFF1A;&#x662F;&#x5426;&#x4F7F;&#x7528;TCP&#x534F;&#x8BAE;&#x67E5;&#x8BE2;<br><code>+time=###</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x8D85;&#x65F6;&#x65F6;&#x95F4;<br><code>+[no]trace</code>&#xFF1A;&#x662F;&#x5426;&#x4ECE;&#x6839;&#x57DF;&#x5F00;&#x59CB;&#x8DDF;&#x8E2A;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;<br><code>+[no]short</code>&#xFF1A;&#x662F;&#x5426;&#x7B80;&#x77ED;&#x663E;&#x793A;<br><code>+[no]recurse</code>&#xFF1A;&#x662F;&#x5426;&#x9012;&#x5F52;&#x89E3;&#x6790;</p>
</blockquote>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dig www.baidu.com </span><br><span class="line">dig +trace www.baidu.com 			# &#x4ECE;&#x6839;&#x57DF;&#x67E5;&#x8D77;</span><br><span class="line">dig www.baidu.com MX @10.1.0.1 		# &#x6307;&#x5B9A;dns&#x670D;&#x52A1;&#x5668;&#x67E5;&#x8BE2;MX&#x8BB0;&#x5F55;</span><br><span class="line">dig -x 156.25.25.25 				# &#x53CD;&#x5411;&#x89E3;&#x6790;</span><br></pre></td></tr></table></figure>
<h4 id="nslookup-1"><a href="#nslookup-1" class="headerlink" title="nslookup"></a>nslookup</h4><p><code>nslookup [-type=TYPE] domain [dns-server]</code><br>dns&#x67E5;&#x8BE2;&#xFF0C;&#x76F4;&#x63A5;&#x8F93;&#x5165;&#x547D;&#x4EE4;&#x8FDB;&#x5165;&#x4EA4;&#x4E92;&#x5F0F;&#x6A21;&#x5F0F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nslookup&gt;</span><br><span class="line">    server DNS_SERVER_IP:&#x4EE5;&#x6307;&#x5B9A;&#x7684;IP&#x4E3A;DNS&#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;</span><br><span class="line">    set q={A|SOA|NS|MX}:&#x8D44;&#x6E90;&#x8BB0;&#x5F55;&#x7C7B;&#x578B;</span><br><span class="line">    name:&#x67E5;&#x8BE2;&#x7684;&#x540D;&#x79F0;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup -type=mx baidu.com 8.8.8.8</span><br></pre></td></tr></table></figure>
<h4 id="fping"><a href="#fping" class="headerlink" title="fping"></a>fping</h4><p>&#x4E3B;&#x673A;&#x63A2;&#x6D3B;&#xFF0C;&#x9700;&#x624B;&#x52A8;&#x5B89;&#x88C5;</p>
<blockquote>
<p><code>-a</code>&#xFF1A;&#x53EA;&#x663E;&#x793A;&#x5B58;&#x6D3B;&#x4E3B;&#x673A;<br><code>-u</code>&#xFF1A;&#x53EA;&#x663E;&#x793A;&#x4E0D;&#x5B58;&#x6D3B;&#x4E3B;&#x673A;<br><code>-A</code>&#xFF1A;&#x4EE5;ip&#x65B9;&#x5F0F;&#x663E;&#x793A;&#x5B58;&#x6D3B;<br><code>-i</code>&#xFF1A;ping&#x5305;&#x4E4B;&#x95F4;&#x7684;&#x95F4;&#x9694;&#xFF0C;&#x9ED8;&#x8BA4;25ms<br><code>-c</code>&#xFF1A;ping&#x6BCF;&#x4E2A;&#x76EE;&#x6807;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;1<br><code>-b</code>&#xFF1A;ping &#x6570;&#x636E;&#x5305;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x9ED8;&#x8BA4;56<br><code>-S</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x6E90;ip<br><code>-f</code>&#xFF1A;&#x4ECE;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;ip&#x5217;&#x8868;<br><code>-s</code>&#xFF1A;&#x663E;&#x793A;&#x7EDF;&#x8BA1;&#x6570;&#x636E;<br><code>-g</code>&#xFF1A;&#x6307;&#x5B9A;ip&#x6BB5;&#xFF0C;&#x53EF;&#x4E3A;&#x8D77;&#x59CB;ip&#xFF0C;&#x4E5F;&#x53EF;&#x4E3A;ip/mask&#x5F62;&#x5F0F;<br><code>-t</code>&#xFF1A;&#x5355;&#x76EE;&#x6807;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x957F;&#xFF0C;&#x9ED8;&#x8BA4;500ms<br><code>-l</code>&#xFF1A;&#x5FAA;&#x73AF;ping<br><code>-e</code>&#xFF1A;&#x663E;&#x793A;&#x8FD4;&#x56DE;&#x65F6;&#x95F4;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fping -ae 10.0.0.1 10.0.0.2 10.0.0.3</span><br><span class="line">fping -g 192.168.1.0/24</span><br><span class="line">fping -g 192.168.1.1 192.168.1.254</span><br></pre></td></tr></table></figure>
<h4 id="hping"><a href="#hping" class="headerlink" title="hping"></a>hping</h4><p>&#x9AD8;&#x7EA7;&#x7684;&#x4E3B;&#x673A;&#x626B;&#x63CF;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x652F;&#x6301;TCP/IP&#x6570;&#x636E;&#x5305;&#x6784;&#x9020;&#x3001;&#x5206;&#x6790;&#xFF0C;&#x5728;&#x67D0;&#x4E9B;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E;&#x6216;&#x8FD0;&#x8425;&#x5546;&#x62E6;&#x622A;ICMP&#x6570;&#x636E;&#x5305;&#x65F6;&#xFF0C;&#x53EF;&#x7528;&#x6765;&#x626B;&#x63CF;&#x5B58;&#x6D3B;&#x4E3B;&#x673A;</p>
<blockquote>
<p><code>-p</code>&#xFF1A;&#x7AEF;&#x53E3;&#x53F7;<br><code>-S</code>&#xFF1A;&#x53D1;&#x9001;TCP&#x7684;SYN&#x5305;<br><code>-A</code>&#xFF1A;&#x53D1;&#x9001;TCP&#x7684;ACK&#x5305;<br><code>-a</code>&#xFF1A;&#x4F2A;&#x9020;&#x6E90;IP<br><code>--flood</code>&#xFF1A;&#x5C3D;&#x53EF;&#x80FD;&#x5FEB;&#x7684;&#x53D1;&#x9001;&#xFF0C;&#x614E;&#x7528;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hping 192.168.2.224 -p 80 -S</span><br><span class="line">hping 192.168.2.224 -p 80 -A</span><br><span class="line">hping 192.168.2.224 -p 80 -S -a 192.168.0.91</span><br></pre></td></tr></table></figure>
<h4 id="iftop"><a href="#iftop" class="headerlink" title="iftop"></a>iftop</h4><p><code>iftop [option]</code><br>&#x7F51;&#x7EDC;&#x6D41;&#x91CF;&#x76D1;&#x63A7;&#xFF0C;&#x53F3;&#x4FA7;&#x663E;&#x793A;&#x7684;3&#x4E2A;&#x6570;&#x636E;&#x4E3A;2s&#x3001;10s&#x3001;40s&#x7684;&#x5E73;&#x5747;&#x6D41;&#x91CF;&#x503C;&#xFF0C;&#x4E0B;&#x65B9;&#x663E;&#x793A;<code>cum</code>&#x5217;&#x8868;&#x793A;&#x4ECE;&#x8FD0;&#x884C;iftop&#x5230;&#x76EE;&#x524D;&#x7684;&#x53D1;&#x9001;&#x3001;&#x63A5;&#x6536;&#x548C;&#x603B;&#x6570;&#x636E;&#x6D41;&#x91CF;&#xFF0C;<code>peak</code>&#x5217;&#x8868;&#x793A;&#x53D1;&#x9001;&#x3001;&#x63A5;&#x6536;&#x4EE5;&#x53CA;&#x603B;&#x7684;&#x6D41;&#x91CF;&#x5CF0;&#x503C;</p>
<blockquote>
<p><code>-i</code>&#xFF1A;&#x6307;&#x5B9A;&#x9700;&#x8981;&#x76D1;&#x6D4B;&#x7684;&#x7F51;&#x5361;<br><code>-n</code>&#xFF1A;&#x5C06;&#x8F93;&#x51FA;&#x7684;&#x4E3B;&#x673A;&#x4FE1;&#x606F;&#x90FD;&#x901A;&#x8FC7;IP&#x663E;&#x793A;&#xFF0C;&#x4E0D;&#x8FDB;&#x884C;DNS&#x53CD;&#x5411;&#x89E3;&#x6790;<br><code>-p</code>&#xFF1A;&#x4EE5;&#x6DF7;&#x6742;&#x6A21;&#x5F0F;&#x8FD0;&#x884C;iftop&#xFF0C;&#x6B64;&#x65F6;iftop&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x7F51;&#x7EDC;&#x55C5;&#x63A2;&#x5668;&#x4F7F;&#x7528;<br><code>-N</code>&#xFF1A;&#x53EA;&#x663E;&#x793A;&#x8FDE;&#x63A5;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;&#x4E0D;&#x663E;&#x793A;&#x7AEF;&#x53E3;&#x5BF9;&#x5E94;&#x7684;&#x670D;&#x52A1;&#x540D;&#x79F0;<br><code>-P</code>&#xFF1A;&#x663E;&#x793A;&#x4E3B;&#x673A;&#x4EE5;&#x53CA;&#x7AEF;&#x53E3;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x975E;&#x5E38;&#x6709;&#x7528;<br><code>-F</code>&#xFF1A;&#x663E;&#x793A;&#x7279;&#x5B9A;&#x7F51;&#x6BB5;&#x7684;&#x7F51;&#x5361;&#x8FDB;&#x51FA;&#x6D41;&#x91CF;<br><code>-m</code>&#xFF1A;&#x8BBE;&#x7F6E;iftop&#x8F93;&#x51FA;&#x754C;&#x9762;&#x4E2D;&#x6700;&#x4E0A;&#x9762;&#x7684;&#x6D41;&#x91CF;&#x523B;&#x5EA6;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x6D41;&#x91CF;&#x523B;&#x5EA6;&#x5206;&#x4E94;&#x4E2A;&#x5927;&#x6BB5;&#x663E;&#x793A;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptop -PN -m 500m</span><br><span class="line">iftop &#x2013;F 192.168.12.0/24</span><br></pre></td></tr></table></figure>
<h4 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h4><p>&#x6279;&#x91CF;&#x4E3B;&#x673A;&#x626B;&#x63CF;&#x548C;&#x4E3B;&#x673A;&#x670D;&#x52A1;&#x626B;&#x63CF;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># ICMP&#x626B;&#x63CF;</span><br><span class="line">nmap -sP 192.168.0.1/24</span><br><span class="line">nmap -sP 192.168.0.*</span><br><span class="line">nmap -sP 192.168.0.1-255</span><br><span class="line"></span><br><span class="line"># TCP SYN&#x626B;&#x63CF;</span><br><span class="line">nmap -sS 192.168.2.224</span><br><span class="line">nmap -sS 192.168.2.230-255</span><br><span class="line">nmap -sS -p 0-30000 192.168.2.230-255</span><br><span class="line"></span><br><span class="line"># TCP Connect&#x626B;&#x63CF;</span><br><span class="line">nmap -sT 192.168.2.230-255</span><br><span class="line">nmap -sT -p 0-30000 192.168.2.230-255</span><br><span class="line"></span><br><span class="line"># UDP&#x626B;&#x63CF;</span><br><span class="line">nmap -sU 192.168.2.230-255</span><br><span class="line">nmap -sU -p 0-30000 192.168.2.230-255</span><br></pre></td></tr></table></figure>
<h4 id="nc"><a href="#nc" class="headerlink" title="nc"></a>nc</h4><p><code>nc [-hlnruz][-g&lt;&#x7F51;&#x5173;...&gt;][-G&lt;&#x6307;&#x5411;&#x5668;&#x6570;&#x76EE;&gt;][-i&lt;&#x5EF6;&#x8FDF;&#x79D2;&#x6570;&gt;][-o&lt;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&gt;][-p&lt;&#x901A;&#x4FE1;&#x7AEF;&#x53E3;&gt;][-s&lt;&#x6765;&#x6E90;&#x4F4D;&#x5740;&gt;][-v...][-w&lt;&#x8D85;&#x65F6;&#x79D2;&#x6570;&gt;][&#x4E3B;&#x673A;&#x540D;&#x79F0;][&#x901A;&#x4FE1;&#x7AEF;&#x53E3;...]</code></p>
<p>nc(netcat)&#x88AB;&#x79F0;&#x4E3A;&#x7F51;&#x7EDC;&#x5DE5;&#x5177;&#x7684;&#x745E;&#x58EB;&#x519B;&#x5200;&#xFF0C;&#x5176;&#x975E;&#x5E38;&#x8F7B;&#x5DE7;&#x4F46;&#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF01;&#x5E38;&#x5E38;&#x4F5C;&#x4E3A;&#x7F51;&#x7EDC;&#x5E94;&#x7528;&#x7684;Debug&#x5206;&#x6790;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x5404;&#x79CD;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;</p>
<blockquote>
<p><code>-g GW</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x8DEF;&#x7531;&#x5668;&#x8DC3;&#x7A0B;&#x901A;&#x4FE1;&#x7F51;&#x5173;&#xFF0C;&#x6700;&#x591A;&#x53EF;&#x8BBE;&#x7F6E;8&#x4E2A;<br><code>-G&lt;&#x6307;&#x5411;&#x5668;&#x6570;&#x76EE;&gt;</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x6765;&#x6E90;&#x8DEF;&#x7531;&#x6307;&#x5411;&#x5668;&#xFF0C;&#x5176;&#x6570;&#x503C;&#x4E3A;4&#x7684;&#x500D;&#x6570;<br><code>-i SEC</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x4EE5;&#x4FBF;&#x4F20;&#x9001;&#x4FE1;&#x606F;&#x53CA;&#x626B;&#x63CF;&#x901A;&#x4FE1;&#x7AEF;&#x53E3;<br><code>-l</code>&#xFF1A;&#x4F7F;&#x7528;&#x76D1;&#x542C;&#x6A21;&#x5F0F;&#xFF0C;&#x7BA1;&#x63A7;&#x4F20;&#x5165;&#x7684;&#x8D44;&#x6599;<br><code>-n</code>&#xFF1A;&#x76F4;&#x63A5;&#x4F7F;&#x7528;IP&#x5730;&#x5740;&#xFF0C;&#x800C;&#x4E0D;&#x901A;&#x8FC7;&#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;<br><code>-o FILE</code>&#xFF1A;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#xFF0C;&#x628A;&#x5F80;&#x6765;&#x4F20;&#x8F93;&#x7684;&#x6570;&#x636E;&#x4EE5;16&#x8FDB;&#x5236;&#x5B57;&#x7801;&#x503E;&#x5012;&#x6210;&#x8BE5;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;<br><code>-p PORT</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x672C;&#x5730;&#x4E3B;&#x673A;&#x4F7F;&#x7528;&#x7684;&#x901A;&#x4FE1;&#x7AEF;&#x53E3;<br><code>-r</code>&#xFF1A;&#x968F;&#x673A;&#x672C;&#x5730;&#x4E0E;&#x8FDC;&#x7AEF;&#x4E3B;&#x673A;&#x7684;&#x901A;&#x4FE1;&#x7AEF;&#x53E3;<br><code>-s IP</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x672C;&#x5730;&#x4E3B;&#x673A;&#x9001;&#x51FA;&#x6570;&#x636E;&#x5305;&#x7684;IP&#x5730;&#x5740;<br><code>-u</code>&#xFF1A;&#x4F7F;&#x7528;UDP&#x4F20;&#x8F93;&#x534F;&#x8BAE;<br><code>-v</code>&#xFF1A;&#x663E;&#x793A;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#xFF0C;<code>-vv</code>&#x66F4;&#x663E;&#x793A;&#x8FC7;&#x7A0B;<br><code>-w SEC</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x7B49;&#x5F85;&#x8FDE;&#x7EBF;&#x7684;&#x65F6;&#x95F4;<br><code>-z</code>&#xFF1A;&#x4F7F;&#x7528;0&#x8F93;&#x5165;/&#x8F93;&#x51FA;&#x6A21;&#x5F0F;&#xFF0C;&#x53EA;&#x5728;&#x626B;&#x63CF;&#x901A;&#x4FE1;&#x7AEF;&#x53E3;&#x65F6;&#x4F7F;&#x7528;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># &#x7AEF;&#x53E3;&#x626B;&#x63CF;</span><br><span class="line">nc -zv 10.0.0.1 80</span><br><span class="line">nc -z -w 1 10.0.0.1 1-1000</span><br><span class="line"></span><br><span class="line"># &#x804A;&#x5929;&#xFF0C;</span><br><span class="line">nc -l 1222 	# &#x4E3B;&#x673A;A&#x4E0A;&#x76D1;&#x542C;1222&#x7AEF;&#x53E3;</span><br><span class="line">nc IP 1222 	# &#x4E3B;&#x673A;B&#x4E0A;&#x8FDE;&#x63A5;&#x4E3B;&#x673A;B&#x7684;1222&#x7AEF;&#x53E3;&#xFF0C;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x53D1;&#x9001;&#x4FE1;&#x606F;</span><br><span class="line"></span><br><span class="line"># &#x4F20;&#x9001;&#x6587;&#x4EF6;&#xFF0C;A-&gt;B&#xFF0C;&#x53EF;&#x53CD;&#x8FC7;&#x6765;</span><br><span class="line">nc -l 1222 &gt; a.log 		# B&#x4E0A;&#x76D1;&#x542C;</span><br><span class="line">nc IP 1222 &lt; a.log 		# A&#x4E0A;&#x4F20;&#x9001;</span><br><span class="line"></span><br><span class="line"># &#x4F20;&#x9001;&#x76EE;&#x5F55;dir A-&gt;B</span><br><span class="line">nc -l 1222 | tar zxf -</span><br><span class="line">tar zcf - dir | nc IP 1222</span><br><span class="line"></span><br><span class="line"># web&#x5BA2;&#x6237;&#x7AEF;</span><br><span class="line">nc IP PORT</span><br><span class="line">GET /index.html HTTP/1.1</span><br><span class="line">Host: XXX</span><br><span class="line">User-Agent:</span><br><span class="line">....</span><br><span class="line"></span><br><span class="line"># &#x626B;&#x63CF;&#x5668;</span><br><span class="line">nc -v -w 1 IP -z 1-1024</span><br></pre></td></tr></table></figure>
<h4 id="iperf3"><a href="#iperf3" class="headerlink" title="iperf3"></a>iperf3</h4><p>&#x57FA;&#x4E8E;TCP/IP&#x548C;UDP/IP&#x7684;&#x7F51;&#x7EDC;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x6D4B;&#x91CF;&#x7F51;&#x7EDC;&#x5E26;&#x5BBD;&#x548C;&#x7F51;&#x7EDC;&#x8D28;&#x91CF;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x7F51;&#x7EDC;&#x5EF6;&#x8FDF;&#x6296;&#x52A8;&#x3001;&#x6570;&#x636E;&#x5305;&#x4E22;&#x5931;&#x7387;&#x3001;&#x6700;&#x5927;&#x4F20;&#x8F93;&#x5355;&#x5143;&#x7B49;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#xFF0C;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x4F7F;&#x7528;</p>
<p><em>1. &#x670D;&#x52A1;&#x7AEF;</em></p>
<blockquote>
<p><code>-s</code>&#xFF1A;&#x5C06;iperf&#x4EE5;server&#x6A21;&#x5F0F;&#x542F;&#x52A8;&#xFF0C;&#x9ED8;&#x8BA4;&#x542F;&#x52A8;&#x7684;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x4E3A;5201<br><code>-p</code>&#xFF1A;&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x76D1;&#x542C;&#x7AEF;&#x53E3;<br><code>-D</code>&#xFF1A;&#x5C06;iperf&#x4F5C;&#x4E3A;&#x540E;&#x53F0;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -s -p 9527</span><br></pre></td></tr></table></figure>
<p><em>2. &#x5BA2;&#x6237;&#x7AEF;</em></p>
<blockquote>
<p><code>-c</code>&#xFF1A;&#x5C06;iperf&#x4EE5;client&#x6A21;&#x5F0F;&#x542F;&#x52A8;<br><code>-u</code>&#xFF1A;&#x6307;&#x5B9A;&#x4F7F;&#x7528;UDP&#x534F;&#x8BAE;<br><code>-i</code>&#xFF1A;&#x6307;&#x5B9A;&#x6BCF;&#x6B21;&#x62A5;&#x544A;&#x4E4B;&#x95F4;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x9ED8;&#x8BA4;1s<br><code>-F</code>&#xFF1A;&#x6587;&#x4EF6;&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x6D41;&#x8FDB;&#x884C;&#x5E26;&#x5BBD;&#x6D4B;&#x8BD5;<br><code>-f [k|m|g|K|M|G]</code>&#xFF1A;&#x6307;&#x5B9A;&#x5E26;&#x5BBD;&#x8F93;&#x51FA;&#x5355;&#x4F4D;<br><code>-p</code>&#xFF1A;&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x76D1;&#x542C;&#x7AEF;&#x53E3;<br><code>-b [K|M|G]</code>&#xFF1A;&#x6307;&#x5B9A;UDP&#x6A21;&#x5F0F;&#x4F7F;&#x7528;&#x7684;&#x5E26;&#x5BBD;&#xFF0C;&#x5355;&#x4F4D;bits/sec&#x3002;&#x6B64;&#x9009;&#x9879;&#x4E0E;&#x201C;-u&#x201D;&#x9009;&#x9879;&#x76F8;&#x5173;&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x662F;1 Mbit/sec<br><code>-t</code>&#xFF1A;&#x6307;&#x5B9A;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x5305;&#x7684;&#x603B;&#x65F6;&#x95F4;&#x3002;iperf&#x5C06;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x5185;&#xFF0C;&#x91CD;&#x590D;&#x53D1;&#x9001;&#x6307;&#x5B9A;&#x957F;&#x5EA6;&#x7684;&#x6570;&#x636E;&#x5305;&#x3002;&#x9ED8;&#x8BA4;&#x662F;10&#x79D2;&#x949F;<br><code>-n [K|M|G]</code>&#xFF1A;&#x6307;&#x5B9A;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x5305;&#x7684;&#x5B57;&#x8282;&#x6570;<br><code>-l</code>&#xFF1A;&#x6307;&#x5B9A;&#x8BFB;&#x5199;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x957F;&#x5EA6;&#x3002;TCP&#x65B9;&#x5F0F;&#x9ED8;&#x8BA4;&#x5927;&#x5C0F;&#x4E3A;8KB&#xFF0C;UDP&#x65B9;&#x5F0F;&#x9ED8;&#x8BA4;&#x5927;&#x5C0F;&#x4E3A;1470&#x5B57;&#x8282;<br><code>-P</code>&#xFF1A;&#x6307;&#x5B9A;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x4E4B;&#x95F4;&#x4F7F;&#x7528;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x3002;&#x9ED8;&#x8BA4;&#x662F;1&#x4E2A;&#x7EBF;&#x7A0B;&#x3002;&#x9700;&#x8981;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x6B64;&#x53C2;&#x6570;<br><code>-R</code>&#xFF1A;&#x5207;&#x6362;&#x6570;&#x636E;&#x53D1;&#x9001;&#x63A5;&#x6536;&#x6A21;&#x5F0F;&#xFF0C;&#x4F8B;&#x5982;&#x9ED8;&#x8BA4;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x63A5;&#x6536;&#xFF0C;&#x8BBE;&#x7F6E;&#x6B64;&#x53C2;&#x6570;&#x540E;&#xFF0C;&#x6570;&#x636E;&#x6D41;&#x5411;&#x53D8;&#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x6536;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53D1;&#x9001;<br><code>-w</code>&#xFF1A;&#x6307;&#x5B9A;&#x5957;&#x63A5;&#x5B57;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#xFF0C;&#x5728;TCP&#x65B9;&#x5F0F;&#x4E0B;&#xFF0C;&#x6B64;&#x8BBE;&#x7F6E;&#x4E3A;TCP&#x7A97;&#x53E3;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x5728;UDP&#x65B9;&#x5F0F;&#x4E0B;&#xFF0C;&#x6B64;&#x8BBE;&#x7F6E;&#x4E3A;&#x63A5;&#x53D7;UDP&#x6570;&#x636E;&#x5305;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#xFF0C;&#x7528;&#x6765;&#x9650;&#x5236;&#x53EF;&#x4EE5;&#x63A5;&#x6536;&#x6570;&#x636E;&#x5305;&#x7684;&#x6700;&#x5927;&#x503C;<br><code>-B</code>&#xFF1A;&#x7528;&#x6765;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;&#x4E3B;&#x673A;&#x5730;&#x5740;&#x6216;&#x63A5;&#x53E3;&#xFF0C;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x4EC5;&#x7528;&#x4E8E;&#x5177;&#x6709;&#x591A;&#x4E2A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x7684;&#x4E3B;&#x673A;&#x3002;&#x5728;UDP&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x6B64;&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x7ED1;&#x5B9A;&#x548C;&#x52A0;&#x5165;&#x4E00;&#x4E2A;&#x591A;&#x64AD;&#x7EC4;<br><code>-M</code>&#xFF1A;&#x8BBE;&#x7F6E;TCP&#x6700;&#x5927;&#x4FE1;&#x606F;&#x6BB5;&#x7684;&#x503C;<br><code>-N</code>&#xFF1A;&#x8BBE;&#x7F6E;TCP&#x65E0;&#x5EF6;&#x65F6;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c 192.168.1.1 </span><br><span class="line">iperf3 -c 192.168.1.1 &#x2013;n 100M</span><br><span class="line">iperf3 -c 192.168.1.1 -F test.tar.gz</span><br><span class="line">iperf3 -c 192.168.1.1 -i 2 -t 20</span><br></pre></td></tr></table></figure>
<p>&#x5982;&#x4E0B;&#x662F;&#x4E00;&#x4E2A;&#x5343;&#x5146;&#x5E26;&#x5BBD;&#x7684;&#x793A;&#x4F8B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># ./iperf3.sh -c 10.104.199.181</span><br><span class="line">Connecting to host 10.104.199.181, port 5201</span><br><span class="line">[  4] local 10.104.199.180 port 34380 connected to 10.104.199.181 port 5201</span><br><span class="line">[ ID] Interval           Transfer     Bandwidth       Retr  Cwnd</span><br><span class="line">[  4]   0.00-1.00   sec   113 MBytes   948 Mbits/sec    0    447 KBytes</span><br><span class="line">[  4]   1.00-2.00   sec   113 MBytes   945 Mbits/sec    0    469 KBytes</span><br><span class="line">[  4]   2.00-3.00   sec   112 MBytes   939 Mbits/sec    0    492 KBytes</span><br><span class="line">[  4]   3.00-4.00   sec   112 MBytes   942 Mbits/sec    0    519 KBytes</span><br><span class="line">[  4]   4.00-5.00   sec   112 MBytes   942 Mbits/sec    0    526 KBytes</span><br><span class="line">[  4]   5.00-6.00   sec   112 MBytes   942 Mbits/sec    0    535 KBytes</span><br><span class="line">[  4]   6.00-7.00   sec   112 MBytes   938 Mbits/sec    0    539 KBytes</span><br><span class="line">[  4]   7.00-8.00   sec   112 MBytes   942 Mbits/sec    0    540 KBytes</span><br><span class="line">[  4]   8.00-9.00   sec   112 MBytes   942 Mbits/sec    0    540 KBytes</span><br><span class="line">[  4]   9.00-10.00  sec   112 MBytes   942 Mbits/sec    0    540 KBytes</span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">[ ID] Interval           Transfer     Bandwidth       Retr</span><br><span class="line">[  4]   0.00-10.00  sec  1.10 GBytes   943 Mbits/sec    0             sender</span><br><span class="line">[  4]   0.00-10.00  sec  1.10 GBytes   942 Mbits/sec                  receiver</span><br><span class="line"></span><br><span class="line">iperf Done.</span><br></pre></td></tr></table></figure>
<h4 id="mtr"><a href="#mtr" class="headerlink" title="mtr"></a>mtr</h4><p>traceroute&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;UDP&#x6570;&#x636E;&#x5305;&#x63A2;&#x6D4B;&#xFF0C;&#x800C;mtr&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;ICMP&#x62A5;&#x6587;&#x63A2;&#x6D4B;&#xFF0C;ICMP&#x5728;&#x67D0;&#x4E9B;&#x8DEF;&#x7531;&#x8282;&#x70B9;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x8981;&#x6BD4;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x5305;&#x4F4E;&#xFF0C;&#x6240;&#x4EE5;&#x6D4B;&#x8BD5;&#x5F97;&#x5230;&#x7684;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x4F4E;&#x4E8E;&#x5B9E;&#x9645;&#x60C5;&#x51B5;</p>
<h4 id="axel-1"><a href="#axel-1" class="headerlink" title="axel"></a>axel</h4><p>&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;&#x5DE5;&#x5177;&#xFF08;A light download accelerator for Linux&#xFF09;&#xFF0C;&#x901A;&#x8FC7;&#x5EFA;&#x7ACB;&#x591A;&#x8FDE;&#x63A5;&#xFF0C;&#x80FD;&#x591F;&#x5927;&#x5E45;&#x5EA6;&#x63D0;&#x9AD8;&#x4E0B;&#x8F7D;&#x901F;&#x5EA6;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x5F00;&#x6302;&#x4E0B;&#x8F7D;&#x5927;&#x6587;&#x4EF6;&#xFF0C;&#x6BD4;wget&#x5FEB;&#x591A;&#x4E86;&#xFF0C;&#x5E76;&#x4E14;&#x9ED8;&#x8BA4;&#x5C31;&#x652F;&#x6301;&#x65AD;&#x70B9;&#x4E0B;&#x8F7D;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axel -n 20 URL 	# &#x5F00;&#x542F;20&#x4E2A;&#x7EBF;&#x7A0B;&#x4E0B;&#x8F7D;</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[常用命令--系统管理]]></title>
      <url>http://liu2lin600.github.io/2016/05/21/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4--%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/</url>
      <content type="html"><![CDATA[<p>&#x5BF9;&#x4E8E;&#x7CFB;&#x7EDF;&#x76F8;&#x5173;&#x7684;&#x64CD;&#x4F5C;&#x547D;&#x4EE4;<br><a id="more"></a></p>
<h4 id="date"><a href="#date" class="headerlink" title="date"></a>date</h4><p><code>date [OPTION] [+FORMAT]</code><br>&#x663E;&#x793A;&#x6216;&#x8BBE;&#x7F6E;&#x7CFB;&#x7EDF;&#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;</p>
<blockquote>
<p><code>-d STR</code>&#xFF1A;&#x663E;&#x793A;&#x5B57;&#x7B26;&#x4E32;&#x6240;&#x6307;&#x7684;&#x65E5;&#x671F;&#x4E0E;&#x65F6;&#x95F4;&#xFF0C;&#x5982;&#x201D;+1 day&#x201D;,&#x2019;-2 month&#x2019;&#x7B49;<br><code>-s STR</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;<br><code>-R</code>&#xFF1A;&#x53EF;&#x663E;&#x793A;&#x65F6;&#x533A;<br><code>-u</code>&#xFF1A;&#x663E;&#x793A;UTC&#x65F6;&#x95F4;</p>
</blockquote>
<p>&#x65F6;&#x671F;&#x663E;&#x793A;&#x683C;&#x5F0F;&#x6709;&#xFF1A;</p>
<ul>
<li><code>%H</code>&#xFF1A;&#x5C0F;&#x65F6;&#xFF0C;24&#x5C0F;&#x65F6;&#x5236;&#xFF08;00~23&#xFF09; </li>
<li><code>%I</code>&#xFF1A;&#x5C0F;&#x65F6;&#xFF0C;12&#x5C0F;&#x65F6;&#x5236;&#xFF08;01~12&#xFF09; </li>
<li><code>%k</code>&#xFF1A;&#x5C0F;&#x65F6;&#xFF0C;24&#x5C0F;&#x65F6;&#x5236;&#xFF08;0~23&#xFF09; </li>
<li><code>%l</code>&#xFF1A;&#x5C0F;&#x65F6;&#xFF0C;12&#x5C0F;&#x65F6;&#x5236;&#xFF08;1~12&#xFF09; </li>
<li><code>%M</code>&#xFF1A;&#x5206;&#x949F;&#xFF08;00~59&#xFF09; </li>
<li><code>%p</code>&#xFF1A;&#x663E;&#x793A;&#x51FA;AM&#x6216;PM </li>
<li><code>%r</code>&#xFF1A;&#x663E;&#x793A;&#x65F6;&#x95F4;&#xFF0C;12&#x5C0F;&#x65F6;&#x5236;&#xFF08;hh:mm:ss %p&#xFF09; </li>
<li><code>%s</code>&#xFF1A;&#x4ECE;1970&#x5E74;1&#x6708;1&#x65E5;00:00:00&#x5230;&#x76EE;&#x524D;&#x7ECF;&#x5386;&#x7684;&#x79D2;&#x6570; </li>
<li><code>%S</code>&#xFF1A;&#x663E;&#x793A;&#x79D2;&#xFF08;00~59&#xFF09; </li>
<li><code>%T</code>&#xFF1A;&#x663E;&#x793A;&#x65F6;&#x95F4;&#xFF0C;24&#x5C0F;&#x65F6;&#x5236;&#xFF08;hh:mm:ss&#xFF09; </li>
<li><code>%X</code>&#xFF1A;&#x663E;&#x793A;&#x65F6;&#x95F4;&#x7684;&#x683C;&#x5F0F;&#xFF08;%H:%M:%S&#xFF09; </li>
<li><code>%Z</code>&#xFF1A;&#x663E;&#x793A;&#x65F6;&#x533A;&#xFF0C;&#x65E5;&#x671F;&#x57DF;&#xFF08;CST&#xFF09; </li>
<li><code>%a</code>&#xFF1A;&#x661F;&#x671F;&#x7684;&#x7B80;&#x79F0;&#xFF08;Sun~Sat&#xFF09; </li>
<li><code>%A</code>&#xFF1A;&#x661F;&#x671F;&#x7684;&#x5168;&#x79F0;&#xFF08;Sunday~Saturday&#xFF09; </li>
<li><code>%h</code>,<code>%b</code>&#xFF1A;&#x6708;&#x7684;&#x7B80;&#x79F0;&#xFF08;Jan~Dec&#xFF09; </li>
<li><code>%B</code>&#xFF1A;&#x6708;&#x7684;&#x5168;&#x79F0;&#xFF08;January~December&#xFF09; </li>
<li><code>%c</code>&#xFF1A;&#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;&#xFF08;Tue Nov 20 14:12:58 2012&#xFF09; </li>
<li><code>%d</code>&#xFF1A;&#x4E00;&#x4E2A;&#x6708;&#x7684;&#x7B2C;&#x51E0;&#x5929;&#xFF08;01~31&#xFF09; </li>
<li><code>%x</code>,<code>%D</code> &#x65E5;&#x671F;&#xFF08;mm/dd/yy&#xFF09; </li>
<li><code>%j</code>&#xFF1A;&#x4E00;&#x5E74;&#x7684;&#x7B2C;&#x51E0;&#x5929;&#xFF08;001~366&#xFF09; </li>
<li><code>%m</code>&#xFF1A;&#x6708;&#x4EFD;&#xFF08;01~12&#xFF09; </li>
<li><code>%w</code>&#xFF1A;&#x4E00;&#x4E2A;&#x661F;&#x671F;&#x7684;&#x7B2C;&#x51E0;&#x5929;&#xFF08;0&#x4EE3;&#x8868;&#x661F;&#x671F;&#x5929;&#xFF09; </li>
<li><code>%W</code>&#xFF1A;&#x4E00;&#x5E74;&#x7684;&#x7B2C;&#x51E0;&#x4E2A;&#x661F;&#x671F;&#xFF08;00~53&#xFF0C;&#x661F;&#x671F;&#x4E00;&#x4E3A;&#x7B2C;&#x4E00;&#x5929;&#xFF09; </li>
<li><code>%y</code>&#xFF1A;&#x5E74;&#x7684;&#x6700;&#x540E;&#x4E24;&#x4E2A;&#x6570;&#x5B57;&#xFF08;1999&#x5219;&#x662F;99&#xFF09; </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">date +%F                                <span class="comment"># &#x663E;&#x793A;&#x5F53;&#x524D;&#x5E74;&#x6708;&#x65E5;</span></span><br><span class="line">date -d @1487672155                     <span class="comment"># &#x67E5;&#x770B;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x6233;&#x7684;&#x65E5;&#x671F;</span></span><br><span class="line">date -d <span class="string">&quot;-2 day&quot;</span> +<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>   <span class="comment"># &#x67E5;&#x770B;2&#x5929;&#x524D;&#x7684;&#x65E5;&#x671F;</span></span><br><span class="line">date -s 20160613                        <span class="comment"># &#x8BBE;&#x7F6E;&#x6210;20160613&#xFF0C;&#x540C;&#x65F6;&#x65F6;&#x95F4;&#x8BBE;&#x4E3A; 00:00:00 </span></span><br><span class="line">date -s 05:41:01                        <span class="comment"># &#x8BBE;&#x7F6E;&#x5177;&#x4F53;&#x65F6;&#x95F4;&#xFF0C;&#x4E0D;&#x4F1A;&#x5BF9;&#x65E5;&#x671F;&#x505A;&#x66F4;&#x6539; </span></span><br><span class="line">date -s <span class="string">&quot;01:01:01 2016-05-23&quot;</span>           <span class="comment"># &#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x5168;&#x90E8;&#x65F6;&#x95F4; </span></span><br><span class="line">date -s <span class="string">&quot;01:01:01 20160523&quot;</span>             <span class="comment">#  </span></span><br><span class="line">date -s <span class="string">&quot;2016-05-23 01:01:01&quot;</span>           <span class="comment">#  </span></span><br><span class="line">date -s <span class="string">&quot;20160523 01:01:01&quot;</span>             <span class="comment"># </span></span><br><span class="line">date -d <span class="string">&apos;20160512&apos;</span> +%s                  <span class="comment"># &#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x6233;</span></span><br></pre></td></tr></table></figure>
<h4 id="hwclock"><a href="#hwclock" class="headerlink" title="hwclock"></a>hwclock</h4><p><code>clock</code>&#x4E3A;&#x522B;&#x540D;</p>
<blockquote>
<p><code>-r</code>&#xFF1A;&#x663E;&#x793A;&#x786C;&#x4EF6;&#x65F6;&#x95F4;<br><code>-h</code>&#xFF1A;&#x67E5;&#x770B;&#x5E2E;&#x52A9;<br><code>-s|--hctosys</code>&#xFF1A;&#x4EE5;&#x786C;&#x4EF6;&#x65F6;&#x949F;&#x4E3A;&#x51C6;&#xFF0C;&#x6821;&#x6B63;&#x7CFB;&#x7EDF;&#x65F6;&#x949F;<br><code>-w|--systohc</code>&#xFF1A;&#x4EE5;&#x7CFB;&#x7EDF;&#x65F6;&#x949F;&#x4E3A;&#x51C6;&#xFF0C;&#x6821;&#x6B63;&#x786C;&#x4EF6;&#x65F6;&#x949F;</p>
</blockquote>
<h4 id="at"><a href="#at" class="headerlink" title="at"></a>at</h4><p><code>at [OPTION] TIME</code><br>&#x5728;&#x672A;&#x6765;&#x67D0;&#x65F6;&#x523B;&#x4E00;&#x6B21;&#x6027;&#x6267;&#x884C;&#x67D0;&#x4E9B;&#x4EFB;&#x52A1;</p>
<blockquote>
<p><strong>OPTION&#xFF1A;</strong><br><code>-l</code>&#xFF1A;&#x67E5;&#x770B;&#x4F5C;&#x4E1A;&#x961F;&#x5217;&#xFF0C;&#x7B49;&#x540C;&#x4E8E;<code>atq</code>&#x547D;&#x4EE4;<br><code>-f</code> FILE&#xFF1A;&#x4ECE;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x4F5C;&#x4E1A;&#xFF0C;&#x4E0D;&#x7528;&#x4EA4;&#x4E92;&#x8F93;&#x5165;<br><code>-d</code>&#xFF1A;&#x5220;&#x9664;&#x6307;&#x5B9A;&#x4F5C;&#x4E1A;&#xFF0C;&#x7B49;&#x540C;&#x4E8E;<code>atrm</code>&#x547D;&#x4EE4;<br><code>-c</code>&#xFF1A;&#x67E5;&#x770B;&#x6307;&#x5B9A;&#x4F5C;&#x4E1A;&#x5185;&#x5BB9;<br><code>-q</code> QUEUE&#xFF1A;&#x6307;&#x660E;&#x961F;&#x5217;<br><em>&#x4F5C;&#x4E1A;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x4EE5;&#x90AE;&#x4EF6;&#x53D1;&#x9001;&#x7ED9;&#x63D0;&#x4EA4;&#x4F5C;&#x4E1A;&#x7684;&#x7528;&#x6237;</em>  </p>
</blockquote>
<blockquote>
<p><strong>TIME&#xFF1A;</strong><br>HH:MM[YYYY-mm-dd]<br>noon,midnight,teatime,tomorrow<br>now+#UNIT&#xFF1A;now+3min (hours,days,weeks)</p>
</blockquote>
<p><strong>at&#x4F5C;&#x4E1A;&#x6709;&#x961F;&#x5217;&#xFF0C;&#x7528;&#x5355;&#x5B57;&#x6BCD;&#x8868;&#x793A;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;a&#x961F;&#x5217;</strong></p>
<h4 id="mail"><a href="#mail" class="headerlink" title="mail"></a>mail</h4><p><code>mail [OPTION] TO_ADDR</code><br>&#x90AE;&#x4EF6;&#x53D1;&#x9001;&#x63A5;&#x6536;&#xFF0C;&#x5B9E;&#x9645;&#x4E3A;mailx&#x7A0B;&#x5E8F;</p>
<blockquote>
<p><code>-s</code>&#xFF1A;&#x6307;&#x5B9A;&#x4E3B;&#x9898;<br><code>-f</code>&#xFF1A;&#x8BFB;&#x53D6;&#x6307;&#x5B9A;&#x90AE;&#x4EF6;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x90AE;&#x4EF6;    </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mail -s <span class="string">&apos;xxxx&apos;</span> admin@liu.com            <span class="comment"># &#x56DE;&#x8F66;&#x540E;&#x8F93;&#x5165;&#x5185;&#x5BB9;&#xFF0C;ctrl+d&#x7ED3;&#x675F;&#x5E76;&#x53D1;&#x9001;   </span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&apos;xxx&apos;</span> | mail admin@liu.com </span><br><span class="line">mail -s <span class="string">&apos;xxx&apos;</span> admin@liu.com &lt; file.txt</span><br></pre></td></tr></table></figure>
<p><strong>&#x4F7F;&#x7528;&#x5916;&#x90E8;smtp&#x53D1;&#x9001;&#x90AE;&#x4EF6;</strong></p>
<ol>
<li>&#x5173;&#x95ED;sendmail&#x6216;&#x8005;postfix&#x5982;&#x679C;&#x6709;&#x5F00;&#x542F;&#x7684;&#x8BDD;</li>
<li>&#x5B89;&#x88C5;mailx&#x5982;&#x679C;&#x6CA1;&#x5B89;&#x88C5;&#x7684;&#x8BDD;</li>
<li><p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># mv /etc/mail.rc{,.abk}</span><br><span class="line"># vim /etc/mail.rc</span><br><span class="line"></span><br><span class="line">    set from=liu@163.com</span><br><span class="line">    set smtp=smtp.163.com</span><br><span class="line">    set smtp-auth-user=liu@163.com</span><br><span class="line">    set smtp-auth-password=xxx</span><br><span class="line">    set smtp-auth=login</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x53D1;&#x9001;&#x6D4B;&#x8BD5;</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;hello world&apos; | mail -s &apos;test&apos; aaa@163.com</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="read"><a href="#read" class="headerlink" title="read"></a>read</h4><p><code>read [OPT] VAR</code><br>&#x952E;&#x76D8;&#x8BFB;&#x53D6;&#x53D8;&#x91CF;&#x7684;&#x503C;&#xFF0C;&#x901A;&#x5E38;&#x7528;&#x5728;shell&#x811A;&#x672C;&#x4E2D;&#x4E0E;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#x7684;&#x573A;&#x5408;&#xFF0C;&#x4E00;&#x6B21;&#x53EF;&#x8BFB;&#x53D6;&#x591A;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x503C;&#xFF0C;&#x53D8;&#x91CF;&#x548C;&#x8F93;&#x5165;&#x7684;&#x503C;&#x90FD;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7A7A;&#x683C;&#x9694;&#x5F00;&#xFF0C;shell&#x5185;&#x90E8;&#x547D;&#x4EE4;</p>
<blockquote>
<p>-p&#xFF1A;&#x8BFB;&#x53D6;&#x503C;&#x65F6;&#x7684;&#x63D0;&#x793A;&#x4FE1;&#x606F;<br>-t&#xFF1A;&#x8BFB;&#x53D6;&#x7B49;&#x5F85;&#x65F6;&#x957F;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> -p <span class="string">&apos;Input Your Name : &apos;</span> NAME   <span class="comment"># &#x8F93;&#x5165;&#x5185;&#x5BB9;&#x8D4B;&#x503C;&#x7ED9;&#x53D8;&#x91CF;NAME</span></span><br></pre></td></tr></table></figure>
<h4 id="declare"><a href="#declare" class="headerlink" title="declare"></a>declare</h4><p><code>declare [OPT] VAR</code><br>&#x58F0;&#x660E;&#x548C;&#x663E;&#x793A;&#x5DF2;&#x5B58;&#x5728;&#x7684;shell&#x53D8;&#x91CF;&#xFF0C;&#x4E0D;&#x52A0;&#x53C2;&#x6570;&#x5219;&#x663E;&#x793A;</p>
<blockquote>
<p><code>-i</code>&#xFF1A;&#x5B9A;&#x4E49;&#x6574;&#x6570;<br><code>-x</code>&#xFF1A;&#x5B9A;&#x4E49;&#x73AF;&#x5883;&#x53D8;&#x91CF;<br><code>-r</code>&#xFF1A;&#x5B9A;&#x4E49;&#x53EA;&#x8BFB;&#x53D8;&#x91CF;<br><code>-a</code>&#xFF1A;&#x5B9A;&#x4E49;&#x6570;&#x7EC4;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> -x          <span class="comment"># &#x663E;&#x793A;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span></span><br><span class="line"><span class="built_in">declare</span> -i NUM=600  <span class="comment"># &#x5B9A;&#x4E49;&#x6574;&#x6570;</span></span><br></pre></td></tr></table></figure>
<h4 id="env"><a href="#env" class="headerlink" title="env"></a>env</h4><p>&#x663E;&#x793A;&#x7CFB;&#x7EDF;&#x5DF2;&#x5B58;&#x5728;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x529F;&#x80FD;&#x540C;<code>declare -x</code>&#x3001;<code>printenv</code>&#x3001;<code>export</code> </p>
<h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><p><code>set [+|-OPTION] [ARGS]</code><br>&#x663E;&#x793A;&#x7CFB;&#x7EDF;&#x4E2D;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684;shell&#x53D8;&#x91CF;&#xFF0C;&#x8BBE;&#x7F6E;shell&#x53D8;&#x91CF;&#x7684;&#x65B0;&#x53D8;&#x91CF;&#x503C;&#x53CA;&#x4FEE;&#x6539;shell&#x7279;&#x6027;&#x65F6;</p>
<blockquote>
<p><code>-a</code>&#xFF1A;&#x6807;&#x793A;&#x5DF2;&#x4FEE;&#x6539;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x4EE5;&#x4F9B;&#x8F93;&#x51FA;&#x81F3;&#x73AF;&#x5883;&#x53D8;&#x91CF;<br><code>-b</code>&#xFF1A;&#x4F7F;&#x88AB;&#x4E2D;&#x6B62;&#x7684;&#x540E;&#x53F0;&#x7A0B;&#x5E8F;&#x7ACB;&#x523B;&#x56DE;&#x62A5;&#x6267;&#x884C;&#x72B6;&#x6001;<br><code>-C</code>&#xFF1A;&#x8F6C;&#x5411;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x6587;&#x4EF6;&#x65E0;&#x6CD5;&#x8986;&#x76D6;&#x5DF2;&#x5B58;&#x5728;&#x7684;&#x6587;&#x4EF6;<br><code>-d</code>&#xFF1A;Shell&#x9884;&#x8BBE;&#x4F1A;&#x7528;&#x6742;&#x51D1;&#x8868;&#x8BB0;&#x5FC6;&#x4F7F;&#x7528;&#x8FC7;&#x7684;&#x6307;&#x4EE4;&#xFF0C;&#x4EE5;&#x52A0;&#x901F;&#x6307;&#x4EE4;&#x7684;&#x6267;&#x884C;&#x3002;&#x4F7F;&#x7528;-d&#x53C2;&#x6570;&#x53EF;&#x53D6;&#x6D88;<br><code>-e</code>&#xFF1A;&#x82E5;&#x6307;&#x4EE4;&#x4F20;&#x56DE;&#x503C;&#x4E0D;&#x7B49;&#x4E8E;0&#xFF0C;&#x5219;&#x7ACB;&#x5373;&#x9000;&#x51FA;shell<br><code>-f</code>&#xFF1A;&#x53D6;&#x6D88;&#x4F7F;&#x7528;&#x901A;&#x914D;&#x7B26;<br><code>-h</code>&#xFF1A;&#x81EA;&#x52A8;&#x8BB0;&#x5F55;&#x51FD;&#x6570;&#x7684;&#x6240;&#x5728;&#x4F4D;&#x7F6E;<br><code>-H Shell</code>&#xFF1A;&#x53EF;&#x5229;&#x7528;&#x201D;!&#x201D;&#x52A0;&lt;&#x6307;&#x4EE4;&#x7F16;&#x53F7;&gt;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x6267;&#x884C;history&#x4E2D;&#x8BB0;&#x5F55;&#x7684;&#x6307;&#x4EE4;<br><code>-k</code>&#xFF1A;&#x6307;&#x4EE4;&#x6240;&#x7ED9;&#x7684;&#x53C2;&#x6570;&#x90FD;&#x4F1A;&#x88AB;&#x89C6;&#x4E3A;&#x6B64;&#x6307;&#x4EE4;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;<br><code>-l</code>&#xFF1A;&#x8BB0;&#x5F55;for&#x5FAA;&#x73AF;&#x7684;&#x53D8;&#x91CF;&#x540D;&#x79F0;<br><code>-m</code>&#xFF1A;&#x4F7F;&#x7528;&#x76D1;&#x89C6;&#x6A21;&#x5F0F;<br><code>-n</code>&#xFF1A;&#x53EA;&#x8BFB;&#x53D6;&#x6307;&#x4EE4;&#xFF0C;&#x800C;&#x4E0D;&#x5B9E;&#x9645;&#x6267;&#x884C;<br><code>-p</code>&#xFF1A;&#x542F;&#x52A8;&#x4F18;&#x5148;&#x987A;&#x5E8F;&#x6A21;&#x5F0F;<br><code>-P</code>&#xFF1A;&#x542F;&#x52A8;-P&#x53C2;&#x6570;&#x540E;&#xFF0C;&#x6267;&#x884C;&#x6307;&#x4EE4;&#x65F6;&#xFF0C;&#x4F1A;&#x4EE5;&#x5B9E;&#x9645;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x6765;&#x53D6;&#x4EE3;&#x7B26;&#x53F7;&#x8FDE;&#x63A5;<br><code>-t</code>&#xFF1A;&#x6267;&#x884C;&#x5B8C;&#x968F;&#x540E;&#x7684;&#x6307;&#x4EE4;&#xFF0C;&#x5373;&#x9000;&#x51FA;shell<br><code>-u</code>&#xFF1A;&#x5F53;&#x6267;&#x884C;&#x65F6;&#x4F7F;&#x7528;&#x5230;&#x672A;&#x5B9A;&#x4E49;&#x8FC7;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x5219;&#x663E;&#x793A;&#x9519;&#x8BEF;&#x4FE1;&#x606F;<br><code>-v</code>&#xFF1A;&#x663E;&#x793A;shell&#x6240;&#x8BFB;&#x53D6;&#x7684;&#x8F93;&#x5165;&#x503C;<br><code>-x</code>&#xFF1A;&#x6267;&#x884C;&#x6307;&#x4EE4;&#x540E;&#xFF0C;&#x4F1A;&#x5148;&#x663E;&#x793A;&#x8BE5;&#x6307;&#x4EE4;&#x53CA;&#x6240;&#x4E0B;&#x7684;&#x53C2;&#x6570;</p>
</blockquote>
<blockquote>
<p><code>-o opti-name</code>&#xFF1A;&#x9009;&#x9879;&#x540D;&#x53EF;&#x4EE5;&#x662F;&#x4E0B;&#x5217;&#x4E4B;&#x4E00;: </p>
<blockquote>
<p><code>allexport</code>&#xFF1A;&#x540C;-a&#x9009;&#x9879;<br><code>braceexpand</code>&#xFF1A;shell&#x6267;&#x884C;&#x82B1;&#x62EC;&#x53F7;&#x6269;&#x5C55;,&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x8D77;&#x4F5C;&#x7528;<br><code>emacs</code>&#xFF1A;&#x4F7F;&#x7528;emacs&#x98CE;&#x683C;&#x547D;&#x4EE4;&#x884C;&#x7F16;&#x8F91;&#x63A5;&#x53E3;.&#x9664;&#x975E;shell&#x4EE5;-noline-editing&#x9009;&#x9879;&#x542F;&#x52A8;&#xFF1A;shell&#x4EA4;&#x4E92;&#x65F6;,&#x901A;&#x8FC7;&#x9ED8;&#x8BA4;&#x542F;&#x52A8;&#x8BE5;&#x9009;&#x9879;<br><code>errexit</code>&#xFF1A;&#x540C;-e&#x9009;&#x9879;<br><code>histexpand</code>&#xFF1A;&#x540C;-H&#x9009;&#x9879;<br><code>ignoreeof</code>&#xFF1A;&#x5176;&#x7ED3;&#x679C;&#x662F;&#x597D;&#x50CF;shell&#x547D;&#x4EE4;IGNOREEOF=10&#x88AB;&#x6267;&#x884C;<br><code>interactive</code>&#xFF1A;&#x5141;&#x8BB8;&#x5355;&#x8BCD;&#x524D;&#x5E26;#&#x53F7;,&#x4EE5;&#x4F7F;&#x5F97;&#x5728;&#x4EA4;&#x4E92;shell&#x4E2D;&#x5FFD;&#x7565;&#x547D;&#x4EE4;&#x884C;&#x7684;&#x5168;&#x90E8;&#x5B57;&#x7B26;<br><code>monitor</code>&#xFF1A;&#x540C;-m&#x9009;&#x9879;<br><code>noclobber</code>&#xFF1A;&#x540C;-C&#x9009;&#x9879;<br><code>noexec</code>&#xFF1A; &#x540C;-n&#x9009;&#x9879;<br><code>noglob</code>&#xFF1A;&#x540C;-f&#x9009;&#x9879;<br><code>nohash</code>&#xFF1A;&#x540C;-d&#x9009;&#x9879;<br><code>notify</code>&#xFF1A;&#x540C;-b&#x9009;&#x9879;<br><code>nounset</code>&#xFF1A;&#x540C;-u&#x9009;&#x9879;<br><code>physical</code>&#xFF1A;&#x540C;-p&#x9009;&#x9879;<br><code>posix</code>&#xFF1A;&#x6539;&#x53D8;BASH&#x5C5E;&#x6027;&#x4EE5;&#x5339;&#x914D;&#x6807;&#x51C6;,&#x9ED8;&#x8BA4;&#x64CD;&#x4F5C;&#x4E0D;&#x540C;&#x4E8E;POSIX1003.2&#x6807;&#x51C6;<br><code>verbose</code>&#xFF1A;&#x540C;-v&#x9009;&#x9879;<br><code>vi</code>&#xFF1A;&#x4F7F;&#x7528;vi&#x98CE;&#x683C;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x7F16;&#x8F91;&#x5668;<br><code>XTRACE</code>&#xFF1A;&#x540C;-x&#x9009;&#x9879;,&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7ED9;&#x51FA;&#x9009;&#x9879;&#x540D;,&#x663E;&#x793A;&#x5F53;&#x524D;&#x9009;&#x9879;&#x503C; </p>
</blockquote>
</blockquote>
<p><strong>&#x5728;set&#x547D;&#x4EE4;&#x4E2D;&#xFF0C;&#x9009;&#x9879;&#x524D;&#x9762;&#x8DDF;&#x7740;&#x53F7;&#x2019;-&#x2018;&#x793A;&#x5F00;&#x542F;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#xFF0C;&#x2019;+&#x2019;&#x8868;&#x793A;&#x5173;&#x95ED;&#x8FD9;&#x4E2A;&#x9009;&#x9879;</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> {-|+}o          <span class="comment"># &#x663E;&#x793A;shell&#x8BBE;&#x7F6E;&#x5217;&#x8868;&#xFF0C;&apos;+&apos;&#x548C;&apos;-&apos;&#x663E;&#x793A;&#x5F62;&#x5F0F;&#x4E0D;&#x540C;&#x800C;&#x5DF2;</span></span><br></pre></td></tr></table></figure>
<p><em>&#x66F4;&#x591A;&#x5173;&#x4E8E;set&#x5185;&#x5BB9;&#x65E5;&#x540E;&#x518D;&#x6DFB;&#x52A0;</em></p>
<h4 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h4><p><code>echo [SHORT-OPTION] [STRING]</code><br>&#x6253;&#x5370;shell&#x53D8;&#x91CF;&#x7684;&#x503C;&#xFF0C;&#x6216;&#x8005;&#x76F4;&#x63A5;&#x8F93;&#x51FA;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x9ED8;&#x8BA4;&#x5728;&#x6700;&#x540E;&#x52A0;&#x4E0A;&#x6362;&#x884C;&#x7B26;</p>
<blockquote>
<p><code>-n</code>&#xFF1A;&#x8F93;&#x51FA;&#x6700;&#x540E;&#x4E0D;&#x52A0;&#x6362;&#x884C;&#x7B26;<br><code>-e</code>&#xFF1A;&#x6FC0;&#x6D3B;&#x8F6C;&#x4E49;&#x5B57;&#x7B26;&#xFF0C;&#x5982;&#x4E0B;  </p>
<blockquote>
<p><code>\a</code>&#xFF1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x58F0;<br><code>\b</code>&#xFF1A;&#x9000;&#x683C;&#x952E;<br><code>\c</code>&#xFF1A;&#x6700;&#x540E;&#x4E0D;&#x52A0;&#x4E0A;&#x6362;&#x884C;&#x7B26;&#x53F7;<br><code>\n</code>&#xFF1A;&#x6362;&#x884C;&#x4E14;&#x5149;&#x6807;&#x79FB;&#x81F3;&#x884C;&#x9996;<br><code>\r</code>&#xFF1A;&#x5149;&#x6807;&#x79FB;&#x81F3;&#x884C;&#x9996;&#xFF0C;&#x4F46;&#x4E0D;&#x6362;&#x884C;<br><code>\t</code>&#xFF1A;&#x63D2;&#x5165;tab<br><code>\\</code>&#xFF1A;&#x63D2;&#x5165;\&#x5B57;&#x7B26;<br><code>\0nnn</code>&#xFF1A;&#x63D2;&#x5165;nnn&#xFF08;&#x516B;&#x8FDB;&#x5236;&#xFF09;&#x6240;&#x4EE3;&#x8868;&#x7684;ASCII&#x5B57;&#x7B26;<br><code>\xHH</code>&#xFF1A;&#x63D2;&#x5165;HH&#xFF08;&#x5341;&#x516D;&#x8FDB;&#x5236;&#xFF09;&#x6240;&#x4EE3;&#x8868;&#x7684;ASCII&#x5B57;&#x7B26;   </p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;\e[1;31mred\e[0m&quot;</span>     <span class="comment"># &#x8F93;&#x51FA;&#x7EA2;&#x8272;&#x5B57;</span></span><br></pre></td></tr></table></figure>
<p>&#x547D;&#x4EE4;&#x63D0;&#x793A;&#x7B26;&#x8BBE;&#x7F6E;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><img src="/2016/05/21/&#x5E38;&#x7528;&#x547D;&#x4EE4;--&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;/echo.jpg" alt="echo"></p>
<h4 id="xargs"><a href="#xargs" class="headerlink" title="xargs"></a>xargs</h4><p>xargs [opt] [cmd]<br>&#x53D6;&#x524D;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x8F93;&#x51FA;&#x4F5C;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x547D;&#x4EE4;&#x4E3A;echo</p>
<blockquote>
<p><code>-d</code>&#xFF1A;&#x6307;&#x5B9A;&#x5206;&#x9694;&#x7B26;<br><code>-n</code>&#xFF1A;&#x6BCF;&#x6B21;cmd&#x6267;&#x884C;&#x65F6;&#xFF0C;&#x8981;&#x4F7F;&#x7528;&#x51E0;&#x4E2A;&#x53C2;&#x6570;<br><code>-I</code>&#xFF1A;&#x6307;&#x5B9A;&#x66FF;&#x6362;&#x5B57;&#x7B26;&#xFF0C;&#x4E00;&#x822C;&#x4F7F;&#x7528;<code>{}</code><br><code>-0</code>&#xFF1A;<br><code>-E</code>&#xFF1A;&#x6307;&#x5B9A;&#x505C;&#x6B62;&#x6807;&#x5FD7;&#x7B26;<br><code>-t</code>&#xFF1A;&#x5148;&#x6253;&#x5370;&#x51FA;&#x6267;&#x884C;&#x547D;&#x4EE4;&#xFF0C;&#x518D;&#x8F93;&#x51FA;&#x7ED3;&#x679C;<br><code>-p</code>&#xFF1A;&#x6BCF;&#x6B21;&#x6267;&#x884C;&#x524D;&#x8BE2;&#x95EE;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat test.txt | xargs            <span class="comment"># &#x5355;&#x884C;&#x8F93;&#x51FA;</span></span><br><span class="line">cat test.txt | xargs -n3        <span class="comment"># 3&#x4E2A;&#x8FDE;&#x7EED;&#x5B57;&#x7B26;&#x4E32;&#x4E00;&#x884C;&#x8F93;&#x51FA;</span></span><br><span class="line">cat test.txt | xargs -E <span class="string">&apos;aa&apos;</span>    <span class="comment"># &#x8BFB;&#x53D6;&#x5230;&apos;aa&apos;&#x65F6;&#x505C;&#x6B62;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;acXnaXgn&quot;</span> | xargs -dX     <span class="comment"># &#x4EE5;X&#x5206;&#x9694;&#x540E;&#x8F93;&#x51FA;</span></span><br><span class="line"></span><br><span class="line">find ./ -<span class="built_in">type</span> f -name <span class="string">&quot;*.tmp&quot;</span> | xargs rm -f</span><br><span class="line">find /dir -name <span class="string">&apos;*.py&apos;</span> | sort | xargs wc -l         <span class="comment"># &#x7EDF;&#x8BA1;&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;&#x884C;&#x6570;</span></span><br><span class="line">find -name <span class="string">&apos;a*&apos;</span> -<span class="built_in">print</span> | xargs -0 -I {} mv {} /dir  <span class="comment"># &#x79FB;&#x52A8;&#x6587;&#x4EF6;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> /dir1 /dir2 /dir3 | xargs -n1 cp test.txt      <span class="comment"># &#x590D;&#x5236;&#x6587;&#x4EF6;&#x5230;&#x591A;&#x76EE;&#x5F55;&#x4E0B;</span></span><br></pre></td></tr></table></figure>
<h4 id="seq"><a href="#seq" class="headerlink" title="seq"></a>seq</h4><p><code>seq [OPTION] LAST</code><br><code>seq [OPTION] FIRST LAST</code><br><code>seq [OPTION] FIRST INCREMENT LAST</code><br>&#x7528;&#x4E8E;&#x4EA7;&#x751F;&#x4ECE;&#x67D0;&#x4E2A;&#x6570;&#x5230;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x6570;&#x4E4B;&#x95F4;&#x7684;&#x6240;&#x6709;&#x6574;&#x6570;</p>
<blockquote>
<p><code>-f</code>&#xFF1A;&#x4F7F;&#x7528;printf &#x6837;&#x5F0F;&#x7684;&#x6D6E;&#x70B9;&#x683C;&#x5F0F;<br><code>-s</code>&#xFF1A;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x5B57;&#x7B26;&#x4E32;&#x5206;&#x9694;&#x6570;&#x5B57;&#xFF08;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#xFF1A;\n&#xFF09;<br><code>-w</code>&#xFF1A;&#x5728;&#x5217;&#x524D;&#x6DFB;&#x52A0;0 &#x4F7F;&#x5F97;&#x5BBD;&#x5EA6;&#x76F8;&#x540C;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">seq -s<span class="string">&apos; &apos;</span> -f<span class="string">&quot;num_%02g&quot;</span> 7 11     <span class="comment"># num_07 num_08 num_09 num_10 num_11</span></span><br></pre></td></tr></table></figure>
<h4 id="history"><a href="#history" class="headerlink" title="history"></a>history</h4><p><code>history [OPT]</code></p>
<blockquote>
<p>&#x6570;&#x5B57;&#xFF1A;&#x663E;&#x793A;&#x6700;&#x8FD1;&#x51E0;&#x6761;<br><code>-c</code>&#xFF1A;&#x6E05;&#x7A7A;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x5386;&#x53F2;<br><code>-d #</code>&#xFF1A;&#x5220;&#x9664;&#x6307;&#x5B9A;&#x7F16;&#x53F7;&#x7684;&#x5386;&#x53F2;<br><code>-w</code>&#xFF1A;&#x4ECE;&#x5185;&#x5B58;&#x4E2D;&#x5199;&#x5165;&#x5230;<code>~/.bash_history</code>&#x6587;&#x4EF6;&#x4E2D;<br><code>-r</code>&#xFF1A;&#x4ECE;&#x5386;&#x53F2;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x5230;&#x5185;&#x5B58;  </p>
</blockquote>
<p><em>&#x76F8;&#x5173;&#x5185;&#x5BB9;&#x67E5;&#x770B;&#xFF1A;</em><a href="http://liu2lin600.github.io/2016/06/10/bash%E5%9F%BA%E6%9C%AC%E7%89%B9%E6%80%A7%E4%BB%8B%E7%BB%8D/">bash&#x57FA;&#x672C;&#x7279;&#x6027;&#x4ECB;&#x7ECD;</a></p>
<h4 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h4><p>&#x5B9A;&#x65F6;&#x76D1;&#x63A7;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x8FD0;&#x884C;&#x7ED3;&#x679C;</p>
<blockquote>
<p><code>-n</code>&#xFF1A;&#x6307;&#x5B9A;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x7684;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#xFF08;&#x79D2;&#xFF09;<br><code>-d</code>&#xFF1A;&#x9AD8;&#x4EAE;&#x663E;&#x793A;&#x6307;&#x4EE4;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#x4E0D;&#x540C;&#x4E4B;&#x5904;<br><code>-t</code>&#xFF1A;&#x4E0D;&#x663E;&#x793A;&#x6807;&#x9898;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 1 <span class="string">&quot;df -i&quot;</span>      <span class="comment"># &#x76D1;&#x6D4B;&#x78C1;&#x76D8;inode&#x548C;block&#x6570;&#x76EE;&#x53D8;&#x5316;&#x60C5;&#x51B5;</span></span><br></pre></td></tr></table></figure>
<h4 id="source"><a href="#source" class="headerlink" title="source"></a>source</h4><p><code>source FILENAME</code><br>&#x91CD;&#x65B0;&#x6267;&#x884C;&#x521A;&#x4FEE;&#x6539;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4F7F;&#x4E4B;&#x7ACB;&#x5373;&#x751F;&#x6548;&#xFF0C;&#x800C;&#x4E0D;&#x5FC5;&#x6CE8;&#x9500;&#x5E76;&#x91CD;&#x65B0;&#x767B;&#x5F55;&#xFF0C;&#x529F;&#x80FD;&#x540C;<code>.</code></p>
<h4 id="pstree"><a href="#pstree" class="headerlink" title="pstree"></a>pstree</h4><p><code>pstree [OPTION]</code><br>&#x663E;&#x793A;&#x8FDB;&#x7A0B;&#x6811;</p>
<blockquote>
<p><code>-a</code>&#xFF1A;&#x663E;&#x793A;&#x6BCF;&#x4E2A;&#x7A0B;&#x5E8F;&#x7684;&#x5B8C;&#x6574;&#x6307;&#x4EE4;&#xFF0C;&#x5305;&#x542B;&#x8DEF;&#x5F84;&#xFF0C;&#x53C2;&#x6570;&#x6216;&#x662F;&#x5E38;&#x9A7B;&#x670D;&#x52A1;&#x7684;&#x6807;&#x793A;<br><code>-p</code>&#xFF1A;&#x663E;&#x793A;&#x7A0B;&#x5E8F;&#x8BC6;&#x522B;&#x7801;<br><code>-u</code>&#xFF1A;&#x663E;&#x793A;&#x7528;&#x6237;&#x540D;&#x79F0;<br><code>-c</code>&#xFF1A;&#x4E0D;&#x4F7F;&#x7528;&#x7CBE;&#x7B80;&#x6807;&#x793A;&#x6CD5;<br><code>-h</code>&#xFF1A;&#x5217;&#x51FA;&#x6811;&#x72B6;&#x56FE;&#x65F6;&#xFF0C;&#x7279;&#x522B;&#x6807;&#x660E;&#x73B0;&#x5728;&#x6267;&#x884C;&#x7684;&#x7A0B;&#x5E8F;<br><code>-l</code>&#xFF1A;&#x91C7;&#x7528;&#x957F;&#x5217;&#x683C;&#x5F0F;&#x663E;&#x793A;&#x6811;&#x72B6;&#x56FE;<br><code>-n</code>&#xFF1A;&#x7528;&#x7A0B;&#x5E8F;&#x8BC6;&#x522B;&#x7801;&#x6392;&#x5E8F;&#x3002;&#x9884;&#x8BBE;&#x662F;&#x4EE5;&#x7A0B;&#x5E8F;&#x540D;&#x79F0;&#x6765;&#x6392;&#x5E8F;<br><code>-U</code>&#xFF1A;&#x4F7F;&#x7528;UTF-8&#x5217;&#x7ED8;&#x56FE;&#x5B57;&#x7B26;</p>
</blockquote>
<h4 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h4><p><code>ps [OPTION]</code><br>&#x9009;&#x9879;&#x6709;3&#x79CD;&#x98CE;&#x683C;</p>
<ol>
<li>UNIX&#xFF1A;&#x9009;&#x9879;&#x524D;&#x5E26;<code>-</code>  </li>
<li>BSD&#xFF1A;&#x9009;&#x9879;&#x524D;&#x4E0D;&#x80FD;&#x5E26;<code>-</code>  </li>
<li>GUN long option&#xFF1A;&#x957F;&#x9009;&#x9879;&#xFF0C;&#x9009;&#x9879;&#x524D;<code>--</code></li>
</ol>
<blockquote>
<p><code>a</code>&#xFF1A;&#x6240;&#x6709;&#x4E0E;&#x7EC8;&#x7AEF;&#x6709;&#x5173;&#x7684;&#x8FDB;&#x7A0B;<br><code>u</code>&#xFF1A;&#x4EE5;&#x7528;&#x6237;&#x4E3A;&#x4E2D;&#x5FC3;&#x6765;&#x7EC4;&#x7EC7;&#x8FDB;&#x7A0B;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x663E;&#x793A;<br><code>x</code>&#xFF1A;&#x6240;&#x6709;&#x4E0E;&#x7EC8;&#x7AEF;&#x65E0;&#x5173;&#x7684;&#x8FDB;&#x7A0B;,&#x5E26;<code>[]</code>&#x4E3A;&#x5185;&#x6838;&#x7EBF;&#x7A0B;<br><code>-e</code>&#xFF1A;&#x663E;&#x793A;&#x6240;&#x6709;&#x8FDB;&#x7A0B;<br><code>-f</code>&#xFF1A;&#x663E;&#x793A;&#x5B8C;&#x6574;&#x683C;&#x5F0F;<br><code>-F</code>&#xFF1A;&#x663E;&#x793A;&#x5B8C;&#x6574;&#x683C;&#x5F0F;<br><code>-H</code>&#xFF1A;&#x4EE5;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;<br><code>o</code>&#xFF1A;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;&#x5185;&#x5BB9;&#xFF0C;&#x5404;&#x5B57;&#x6BB5;&#x4EE5;<code>,</code>&#x9694;&#x5F00;&#xFF0C;&#x5E38;&#x7528;&#x5B57;&#x6BB5;&#x6709;&#xFF1A;  </p>
<blockquote>
<p><code>pcpu</code>&#xFF1A;cpu&#x5360;&#x7528;&#x7387;<br><code>pid</code>&#xFF1A;&#x8FDB;&#x7A0B;ID<br><code>ppid</code>&#xFF1A;&#x7236;&#x8FDB;&#x7A0B;ID<br><code>pmem</code>&#xFF1A;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x7387;<br><code>pcomm</code>&#xFF1A;&#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x540D;<br><code>cmd</code>&#xFF1A;&#x547D;&#x4EE4;<br><code>nice</code>&#xFF1A;&#x4F18;&#x5148;&#x7EA7;<br><code>user</code>&#xFF1A;&#x542F;&#x52A8;&#x7528;&#x6237;<br><code>stat</code>&#xFF1A;&#x8FDB;&#x7A0B;&#x72B6;&#x6001;<br><code>time</code>&#xFF1A;&#x7D2F;&#x8BA1;&#x65F6;&#x95F4;<br><code>etime</code>&#xFF1A;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x540E;&#x5EA6;&#x8FC7;&#x7684;&#x65F6;&#x95F4;<br><code>tty</code>&#xFF1A;&#x6240;&#x5173;&#x8054;&#x7684;TTY<br><code>--sort</code>&#xFF1A;&#x53EF;&#x6839;&#x636E;&#x4EE5;&#x4E0A;&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;<code>+</code>&#x4E3A;&#x5347; <code>-</code>&#x4E3A;&#x964D;  </p>
</blockquote>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ps aux     </span><br><span class="line">ps -ef</span><br><span class="line">ps -eFH</span><br><span class="line">ps axo pid,pcpu,ni,priority,comm --sort -pcpu,+ni | head</span><br></pre></td></tr></table></figure>
<p><strong>&#x663E;&#x793A;&#x8BF4;&#x660E;</strong></p>
<ul>
<li><code>USER,UID</code>&#xFF1A;&#x7528;&#x6237;  </li>
<li><code>PID</code> &#xFF1A;&#x8FDB;&#x7A0B;ID  </li>
<li><code>%CPU,C</code>&#xFF1A;CPU&#x5360;&#x6BD4;  </li>
<li><code>%MEM</code>&#xFF1A;&#x7269;&#x7406;&#x5185;&#x5B58;&#x5360;&#x6BD4;  </li>
<li><code>VSZ</code> &#xFF1A;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x96C6; (Kbytes)  </li>
<li><code>RSS</code> &#xFF1A;&#x5E38;&#x9A7B;&#x5185;&#x5B58;&#x96C6; (Kbytes)  </li>
<li><code>TTY</code> &#xFF1A;&#x7EC8;&#x7AEF;&#x53F7;&#xFF0C;<code>?</code>&#x8868;&#x793A;&#x4E0E;&#x7EC8;&#x7AEF;&#x673A;&#x65E0;&#x5173;   </li>
<li><code>STAT,S</code>&#xFF1A;&#x8BE5;&#x7A0B;&#x5E8F;&#x76EE;&#x524D;&#x7684;&#x72B6;&#x6001;    </li>
<li><code>START,STIME</code>&#xFF1A;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x7684;&#x65F6;&#x95F4;  </li>
<li><code>TIME</code>&#xFF1A;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x95F4;  </li>
<li><code>COMMAND</code>&#xFF1A;&#x8BE5;&#x7A0B;&#x5E8F;&#x7684;&#x5B9E;&#x9645;&#x6307;&#x4EE4;  </li>
<li><code>PRI</code>&#xFF1A;&#x8FD9;&#x4E2A;&#x662F; Priority (&#x4F18;&#x5148;&#x6267;&#x884C;&#x5E8F;) &#x7684;&#x7F29;&#x5199;  </li>
<li><code>NI</code>&#xFF1A;&#x8FD9;&#x4E2A;&#x662F;Nice&#x503C;  </li>
<li><code>ADDR</code>&#xFF1A;&#x8BE5;&#x7A0B;&#x5E8F;&#x5728;&#x5185;&#x5B58;&#x7684;&#x90A3;&#x4E2A;&#x90E8;&#x5206;&#xFF0C;&#x8FD0;&#x884C;&#x4E2D;&#x4E00;&#x822C;&#x5C31;&#x662F; &#x201C;-&#x201C;  </li>
<li><code>SZ</code>&#xFF1A;&#x4F7F;&#x7528;&#x7684;&#x5185;&#x5B58;&#x5927;&#x5C0F;  </li>
<li><code>WCHAN&#xFF1A;&#x76EE;&#x524D;&#x8FD9;&#x4E2A;&#x7A0B;&#x5E8F;&#x662F;&#x5426;&#x6B63;&#x5728;&#x8FD0;&#x4F5C;&#x5F53;&#x4E2D;&#xFF0C;</code>-`&#x8868;&#x793A;&#x6B63;&#x5728;&#x8FD0;&#x4F5C;  </li>
</ul>
<p><em>&#x66F4;&#x591A;&#x72B6;&#x6001;&#x8BF4;&#x660E;&#x89C1;man&#x624B;&#x518C;</em></p>
<p><strong>&#x8FDB;&#x7A0B;&#x72B6;&#x6001;&#xFF1A;</strong></p>
<blockquote>
<p>D&#xFF1A;&#x4E0D;&#x53EF;&#x4E2D;&#x65AD;&#x7684;&#x7761;&#x7720;<br>R&#xFF1A;&#x8FD0;&#x884C;&#x6216;&#x5C31;&#x7EEA;<br>S&#xFF1A;&#x53EF;&#x4E2D;&#x65AD;&#x7684;&#x7761;&#x7720;<br>T&#xFF1A;&#x505C;&#x6B62;<br>Z&#xFF1A;&#x50F5;&#x6B7B;<br>&lt;&#xFF1A;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x8FDB;&#x7A0B;<br>N&#xFF1A;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x8FDB;&#x7A0B;<br>+&#xFF1A;&#x524D;&#x53F0;&#x8FDB;&#x7A0B;&#x7EC4;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;<br>l: &#x591A;&#x7EBF;&#x7A0B;&#x8FDB;&#x7A0B;<br>s: &#x4F1A;&#x8BDD;&#x8FDB;&#x7A0B;&#x9996;&#x8FDB;&#x7A0B;  </p>
</blockquote>
<h4 id="pgrep-pkill"><a href="#pgrep-pkill" class="headerlink" title="pgrep, pkill"></a>pgrep, pkill</h4><p><code>pgrep [OPTION] PATTERN</code><br>&#x663E;&#x793A;&#x6307;&#x5B9A;&#x8FDB;&#x7A0B;&#x4FE1;&#x606F;&#xFF0C;pkill&#x9ED8;&#x8BA4;&#x4E3A;&#x53D1;&#x9001;&#x4E2D;&#x6B62;&#x4FE1;&#x53F7;</p>
<blockquote>
<p><code>-u UID</code>&#xFF1A;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x7528;&#x6237;&#x6709;&#x5173;&#x8FDB;&#x7A0B;<br><code>-U UID</code>&#xFF1A;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x7528;&#x6237;&#x8FDB;&#x7A0B;<br><code>-t TERMINAL</code>&#xFF1A;&#x67E5;&#x770B;&#x4E0E;&#x6307;&#x5B9A;&#x7EC8;&#x7AEF;&#x7684;&#x8FDB;&#x7A0B;<br><code>-l</code>&#xFF1A;&#x663E;&#x793A;PID&#x548C;&#x8FDB;&#x7A0B;&#x540D;<br><code>-a</code>&#xFF1A;&#x663E;&#x793A;&#x5B8C;&#x6574;&#x683C;&#x5F0F;<br><code>-P PID</code>&#xFF1A;&#x663E;&#x793A;&#x6B64;&#x8FDB;&#x7A0B;&#x7684;&#x5B50;&#x8FDB;&#x7A0B;    </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pgrep -U gdm</span><br><span class="line">pkill httpd</span><br></pre></td></tr></table></figure>
<h4 id="pidof"><a href="#pidof" class="headerlink" title="pidof"></a>pidof</h4><p><code>pidof PRECOSS</code><br>&#x6839;&#x636E;&#x7A0B;&#x5E8F;&#x540D;&#x79F0;&#xFF0C;&#x67E5;&#x627E;&#x5176;&#x76F8;&#x5173;&#x8FDB;&#x7A0B;&#x7684;ID&#x53F7;</p>
<h4 id="top"><a href="#top" class="headerlink" title="top"></a>top</h4><p>&#x5B9E;&#x65F6;&#x52A8;&#x6001;&#x5730;&#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x7684;&#x6574;&#x4F53;&#x8FD0;&#x884C;&#x60C5;&#x51B5;</p>
<blockquote>
<p><code>-d</code>&#xFF1A;&#x6307;&#x5B9A;&#x5237;&#x65B0;&#x65F6;&#x95F4;<br><code>-p PID</code>&#xFF1A;&#x67E5;&#x770B;&#x6307;&#x5B9A;pid&#x8FDB;&#x7A0B;<br><code>-c</code>&#xFF1A;&#x663E;&#x793A;&#x6574;&#x4E2A;&#x547D;&#x4EE4;&#x884C;&#x800C;&#x4E0D;&#x53EA;&#x662F;&#x663E;&#x793A;&#x547D;&#x4EE4;&#x540D;<br><code>-b</code>&#xFF1A;&#x4EE5;&#x6279;&#x6B21;&#x65B9;&#x5F0F;&#x663E;&#x793A;<br><code>-n</code>&#xFF1A;&#x663E;&#x793A;&#x591A;&#x5C11;&#x6279;&#x6B21;&#x540E;&#x9000;&#x51FA;   </p>
</blockquote>
<p>&#x4FE1;&#x606F;&#x5934;&#x8BF4;&#x660E;&#xFF1A;</p>
<ol>
<li>&#x7B2C;&#x4E00;&#x884C;&#xFF1A;&#x4EFB;&#x52A1;&#x961F;&#x5217;&#x4FE1;&#x606F;&#xFF0C;&#x540C;<code>uptime</code>&#x663E;&#x793A;&#x4FE1;&#x606F;<br>&#x5F53;&#x524D;&#x65F6;&#x95F4;&#xFF0C;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#xFF0C;&#x7528;&#x6237;&#x6570;&#xFF0C;1&#x3001;5&#x3001;15&#x5206;&#x949F;&#x8D1F;&#x8F7D;</li>
<li>&#x7B2C;&#x4E8C;&#x884C;&#xFF1A;&#x8FDB;&#x7A0B;&#x4FE1;&#x606F;<br>&#x8FDB;&#x7A0B;&#x603B;&#x6570;&#xFF0C;&#x8FD0;&#x884C;&#x4E2D;&#xFF0C;&#x7761;&#x7720;&#x6001;&#xFF0C;&#x505C;&#x6B62;&#x6001;&#xFF0C;&#x50F5;&#x5C38;&#x6001;</li>
<li>&#x7B2C;&#x4E09;&#x884C;&#xFF1A;cpu&#x5360;&#x7528;&#x4FE1;&#x606F;<br><code>us</code>&#x7528;&#x6237;&#x7A7A;&#x95F4;&#xFF0C;<code>sy</code>&#x5185;&#x6838;&#x7A7A;&#x95F4;&#xFF0C;<code>ni</code>&#x6539;&#x53D8;&#x8FC7;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;<code>id</code>&#x7A7A;&#x95F2;&#xFF0C;<code>wa</code>&#x7B49;&#x5F85;&#xFF0C;<code>hi</code>&#x786C;&#x4E2D;&#x65AD;&#xFF0C;<code>si</code>&#x8F6F;&#x4E2D;&#x65AD;&#xFF0C;<code>st</code>&#x88AB;&#x865A;&#x62DF;&#x5316;&#x5077;&#x8D70;</li>
<li>&#x7B2C;&#x56DB;&#x884C;&#xFF1A;&#x5185;&#x5B58;&#x4FE1;&#x606F;<br>&#x7269;&#x7406;&#x603B;&#x91CF;&#xFF0C;&#x4F7F;&#x7528;&#x91CF;&#xFF0C;&#x7A7A;&#x95F2;&#xFF0C;&#x7F13;&#x5B58;</li>
<li>&#x7B2C;&#x4E94;&#x884C;&#xFF1A;swap&#x4FE1;&#x606F;<br>&#x4EA4;&#x6362;&#x533A;&#x603B;&#x91CF;&#xFF0C;&#x4F7F;&#x7528;&#x91CF;&#xFF0C;&#x7A7A;&#x95F2;&#xFF0C;&#x7F13;&#x5B58;</li>
</ol>
<p><em>&#x6CE8;&#xFF1A;</em>cpu&#x7684;&#x8D1F;&#x8F7D;&#x53D6;&#x51B3;&#x4E8E;&#x6838;&#x5FC3;&#x6570;&#xFF0C;&#x5C0F;&#x4E8E;&#x6838;&#x5FC3;&#x6570;&#x4E3A;&#x6B63;&#x5E38;&#x503C;&#xFF1B;&#x5728;&#x5185;&#x5B58;&#x4FE1;&#x606F;&#x4E2D;&#xFF0C;<code>buffers</code>&#x662F;&#x6307;&#x7528;&#x6765;&#x7ED9;&#x5757;&#x8BBE;&#x5907;&#x505A;&#x7684;&#x7F13;&#x51B2;&#x5927;&#x5C0F;&#xFF0C;&#x5982;&#x76EE;&#x5F55;&#x5185;&#x5BB9;&#x7B49;&#xFF0C;<code>cached</code>&#x662F;&#x7528;&#x6765;&#x7ED9;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x505A;&#x7F13;&#x51B2;</p>
<p>&#x4EA4;&#x4E92;&#x547D;&#x4EE4;&#xFF1A;</p>
<ul>
<li><code>M</code>&#xFF1A;&#x6839;&#x636E;&#x9A7B;&#x7559;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x8FDB;&#x884C;&#x6392;&#x5E8F;  </li>
<li><code>P</code>&#xFF1A;&#x6839;&#x636E;CPU&#x4F7F;&#x7528;&#x767E;&#x5206;&#x6BD4;&#x8FDB;&#x884C;&#x6392;&#x5E8F;  </li>
<li><code>T</code>&#xFF1A;&#x6839;&#x636E;&#x7D2F;&#x8BA1;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x6392;&#x5E8F;  </li>
<li><code>l</code>&#xFF1A;&#x662F;&#x5426;&#x663E;&#x793A;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#x548C;&#x542F;&#x52A8;&#x65F6;&#x95F4;</li>
<li><code>t</code>&#xFF1A;&#x662F;&#x5426;&#x663E;&#x793A;&#x8FDB;&#x7A0B;&#x548C;CPU&#x72B6;&#x6001;&#x76F8;&#x5173;&#x4FE1;&#x606F;</li>
<li><code>m</code>&#xFF1A;&#x662F;&#x5426;&#x663E;&#x793A;&#x5185;&#x5B58;&#x76F8;&#x5173;&#x4FE1;&#x606F;</li>
<li><code>c</code>&#xFF1A;&#x662F;&#x5426;&#x663E;&#x793A;&#x5B8C;&#x6574;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x4FE1;&#x606F;</li>
<li><code>x</code>&#xFF1A;&#x9AD8;&#x4EAE;&#x663E;&#x793A;&#xFF0C;&#x5728;z&#x6A21;&#x5F0F;&#x4E0B;&#x66F4;&#x660E;&#x663E;,&#x518D;&#x6309;<code>shift+&lt;|&gt;</code>&#x6307;&#x5B9A;&#x5217;&#x6392;&#x5E8F;</li>
<li><code>q</code>&#xFF1A;&#x9000;&#x51FA;top</li>
<li><code>s|d</code>&#xFF1A;&#x4FEE;&#x6539;&#x5237;&#x65B0;&#x65F6;&#x95F4;</li>
<li><code>k</code>&#xFF1A;&#x7EC8;&#x6B62;&#x67D0;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x9ED8;&#x8BA4;15&#x4FE1;&#x53F7;</li>
<li><code>1</code>&#xFF1A;&#x663E;&#x793A;&#x6240;&#x6709;CPU&#x6838;&#x5FC3;&#x7684;&#x8D1F;&#x8F7D;&#x60C5;&#x51B5;</li>
<li><code>i</code>&#xFF1A;&#x5FFD;&#x7565;&#x95F2;&#x7F6E;&#x548C;&#x50F5;&#x6B7B;&#x8FDB;&#x7A0B;</li>
<li><code>h</code>&#xFF1A;&#x67E5;&#x770B;&#x5E2E;&#x52A9;</li>
<li><code>f</code>&#xFF1A;&#x4FEE;&#x6539;&#x663E;&#x793A;&#x5217;&#xFF0C;&#x6309;&#x6307;&#x5B9A;&#x5B57;&#x6BCD;&#x9009;&#x62E9;&#xFF0C;&#x5982;<code>p</code>&#x663E;&#x793A;swap&#x4FE1;&#x606F;</li>
<li><code>H</code>&#xFF1A;&#x663E;&#x793A;&#x7EBF;&#x7A0B;</li>
<li><code>W</code>&#xFF1A;&#x5C06;&#x5F53;&#x524D;&#x8BBE;&#x7F6E;&#x5199;&#x5165;&#x914D;&#x7F6E;&#x6587;&#x4EF6;[~/.toprc]</li>
</ul>
<p>&#x5185;&#x5BB9;&#x6807;&#x9898;&#x610F;&#x4E49;&#xFF1A;</p>
<ul>
<li><code>PID</code>&#xFF1A;&#x8FDB;&#x7A0B;id</li>
<li><code>USER</code>&#xFF1A;&#x8FDB;&#x7A0B;&#x6240;&#x6709;&#x8005;</li>
<li><code>PR</code>&#xFF1A;&#x8FDB;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;</li>
<li><code>NI</code>&#xFF1A;nice&#x503C;&#x3002;&#x8D1F;&#x503C;&#x8868;&#x793A;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x6B63;&#x503C;&#x8868;&#x793A;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;</li>
<li><code>VIRT</code>&#xFF1A;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x96C6;&#xFF0C;&#x8FDB;&#x7A0B;&#x7533;&#x8BF7;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x603B;&#x91CF;&#xFF0C;&#x5E76;&#x975E;&#x6240;&#x4F7F;&#x7528;&#x5185;&#x5B58;</li>
<li><code>RES</code>&#xFF1A;&#x5E38;&#x9A7B;&#x5185;&#x5B58;&#x96C6;&#xFF0C;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;&#x7684;&#x3001;&#x672A;&#x88AB;&#x6362;&#x51FA;&#x7684;&#x7269;&#x7406;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#xFF0C;&#x5355;&#x4F4D;kb&#x3002;</li>
<li><code>SHR</code>&#xFF1A;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#xFF0C;&#x53EF;&#x80FD;&#x4E5F;&#x88AB;&#x5176;&#x4ED6;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;&#x7740;</li>
<li><code>S</code>&#xFF1A;&#x8FDB;&#x7A0B;&#x72B6;&#x6001;&#x3002;D:&#x4E0D;&#x53EF;&#x4E2D;&#x65AD;&#x7684;&#x7761;&#x7720;&#x72B6;&#x6001; R:&#x8FD0;&#x884C; S:&#x7761;&#x7720; T:&#x8DDF;&#x8E2A;/&#x505C;&#x6B62; Z:&#x50F5;&#x6B7B;</li>
<li><code>%CPU</code>&#xFF1A;&#x4E0A;&#x6B21;&#x66F4;&#x65B0;&#x5230;&#x73B0;&#x5728;&#x7684;CPU&#x65F6;&#x95F4;&#x5360;&#x7528;&#x767E;&#x5206;&#x6BD4;</li>
<li><code>%MEM</code>&#xFF1A;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;&#x7684;&#x7269;&#x7406;&#x5185;&#x5B58;&#x767E;&#x5206;&#x6BD4;</li>
<li><code>TIME+</code>&#xFF1A;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;&#x7684;CPU&#x65F6;&#x95F4;&#x603B;&#x8BA1;&#xFF0C;&#x5355;&#x4F4D;1/100&#x79D2;</li>
<li><code>COMMAND</code>&#xFF1A;&#x8FDB;&#x7A0B;&#x540D;&#x79F0;&#xFF08;&#x547D;&#x4EE4;&#x540D;/&#x547D;&#x4EE4;&#x884C;&#xFF09;</li>
</ul>
<h4 id="uptime"><a href="#uptime" class="headerlink" title="uptime"></a>uptime</h4><p>&#x663E;&#x793A;&#x7CFB;&#x7EDF;&#x65F6;&#x95F4;&#x3001;&#x8FD0;&#x884C;&#x65F6;&#x957F;&#x53CA;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#xFF0C;&#x540C;<code>top</code>&#x547D;&#x4EE4;&#x7B2C;&#x4E00;&#x884C;&#x5185;&#x5BB9;&#xFF0C;&#x9700;&#x624B;&#x52A8;&#x5B89;&#x88C5;</p>
<h4 id="htop"><a href="#htop" class="headerlink" title="htop"></a>htop</h4><p>&#x5B83;&#x4E0E;&#x4F20;&#x7EDF;&#x7684;<code>top</code>&#x547D;&#x4EE4;&#x529F;&#x80FD;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x5B83;&#x6709;&#x66F4;&#x52A0;&#x5F3A;&#x5927;&#x7684;&#x529F;&#x80FD;&#x53CA;&#x80FD;&#x663E;&#x793A;&#x66F4;&#x591A;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x901A;&#x8FC7;&#x65B9;&#x5411;&#x952E;&#x79FB;&#x52A8;&#x5149;&#x6807;&#xFF0C;&#x540C;&#x65F6;&#x652F;&#x6301;&#x9F20;&#x6807;&#x64CD;&#x4F5C;</p>
<blockquote>
<p><code>-d</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x5237;&#x65B0;&#x7684;&#x5EF6;&#x8FDF;&#x65F6;&#x95F4;<br><code>-u</code>&#xFF1A;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x7684;&#x7528;&#x6237;&#x7684;&#x8FDB;&#x7A0B;&#x4FE1;&#x606F;&#x5217;&#x8868;<br><code>-s</code>&#xFF1A;&#x6309;&#x6307;&#x5B9A;&#x7684;&#x5217;&#x6392;&#x5E8F;  </p>
</blockquote>
<p>&#x4EA4;&#x4E92;&#x547D;&#x4EE4;&#xFF1A;</p>
<ul>
<li>F1~F10&#xFF1A;&#x7565;&#xFF0C;F2&#x53EF;&#x5B9A;&#x4E49;&#x663E;&#x793A;&#x4FE1;&#x606F;&#x5185;&#x5BB9;&#x548C;&#x6837;&#x5F0F;</li>
<li>&#x7A7A;&#x683C;&#xFF1A;&#x591A;&#x9009;&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x4EE5;&#x540C;&#x65F6;kill&#x591A;&#x4E2A;&#x9009;&#x4E2D;&#x8FDB;&#x7A0B;  </li>
<li><code>l</code>&#xFF1A;&#x663E;&#x793A;&#x9009;&#x4E2D;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;  </li>
<li><code>s</code>&#xFF1A;&#x8FFD;&#x8E2A;&#x8FDB;&#x7A0B;&#x7684;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;  </li>
<li><code>t</code>&#xFF1A;&#x663E;&#x793A;&#x8FDB;&#x7A0B;&#x6811;&#xFF0C;&#x540C;F5  </li>
<li><code>a</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x6307;&#x5B9A;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x5728;&#x54EA;&#x4E2A;cpu&#x4E0A;  </li>
<li><code>q</code>&#xFF1A;&#x8FD4;&#x56DE;&#x4E3B;&#x754C;&#x9762;&#x6216;&#x9000;&#x51FA;  </li>
</ul>
<h4 id="iftop"><a href="#iftop" class="headerlink" title="iftop"></a>iftop</h4><h4 id="iotop"><a href="#iotop" class="headerlink" title="iotop"></a>iotop</h4><h4 id="ss"><a href="#ss" class="headerlink" title="ss"></a>ss</h4><p><code>ss [OPTION] [FILTER]</code><br><em>socket statistics</em>&#x7684;&#x7F29;&#x5199;&#xFF0C;&#x7528;&#x4E8E;&#x4EE3;&#x66FF;netstat&#x547D;&#x4EE4;&#xFF0C;&#x9009;&#x9879;&#x76F8;&#x8FD1;&#x3002;<code>ss</code>&#x80FD;&#x591F;&#x663E;&#x793A;&#x6BD4;<code>netstat</code>&#x66F4;&#x591A;&#x7684;&#x4FE1;&#x606F;&#x5E76;&#x4E14;&#x901F;&#x5EA6;&#x4E5F;&#x66F4;&#x5FEB;&#x3002;netstat&#x662F;&#x4ECE;/proc &#x4E0B;&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x4FE1;&#x606F;&#x518D;&#x6574;&#x7406;&#x663E;&#x793A;&#x7684;&#xFF0C;&#x800C;<code>ss</code>&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x4ECE;&#x5185;&#x6838;&#x7A7A;&#x95F4;&#x83B7;&#x53D6;&#x4FE1;&#x606F;  </p>
<p><strong>OPTION</strong></p>
<blockquote>
<p><code>-n</code>&#xFF1A;&#x6570;&#x5B57;&#x65B9;&#x5F0F;&#x663E;&#x793A;IP&#x548C;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;&#x6BD4;&#x5982;&#x663E;&#x793A; 80 &#x800C;&#x4E0D;&#x662F; http<br><code>-t</code>&#xFF1A;&#x663E;&#x793A;TCP&#x534F;&#x8BAE;&#x7AEF;&#x53E3;<br><code>-u</code>&#xFF1A;UDP<br><code>-l</code>&#xFF1A;&#x9ED8;&#x8BA4;&#x4E0D;&#x663E;&#x793A;&#x76D1;&#x542C;&#x7684;&#x5957;&#x63A5;&#x5B57;&#xFF0C;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x6307;&#x660E;&#x53EA;&#x663E;&#x793A;&#x76D1;&#x542C;&#x8FDE;&#x63A5;<br><code>-4</code>&#xFF1A;&#x663E;&#x793A;ipv4&#x670D;&#x52A1;&#x76D1;&#x542C;&#x72B6;&#x6001;<br><code>-p</code>&#xFF1A;&#x76F8;&#x5173;&#x7A0B;&#x5E8F;&#x548C;PID<br><code>-e</code>&#xFF1A;&#x6269;&#x5C55;&#x683C;&#x5F0F;&#x4FE1;&#x606F;<br><code>-s</code>&#xFF1A;&#x663E;&#x793A;&#x5957;&#x63A5;&#x5B57;&#x4F7F;&#x7528;&#x7684;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;<br><code>-o</code>&#xFF1A;&#x8BA1;&#x65F6;&#x5668;&#x4FE1;&#x606F;<br><code>-m</code>&#xFF1A;&#x5185;&#x5B58;&#x7528;&#x91CF;<br><code>-h</code>&#xFF1A;&#x67E5;&#x770B;&#x5E2E;&#x52A9;  </p>
</blockquote>
<p><strong>FILTER</strong></p>
<blockquote>
<p><code>dport|sport OP :PORT</code>&#xFF1A;&#x5339;&#x914D;&#x8FDC;&#x7A0B;dport&#x6216;&#x672C;&#x5730;src&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;   </p>
<blockquote>
<p>OP&#x4E3A;&#x6BD4;&#x8F83;&#x7B26;&#xFF1A; <code>&gt;,&lt;,==,!=,&gt;=,&lt;=</code> &#x6216; <code>gt,lt,eq,ne,ge,le</code>&#xFF0C;&#x4F7F;&#x7528;<code>&gt;</code>&#x6216;<code>&lt;</code>&#x9700;<strong>&#x8F6C;&#x4E49;</strong><br>PORT&#x53EF;&#x4E3A;&#x7AEF;&#x53E3;&#x53F7;&#x6216;&#x670D;&#x52A1;&#x540D;&#xFF0C;&#x5982;<code>:80</code>&#x6216;<code>:http</code>  </p>
</blockquote>
</blockquote>
<blockquote>
<p><code>dst|src IP[:PORT]</code>&#xFF1A;&#x5339;&#x914D;&#x8FDC;&#x7A0B;dst&#x6216;&#x672C;&#x5730;src&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;<br><code>state</code>&#xFF1A;&#x5339;&#x914D;&#x72B6;&#x6001;&#xFF0C;&#x5305;&#x62EC;all, established, listen, closed, closing, close-wait, syn-sent, syn-recv, time-wait ,fin-wait-1, last-ack, connected&#x2026;<br><code>-a|-o</code>&#xFF1A;&#x6761;&#x4EF6;&#x95F4;&#x5173;&#x7CFB;and&#x3001;or</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ss -tuln            <span class="comment"># </span></span><br><span class="line">ss -s               <span class="comment"># socket&#x7EDF;&#x8BA1;</span></span><br><span class="line">ss -l               <span class="comment"># &#x67E5;&#x770B;&#x6240;&#x6709;&#x76D1;&#x542C;</span></span><br><span class="line">ss -lp | grep ssh   <span class="comment"># &#x67E5;&#x770B;ssh&#x7AEF;&#x53E3;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x8FC7;&#x6EE4;&#x529F;&#x80FD;</span></span><br><span class="line">ss dst 192.168.1.1                  <span class="comment"># &#x5339;&#x914D;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;</span></span><br><span class="line">ss src 172.16.60.2:22               <span class="comment"># &#x5339;&#x914D;&#x672C;&#x673A;22&#x53F7;&#x7AEF;&#x53E3;</span></span><br><span class="line">ss sport \&gt; :50                     <span class="comment"># &#x672C;&#x5730;&#x7AEF;&#x53E3;&#x53F7;&#x5927;&#x4E8E;50</span></span><br><span class="line">ss sport eq :http                   <span class="comment"># &#x5339;&#x914D;80&#x7AEF;&#x53E3;</span></span><br><span class="line">ss -a dport = :22 or sport = :22    <span class="comment"># &#x5339;&#x914D;&#x8FDC;&#x7A0B;&#x6216;&#x672C;&#x5730;22&#x7AEF;&#x53E3;</span></span><br><span class="line">ss -o state established <span class="string">&apos;( dport = :22 or sport = :22 )&apos;</span>    <span class="comment"># &#x5339;&#x914D;22&#x53F7;&#x7AEF;&#x53E3;&#x5DF2;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;</span></span><br><span class="line"><span class="comment">####&#x6CE8;&#x610F;&#x7B49;&#x53F7;&#x524D;&#x540E;&#x7A7A;&#x683C;&#xFF0C;&#x62EC;&#x53F7;&#x8981;&#x8F6C;&#x4E49;&#x6216;&#x5F15;&#x53F7;&#x4E14;&#x91CC;&#x9762;&#x6709;&#x7A7A;&#x683C;</span></span><br></pre></td></tr></table></figure>
<p><em>&#x76F4;&#x63A5;&#x6267;&#x884C; ss &#x4F1A;&#x5217;&#x51FA;&#x5F53;&#x524D;&#x6240;&#x6709;&#x5DF2;&#x5EFA;&#x7ACB;&#x7684;&#x975E;&#x76D1;&#x542C;&#x7684;&#xFF08;non-listening&#xFF09;&#x8FDE;&#x63A5;&#xFF0C;&#x4E00;&#x4E2A;&#x5E38;&#x7528;&#x7684;&#x53C2;&#x6570; -tuln</em></p>
<h4 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h4><p><code>lsof [option] [FILE|USER|PID...]|</code><br>&#x5217;&#x51FA;&#x67D0;&#x4E2A;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x4FE1;&#x606F;&#x3002;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x53EF;&#x80FD;&#x662F;&#x666E;&#x901A;&#x7684;&#x6587;&#x4EF6;&#x3001;&#x76EE;&#x5F55;&#x3001;NFS&#x6587;&#x4EF6;&#x3001;&#x5757;&#x6587;&#x4EF6;&#x3001;&#x5B57;&#x7B26;&#x6587;&#x4EF6;&#x3001;&#x5171;&#x4EAB;&#x5E93;&#x3001;&#x5E38;&#x89C4;&#x7BA1;&#x9053;&#x3001;&#x547D;&#x540D;&#x7BA1;&#x9053;&#x3001;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x3001;Socket&#x6D41;&#x3001;&#x7F51;&#x7EDC;Socket&#x3001;UNIX&#x57DF;Socket&#xFF0C;&#x4EE5;&#x53CA;&#x5176;&#x5B83;&#x66F4;&#x591A;&#x7C7B;&#x578B;</p>
<blockquote>
<p><code>-i[46] [protocol][@hostname|hostaddr][:service|port]</code>&#xFF1A;&#x7B26;&#x5408;&#x6761;&#x4EF6;&#x7684;&#x8FDB;&#x7A0B;  </p>
<blockquote>
<p><code>46</code>&#xFF1A;IPv4 or IPv6<br><code>protocol</code>&#xFF1A;TCP or UDP<br><code>hostname</code>&#xFF1A;&#x4E3B;&#x673A;&#x540D;<br><code>hostaddr</code>&#xFF1A;IPv4&#x4F4D;&#x7F6E;<br><code>service</code>&#xFF1A;/etc/service&#x4E2D;&#x7684; service name (&#x53EF;&#x4EE5;&#x4E0D;&#x53EA;&#x4E00;&#x4E2A;)<br><code>port</code>&#xFF1A;&#x7AEF;&#x53E3;&#x53F7; (&#x53EF;&#x4EE5;&#x4E0D;&#x53EA;&#x4E00;&#x4E2A;)</p>
</blockquote>
</blockquote>
<blockquote>
<p><code>-p PID</code>&#xFF1A;&#x67E5;&#x770B;&#x8BE5;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x4E86;&#x54EA;&#x4E9B;&#x6587;&#x4EF6;&#xFF0C;&#x8FDB;&#x7A0B;&#x53F7;&#x524D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>^</code>&#x53D6;&#x53CD;<br><code>-u USER</code>&#xFF1A;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x7528;&#x6237;&#x7684;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x7528;&#x6237;&#x540D;&#x524D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>^</code>&#x53D6;&#x53CD;<br><code>-g GID</code>&#xFF1A;&#x663E;&#x793A;&#x5F52;&#x5C5E;gid&#x7684;&#x8FDB;&#x7A0B;&#x60C5;&#x51B5;<br><code>-n</code>&#xFF1A;&#x4E0D;&#x53CD;&#x89E3;IP&#x81F3;HOSTNAME<br><code>-c STR</code>&#xFF1A;&#x663E;&#x793A;&#x5176;COMMAND&#x5217;&#x4E2D;&#x5305;&#x542B;&#x6307;&#x5B9A;&#x5B57;&#x7B26;(STR)&#x7684;&#x8FDB;&#x7A0B;&#x6240;&#x6709;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x91CD;&#x590D;&#x4F7F;&#x7528;<br><code>+d /DIR/</code>&#xFF1A;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x4E0B;&#x88AB;&#x8FDB;&#x7A0B;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;<br><code>+D /DIR/</code>&#xFF1A;&#x57FA;&#x672C;&#x529F;&#x80FD;&#x540C;&#x4E0A;&#xFF0C;&#x4F46;&#x4F1A;&#x5BF9;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x8FDB;&#x884C;&#x9012;&#x5F52;&#x67E5;&#x627E;<br><code>-N</code>&#xFF1A;&#x5217;&#x51FA;&#x6240;&#x6709;<code>NFS</code>&#x6587;&#x4EF6;<br><code>-d FD</code>&#xFF1A;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x7684;&#x76F8;&#x5173;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4E3A;&#x63CF;&#x8FF0;&#x7B26;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x8303;&#x56F4;<br><code>-d mem</code>&#xFF1A;&#x5217;&#x51FA;&#x6240;&#x6709;&#x5185;&#x5B58;&#x6620;&#x5C04;&#x6587;&#x4EF6;<br><code>-d mmap</code>&#xFF1A;&#x663E;&#x793A;&#x6240;&#x6709;&#x5185;&#x5B58;&#x6620;&#x5C04;&#x8BBE;&#x5907;<br><code>-d txt</code>&#xFF1A;&#x5217;&#x51FA;&#x6240;&#x6709;&#x52A0;&#x8F7D;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x5E76;&#x6B63;&#x5728;&#x6267;&#x884C;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x5305;&#x542B;code&#x548C;data<br><code>-d cwd</code>&#xFF1A;&#x6B63;&#x5728;&#x8BBF;&#x95EE;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x7684;&#x8FDB;&#x7A0B;&#x5217;&#x8868;<br><code>-a</code>&#xFF1A;&#x7528;&#x6765;&#x8FDE;&#x63A5;&#x4E0A;&#x8FF0;&#x591A;&#x4E2A;&#x9009;&#x9879;&#xFF0C;and&#x7684;&#x610F;&#x601D;<br><code>-v MOUNT_POINT</code>&#xFF1A;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x6302;&#x8F7D;&#x70B9;&#x88AB;&#x54EA;&#x4E9B;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lsof -i :80</span><br><span class="line">lsof -i tcp</span><br><span class="line">lsof -c httpd -a -u ^root</span><br><span class="line">lsof /tmp/a.txt</span><br><span class="line">lsof -p 1245,5566,45222</span><br><span class="line">lsof -d 0-2</span><br><span class="line">lsof -v /mnt</span><br></pre></td></tr></table></figure>
<p><strong>&#x6CE8;&#xFF1A;</strong>&#x591A;&#x6761;&#x4EF6;&#x65F6;&#x9ED8;&#x8BA4;&#x4E3A;or&#x5173;&#x7CFB;&#xFF0C;and&#x5173;&#x7CFB;&#x9700;&#x52A0;<code>-a</code>&#x9009;&#x9879;</p>
<h4 id="iostat"><a href="#iostat" class="headerlink" title="iostat"></a>iostat</h4><p><code>iostat [OPTION] [DELAY [COUNT]]</code><br>&#x7528;&#x4E8E;&#x67E5;&#x770B;CPU&#x3001;&#x7F51;&#x5361;&#x3001;tty&#x8BBE;&#x5907;&#x3001;&#x78C1;&#x76D8;&#x3001;CD-ROM &#x7B49;&#x7B49;&#x8BBE;&#x5907;&#x7684;&#x6D3B;&#x52A8;&#x60C5;&#x51B5;,    &#x8D1F;&#x8F7D;&#x4FE1;&#x606F;<br><code>-c</code>&#xFF1A;&#x663E;&#x793A;CPU&#x4F7F;&#x7528;&#x60C5;&#x51B5;<br><code>-d</code>&#xFF1A;&#x663E;&#x793A;&#x78C1;&#x76D8;&#x4F7F;&#x7528;&#x60C5;&#x51B5;<br><code>-k</code>&#xFF1A;&#x4EE5; KB &#x4E3A;&#x5355;&#x4F4D;&#x663E;&#x793A;<br><code>-m</code>&#xFF1A;&#x4EE5; MB &#x4E3A;&#x5355;&#x4F4D;&#x663E;&#x793A;<br><code>-N</code>&#xFF1A;&#x663E;&#x793A;&#x78C1;&#x76D8;&#x9635;&#x5217;(LVM) &#x4FE1;&#x606F;<br><code>-n</code>&#xFF1A;&#x663E;&#x793A;NFS &#x4F7F;&#x7528;&#x60C5;&#x51B5;<br><code>-p DEV</code>&#xFF1A;&#x663E;&#x793A;&#x78C1;&#x76D8;&#x548C;&#x5206;&#x533A;&#x7684;&#x60C5;&#x51B5;<br><code>-t</code>&#xFF1A;&#x663E;&#x793A;&#x7EC8;&#x7AEF;&#x548C;CPU&#x7684;&#x4FE1;&#x606F;<br><code>-x</code>&#xFF1A;&#x663E;&#x793A;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iostat 2 4          # &#x6BCF;2&#x79D2;&#x5237;&#x4E00;&#x6B21;&#xFF0C;&#x663E;&#x793A;4&#x6B21;</span><br><span class="line">iostat -d sda1      # &#x67E5;&#x770B;&#x6307;&#x5B9A;&#x5206;&#x533A;&#x4FE1;&#x606F;</span><br><span class="line">iostat -mx 1 5      # &#x4EE5;M&#x4E3A;&#x5355;&#x4F4D;&#x663E;&#x793A;&#x8BE6;&#x60C5;</span><br></pre></td></tr></table></figure>
<p><strong>&#x663E;&#x793A;&#x5B57;&#x6BB5;&#x8BF4;&#x660E;</strong>&#xFF1A;</p>
<ul>
<li><p><strong>cpu&#x5C5E;&#x6027;</strong><br>  <code>%user</code>&#xFF1A;CPU&#x5904;&#x5728;&#x7528;&#x6237;&#x6A21;&#x5F0F;&#x4E0B;&#x7684;&#x65F6;&#x95F4;&#x767E;&#x5206;&#x6BD4;<br>  <code>%nice</code>&#xFF1A;CPU&#x5904;&#x5728;&#x5E26;NICE&#x503C;&#x7684;&#x7528;&#x6237;&#x6A21;&#x5F0F;&#x4E0B;&#x7684;&#x65F6;&#x95F4;&#x767E;&#x5206;&#x6BD4;<br>  <code>%system</code>&#xFF1A;CPU&#x5904;&#x5728;&#x7CFB;&#x7EDF;&#x6A21;&#x5F0F;&#x4E0B;&#x7684;&#x65F6;&#x95F4;&#x767E;&#x5206;&#x6BD4;<br>  <code>%iowait</code>&#xFF1A;CPU&#x7B49;&#x5F85;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x5B8C;&#x6210;&#x65F6;&#x95F4;&#x7684;&#x767E;&#x5206;&#x6BD4;<br>  <code>%steal</code>&#xFF1A;&#x7BA1;&#x7406;&#x7A0B;&#x5E8F;&#x7EF4;&#x62A4;&#x53E6;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x5904;&#x7406;&#x5668;&#x65F6;&#xFF0C;&#x865A;&#x62DF;CPU&#x7684;&#x65E0;&#x610F;&#x8BC6;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x767E;&#x5206;&#x6BD4;<br>  <code>%idle</code>&#xFF1A;CPU&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#x767E;&#x5206;&#x6BD4;</p>
<p>  <strong>&#x63D0;&#x793A;</strong>&#xFF1A;&#x5982;&#x679C;%iowait&#x7684;&#x503C;&#x8FC7;&#x9AD8;&#xFF0C;&#x8868;&#x793A;&#x786C;&#x76D8;&#x5B58;&#x5728;I/O&#x74F6;&#x9888;&#xFF0C;%idle&#x503C;&#x9AD8;&#xFF0C;&#x8868;&#x793A;CPU&#x8F83;&#x7A7A;&#x95F2;&#xFF0C;&#x5982;&#x679C;%idle&#x503C;&#x9AD8;&#x4F46;&#x7CFB;&#x7EDF;&#x54CD;&#x5E94;&#x6162;&#x65F6;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x662F;CPU&#x7B49;&#x5F85;&#x5206;&#x914D;&#x5185;&#x5B58;&#xFF0C;&#x6B64;&#x65F6;&#x5E94;&#x52A0;&#x5927;&#x5185;&#x5B58;&#x5BB9;&#x91CF;&#x3002;%idle&#x503C;&#x5982;&#x679C;&#x6301;&#x7EED;&#x4F4E;&#x4E8E;10&#xFF0C;&#x90A3;&#x4E48;&#x7CFB;&#x7EDF;&#x7684;CPU&#x5904;&#x7406;&#x80FD;&#x529B;&#x76F8;&#x5BF9;&#x8F83;&#x4F4E;&#xFF0C;&#x8868;&#x660E;&#x7CFB;&#x7EDF;&#x4E2D;&#x6700;&#x9700;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x8D44;&#x6E90;&#x662F;CPU&#x3002;</p>
</li>
<li><p><strong>disk&#x5C5E;&#x6027;</strong><br>  <code>rrqm/s</code>&#xFF1A;&#x6BCF;&#x79D2;&#x8FDB;&#x884C; merge &#x7684;&#x8BFB;&#x64CD;&#x4F5C;&#x6570;&#x76EE;&#x3002;&#x5373; rmerge/s<br>  <code>wrqm/s</code>&#xFF1A;&#x6BCF;&#x79D2;&#x8FDB;&#x884C; merge &#x7684;&#x5199;&#x64CD;&#x4F5C;&#x6570;&#x76EE;&#x3002;&#x5373; wmerge/s<br>  <code>r/s</code>&#xFF1A;&#x6BCF;&#x79D2;&#x5B8C;&#x6210;&#x7684;&#x8BFB; I/O &#x8BBE;&#x5907;&#x6B21;&#x6570;&#x3002;&#x5373; rio/s<br>  <code>w/s</code>&#xFF1A;&#x6BCF;&#x79D2;&#x5B8C;&#x6210;&#x7684;&#x5199; I/O &#x8BBE;&#x5907;&#x6B21;&#x6570;&#x3002;&#x5373; wio/s<br>  <code>rsec/s</code>&#xFF1A;&#x6BCF;&#x79D2;&#x8BFB;&#x6247;&#x533A;&#x6570;&#x3002;&#x5373; rsect/s<br>  <code>wsec/s</code>&#xFF1A;&#x6BCF;&#x79D2;&#x5199;&#x6247;&#x533A;&#x6570;&#x3002;&#x5373; wsect/s<br>  <code>rkB/s</code>&#xFF1A;&#x6BCF;&#x79D2;&#x8BFB;K&#x5B57;&#x8282;&#x6570;&#x3002;&#x662F; rsect/s &#x7684;&#x4E00;&#x534A;&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x6247;&#x533A;&#x5927;&#x5C0F;&#x4E3A;512&#x5B57;&#x8282;<br>  <code>wkB/s</code>&#xFF1A;&#x6BCF;&#x79D2;&#x5199;K&#x5B57;&#x8282;&#x6570;&#x3002;&#x662F; wsect/s &#x7684;&#x4E00;&#x534A;<br>  <code>avgrq-sz</code>&#xFF1A;&#x5E73;&#x5747;&#x6BCF;&#x6B21;&#x8BBE;&#x5907;I/O&#x64CD;&#x4F5C;&#x7684;&#x6570;&#x636E;&#x5927;&#x5C0F; (&#x6247;&#x533A;)<br>  <code>avgqu-sz</code>&#xFF1A;&#x5E73;&#x5747;I/O&#x961F;&#x5217;&#x957F;&#x5EA6;&#x3002;<br>  <code>await</code>&#xFF1A;&#x5E73;&#x5747;&#x6BCF;&#x6B21;&#x8BBE;&#x5907;I/O&#x64CD;&#x4F5C;&#x7684;&#x7B49;&#x5F85;&#x65F6;&#x95F4; (&#x6BEB;&#x79D2;)<br>  <code>svctm</code>&#xFF1A;&#x5E73;&#x5747;&#x6BCF;&#x6B21;&#x8BBE;&#x5907;I/O&#x64CD;&#x4F5C;&#x7684;&#x670D;&#x52A1;&#x65F6;&#x95F4; (&#x6BEB;&#x79D2;)<br>  <code>%util</code>&#xFF1A;&#x4E00;&#x79D2;&#x4E2D;&#x6709;&#x767E;&#x5206;&#x4E4B;&#x591A;&#x5C11;&#x7684;&#x65F6;&#x95F4;&#x7528;&#x4E8E; I/O &#x64CD;&#x4F5C;&#xFF0C;&#x5373;&#x88AB;io&#x6D88;&#x8017;&#x7684;cpu&#x767E;&#x5206;&#x6BD4;</p>
<p>  <strong>&#x63D0;&#x793A;</strong>&#xFF1A;&#x5982;&#x679C; %util &#x63A5;&#x8FD1; 100%&#xFF0C;&#x8BF4;&#x660E;&#x4EA7;&#x751F;&#x7684;I/O&#x8BF7;&#x6C42;&#x592A;&#x591A;&#xFF0C;I/O&#x7CFB;&#x7EDF;&#x5DF2;&#x7ECF;&#x6EE1;&#x8D1F;&#x8377;&#xFF0C;&#x8BE5;&#x78C1;&#x76D8;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x74F6;&#x9888;&#x3002;&#x5982;&#x679C; svctm &#x6BD4;&#x8F83;&#x63A5;&#x8FD1; await&#xFF0C;&#x8BF4;&#x660E; I/O &#x51E0;&#x4E4E;&#x6CA1;&#x6709;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#xFF1B;&#x5982;&#x679C; await &#x8FDC;&#x5927;&#x4E8E; svctm&#xFF0C;&#x8BF4;&#x660E;I/O &#x961F;&#x5217;&#x592A;&#x957F;&#xFF0C;io&#x54CD;&#x5E94;&#x592A;&#x6162;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x5FC5;&#x8981;&#x4F18;&#x5316;&#x3002;&#x5982;&#x679C;avgqu-sz&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x4E5F;&#x8868;&#x793A;&#x6709;&#x5F53;&#x91CF;io&#x5728;&#x7B49;&#x5F85;</p>
</li>
</ul>
<h4 id="vmstat"><a href="#vmstat" class="headerlink" title="vmstat"></a>vmstat</h4><p><code>vmstat [OPTION] [DELAY [COUNT]]</code><br>&#x663E;&#x793A;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;&#x72B6;&#x6001;&#xFF0C;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x62A5;&#x544A;&#x5173;&#x4E8E;&#x8FDB;&#x7A0B;&#x3001;&#x5185;&#x5B58;&#x3001;I/O&#x7B49;&#x7CFB;&#x7EDF;&#x6574;&#x4F53;&#x8FD0;&#x884C;&#x72B6;&#x6001;</p>
<blockquote>
<p><code>-a</code>&#xFF1A;&#x663E;&#x793A;&#x6D3B;&#x8DC3;&#x548C;&#x975E;&#x6D3B;&#x8DC3;&#x5185;&#x5B58;<br><code>-f</code>&#xFF1A;&#x663E;&#x793A;&#x4ECE;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x81F3;&#x4ECA;&#x7684;fork&#x6570;&#x91CF;<br><code>-m</code>&#xFF1A;&#x663E;&#x793A;slabinfo<br><code>-n</code>&#xFF1A;&#x53EA;&#x5728;&#x5F00;&#x59CB;&#x65F6;&#x663E;&#x793A;&#x4E00;&#x6B21;&#x5404;&#x5B57;&#x6BB5;&#x540D;&#x79F0;<br><code>-s</code>&#xFF1A;&#x663E;&#x793A;&#x5185;&#x5B58;&#x7EDF;&#x8BA1;&#x6570;&#x636E;<br><code>-d</code>&#xFF1A;&#x663E;&#x793A;&#x78C1;&#x76D8;&#x76F8;&#x5173;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;<br><code>-p</code>&#xFF1A;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x78C1;&#x76D8;&#x5206;&#x533A;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;</p>
</blockquote>
<p><strong>&#x663E;&#x793A;&#x5B57;&#x6BB5;&#x8BF4;&#x660E;</strong>&#xFF1A;</p>
<ul>
<li><strong>proc</strong><br>  <code>r</code>&#xFF1A;&#x7B49;&#x5F85;&#x8FD0;&#x884C;&#x7684;&#x8FDB;&#x7A0B;&#x4E2A;&#x6570;&#xFF0C;CPU&#x4E0A;&#x7B49;&#x5F85;&#x8FD0;&#x884C;&#x4EFB;&#x52A1;&#x7684;&#x961F;&#x5217;&#x957F;&#x5EA6;<br>  <code>b</code>&#xFF1A;&#x5904;&#x4E8E;&#x4E0D;&#x53EF;&#x4E2D;&#x65AD;&#x7761;&#x7720;&#x7684;&#x8FDB;&#x7A0B;&#x4E2A;&#x6570;&#xFF0C;&#x88AB;&#x963B;&#x585E;&#x7684;&#x4EFB;&#x52A1;&#x961F;&#x5217;&#x957F;&#x5EA6;</li>
<li><strong>memory</strong><br>  <code>swad</code>&#xFF1A;&#x4EA4;&#x6362;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x603B;&#x91CF;<br>  <code>free</code>&#xFF1A;&#x7A7A;&#x95F2;&#x7684;&#x7269;&#x7406;&#x5185;&#x5B58;&#x603B;&#x91CF;<br>  <code>buffer</code>&#xFF1A;&#x7528;&#x4E8E;buffer&#x7684;&#x5185;&#x5B58;&#x603B;&#x91CF;<br>  <code>cache</code>&#xFF1A;&#x7528;&#x4E8E;cache&#x7684;&#x5185;&#x5B58;&#x603B;&#x91CF;</li>
<li><strong>swap</strong><br>  <code>si</code>&#xFF1A;&#x6570;&#x636E;&#x8FDB;&#x5165;swap&#x4E2D;&#x7684;&#x6570;&#x636E;&#x901F;&#x7387;&#xFF08;kb/s&#xFF09;<br>  <code>so</code>&#xFF1A;&#x6570;&#x636E;&#x79BB;&#x5F00;swap&#x7684;&#x901F;&#x7387;</li>
<li><strong>io</strong><br>  <code>bi</code>&#xFF1A;&#x4ECE;&#x5757;&#x8BBE;&#x5907;&#x8BFB;&#x5165;&#x6570;&#x636E;&#x5230;&#x7CFB;&#x7EDF;&#x7684;&#x901F;&#x7387;<br>  <code>bo</code>&#xFF1A;&#x4FDD;&#x5B58;&#x6570;&#x636E;&#x5230;&#x5757;&#x8BBE;&#x5907;&#x7684;&#x901F;&#x7387;</li>
<li><strong>system</strong><br>  <code>in</code>&#xFF1A;interrupts, &#x4E2D;&#x65AD;&#x901F;&#x7387;<br>  <code>cs</code>&#xFF1A;context switch, &#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x7684;&#x901F;&#x7387;</li>
<li><strong>cpu</strong><br>  <code>us</code>&#xFF1A;&#x7528;&#x6237;&#x7A7A;&#x95F4;<br>  <code>sy</code>&#xFF1A;&#x5185;&#x6838;&#x7A7A;&#x95F4;<br>  <code>id</code>&#xFF1A;&#x7A7A;&#x95F2;<br>  <code>wa</code>&#xFF1A;&#x7B49;&#x5F85;<br>  <code>st</code>&#xFF1A;&#x88AB;&#x865A;&#x62DF;&#x5316;&#x7ED9;&#x5077;&#x8D70;&#x7684;&#x65F6;&#x95F4;  </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vmstat                  <span class="comment"># &#x53EA;&#x663E;&#x793A;&#x4E00;&#x6761;&#x6570;&#x636E;&#x540E;&#x9000;&#x51FA;</span></span><br><span class="line">vmstat 2                <span class="comment"># &#x6BCF;2&#x79D2;&#x663E;&#x793A;&#x4E00;&#x6761;&#x6570;&#x636E;</span></span><br><span class="line">vmstat 2 3              <span class="comment"># &#x6BCF;2&#x79D2;&#x663E;&#x793A;&#x4E00;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x603B;&#x663E;&#x793A;3&#x6761;</span></span><br><span class="line">vmstat -p /dev/sda1     <span class="comment"># &#x67E5;&#x770B;/dev/sda1&#x78C1;&#x76D8;&#x7684;&#x8BFB;/&#x5199;&#x72B6;&#x6001;</span></span><br></pre></td></tr></table></figure>
<h4 id="mpstat"><a href="#mpstat" class="headerlink" title="mpstat"></a>mpstat</h4><p><code>mpstat [-P {|ALL}] [delay [count]]</code><br>MultiProcessor Statistics&#xFF0C;&#x662F;&#x5B9E;&#x65F6;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#x5DE5;&#x5177;,&#x5176;&#x62A5;&#x544A;&#x4E0E;CPU&#x7684;&#x4E00;&#x4E9B;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x5B58;&#x653E;&#x5728;/proc/stat&#x6587;&#x4EF6;&#x4E2D;</p>
<blockquote>
<p><code>-P {|ALL}</code>&#xFF1A;&#x8868;&#x793A;&#x76D1;&#x63A7;&#x54EA;&#x4E2A;CPU&#xFF0C; cpu&#x5728;[0,cpu&#x4E2A;&#x6570;-1]&#x4E2D;&#x53D6;&#x503C;<br><code>delay</code>&#xFF1A;&#x76F8;&#x90BB;&#x7684;&#x4E24;&#x6B21;&#x91C7;&#x6837;&#x7684;&#x95F4;&#x9694;&#x65F6;&#x95F4;<br><code>count</code>&#xFF1A;&#x91C7;&#x6837;&#x7684;&#x6B21;&#x6570;&#xFF0C;count&#x53EA;&#x80FD;&#x548C;delay&#x4E00;&#x8D77;&#x4F7F;&#x7528;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mpstat -p ALL 2</span><br></pre></td></tr></table></figure>
<p><strong>&#x663E;&#x793A;&#x5B57;&#x6BB5;&#x8BF4;&#x660E;</strong></p>
<ul>
<li><code>%user</code>   &#xFF1A;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x6BB5;&#x5185;&#xFF0C;&#x7528;&#x6237;&#x6001;&#x7684;CPU&#x65F6;&#x95F4;(%)&#xFF0C;&#x4E0D;&#x5305;&#x542B;nice&#x503C;&#x4E3A;&#x8D1F;&#x8FDB;&#x7A0B; (usr/total)*100 </li>
<li><code>%nice</code>   &#xFF1A;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x6BB5;&#x5185;&#xFF0C;nice&#x503C;&#x4E3A;&#x8D1F;&#x8FDB;&#x7A0B;&#x7684;CPU&#x65F6;&#x95F4;(%) (nice/total)*100</li>
<li><code>%sys</code>   &#xFF1A;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x6BB5;&#x5185;&#xFF0C;&#x5185;&#x6838;&#x65F6;&#x95F4;(%) (system/total)*100</li>
<li><code>%iowait</code> &#xFF1A;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x6BB5;&#x5185;&#xFF0C;&#x786C;&#x76D8;IO&#x7B49;&#x5F85;&#x65F6;&#x95F4;(%) (iowait/total)*100</li>
<li><code>%irq</code>   &#xFF1A;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x6BB5;&#x5185;&#xFF0C;&#x786C;&#x4E2D;&#x65AD;&#x65F6;&#x95F4;(%) (irq/total)*100</li>
<li><code>%soft</code>   &#xFF1A;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x6BB5;&#x5185;&#xFF0C;&#x8F6F;&#x4E2D;&#x65AD;&#x65F6;&#x95F4;(%) (softirq/total)*100</li>
<li><code>%idle</code>   &#xFF1A;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x6BB5;&#x5185;&#xFF0C;CPU&#x9664;&#x53BB;&#x7B49;&#x5F85;&#x78C1;&#x76D8;IO&#x64CD;&#x4F5C;&#x5916;&#x7684;&#x56E0;&#x4E3A;&#x4EFB;&#x4F55;&#x539F;&#x56E0;&#x800C;&#x7A7A;&#x95F2;&#x7684;&#x65F6;&#x95F4;&#x95F2;&#x7F6E;&#x65F6;&#x95F4;(%) (idle/total)*100</li>
</ul>
<h4 id="pmap"><a href="#pmap" class="headerlink" title="pmap"></a>pmap</h4><p><code>pmap [OPTION] PID</code><br>&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;&#x5185;&#x5B58;&#x6620;&#x5C04;&#x8868;&#xFF0C;&#x8BFB;&#x53D6;<code>/proc/#/maps</code>&#x6587;&#x4EF6;&#x6574;&#x7406;&#x663E;&#x793A;</p>
<blockquote>
<p><code>-x</code>&#xFF1A;&#x663E;&#x793A;&#x66F4;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;  </p>
</blockquote>
<h4 id="glances"><a href="#glances" class="headerlink" title="glances"></a>glances</h4><p>&#x529F;&#x80FD;&#x7C7B;&#x578B;top&#x7684;&#x76D1;&#x63A7;&#x5DE5;&#x5177;</p>
<blockquote>
<p><code>-b</code>&#xFF1A;&#x4EE5;byte&#x4E3A;&#x5355;&#x4F4D;&#x663E;&#x793A;&#x7F51;&#x4E0A;&#x6570;&#x636E;&#x901F;&#x5EA6;<br><code>-d</code>&#xFF1A;&#x5173;&#x95ED;&#x78C1;&#x76D8;IO&#x6A21;&#x5757;<br><code>-m</code>&#xFF1A;&#x5173;&#x95ED;mount&#x6A21;&#x5757;<br><code>-n</code>&#xFF1A;&#x5173;&#x95ED;network&#x6A21;&#x5757;<br><code>-t</code>&#xFF1A;&#x6307;&#x5B9A;&#x5237;&#x65B0;&#x65F6;&#x95F4;<br><code>-1</code>&#xFF1A;&#x6BCF;&#x9897;cpu&#x6570;&#x636E;&#x5355;&#x72EC;&#x663E;&#x793A;<br><code>-o</code> {HTML|CSV}&#xFF1A;&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x4E3A;html&#x6216;csv&#x683C;&#x5F0F;&#x6587;&#x4EF6;<br><code>-f</code>&#xFF1A;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x4FDD;&#x5B58;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x751F;&#x6210;glances.html|csv  </p>
</blockquote>
<p><em>&#x5185;&#x5EFA;&#x547D;&#x4EE4;&#x4F7F;&#x7528;<code>h</code>&#x67E5;&#x770B;&#xFF0C;&#x6B64;&#x5904;&#x7565;&#x53BB;</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">glances -o HTML -f /tmp/    <span class="comment"># </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># C/S&#x6A21;&#x5F0F;&#x4E0B;&#x8FD0;&#x884C;&#xFF0C;&#x7528;&#x4E8E;&#x76D1;&#x63A7;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;</span></span><br><span class="line">glances -s -B IPADDR    <span class="comment"># &#x670D;&#x52A1;&#x7AEF;&#x6A21;&#x5F0F;&#xFF0C;IPADDR&#x4E3A;&#x4E3B;&#x673A;&#x5730;&#x5740;&#xFF0C;&#x7528;&#x4E8E;&#x76D1;&#x542C;</span></span><br><span class="line">glances -c IPADDR       <span class="comment"># &#x5BA2;&#x6237;&#x7AEF;&#x6A21;&#x5F0F;&#xFF0C;IPADDR&#x4E3A;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;</span></span><br></pre></td></tr></table></figure>
<h4 id="dstat"><a href="#dstat" class="headerlink" title="dstat"></a>dstat</h4><p><code>dstat [OPTION] [DELAY [COUNT]]</code><br>&#x591A;&#x529F;&#x80FD;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x7EDF;&#x8BA1;&#x751F;&#x6210;&#x5DE5;&#x5177;&#xFF0C;&#x4FE1;&#x606F;&#x4E0A;&#x6709;&#x70B9;&#x7C7B;&#x4F3C;&#x4E8E;top&#x3001;free&#x3001;iostat&#x3001;vmstat&#x7B49;&#x591A;&#x4E2A;&#x5DE5;&#x5177;&#x7684;&#x5408;&#x96C6;</p>
<blockquote>
<p><code>-c</code>&#xFF1A;CPU&#x72B6;&#x6001;<br><code>-C</code>&#xFF1A;&#x6307;&#x5B9A;cpu&#x72B6;&#x6001;<br><code>-d</code>&#xFF1A;&#x78C1;&#x76D8;&#x8BFB;&#x5199;&#x72B6;&#x6001;<br><code>-D</code>&#xFF1A;&#x6307;&#x5B9A;&#x78C1;&#x76D8;&#x6216;&#x6C47;&#x603B;&#x4FE1;&#x606F;<br><code>-g</code>&#xFF1A;&#x663E;&#x793A;page&#x76F8;&#x5173;&#x7EDF;&#x8BA1;&#x6570;&#x636E;<br><code>-m</code>&#xFF1A;&#x7269;&#x7406;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x60C5;&#x51B5;<br><code>-n</code>&#xFF1A;&#x7F51;&#x7EDC;&#x4F7F;&#x7528;&#x60C5;&#x51B5;<br><code>-p</code>&#xFF1A;&#x8FDB;&#x7A0B;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;runnable&#x3001;uninterruptible&#x3001;new<br><code>-r</code>&#xFF1A;I/O&#x8BF7;&#x6C42;<br><code>-s</code>&#xFF1A;swap&#x5DF2;&#x4F7F;&#x7528;&#x548C;&#x5269;&#x4F59;&#x91CF;<br><code>--tcp</code><br><code>--udp</code><br><code>--raw</code><br><code>--socket</code><br><code>--ipc</code><br><code>--top-cpu</code>&#xFF1A;&#x6700;&#x5360;&#x7528;cpu&#x8FDB;&#x7A0B;<br><code>--top-io</code><br><code>--top-mem</code><br><code>--top-oom</code><br><code>--top-lantency</code>&#xFF1A;&#x5EF6;&#x8FDF;&#x6700;&#x5927;&#x7684;&#x8FDB;&#x7A0B;<br>&#x2026;&#x2026;</p>
</blockquote>
<p>&#x9ED8;&#x8BA4;&#x9009;&#x9879;&#x4E3A;<code>-cdngy</code></p>
<h4 id="sar"><a href="#sar" class="headerlink" title="sar"></a>sar</h4><p><code>sar [OPTION] [DELAY [COUNT]]</code><br>&#x83B7;&#x53D6;&#x7CFB;&#x7EDF;&#x7684;cpu&#x3001;&#x78C1;&#x76D8;&#x3001;&#x5185;&#x5B58;&#x3001;&#x7F51;&#x7EDC;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x7B49;&#x4FE1;&#x606F;&#xFF0C;&#x7531;<code>sysstat</code>&#x5305;&#x63D0;&#x4F9B;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x4EE5;&#x4E0B;&#x6570;&#x636E;&#x7EDF;&#x8BA1;&#x6BCF;&#x79D2;1&#x6B21;&#xFF0C;&#x5171;5&#x6B21;</span></span><br><span class="line">sar -u 1 5          <span class="comment"># cpu</span></span><br><span class="line">sar -P 0 1 5        <span class="comment"># &#x7B2C;&#x4E00;&#x4E2A;cpu</span></span><br><span class="line">sar -d 1 5          <span class="comment"># &#x78C1;&#x76D8;IO</span></span><br><span class="line">sar -r 1 5          <span class="comment"># &#x5185;&#x5B58;</span></span><br><span class="line">sar -n DEV 1 5      <span class="comment"># &#x7F51;&#x7EDC;</span></span><br><span class="line">sar -n SOCK 1 5     <span class="comment"># &#x5957;&#x8282;&#x5B57;&#x4F7F;&#x7528;&#x60C5;&#x51B5;</span></span><br><span class="line">sar -q 1 5          <span class="comment"># &#x8FDB;&#x7A0B;&#x961F;&#x5217;&#x957F;&#x5EA6;&#x548C;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#x72B6;&#x6001;</span></span><br><span class="line">sar -B 1 5          <span class="comment"># &#x5185;&#x5B58;&#x5206;&#x9875;&#x76D1;&#x63A7;</span></span><br><span class="line"></span><br><span class="line">sar 1 0 -r -e 15:00:00 &gt; data.txt   <span class="comment"># &#x6BCF;&#x79D2;&#x7EDF;&#x8BA1;1&#x6B21;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#x76F4;&#x5230;15&#x70B9;&#xFF0C;&#x5E76;&#x5199;&#x5165;&#x6587;&#x4EF6;</span></span><br><span class="line">sar -r -f data                      <span class="comment"># &#x4ECE;&#x6587;&#x4EF6;&#x662F;&#x8BFB;&#x53D6;</span></span><br></pre></td></tr></table></figure>
<h4 id="strace"><a href="#strace" class="headerlink" title="strace"></a>strace</h4><p>&#x8FFD;&#x8E2A;&#x5230;&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x6240;&#x6267;&#x884C;&#x7684;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;</p>
<p><code>-c</code>&#xFF1A;&#x7EDF;&#x8BA1;&#x65F6;&#x95F4;<br><code>-e</code>&#xFF1A;&#x7528;&#x6765;&#x5C55;&#x793A;&#x7279;&#x5B9A;&#x7684;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#xFF0C;&#x5982;open&#xFF0C;write&#x7B49;&#x7B49;<br><code>-p</code>&#xFF1A;&#x8FFD;&#x8E2A;&#x6307;&#x5B9A;pid&#x8FDB;&#x7A0B;<br><code>-o</code>&#xFF1A;&#x4FDD;&#x5B58;&#x7ED3;&#x679C;&#x5230;&#x6307;&#x5B9A;&#x6587;&#x4EF6;<br><code>-t</code>&#xFF1A;&#x5728;&#x6BCF;&#x884C;&#x7684;&#x8F93;&#x51FA;&#x4E4B;&#x524D;&#x6DFB;&#x52A0;&#x65F6;&#x95F4;<br><code>-tt</code>&#xFF1A;&#x663E;&#x793A;&#x66F4;&#x7CBE;&#x786E;&#x7684;&#x65F6;&#x95F4;&#xFF0C;<code>-ttt</code>&#x4E3A;&#x65F6;&#x95F4;&#x6413;<br><code>-r</code>&#xFF1A;&#x76F8;&#x5BF9;&#x65F6;&#x95F4;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">strace -t ls</span><br><span class="line">strace -c ls</span><br><span class="line">strace -e open -tt ls</span><br><span class="line">strace -p 11231 -o result.txt</span><br></pre></td></tr></table></figure>
<h4 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h4><p><code>kill [-s SIGNAL|-SIGNAL] PID</code><br><code>kill -l [SIGNAL]</code><br>&#x7528;&#x4E8E;&#x5411;&#x8FDB;&#x7A0B;&#x53D1;&#x9001;&#x4FE1;&#x53F7;&#xFF0C;&#x5B9E;&#x73B0;&#x8FDB;&#x7A0B;&#x7BA1;&#x7406;&#xFF0C;&#x9ED8;&#x8BA4;&#x53D1;&#x9001;15&#x4FE1;&#x53F7;&#x7EC8;&#x6B62;&#x8FDB;&#x7A0B;<br><strong>&#x4E3B;&#x8981;&#x4FE1;&#x53F7;&#xFF1A;</strong></p>
<ul>
<li>1) SIGHUP&#xFF1A;&#x65E0;&#x987B;&#x5173;&#x95ED;&#x8FDB;&#x7A0B;&#x800C;&#x8BA9;&#x5176;&#x91CD;&#x8BFB;&#x914D;&#x7F6E;&#x6587;&#x4EF6; </li>
<li>2) SIGINT&#xFF1A;&#x4E2D;&#x6B62;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x7B49;&#x540C;<code>ctrl+c</code>  </li>
<li>9) SIGKILL&#xFF1A;&#x5F3A;&#x5236;&#x7ACB;&#x523B;&#x6740;&#x6B7B;&#x8FD0;&#x884C;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;   </li>
<li>15) SIGTERM&#xFF1A;&#x7EC8;&#x6B62;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x8FDB;&#x7A0B;  </li>
<li>18) SIGCONT&#xFF1A;&#x7EE7;&#x7EED;&#x6682;&#x505C;&#x7684;&#x8FDB;&#x884C;  </li>
<li>19) SIGSTOP&#xFF1A;&#x6682;&#x505C;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x8FDB;&#x7A0B;    </li>
</ul>
<p><em>&#x4FE1;&#x53F7;&#x6807;&#x793A;&#x65B9;&#x6CD5;&#x6709;</em>&#xFF1A;1.&#x5B8C;&#x6574;&#x540D;(SIGHUP&#x2026;)&#x3001;2.&#x6570;&#x5B57;&#x4FE1;&#x53F7;(1, 2, 9&#x2026;)&#x3001;3.&#x7F29;&#x5199;(HUP, INT&#x2026;)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -l                     <span class="comment"># &#x663E;&#x793A;&#x4FE1;&#x53F7;&#x5217;&#x8868;</span></span><br><span class="line"><span class="built_in">kill</span> {-[SIG]HUP|1} 3030     <span class="comment"># &#x91CD;&#x8BFB;3030&#x8FDB;&#x7A0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span></span><br><span class="line"><span class="built_in">kill</span> -9 2334                <span class="comment"># &#x5F3A;&#x5236;&#x4E2D;&#x6B62;</span></span><br></pre></td></tr></table></figure>
<h4 id="killall"><a href="#killall" class="headerlink" title="killall"></a>killall</h4><p><code>killall [-SIGNAL] program</code><br>&#x6839;&#x636E;&#x8FDB;&#x7A0B;&#x540D;&#x6765;&#x4E2D;&#x6B62;&#x76F8;&#x5173;&#x8FDB;&#x7A0B;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall httpd   <span class="comment"># &#x4E2D;&#x6B62;http</span></span><br></pre></td></tr></table></figure>
<h4 id="jobs"><a href="#jobs" class="headerlink" title="jobs"></a>jobs</h4><p>&#x67E5;&#x770B;&#x6240;&#x6709;&#x4F5C;&#x4E1A;&#xFF0C;&#x5E26;&#x6709;&#x4F5C;&#x4E1A;&#x7F16;&#x53F7;</p>
<p>&#x663E;&#x793A;&#x7B26;&#x53F7;&#x8BF4;&#x660E;<br><code>+</code>&#xFF1A;&#x540E;&#x53F0;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x6216;&#x4E0B;&#x6B21;&#x8FD0;&#x884C;&#x7684;&#x4F5C;&#x4E1A;<br><code>-</code>&#xFF1A;<code>+</code>&#x4F5C;&#x4E1A;&#x8FD0;&#x884C;&#x540E;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x8FD0;&#x884C;&#x4F5C;&#x4E1A;</p>
<p>&#x7EC8;&#x6B62;&#x4F5C;&#x4E1A;&#xFF1A;<code>kill %JOBID</code></p>
<h4 id="fg"><a href="#fg" class="headerlink" title="fg"></a>fg</h4><p><code>fg [[%]JOBID]</code><br>&#x5C06;&#x6307;&#x5B9A;&#x540E;&#x53F0;&#x4F5C;&#x4E1A;&#x8C03;&#x56DE;&#x524D;&#x53F0;&#xFF0C;&#x9ED8;&#x8BA4;&#x8C03;&#x56DE;&#x5E26;<code>+</code>&#x53F7;&#x4F5C;&#x4E1A;&#xFF0C;&#x4E5F;&#x53EF;&#x6307;&#x5B9A;&#x4F5C;&#x4E1A;&#x53F7;&#xFF0C;&#x5176;&#x4E2D;<code>%</code>&#x53EF;&#x7701;</p>
<h4 id="bg"><a href="#bg" class="headerlink" title="bg"></a>bg</h4><p><code>bg [[%]JOBID]</code><br>&#x8BA9;&#x9001;&#x5F80;&#x540E;&#x53F0;&#x7684;&#x4F5C;&#x4E1A;&#x7EE7;&#x7EED;&#x8FD0;&#x884C;</p>
<h4 id="nice"><a href="#nice" class="headerlink" title="nice"></a>nice</h4><p><code>nice [OPTION] [COMMAND]</code><br>&#x4EE5;&#x6307;&#x5B9A;&#x7684;nice&#x503C;&#xFF08;&#x4F18;&#x5148;&#x7EA7;&#xFF09;&#x8FD0;&#x884C;&#x547D;&#x4EE4;&#xFF0C;&#x503C;&#x8303;&#x56F4;&#x4E3A;-19~20&#xFF0C;&#x6570;&#x503C;&#x5C0F;&#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#xFF0C;&#x4EC5;&#x7BA1;&#x7406;&#x5458;&#x624D;&#x80FD;&#x8C03;&#x4F4E;nice&#x503C;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nice 10 htop                            <span class="comment"># &#x8BBE;&#x7F6E;htop&#x547D;&#x4EE4;&#x8FD0;&#x884C;&#x7684;nice&#x503C;&#x4E3A;10</span></span><br><span class="line">ps axo pid,ni,priority,comm | grep xxx  <span class="comment"># &#x67E5;&#x770B;&#x6307;&#x5B9A;&#x547D;&#x4EE4;&#x4F18;&#x5148;&#x7EA7;</span></span><br></pre></td></tr></table></figure>
<h4 id="renice"><a href="#renice" class="headerlink" title="renice"></a>renice</h4><p><code>renice [-n] NICE PID</code><br>&#x8C03;&#x6574;&#x8FD0;&#x884C;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;nice&#x503C;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renice -12 23023    <span class="comment"># &#x8C03;&#x6574;pid&#x4E3A;23023&#x7684;&#x8FDB;&#x7A0B;nice&#x4E3A;-12&#xFF08;&#x4F18;&#x5148;&#x7EA7;&#x4E3A;8&#xFF09;</span></span><br></pre></td></tr></table></figure>
<h4 id="who"><a href="#who" class="headerlink" title="who"></a>who</h4><p>&#x83B7;&#x53D6;&#x5F53;&#x524D;&#x767B;&#x5F55;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;</p>
<h4 id="w"><a href="#w" class="headerlink" title="w"></a>w</h4><p>&#x540C;<code>who</code>&#xFF0C;&#x4F46;&#x4F1A;&#x5217;&#x51FA;&#x66F4;&#x591A;&#x7EFF;&#x7EC6;&#x8282;</p>
<h4 id="users"><a href="#users" class="headerlink" title="users"></a>users</h4><p>&#x5217;&#x51FA;&#x5F53;&#x524D;&#x767B;&#x5F55;&#x7684;&#x7528;&#x6237;&#x540D;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">users | tr &apos; &apos; &apos;\n&apos;</span><br></pre></td></tr></table></figure>
<h4 id="last"><a href="#last" class="headerlink" title="last"></a>last</h4><p>&#x63D0;&#x4F9B;&#x767B;&#x5F55;&#x4F1A;&#x8BDD;&#x4FE1;&#x606F;&#xFF0C;&#x9ED8;&#x8BA4;&#x8BFB;&#x53D6; <code>/var/log/wtmp</code> &#x65E5;&#x5FD7;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">last -f /var/log/wtmp</span><br><span class="line">last USER</span><br><span class="line">last reboot</span><br></pre></td></tr></table></figure>
<h4 id="chroot"><a href="#chroot" class="headerlink" title="chroot"></a>chroot</h4><p><code>chroot NEWROOT</code><br>&#x5207;&#x6362;&#x6839;&#x6240;&#x5728;&#x76EE;&#x5F55;  </p>
<h4 id="ldd"><a href="#ldd" class="headerlink" title="ldd"></a>ldd</h4><p>&#x67E5;&#x770B;&#x547D;&#x4EE4;&#x6240;&#x4F9D;&#x8D56;&#x7684;&#x5171;&#x4EAB;&#x5E93;&#x6587;&#x4EF6;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldd /bin/ls</span><br></pre></td></tr></table></figure>
<h4 id="sync"><a href="#sync" class="headerlink" title="sync"></a>sync</h4><p>&#x5F3A;&#x5236;&#x88AB;&#x6539;&#x53D8;&#x7684;&#x5185;&#x5BB9;&#x7ACB;&#x523B;&#x5199;&#x5165;&#x78C1;&#x76D8;&#xFF0C;&#x66F4;&#x65B0;&#x8D85;&#x5757;&#x4FE1;&#x606F;</p>
<h4 id="chkconfig"><a href="#chkconfig" class="headerlink" title="chkconfig"></a>chkconfig</h4><p>&#x68C0;&#x67E5;&#x3001;&#x8BBE;&#x7F6E;&#x7CFB;&#x7EDF;&#x7684;&#x5404;&#x79CD;&#x670D;&#x52A1;&#xFF0C;centos7&#x4E0A;&#x5DF2;&#x5E9F;&#x5F03;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --list                <span class="comment"># &#x5217;&#x51FA;&#x6240;&#x6709;&#x7684;&#x7CFB;&#x7EDF;&#x670D;&#x52A1;</span></span><br><span class="line">chkconfig --add httpd           <span class="comment"># &#x589E;&#x52A0;httpd&#x670D;&#x52A1;</span></span><br><span class="line">chkconfig --del httpd           <span class="comment"># &#x5220;&#x9664;httpd&#x670D;&#x52A1;</span></span><br><span class="line">chkconfig --level httpd 345 on  <span class="comment"># &#x8BBE;&#x7F6E;httpd&#x5728;2345&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x4E0B;&#x90FD;&#x662F;&#x5F00;&#x542F; </span></span><br><span class="line">chkconfig mysqld on             <span class="comment"># &#x8BBE;&#x5B9A;mysqld&#x5728;2345&#x7EA7;&#x522B;&#x4E0B;&#x5F00;&#x542F;</span></span><br></pre></td></tr></table></figure>
<h4 id="uname"><a href="#uname" class="headerlink" title="uname"></a>uname</h4><p><code>uname [OPTION]</code><br>&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#xFF08;&#x5185;&#x6838;&#x7248;&#x672C;&#x53F7;&#x3001;&#x786C;&#x4EF6;&#x67B6;&#x6784;&#x3001;&#x4E3B;&#x673A;&#x540D;&#x79F0;&#x548C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7C7B;&#x578B;&#x7B49;&#xFF09;</p>
<blockquote>
<p><code>-r</code>&#xFF1A;&#x7CFB;&#x7EDF;&#x53D1;&#x884C;&#x7F16;&#x53F7;<br><code>-a</code>&#xFF1A;&#x5168;&#x90E8;&#x4FE1;&#x606F;<br><code>-n</code>&#xFF1A;&#x4E3B;&#x673A;&#x540D;</p>
</blockquote>
<h4 id="lsmod"><a href="#lsmod" class="headerlink" title="lsmod"></a>lsmod</h4><p>&#x663E;&#x793A;&#x5185;&#x6838;&#x6240;&#x6709;&#x52A0;&#x8F7D;&#x7684;&#x6A21;&#x5757;&#x4FE1;&#x606F;&#xFF0C;&#x6765;&#x6E90;&#x4E8E;/proc/modules<br>&#x6A21;&#x5757;&#x6587;&#x4EF6;&#x653E;&#x7F6E;&#x5728;<code>/lib/modules/$(uname -r)/kernel/../*.ko</code></p>
<h4 id="modinfo"><a href="#modinfo" class="headerlink" title="modinfo"></a>modinfo</h4><p><code>modinfo [OPTION] MOD_NAME</code><br>&#x67E5;&#x770B;&#x67D0;&#x6A21;&#x5757;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x4E0D;&#x7BA1;&#x662F;&#x5426;&#x5DF2;&#x52A0;&#x8F7D;</p>
<blockquote>
<p><code>-k</code>&#xFF1A;&#x5F53;&#x7CFB;&#x7EDF;&#x4E0A;&#x6709;&#x591A;&#x4E2A;&#x5185;&#x6838;&#x65F6;&#xFF0C;&#x53EF;&#x624B;&#x52A8;&#x6307;&#x5B9A;&#x67E5;&#x770B;<br><code>-F</code>&#xFF1A;&#x4EC5;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;&#x4FE1;&#x606F;<br><code>-a</code>&#xFF1A;&#x4EC5;&#x5217;&#x51FA;&#x4F5C;&#x8005;&#x540D;<br><code>-d</code>&#xFF1A;&#x4EC5;&#x5217;&#x51FA;&#x6A21;&#x5757;&#x8BF4;&#x660E;<br><code>-l</code>&#xFF1A;&#x4EC5;&#x5217;&#x51FA;&#x6388;&#x6743;<br><code>-n</code>&#xFF1A;&#x663E;&#x793A;&#x6A21;&#x5757;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;  </p>
</blockquote>
<h4 id="modprobe"><a href="#modprobe" class="headerlink" title="modprobe"></a>modprobe</h4><p><code>modprobe [OPTION] MOD_NAME</code><br>&#x52A8;&#x6001;&#x88C5;&#x8F7D;&#x548C;&#x5378;&#x8F7D;&#x6A21;&#x5757;&#xFF0C;&#x5305;&#x62EC;&#x76F8;&#x5173;&#x4F9D;&#x8D56;&#x6A21;&#x5757;&#xFF0C;&#x9ED8;&#x8BA4;&#x88C5;&#x8F7D;&#x7684;&#x6A21;&#x5757;&#x4E0D;&#x8981;&#x8F7B;&#x6613;&#x53BB;&#x5378;&#x8F7D;</p>
<blockquote>
<p><code>-r</code>&#xFF1A;&#x5378;&#x8F7D;<br><code>-C</code>&#xFF1A;&#x57FA;&#x4E8E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
</blockquote>
<h4 id="depmod"><a href="#depmod" class="headerlink" title="depmod"></a>depmod</h4><p><code>depmod [-Ane]</code><br>&#x5185;&#x6838;&#x6A21;&#x5757;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x6587;&#x4EF6;&#x7684;&#x751F;&#x6210;&#x5DE5;&#x5177;&#x6216;&#x663E;&#x793A;</p>
<blockquote>
<p><code>-A</code>&#xFF1A;&#x641C;&#x5BFB;&#x6BD4;<code>/lib/modules/$(uname -r)/modules.dep</code>&#x5185;&#x8FD8;&#x8981;&#x65B0;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x5982;&#x679C;&#x771F;&#x627E;&#x5230;&#x65B0;&#x6A21;&#x5757;&#xFF0C;&#x5219;&#x66F4;&#x65B0;&#x5199;&#x5165;<br><code>-n</code>&#xFF1A;&#x4E0D;&#x5199;&#x5165;<code>modules.dep</code>&#x4E2D;&#xFF0C;&#x800C;&#x662F;&#x663E;&#x793A;&#x5230;&#x5C4F;&#x5E55;&#x4E0A;<br><code>-e</code>&#xFF1A;&#x663E;&#x793A;&#x51FA;&#x76EE;&#x524D;&#x5DF2;&#x8F7D;&#x5165;&#x7684;&#x4E0D;&#x53EF;&#x6267;&#x884C;&#x7684;&#x6A21;&#x5757;&#x540D;&#x79F0;  </p>
</blockquote>
<h4 id="insmod"><a href="#insmod" class="headerlink" title="insmod"></a>insmod</h4><p><code>insmod MOD_FILENAME</code><br>&#x88C5;&#x8F7D;&#x6A21;&#x5757;&#xFF0C;MOD_FILENAME&#x4E3A;&#x6A21;&#x5757;&#x5B8C;&#x6574;&#x8DEF;&#x5F84;&#x540D;&#xFF0C;&#x4F46;&#x4E0D;&#x80FD;&#x89E3;&#x51B3;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;</p>
<h4 id="rmmod"><a href="#rmmod" class="headerlink" title="rmmod"></a>rmmod</h4><p>&#x5378;&#x8F7D;&#x6A21;&#x5757;</p>
<h4 id="mkinitrd"><a href="#mkinitrd" class="headerlink" title="mkinitrd"></a>mkinitrd</h4><p>&#x4E3A;&#x5F53;&#x524D;&#x4F7F;&#x7528;&#x7684;&#x5185;&#x6838;&#x91CD;&#x65B0;&#x5236;&#x4F5C;ramdisk&#x6587;&#x4EF6;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkinitrd /boot/initramfs-$(uname -r).img  $(uname -r)</span><br></pre></td></tr></table></figure>
<h4 id="sysctl"><a href="#sysctl" class="headerlink" title="sysctl"></a>sysctl</h4><p><code>sysctl [OPTION] [var[=value]]</code><br>&#x67E5;&#x770B;&#x6216;&#x8BBE;&#x5B9A;/proc/sys&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x5185;&#x6838;&#x53C2;&#x6570;&#xFF0C;&#x5185;&#x6838;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/sysctl.conf     </p>
<blockquote>
<p><code>-a</code>&#xFF1A;&#x67E5;&#x770B;&#x6240;&#x6709;<br><code>-w</code>&#xFF1A;&#x5199;&#x5165;&#x65B0;&#x503C;<br><code>-p</code>&#xFF1A;&#x91CD;&#x8BFB;&#x914D;&#x7F6E;&#x6587;&#x4EF6;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sysctl -a                       <span class="comment"># &#x67E5;&#x770B;&#x6240;&#x6709;&#x5185;&#x6838;&#x53C2;&#x6570;</span></span><br><span class="line">sysctl kernel.hostname          <span class="comment"># &#x67E5;&#x770B;&#x6307;&#x5B9A;&#x53C2;&#x6570;&#x503C;, &#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;cat /proc/sys/kernel/hostname</span></span><br><span class="line">sysctl -w net.ipv4.ip_forward=1 <span class="comment"># &#x8BBE;&#x7F6E;&#x503C;,&#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;echo 1 &gt; /proc/sys/net/ipv4/ip_forward</span></span><br><span class="line">sysctl -p                       <span class="comment"># &#x91CD;&#x8BFB;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/sysctl.conf</span></span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[常用命令--用户管理]]></title>
      <url>http://liu2lin600.github.io/2016/05/21/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4--%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/</url>
      <content type="html"><![CDATA[<p>&#x5305;&#x62EC;&#x5BF9;&#x7528;&#x6237;&#x53CA;&#x7528;&#x6237;&#x7EC4;&#x7684;&#x7BA1;&#x7406;&#x64CD;&#x4F5C;&#x547D;&#x4EE4;<br><a id="more"></a></p>
<h4 id="useradd"><a href="#useradd" class="headerlink" title="useradd"></a>useradd</h4><p><code>useradd [OPTION]... USERNAME</code><br><code>useradd -D</code><br>&#x6DFB;&#x52A0;&#x7528;&#x6237;</p>
<blockquote>
<p><code>-u UID</code>&#xFF1A;&#x6307;&#x5B9A;uid<br><code>-g GID(&#x57FA;&#x672C;&#x7EC4;)</code>&#xFF1A;&#x6307;&#x5B9A;gid<br><code>-G GID,...(&#x9644;&#x52A0;&#x7EC4;)</code>&#xFF1A;&#x6DFB;&#x52A0;&#x5230;&#x9644;&#x52A0;&#x7EC4;<br><code>-c &quot;COMMENT&quot;</code>&#xFF1A;&#x6DFB;&#x52A0;&#x5907;&#x6CE8;&#x4FE1;&#x606F;<br><code>-d /path/to/directory</code>&#xFF1A;&#x6307;&#x5B9A;&#x5BB6;&#x76EE;&#x5F55;<br><code>-s SHELL</code>&#xFF1A;&#x6307;&#x5B9A;&#x4F7F;&#x7528;&#x7684;Shell<br><code>-r</code>&#xFF1A;&#x6DFB;&#x52A0;&#x7CFB;&#x7EDF;&#x7528;&#x6237;<br><code>-f&lt;&#x7F13;&#x51B2;&#x5929;&#x6570;&gt;</code>&#xFF1A;&#x6307;&#x5B9A;&#x5728;&#x5BC6;&#x7801;&#x8FC7;&#x671F;&#x540E;&#x591A;&#x5C11;&#x5929;&#x5373;&#x5173;&#x95ED;&#x8BE5;&#x5E10;&#x53F7;<br><code>-D</code>: &#x663E;&#x793A;&#x6DFB;&#x52A0;&#x7528;&#x6237;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#xFF0C;&#x4FE1;&#x606F;&#x4E3A;/etc/default/useradd </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -u 1002 -g 1100 -G root,liu -s /bin/csh -d /home/gg user1</span><br></pre></td></tr></table></figure>
<h4 id="usermod"><a href="#usermod" class="headerlink" title="usermod"></a>usermod</h4><p><code>usermod [OPTION] USERNAME</code><br>&#x4FEE;&#x6539;&#x7528;&#x6237;&#x7684;&#x57FA;&#x672C;&#x4FE1;&#x606F;&#xFF0C;&#x4E0D;&#x5141;&#x8BB8;&#x4F60;&#x6539;&#x53D8;&#x6B63;&#x5728;&#x7EBF;&#x4E0A;&#x7684;&#x4F7F;&#x7528;&#x8005;&#x5E10;&#x53F7;&#x540D;&#x79F0;</p>
<blockquote>
<p><code>-u UID</code>&#xFF1A;&#x4FEE;&#x6539;uid<br><code>-g GID</code>&#xFF1A;&#x4FEE;&#x6539;gid<br><code>-a -G GID</code>&#xFF1A;&#x8FFD;&#x52A0;&#x9644;&#x52A0;&#x7EC4;&#xFF0C;&#x4E0D;&#x4F7F;&#x7528;-a&#x9009;&#x9879;&#xFF0C;&#x4F1A;&#x8986;&#x76D6;&#x6B64;&#x524D;&#x7684;&#x9644;&#x52A0;&#x7EC4;<br><code>-c &lt;&#x5907;&#x6CE8;&gt;</code>&#xFF1A;&#x7528;&#x6237;&#x5907;&#x6CE8;&#x4FE1;&#x606F;<br><code>-d -m</code>&#xFF1A;&#x5C06;&#x5BB6;&#x76EE;&#x5F55;&#x79FB;&#x5230;&#x65B0;&#x76EE;&#x5F55;<br><code>-s</code>&#xFF1A;shell<br><code>-l</code>&#xFF1A;&#x7528;&#x6237;&#x540D;<br><code>-L</code>&#xFF1A;&#x9501;&#x5B9A;&#x5E10;&#x53F7;&#xFF0C;&#x5728;/etc/shadow&#x5BF9;&#x5E94;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x524D;&#x52A0;&#xFF01;<br><code>-U</code>&#xFF1A;&#x89E3;&#x9501;&#x5E10;&#x53F7;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -G staff user2      <span class="comment"># &#x5C06;user2&#x6DFB;&#x52A0;&#x5230;staff&#x7EC4;&#x4E2D;</span></span><br></pre></td></tr></table></figure>
<h4 id="userdel"><a href="#userdel" class="headerlink" title="userdel"></a>userdel</h4><p><code>userdel [OPTION]... USERNAME</code><br>&#x5220;&#x9664;&#x7528;&#x6237;</p>
<blockquote>
<p><code>-r</code>&#xFF1A;&#x540C;&#x65F6;&#x5220;&#x9664;&#x5E10;&#x53F7;&#x5BB6;&#x76EE;&#x5F55;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel -r liu2</span><br></pre></td></tr></table></figure>
<h4 id="groupadd"><a href="#groupadd" class="headerlink" title="groupadd"></a>groupadd</h4><p><code>groupadd [OPTION]... GROUPNAME</code><br>&#x6DFB;&#x52A0;&#x7528;&#x6237;&#x7EC4;</p>
<blockquote>
<p><code>-g</code>&#xFF1A;&#x6307;&#x5B9A;gid<br><code>-r</code>&#xFF1A;&#x6DFB;&#x52A0;&#x4E3A;&#x7CFB;&#x7EDF;&#x7EC4;</p>
</blockquote>
<h4 id="groupmod"><a href="#groupmod" class="headerlink" title="groupmod"></a>groupmod</h4><p><code>groupmod [OPTION]... GROUPNAME</code><br>&#x7528;&#x6237;&#x7EC4;&#x4FEE;&#x6539;</p>
<blockquote>
<p><code>-g</code>&#xFF1A;&#x4FEE;&#x6539;gid<br><code>-n</code>&#xFF1A;&#x4FEE;&#x6539;&#x7EC4;&#x540D;</p>
</blockquote>
<h4 id="groupdel"><a href="#groupdel" class="headerlink" title="groupdel"></a>groupdel</h4><p><code>groupdel GROUPNAME</code><br>&#x5220;&#x9664;&#x7528;&#x6237;&#x7EC4;&#xFF0C;&#x8BE5;&#x7FA4;&#x7EC4;&#x4E2D;&#x4ECD;&#x5305;&#x62EC;&#x67D0;&#x4E9B;&#x7528;&#x6237;&#xFF0C;&#x5219;&#x5FC5;&#x987B;&#x5148;&#x5220;&#x9664;&#x8FD9;&#x4E9B;&#x7528;&#x6237;&#x540E;&#xFF0C;&#x624D;&#x80FD;&#x5220;&#x9664;&#x7FA4;&#x7EC4;</p>
<h4 id="passwd"><a href="#passwd" class="headerlink" title="passwd"></a>passwd</h4><p><code>passwd [OPTION]... [USERNAME]</code><br>&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#xFF0C;&#x666E;&#x901A;&#x7528;&#x6237;&#x53EA;&#x80FD;&#x4FEE;&#x6539;&#x81EA;&#x5DF1;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x65E0;&#x9700;&#x52A0;&#x53C2;&#x6570;&#xFF0C;root&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x4EFB;&#x4F55;&#x5BC6;&#x7801;&#xFF0C;&#x800C;&#x4E14;&#x65E0;&#x9700;&#x77E5;&#x9053;&#x539F;&#x4E0D;&#x9A8C;&#x8BC1;&#x5BC6;&#x7801;&#x5F3A;&#x5EA6;</p>
<blockquote>
<p><code>-l</code>&#xFF1A;&#x9501;&#x5B9A;&#x7528;&#x6237;<br><code>-d</code>&#xFF1A;&#x5220;&#x9664;&#x5BC6;&#x7801;<br><code>--stdin</code>&#xFF1A;&#x63A5;&#x6536;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x5BC6;&#x7801;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;passwd&quot;</span> | passwd --stdin user1    <span class="comment"># &#x4E3A;user1&#x8BBE;&#x7F6E;&#x5BC6;&#x7801;&quot;passwd&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="gpasswd"><a href="#gpasswd" class="headerlink" title="gpasswd"></a>gpasswd</h4><p><code>gpasswd [OPTION]...GROUP</code><br>&#x4FEE;&#x6539;&#x7EC4;&#x4FE1;&#x606F;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x6709;&#x6DFB;&#x52A0;&#x5220;&#x9664;&#x7EC4;&#x7528;&#x6237;&#xFF0C;&#x4F5C;&#x7528;&#x5728;/etc/group&#x548C;/etc/gshadow  </p>
<blockquote>
<p><code>-a &lt;&#x7528;&#x6237;&gt; &lt;&#x7EC4;&gt;</code>&#xFF1A;&#x6DFB;&#x52A0;&#x7528;&#x6237;&#x5230;&#x7EC4;<br><code>-d</code>&#xFF1A;&#x4ECE;&#x7EC4;&#x5220;&#x9664;&#x7528;&#x6237;<br><code>-A</code>&#xFF1A;&#x6307;&#x5B9A;&#x7BA1;&#x7406;&#x5458;<br><code>-M</code>&#xFF1A;&#x6307;&#x5B9A;&#x7EC4;&#x6210;&#x5458;&#x548C;-A&#x7684;&#x7528;&#x9014;&#x5DEE;&#x4E0D;&#x591A;<br><code>-r</code>&#xFF1A;&#x5220;&#x9664;&#x5BC6;&#x7801;<br><code>-R</code>&#xFF1A;&#x9650;&#x5236;&#x7528;&#x6237;&#x767B;&#x5165;&#x7EC4;&#xFF0C;&#x53EA;&#x6709;&#x7EC4;&#x4E2D;&#x7684;&#x6210;&#x5458;&#x624D;&#x53EF;&#x4EE5;&#x7528;newgrp&#x52A0;&#x5165;&#x8BE5;&#x7EC4;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpasswd -a allen users    <span class="comment"># &#x6DFB;&#x52A0;allen&#x5230;user2&#x7EC4;</span></span><br></pre></td></tr></table></figure>
<h4 id="newgrp"><a href="#newgrp" class="headerlink" title="newgrp"></a>newgrp</h4><p><code>newgrp [OPTION]... FILE...</code><br>&#x4E34;&#x65F6;&#x5207;&#x6362;&#x7EC4;&#xFF0C;&#x672C;&#x8EAB;&#x4E0D;&#x662F;&#x7EC4;&#x7684;&#x6210;&#x5458;&#xFF0C;&#x4F7F;&#x7528;newgrp&#x9700;&#x8981;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x5373;&#x53EF;</p>
<h4 id="chage"><a href="#chage" class="headerlink" title="chage"></a>chage</h4><p><code>chage [OPTION]... USER</code><br>&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#x7684;&#x8FC7;&#x671F;&#x4FE1;&#x606F;</p>
<blockquote>
<p><code>-m</code>&#xFF1A;&#x5BC6;&#x7801;&#x53EF;&#x66F4;&#x6539;&#x7684;&#x6700;&#x5C0F;&#x5929;&#x6570;&#x3002;&#x4E3A;&#x96F6;&#x65F6;&#x4EE3;&#x8868;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x90FD;&#x53EF;&#x4EE5;&#x66F4;&#x6539;&#x5BC6;&#x7801;<br><code>-M</code>&#xFF1A;&#x5BC6;&#x7801;&#x4FDD;&#x6301;&#x6709;&#x6548;&#x7684;&#x6700;&#x5927;&#x5929;&#x6570;<br><code>-w</code>&#xFF1A;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x5230;&#x671F;&#x524D;&#xFF0C;&#x63D0;&#x524D;&#x6536;&#x5230;&#x8B66;&#x544A;&#x4FE1;&#x606F;&#x7684;&#x5929;&#x6570;<br><code>-E</code>&#xFF1A;&#x5E10;&#x53F7;&#x5230;&#x671F;&#x7684;&#x65E5;&#x671F;&#x3002;&#x8FC7;&#x4E86;&#x8FD9;&#x5929;&#xFF0C;&#x6B64;&#x5E10;&#x53F7;&#x5C06;&#x4E0D;&#x53EF;&#x7528;<br><code>-d</code>&#xFF1A;&#x4E0A;&#x4E00;&#x6B21;&#x66F4;&#x6539;&#x7684;&#x65E5;&#x671F;<br><code>-i</code>&#xFF1A;&#x505C;&#x6EDE;&#x65F6;&#x671F;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x5BC6;&#x7801;&#x5DF2;&#x8FC7;&#x671F;&#x8FD9;&#x4E9B;&#x5929;&#xFF0C;&#x90A3;&#x4E48;&#x6B64;&#x5E10;&#x53F7;&#x5C06;&#x4E0D;&#x53EF;&#x7528;<br><code>-l</code>&#xFF1A;&#x4F8B;&#x51FA;&#x5F53;&#x524D;&#x7684;&#x8BBE;&#x7F6E;&#x3002;&#x7531;&#x975E;&#x7279;&#x6743;&#x7528;&#x6237;&#x6765;&#x786E;&#x5B9A;&#x4ED6;&#x4EEC;&#x7684;&#x5BC6;&#x7801;&#x6216;&#x5E10;&#x53F7;&#x4F55;&#x65F6;&#x8FC7;&#x671F;</p>
</blockquote>
<h4 id="id"><a href="#id" class="headerlink" title="id"></a>id</h4><p><code>id [OPTION]... USER</code><br>&#x663E;&#x793A;&#x7528;&#x6237;&#x7684;uid&#xFF0C;gid&#x7B49;&#x4FE1;&#x606F;</p>
<blockquote>
<p><code>-g</code>&#xFF1A;&#x663E;&#x793A;&#x7528;&#x6237;&#x6240;&#x5C5E;&#x7FA4;&#x7EC4;&#x7684;ID<br><code>-G</code>&#xFF1A;&#x663E;&#x793A;&#x7528;&#x6237;&#x6240;&#x5C5E;&#x9644;&#x52A0;&#x7FA4;&#x7EC4;&#x7684;<br><code>-n</code>&#xFF1A;&#x663E;&#x793A;&#x7528;&#x6237;&#xFF0C;&#x6240;&#x5C5E;&#x7FA4;&#x7EC4;&#x6216;&#x9644;&#x52A0;&#x7FA4;&#x7EC4;&#x7684;&#x540D;&#x79F0;<br><code>-r</code>&#xFF1A;&#x663E;&#x793A;&#x5B9E;&#x9645;ID<br><code>-u</code>&#xFF1A;&#x663E;&#x793A;&#x7528;&#x6237;ID</p>
</blockquote>
<h4 id="su"><a href="#su" class="headerlink" title="su"></a>su</h4><p><code>su [OPTION]... USER</code><br>&#x7528;&#x6237;&#x5207;&#x6362;&#xFF0C;&#x7BA1;&#x7406;&#x5458;&#x5207;&#x6362;&#x5176;&#x5B83;&#x7528;&#x6237;&#x65E0;&#x9700;&#x5BC6;&#x7801;</p>
<blockquote>
<p><code>-c &lt;command&gt;</code>&#xFF1A;&#x4EC5;&#x4EE5;&#x6307;&#x5B9A;&#x7528;&#x6237;&#x7684;&#x8EAB;&#x4EFD;&#x6267;&#x884C;&#x547D;&#x4EE4;<br><code>-s SHELL</code>&#xFF1A;&#x6307;&#x5B9A;shell</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su - root           			<span class="comment"># &#x767B;&#x5F55;&#x5F0F;&#x5207;&#x6362;&#x5230;root&#x7528;&#x6237;</span></span><br><span class="line">su - liu -c <span class="built_in">pwd</span>     			<span class="comment"># &#x4EE5;liu&#x7528;&#x6237;&#x8FD0;&#x884C;pwd&#x547D;&#x4EE4;</span></span><br><span class="line">su -s /bin/bash -c <span class="string">&apos;CMD&apos;</span> liu 	<span class="comment"># &#x5BF9;&#x4E8E;nologin&#x7528;&#x6237;&#x6307;&#x5B9A;shell&#x6267;&#x884C;</span></span><br></pre></td></tr></table></figure>
<h4 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h4><p>&#x7528;&#x6765;&#x4EE5;&#x5176;&#x4ED6;&#x8EAB;&#x4EFD;&#x6765;&#x6267;&#x884C;&#x547D;&#x4EE4;&#xFF0C;&#x9884;&#x8BBE;&#x7684;&#x8EAB;&#x4EFD;&#x4E3A;root&#x3002;&#x5728;<code>/etc/sudoers</code>&#x4E2D;&#x8BBE;&#x7F6E;&#x4E86;&#x53EF;&#x6267;&#x884C;sudo&#x6307;&#x4EE4;&#x7684;&#x7528;&#x6237;&#x3002;&#x82E5;&#x5176;&#x672A;&#x7ECF;&#x6388;&#x6743;&#x7684;&#x7528;&#x6237;&#x4F01;&#x56FE;&#x4F7F;&#x7528;sudo&#xFF0C;&#x5219;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x7684;&#x90AE;&#x4EF6;&#x7ED9;&#x7BA1;&#x7406;&#x5458;&#x3002;&#x7528;&#x6237;&#x4F7F;&#x7528;sudo&#x65F6;&#xFF0C;&#x8F93;&#x5165;&#x5BC6;&#x7801;&#x4E4B;&#x540E;&#x6709;5&#x5206;&#x949F;&#x7684;&#x6709;&#x6548;&#x671F;&#x9650;&#xFF0C;&#x8D85;&#x8FC7;&#x671F;&#x9650;&#x5219;&#x5FC5;&#x987B;&#x91CD;&#x65B0;&#x8F93;&#x5165;&#x5BC6;&#x7801;</p>
<blockquote>
<p><code>-u USER</code>&#xFF1A;&#x4EE5;&#x6307;&#x5B9A;&#x7684;&#x7528;&#x6237;&#x4F5C;&#x4E3A;&#x65B0;&#x7684;&#x8EAB;&#x4EFD;&#x3002;&#x4E0D;&#x52A0;&#x5219;&#x9ED8;&#x8BA4;&#x4EE5;root&#x4F5C;&#x4E3A;&#x65B0;&#x7684;&#x8EAB;&#x4EFD;<br><code>-l</code>&#xFF1A;&#x53EF;&#x4EE5;&#x67E5;&#x770B;sudo&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;<br><code>-k</code>&#xFF1A;&#x5C06;&#x4F1A;&#x5F3A;&#x8FEB;&#x7528;&#x6237;&#x5728;&#x4E0B;&#x4E00;&#x6B21;&#x4F7F;&#x7528;sudo&#x547D;&#x4EE4;&#x65F6;&#x5FC5;&#x987B;&#x8F93;&#x5165;&#x5BC6;&#x7801;<br><code>-e FILE</code>&#xFF1A;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;<code>sudoedit</code></p>
</blockquote>
<h4 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h4><p><code>chmod [OPTION]...MODE FILE</code><br>&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x7684;&#x6743;&#x9650;</p>
<blockquote>
<p>&#x8D4B;&#x6743;=&#xFF1A;u=rwx,g=r,o=  a=r<br>&#x6388;&#x6743;+|-&#xFF1A;ug+x,o-x  a-x==-x  +w==u+w<br>&#x6570;&#x5B57;&#xFF1A;754==rxwr-xr&#x2013;  (r=4,w=2,x=1)<br>&#x5F15;&#x7528;&#xFF1A;&#x2013;refernce=/file_path<br>-R&#xFF1A;&#x9012;&#x5F52;&#x4FEE;&#x6539;&#x76EE;&#x5F55;&#x4E0B;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x6743;&#x9650;&#xFF0C;&#x901A;&#x5E38;&#x5728;&#x6388;&#x6743;&#x6CD5;&#x4E2D;&#x4F7F;&#x7528;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod u=rwx,o= file1  </span><br><span class="line">chmod -x file2  </span><br><span class="line">chmod 740 file3  </span><br><span class="line">chmod --refernce=/var/file5 file4</span><br></pre></td></tr></table></figure>
<h4 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h4><p><code>chown [OWNER[:[GROUP]]] FILE...</code><br>&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x7684;&#x5C5E;&#x4E3B;&#x548C;&#x5C5E;&#x7EC4;</p>
<blockquote>
<p>-R&#xFF1A;&#x9012;&#x5F52;&#x4FEE;&#x6539;&#x76EE;&#x5F55;&#x4E0B;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x6743;&#x9650;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chown root file2          <span class="comment"># &#x53EA;&#x4FEE;&#x6539;&#x5C5E;&#x4E3B;</span></span><br><span class="line">chonw root:mysql file2    <span class="comment"># &#x540C;&#x65F6;&#x4FEE;&#x6539;&#x5C5E;&#x4E3B;&#x548C;&#x5C5E;&#x7EC4;</span></span><br><span class="line">chown :mysql file2        <span class="comment"># &#x4FEE;&#x6539;&#x5C5E;&#x7EC4;</span></span><br></pre></td></tr></table></figure>
<h4 id="umask"><a href="#umask" class="headerlink" title="umask"></a>umask</h4><p><code>umask [MASK]</code><br>&#x67E5;&#x770B;&#x548C;&#x8BBE;&#x7F6E;&#x6587;&#x4EF6;&#x6743;&#x9650;&#x7684;&#x53CD;&#x5411;&#x63A9;&#x7801;&#xFF0C;&#x65B0;&#x76EE;&#x5F55;&#x6216;&#x6587;&#x4EF6;&#x88AB;&#x521B;&#x5EFA;&#x65F6;&#xFF0C;&#x5176;&#x6700;&#x521D;&#x7684;&#x6743;&#x9650;&#x7531;&#x6587;&#x4EF6;&#x521B;&#x5EFA;&#x63A9;&#x7801;&#x51B3;&#x5B9A;</p>
<blockquote>
<p>&#x5BF9;&#x6587;&#x4EF6;&#xFF1A;666-umask&#xFF0C;&#x5982;&#x6709;&#x6267;&#x884C;&#x6743;&#x9650;&#x5219;&#x52A0;1&#xFF0C;&#x5982;&#xFF1A;666-023=643&#x2013;&gt;644<br>&#x5BF9;&#x76EE;&#x5F55;&#xFF1A;777-umask</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x8BBE;&#x7F6E;umask&#x503C;&#x4E3A;023&#xFF0C;&#x8BBE;&#x5B9A;&#x53EA;&#x5BF9;&#x5F53;&#x524D;shell&#x8FDB;&#x7A0B;&#x6709;&#x6548;&#xFF0C;&#x5168;&#x5C40;&#x8BBE;&#x5B9A;/etc/bashrc&#xFF0C;&#x7528;&#x6237;&#x8BBE;&#x5B9A;~/.bashrc</span></span><br><span class="line"><span class="built_in">umask</span> 023</span><br></pre></td></tr></table></figure>
<h4 id="finger"><a href="#finger" class="headerlink" title="finger"></a>finger</h4><p><code>finger [OPT]... [USERNAME]</code><br>&#x663E;&#x793A;&#x672C;&#x5730;&#x4E0E;&#x8FDC;&#x7AEF;&#x4E3B;&#x673A;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#xFF0C;&#x4E0D;&#x52A0;&#x9009;&#x9879;&#x5B83;&#x4F1A;&#x663E;&#x793A;&#x672C;&#x5730;&#x4E3B;&#x673A;&#x73B0;&#x5728;&#x6240;&#x6709;&#x7684;&#x7528;&#x6237;&#x7684;&#x767B;&#x9646;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x5E10;&#x53F7;&#x540D;&#x79F0;&#xFF0C;&#x771F;&#x5B9E;&#x59D3;&#x540D;&#xFF0C;&#x767B;&#x5165;&#x7EC8;&#x7AEF;&#x673A;&#xFF0C;&#x95F2;&#x7F6E;&#x65F6;&#x95F4;&#xFF0C;&#x767B;&#x5165;&#x65F6;&#x95F4;&#x4EE5;&#x53CA;&#x5730;&#x5740;&#x548C;&#x7535;&#x8BDD;&#x3002;&#x67E5;&#x8BE2;&#x8FDC;&#x7A0B;&#x673A;&#x4E0A;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#xFF0C;&#x9700;&#x8981;&#x91C7;&#x7528;<code>**&#x7528;&#x6237;&#x540D;@&#x4E3B;&#x673A;&#x540D;**0</code>&#x7684;&#x683C;&#x5F0F;</p>
<h4 id="chfn"><a href="#chfn" class="headerlink" title="chfn"></a>chfn</h4><p><code>chfn [OPTION]... USER</code><br>&#x6539;&#x53D8;finger&#x547D;&#x4EE4;&#x663E;&#x793A;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x90FD;&#x5B58;&#x653E;&#x5728;/etc/passwd&#x6587;&#x4EF6;&#x91CC;&#x3002;&#x4E0D;&#x6307;&#x5B9A;&#x4EFB;&#x4F55;&#x9009;&#x9879;&#xFF0C;&#x5219;&#x8FDB;&#x5165;&#x95EE;&#x7B54;&#x5F0F;&#x754C;&#x9762;</p>
<h4 id="chsh"><a href="#chsh" class="headerlink" title="chsh"></a>chsh</h4><p><code>chsh [OPTION]... USER</code><br>&#x7528;&#x6765;&#x66F4;&#x6362;&#x767B;&#x5F55;&#x7CFB;&#x7EDF;&#x65F6;&#x4F7F;&#x7528;&#x7684;shell</p>
<h4 id="getfacl"><a href="#getfacl" class="headerlink" title="getfacl"></a>getfacl</h4><p>&#x67E5;&#x770B;&#x6587;&#x4EF6;acl&#x6743;&#x9650;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getfacl FILE</span><br></pre></td></tr></table></figure>
<h4 id="setfacl"><a href="#setfacl" class="headerlink" title="setfacl"></a>setfacl</h4><p><code>setfacl [{-m|-x} acl_spec] [{-M|-X} acl_file] file</code><br><code>setfacl --restore=file</code>  </p>
<blockquote>
<p><code>-m</code>&#xFF1A;&#x6DFB;&#x52A0;&#x6743;&#x9650;<br><code>-x</code>&#xFF1A;&#x5220;&#x9664;<br><code>-M</code>,<code>-X</code>&#xFF1A;&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x89C4;&#x5219;&#x6DFB;&#x52A0;&#xFF0C;&#x5220;&#x9664;</p>
</blockquote>
<p>&#x652F;&#x6301;&#x7684;acl_spec&#x89C4;&#x5219;&#x6709;&#xFF1A;</p>
<ul>
<li>[d[efault]:] [u[ser]:]uid [:perms]</li>
<li>[d[efault]:] g[roup]:gid [:perms]</li>
<li>[d[efault]:] m[ask][:] [:perms]</li>
<li>[d[efault]:] o[ther][:] [:perms]</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setfacl -m u:liu:r file1                    <span class="comment"># &#x8BBE;&#x7F6E;liu&#x7528;&#x6237;&#x5BF9;file1&#x53EA;&#x8BFB;</span></span><br><span class="line">setfacl -m m::rx file1                      <span class="comment"># &#x7ED9;file&#x6DFB;&#x52A0;ACL_MASK&#x4E3A;rx&#xFF0C;&#x5373;&#x6587;&#x4EF6;&#x5C5E;&#x7EC4;&#x6743;&#x9650;&#x4F4D;&#x5C55;&#x793A;&#x4E3A;r-w&#xFF0C;&#x4F46;&#x4E0D;&#x5F71;&#x54CD;&#x539F;&#x6765;&#x6743;&#x9650;&#xFF0C;&#x53EA;&#x662F;&#x5C55;&#x793A;&#x4E0D;&#x4E00;&#x6837;&#x800C;&#x5DF2;</span></span><br><span class="line">setfacl -x g:staff file1                    <span class="comment"># &#x51CF;&#x7EC4;</span></span><br><span class="line">getfacl file1 | setfacl --<span class="built_in">set</span>-file=- file2  <span class="comment"># &#x628A;1&#x7684;&#x6743;&#x9650;&#x8BBE;&#x7F6E;&#x8D4B;&#x7ED9;2</span></span><br><span class="line">getfacl --access dir | setfacl -d -M- dir   <span class="comment">#</span></span><br></pre></td></tr></table></figure>
<h2 id="&#x5907;&#x6CE8;"><a href="#&#x5907;&#x6CE8;" class="headerlink" title="&#x5907;&#x6CE8;"></a>&#x5907;&#x6CE8;</h2><ol>
<li>&#x76EE;&#x5F55;&#x548C;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">&#x8BFB;(read)</th>
<th style="text-align:center">&#x5199;(write)</th>
<th style="text-align:center">&#x6267;&#x884C;(execute)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&#x5BF9;&#x6587;&#x4EF6;</td>
<td style="text-align:center">cat,more,head..</td>
<td style="text-align:center">vi,echo..</td>
<td style="text-align:center">./**&#x6267;&#x884C;</td>
</tr>
<tr>
<td style="text-align:center">&#x5BF9;&#x76EE;&#x5F55;</td>
<td style="text-align:center">ls</td>
<td style="text-align:center">touch,cp,mv,rm</td>
<td style="text-align:center">cd</td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[常用命令--文本内容]]></title>
      <url>http://liu2lin600.github.io/2016/05/21/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4--%E6%96%87%E6%9C%AC%E5%86%85%E5%AE%B9/</url>
      <content type="html"><![CDATA[<p>&#x5305;&#x62EC;&#x6587;&#x672C;&#x5185;&#x5BB9;&#x67E5;&#x770B;&#x53CA;&#x8FC7;&#x6EE4;&#x64CD;&#x4F5C;&#x7B49;&#x5185;&#x5BB9;<br><a id="more"></a></p>
<h4 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h4><p><code>cat [OPTION]... [FILE]...</code><br>&#x628A;&#x6863;&#x6848;&#x4E32;&#x8FDE;&#x63A5;&#x540E;&#x4F20;&#x5230;&#x57FA;&#x672C;&#x8F93;&#x51FA;</p>
<blockquote>
<p><code>-b</code>&#xFF1A;&#x663E;&#x793A;&#x884C;&#x53F7;&#xFF0C;&#x7A7A;&#x884C;&#x4E0D;&#x8BA1;&#x6570;&#xFF0C;&#x6548;&#x679C;&#x540C;<code>nl</code><br><code>-c</code>&#xFF1A;&#x4EC5;&#x663E;&#x793A;&#x884C;&#x4E2D;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x7684;&#x5B57;&#x7B26;<br><code>-d</code>&#xFF1A;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;&#x7684;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684;&#x5B57;&#x6BB5;&#x5206;&#x9694;&#x7B26;&#x4E3A;&#x201C;TAB&#x201D;<br><code>-f</code>&#xFF1A;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;&#x7684;&#x5185;&#x5BB9;<br><code>-n</code>&#xFF1A;&#x663E;&#x793A;&#x884C;&#x53F7;<br><code>--complement</code>&#xFF1A;&#x8865;&#x8DB3;&#x88AB;&#x9009;&#x62E9;&#x7684;&#x5B57;&#x8282;&#x3001;&#x5B57;&#x7B26;&#x6216;&#x5B57;&#x6BB5;<br><code>--out-delimiter=&lt;&#x5B57;&#x6BB5;&#x5206;&#x9694;&#x7B26;&gt;</code>&#xFF1A;&#x6307;&#x5B9A;&#x8F93;&#x51FA;&#x5185;&#x5BB9;&#x662F;&#x7684;&#x5B57;&#x6BB5;&#x5206;&#x5272;&#x7B26;<br><code>-A</code>&#xFF1A;&#x663E;&#x793A;&#x6240;&#x6709;&#xFF0C;&#x7ED3;&#x5C3E;&#x4E3A;$</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat -n textfile1 &gt; textfile2    			<span class="comment"># &#x628A; textfile1 &#x7684;&#x6863;&#x6848;&#x5185;&#x5BB9;&#x52A0;&#x4E0A;&#x884C;&#x53F7;&#x540E;&#x8F93;&#x5165; textfile2 &#x8FD9;&#x4E2A;&#x6863;&#x6848;&#x91CC;</span></span><br><span class="line">cat &gt; file1                     			<span class="comment"># &#x56DE;&#x8F66;&#x540E;&#x5199;&#x5165;&#x5185;&#x5BB9;&#xFF0C;&#x6700;&#x540E;&#x7A7A;&#x884C;&#x6309;`ctrl+d`&#x6216;**.**&#x7ED3;&#x675F;</span></span><br><span class="line">cat &gt; file2 &lt; /etc/issue        			<span class="comment"># &#x5C06;issue&#x7684;&#x5185;&#x5BB9;&#x5199;&#x5165;file2&#x4E2D;</span></span><br><span class="line">cat -b file3 | grep -Ev <span class="string">&apos;^[[:space:]]$&apos;</span> 	<span class="comment"># &#x6BCF;&#x884C;&#x524D;&#x52A0;&#x884C;&#x53F7;&#xFF0C;&#x5E76;&#x628A;&#x7A7A;&#x767D;&#x884C;&#x53BB;&#x6389;</span></span><br></pre></td></tr></table></figure>
<h4 id="nl"><a href="#nl" class="headerlink" title="nl"></a>nl</h4><p><code>nl FILE</code><br>&#x663E;&#x793A;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x53CA;&#x884C;&#x53F7;&#xFF0C;&#x9ED8;&#x8BA4;&#x7A7A;&#x884C;&#x4E0D;&#x52A0;&#x884C;&#x53F7;</p>
<h4 id="more"><a href="#more" class="headerlink" title="more"></a>more</h4><p><code>more [-dlfpcsu] [-num] [+/pattern] [+linenum] [file ...]</code><br>&#x4EE5;&#x5168;&#x5C4F;&#x5E55;&#x7684;&#x65B9;&#x5F0F;&#x6309;&#x9875;&#x663E;&#x793A;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;</p>
<blockquote>
<p>-&lt;&#x6570;&#x5B57;&gt;&#xFF1A;&#x6307;&#x5B9A;&#x6BCF;&#x5C4F;&#x663E;&#x793A;&#x7684;&#x884C;&#x6570;<br>-d&#xFF1A;&#x663E;&#x793A;&#x201C;[press space to continue,&#x2019;q&#x2019; to quit.]&#x201D;&#x548C;&#x201C;[Press &#x2018;h&#x2019; for instructions]&#x201D;<br>-c&#xFF1A;&#x4E0D;&#x8FDB;&#x884C;&#x6EDA;&#x5C4F;&#x64CD;&#x4F5C;&#x3002;&#x6BCF;&#x6B21;&#x5237;&#x65B0;&#x8FD9;&#x4E2A;&#x5C4F;&#x5E55;<br>-s&#xFF1A;&#x5C06;&#x591A;&#x4E2A;&#x7A7A;&#x884C;&#x538B;&#x7F29;&#x6210;&#x4E00;&#x884C;&#x663E;&#x793A;<br>-u&#xFF1A;&#x7981;&#x6B62;&#x4E0B;&#x5212;&#x7EBF;&#xFF1B; +&lt;&#x6570;&#x5B57;&gt;&#xFF1A;&#x4ECE;&#x6307;&#x5B9A;&#x6570;&#x5B57;&#x7684;&#x884C;&#x5F00;&#x59CB;&#x663E;&#x793A;&#x3002;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more -c -10 install.log     <span class="comment"># &#x6BCF;10&#x884C;&#x663E;&#x793A;&#x4E00;&#x6B21;&#xFF0C;&#x800C;&#x4E14;&#x5728;&#x663E;&#x793A;&#x4E4B;&#x524D;&#x5148;&#x6E05;&#x5C4F;</span></span><br></pre></td></tr></table></figure>
<h4 id="less"><a href="#less" class="headerlink" title="less"></a>less</h4><p><code>cat [OPTION]... [FILE]...</code><br>&#x6D4F;&#x89C8;&#x6587;&#x5B57;&#x6863;&#x6848;&#x7684;&#x5185;&#x5BB9;</p>
<blockquote>
<p>-e&#xFF1A;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x663E;&#x793A;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x81EA;&#x52A8;&#x9000;&#x51FA;<br>-f&#xFF1A;&#x5F3A;&#x5236;&#x663E;&#x793A;&#x6587;&#x4EF6;<br>-g&#xFF1A;&#x4E0D;&#x52A0;&#x4EAE;&#x663E;&#x793A;&#x641C;&#x7D22;&#x5230;&#x7684;&#x6240;&#x6709;&#x5173;&#x952E;&#x8BCD;&#xFF0C;&#x4EC5;&#x663E;&#x793A;&#x5F53;&#x524D;&#x663E;&#x793A;&#x7684;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x4EE5;&#x63D0;&#x9AD8;&#x663E;&#x793A;&#x901F;&#x5EA6;<br>-l&#xFF1A;&#x641C;&#x7D22;&#x65F6;&#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;&#x7684;&#x5DEE;&#x5F02;<br>-N&#xFF1A;&#x6BCF;&#x4E00;&#x884C;&#x884C;&#x9996;&#x663E;&#x793A;&#x884C;&#x53F7;<br>-s&#xFF1A;&#x5C06;&#x8FDE;&#x7EED;&#x591A;&#x4E2A;&#x7A7A;&#x884C;&#x538B;&#x7F29;&#x6210;&#x4E00;&#x884C;&#x663E;&#x793A;<br>-S&#xFF1A;&#x5728;&#x5355;&#x884C;&#x663E;&#x793A;&#x8F83;&#x957F;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x800C;&#x4E0D;&#x6362;&#x884C;&#x663E;&#x793A;<br>-x&lt;&#x6570;&#x5B57;&gt;&#xFF1A;&#x5C06;TAB&#x5B57;&#x7B26;&#x663E;&#x793A;&#x4E3A;&#x6307;&#x5B9A;&#x4E2A;&#x6570;&#x7684;&#x7A7A;&#x683C;&#x5B57;&#x7B26;&#x3002;</p>
</blockquote>
<h4 id="head"><a href="#head" class="headerlink" title="head"></a>head</h4><p>&#x663E;&#x793A;&#x6587;&#x4EF6;&#x7684;&#x5F00;&#x5934;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;head&#x547D;&#x4EE4;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x7684;&#x5934;10&#x884C;&#x5185;&#x5BB9;</p>
<blockquote>
<p>-n&lt;&#x6570;&#x5B57;&gt;&#xFF1A;&#x6307;&#x5B9A;&#x663E;&#x793A;&#x5934;&#x90E8;&#x5185;&#x5BB9;&#x7684;&#x884C;&#x6570;<br>-c&lt;&#x5B57;&#x7B26;&#x6570;&gt;&#xFF1A;&#x6307;&#x5B9A;&#x663E;&#x793A;&#x5934;&#x90E8;&#x5185;&#x5BB9;&#x7684;&#x5B57;&#x7B26;&#x6570;<br>-v&#xFF1A;&#x603B;&#x662F;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x540D;&#x7684;&#x5934;&#x4FE1;&#x606F;<br>-q&#xFF1A;&#x4E0D;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x540D;&#x7684;&#x5934;&#x4FE1;&#x606F;&#x3002;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">head -n 5 -v install.log    <span class="comment"># &#x663E;&#x793A;&#x524D;5&#x884C;&#xFF0C;&#x53EF;&#x5199;&#x6210; head -5 &#x540C;&#x65F6;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x5934;&#x4FE1;&#x606F;  </span></span><br><span class="line">head -n -5 /etc/passwd      <span class="comment"># &#x663E;&#x793A;&#x9664;&#x6700;&#x540E;5&#x884C;&#x5916;&#x7684;&#x5185;&#x5BB9;</span></span><br></pre></td></tr></table></figure>
<h4 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h4><p><code>tail [OPTION]... [FILE]...</code><br>&#x9ED8;&#x8BA4;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x7684;&#x672B;&#x5C3E;10&#x884C;</p>
<blockquote>
<p>-n&lt;&#x6570;&#x5B57;&gt;&#xFF1A;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x7684;&#x5C3E;&#x90E8;N&#xFF08;N&#x4F4D;&#x6570;&#x5B57;&#xFF09;&#x884C;&#x5185;&#x5BB9;<br>-f&#xFF1A;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x6700;&#x65B0;&#x8FFD;&#x52A0;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x201C;name&#x201D;&#x8868;&#x793A;&#x4EE5;&#x6587;&#x4EF6;&#x540D;&#x7684;&#x65B9;&#x5F0F;&#x76D1;&#x89C6;&#x6587;&#x4EF6;&#x7684;&#x53D8;&#x5316;&#x3002;&#x201C;-f&#x201D;&#x4E0E;&#x201C;-fdescriptor&#x201D;&#x7B49;&#x6548;<br>-c&#xFF1A;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x5C3E;&#x90E8;&#x7684;N&#xFF08;N&#x4E3A;&#x6574;&#x6570;&#xFF09;&#x4E2A;&#x5B57;&#x8282;&#x5185;&#x5BB9;<br>-F&#xFF1A;&#x4E0E;&#x9009;&#x9879;&#x201C;-follow=name&#x201D;&#x548C;&#x201C;&#x2013;retry&#x201D;&#x8FDE;&#x7528;&#x65F6;&#x529F;&#x80FD;&#x76F8;&#x540C;<br>&#x2013;pid=&lt;&#x8FDB;&#x7A0B;&#x53F7;&gt;&#xFF1A;&#x4E0E;&#x201C;-f&#x201D;&#x9009;&#x9879;&#x8FDE;&#x7528;&#xFF0C;&#x5F53;&#x6307;&#x5B9A;&#x7684;&#x8FDB;&#x7A0B;&#x53F7;&#x7684;&#x8FDB;&#x7A0B;&#x7EC8;&#x6B62;&#x540E;&#xFF0C;&#x81EA;&#x52A8;&#x9000;&#x51FA;<br>-q&#xFF1A;&#x5F53;&#x6709;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x4E0D;&#x8F93;&#x51FA;&#x5404;&#x4E2A;&#x6587;&#x4EF6;&#x540D;<br>-s&lt;&#x79D2;&#x6570;&gt;&#xFF1A;&#x4E0E;&#x201C;-f&#x201D;&#x9009;&#x9879;&#x8FDE;&#x7528;&#xFF0C;&#x6307;&#x5B9A;&#x76D1;&#x89C6;&#x6587;&#x4EF6;&#x53D8;&#x5316;&#x65F6;&#x95F4;&#x9694;&#x7684;&#x79D2;&#x6570;<br>-v&#xFF1A;&#x5F53;&#x6709;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x603B;&#x662F;&#x8F93;&#x51FA;&#x5404;&#x4E2A;&#x6587;&#x4EF6;&#x540D;&#xFF1B;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tail -1 file            <span class="comment"># &#x663E;&#x793A;&#x6700;&#x540E;&#x4E00;&#x884C;</span></span><br><span class="line">tail -n +20 file        <span class="comment"># &#x663E;&#x793A;&#x6587;&#x4EF6;file&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4ECE;&#x7B2C;20&#x884C;&#x81F3;&#x6587;&#x4EF6;&#x672B;&#x5C3E;</span></span><br><span class="line">tail -c 10 file         <span class="comment"># &#x663E;&#x793A;&#x6587;&#x4EF6;file&#x7684;&#x6700;&#x540E;10&#x4E2A;&#x5B57;&#x7B26;  </span></span><br><span class="line">tail -f /etc/passwd     <span class="comment"># &#x67E5;&#x770B;&#x6587;&#x4EF6;&#x5C3E;&#x90E8;&#xFF0C;&#x4E0D;&#x9000;&#x51FA;&#xFF0C;&#x7B49;&#x5F85;&#x663E;&#x793A;&#x540E;&#x7EED;&#x8FFD;&#x52A0;&#x81F3;&#x6B64;&#x6587;&#x4EF6;&#x7684;&#x65B0;&#x5185;&#x5BB9;</span></span><br></pre></td></tr></table></figure>
<h4 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h4><p><code>wc [OPTION]... [FILE]...</code><br><strong>Word Count</strong> &#x7EDF;&#x8BA1;&#x6587;&#x672C;&#x884C;&#xFF0C;&#x5217;&#xFF0C;&#x5B57;&#x6570;</p>
<blockquote>
<p>-c&#xFF1A;bytes: &#x53EA;&#x663E;&#x793A;Bytes&#x6570;<br>-l&#xFF1A;lines: &#x53EA;&#x663E;&#x793A;&#x5217;&#x6570;<br>-w&#xFF1A;words: &#x53EA;&#x663E;&#x793A;&#x5B57;&#x6570;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wc -l /etc/passwd</span><br><span class="line">cat /etc/passwd | wc -w</span><br></pre></td></tr></table></figure>
<h4 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h4><p><code>cut OPTION... [FILE]...</code>  </p>
<blockquote>
<p>-d CHAR&#xFF1A;&#x6307;&#x5B9A;&#x5206;&#x9694;&#x7B26;<br>-f FIELD&#xFF1A;&#x9009;&#x51FA;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;  </p>
<ul>
<li>#&#xFF1A;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;  </li>
<li>m-n&#xFF1A;&#x4ECE;&#x7B2C;m&#x5230;n&#x7684;&#x5B57;&#x6BB5;  </li>
<li>m,n,x&#xFF1A;&#x79BB;&#x6563;&#x591A;&#x4E2A;&#x5B57;&#x6BB5;  </li>
<li>m-&#xFF1A;&#x4ECE;&#x7B2C;m&#x5B57;&#x6BB5;&#x5230;&#x6700;&#x540E;  </li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut -d: -f 2-4 /etc/passwd      <span class="comment"># &#x4EE5;&#xFF1A;&#x5206;&#x9694;&#x53D6;2&#x5230;4&#x5B57;&#x6BB5;&#x6570;&#x636E;</span></span><br></pre></td></tr></table></figure>
<h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><p><code>sort [OPTION]... [FILE]...</code>  </p>
<blockquote>
<p>-n&#xFF1A;&#x57FA;&#x4E8E;&#x6570;&#x503C;&#x5927;&#x5C0F;&#x6392;&#x5E8F;<br>-t CHAR&#xFF1A;&#x6307;&#x5B9A;&#x5206;&#x9694;&#x7B26;<br>-k #&#xFF1A;&#x7528;&#x4E8E;&#x6392;&#x5E8F;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x4E0E;-t&#x4E00;&#x8D77;&#x4F7F;&#x7528;<br>-r&#xFF1A;&#x9006;&#x5E8F;<br>-f&#xFF1A;&#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;<br>-u&#xFF1A;&#x91CD;&#x590D;&#x4E14;&#x8FDE;&#x7EED;&#x7684;&#x884C;&#x53EA;&#x4FDD;&#x7559;&#x4E00;&#x4EFD;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -t: -k 3 -r /etc/passwd    <span class="comment"># &#x7528;&#xFF1A;&#x5206;&#x9694;&#x4EE5;&#x7B2C;3&#x5B57;&#x6BB5;&#x9006;&#x5E8F;&#x6392;</span></span><br></pre></td></tr></table></figure>
<h4 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h4><p><code>uniq [OPTION]... [INPUT [OUTPUT]]</code>  </p>
<blockquote>
<p>-c&#xFF1A;&#x7EDF;&#x8BA1;&#x6BCF;&#x884C;&#x7684;&#x91CD;&#x590D;&#x6B21;&#x6570;<br>-u&#xFF1A;&#x663E;&#x793A;&#x6CA1;&#x6709;&#x91CD;&#x590D;&#x8FC7;&#x7684;&#x884C;<br>-d&#xFF1A;&#x663E;&#x793A;&#x91CD;&#x590D;&#x8FC7;&#x548C;&#x884C;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut -d:  -f7 /etc/passwd | uniq -c   <span class="comment"># &#x4EE5;&#xFF1A;&#x5206;&#x5272;&#x53D6;&#x7B2C;7&#x5B57;&#x6BB5;&#x4E0D;&#x91CD;&#x590D;&#x7684;&#x5185;&#x5BB9;&#x51FA;&#x73B0;&#x6B21;&#x6570;</span></span><br></pre></td></tr></table></figure>
<h4 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h4><p><code>tr [-cdst][&#x7B2C;&#x4E00;&#x5B57;&#x7B26;&#x96C6;][&#x7B2C;&#x4E8C;&#x5B57;&#x7B26;&#x96C6;]</code><br>translate character &#x6807;&#x51C6;&#x8F93;&#x5165;&#x8BBE;&#x5907;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x8F6C;&#x6362;&#x6216;&#x5220;&#x9664;&#x5B57;&#x7B26;&#xFF0C;&#x8F93;&#x51FA;&#x5230;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x8BBE;&#x5907;</p>
<blockquote>
<p>-c&#xFF1A;&#x53D6;&#x4EE3;&#x6240;&#x6709;&#x4E0D;&#x5C5E;&#x4E8E;&#x7B2C;&#x4E00;&#x5B57;&#x7B26;&#x96C6;&#x7684;&#x5B57;&#x7B26;<br>-d&#xFF1A;&#x5220;&#x9664;&#x6240;&#x6709;&#x5C5E;&#x4E8E;&#x7B2C;&#x4E00;&#x5B57;&#x7B26;&#x96C6;&#x7684;&#x5B57;&#x7B26;<br>-s&#xFF1A;&#x628A;&#x8FDE;&#x7EED;&#x91CD;&#x590D;&#x7684;&#x5B57;&#x7B26;&#x4EE5;&#x5355;&#x72EC;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x8868;&#x793A;<br>-t&#xFF1A;&#x5148;&#x5220;&#x9664;&#x7B2C;&#x4E00;&#x5B57;&#x7B26;&#x96C6;&#x8F83;&#x7B2C;&#x4E8C;&#x5B57;&#x7B26;&#x96C6;&#x591A;&#x51FA;&#x7684;&#x5B57;&#x7B26;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;HELLO WORLD&quot;</span> | tr <span class="string">&apos;A-Z&apos;</span> <span class="string">&apos;a-z&apos;</span>             <span class="comment"># &#x8F6C;&#x6362;&#x5927;&#x5199;&#x5230;&#x5C0F;&#x5B57;&#xFF0C;&#x7B49;&#x6548;`tr &apos;[:upper:]&apos; &apos;[:lower:]&apos;`  </span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello 123 world 456&quot;</span> | tr -dc <span class="string">&apos;0-9&apos;</span>       <span class="comment"># &#x5220;&#x9664;&#x975E;&#x6570;&#x5B57;&#x5B57;&#x7B26;</span></span><br><span class="line">cat text | tr <span class="string">&apos;\t&apos;</span> <span class="string">&apos;  &apos;</span>                         <span class="comment"># &#x5C06;&#x5236;&#x8868;&#x7B26;&#x8F6C;&#x6362;&#x4E3A;&#x7A7A;&#x683C; </span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;thisss is a text linnne.&quot;</span> | tr -s <span class="string">&apos; sn&apos;</span>   <span class="comment"># this is a text line.   &#x5220;&#x9664;&#x6307;&#x5B9A;&#x8FDE;&#x7EED;&#x91CD;&#x590D;&#x7684;&#x5B57;&#x7B26;</span></span><br><span class="line">cat file | tr -s <span class="string">&quot;\r&quot;</span> <span class="string">&quot;\n&quot;</span> &gt; new_file           <span class="comment"># &#x5220;&#x9664;Windows&#x6587;&#x4EF6;&#x201C;&#x9020;&#x6210;&#x201D;&#x7684;&apos;^M&apos;&#x5B57;&#x7B26;</span></span><br><span class="line">tr -dc A-Za-z0-9_ &lt; /dev/urandom | head -c 30 | xargs                  <span class="comment"># &#x751F;&#x6210;&#x968F;&#x673A;&#x7801;</span></span><br><span class="line"><span class="built_in">echo</span> 1 2 3 4 5 6 7 8 9 | xargs -n1 | <span class="built_in">echo</span> \$[ $(tr <span class="string">&apos;\n&apos;</span> <span class="string">&apos;+&apos;</span>) 0 ]       <span class="comment"># &#x6570;&#x5B57;&#x76F8;&#x52A0;&#x64CD;&#x4F5C;</span></span><br></pre></td></tr></table></figure>
<h4 id="tee"><a href="#tee" class="headerlink" title="tee"></a>tee</h4><p><code>tee [OPTION]... FILE...</code><br>&#x6570;&#x636E;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x7ED9;&#x5B9A;&#x6587;&#x4EF6;&#x548C;&#x5C4F;&#x5E55;&#x4E0A;</p>
<blockquote>
<p>-a&#xFF1A;&#x5411;&#x6587;&#x4EF6;&#x4E2D;&#x91CD;&#x5B9A;&#x5411;&#x65F6;&#x4F7F;&#x7528;&#x8FFD;&#x52A0;&#x6A21;&#x5F0F;<br>-i&#xFF1A;&#x5FFD;&#x7565;&#x4E2D;&#x65AD;&#xFF08;interrupt&#xFF09;&#x4FE1;&#x53F7;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls | tee ls.tee | cat -n</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[常用命令--磁盘管理]]></title>
      <url>http://liu2lin600.github.io/2016/05/21/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4--%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/</url>
      <content type="html"><![CDATA[<p>&#x5305;&#x62EC;&#x5206;&#x533A;&#x67E5;&#x770B;&#x3001;&#x521B;&#x5EFA;&#x3001;&#x4FEE;&#x6539;&#x2026;&#x53CA;&#x683C;&#x5F0F;&#x5316;&#xFF0C;&#x6302;&#x8F7D;&#x7B49;&#x64CD;&#x4F5C;<br><a id="more"></a></p>
<h4 id="mknod"><a href="#mknod" class="headerlink" title="mknod"></a>mknod</h4><p><code>mknod [OPTION]... NAME TYPE [MAJOR MINOR]</code><br>&#x521B;&#x5EFA;&#x5757;&#x8BBE;&#x5907;&#x6216;&#x5B57;&#x7B26;&#x8BBE;&#x5907;</p>
<blockquote>
<p><code>-m MODE</code>&#xFF1A;&#x521B;&#x5EFA;&#x540E;&#x8BBE;&#x5907;&#x6587;&#x4EF6;&#x8BBF;&#x95EE;&#x6743;&#x9650;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mknod -m 660 /dev/<span class="built_in">test</span> c 111 1</span><br></pre></td></tr></table></figure>
<h4 id="fdisk"><a href="#fdisk" class="headerlink" title="fdisk"></a>fdisk</h4><p><code>fdisk -l [-u][device...]</code><br>&#x5217;&#x51FA;&#x6307;&#x5B9A;&#x78C1;&#x76D8;&#x8BBE;&#x5907;&#x4E0A;&#x7684;&#x5206;&#x533A;&#x60C5;&#x51B5;&#x6216;&#x7BA1;&#x7406;&#x5206;&#x533A;</p>
<blockquote>
<p><code>-l</code>&#xFF1A;&#x5217;&#x51FA;&#x6307;&#x5B9A;&#x7684;&#x5916;&#x56F4;&#x8BBE;&#x5907;&#x7684;&#x5206;&#x533A;&#x8868;&#x72B6;&#x51B5;  </p>
<ul>
<li>&#x78C1;&#x76D8;&#x5206;&#x533A;&#x64CD;&#x4F5C; &#x5982;&#xFF1A;fdisk /dev/sda&#x7684;&#x5E38;&#x7528;&#x547D;&#x4EE4;<br><code>m</code>&#xFF1A;&#x67E5;&#x770B;&#x5E2E;&#x52A9;<br><code>p</code>&#xFF1A;&#x663E;&#x793A;&#x73B0;&#x6709;&#x5206;&#x533A;<br><code>n</code>&#xFF1A;&#x521B;&#x5EFA;&#x65B0;&#x5206;&#x533A;<br><code>d</code>&#xFF1A;&#x5220;&#x9664;&#x5DF2;&#x6709;&#x5206;&#x533A;<br><code>t</code>&#xFF1A;&#x4FEE;&#x6539;&#x5206;&#x533A;&#x7C7B;&#x578B;<br><code>l</code>&#xFF1A;&#x67E5;&#x770B;&#x6240;&#x6709;&#x5206;&#x533A;ID<br><code>w</code>&#xFF1A;&#x4FDD;&#x5B58;&#x5E76;&#x9000;&#x51FA;<br><code>q</code>&#xFF1A;&#x4E0D;&#x4FDD;&#x5B58;&#x9000;&#x51FA;  </li>
<li><code>&#x5728;&#x5DF2;&#x5206;&#x533A;&#x4E14;&#x6302;&#x8F7D;&#x7684;&#x67D0;&#x5206;&#x533A;&#x4E0A;&#x521B;&#x5EFA;&#x65B0;&#x5206;&#x533A;&#x65F6;&#xFF0C;&#x5185;&#x6838;&#x53EF;&#x80FD;&#x65E0;&#x6CD5;&#x8BC6;&#x522B;&#x51FA;&#x65B0;&#x5206;&#x533A;,/proc/partitions&#x6587;&#x4EF6;&#x8BB0;&#x5F55;</code>  </li>
</ul>
<ol>
<li>CentOS 5: partprobe [device]</li>
<li>CentOS6, 7:partx -a [device]&#xFF08;&#x6267;&#x884C;&#x4E24;&#x6B21;&#xFF09;&#x6216;kpartx -af [device]  </li>
</ol>
<ul>
<li>&#x547D;&#x4EE4;&#x8F93;&#x5165;&#x9519;&#x8BEF;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;<code>ctrl+backspace</code>&#x5220;&#x9664;&#xFF0C;</li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l        <span class="comment"># &#x67E5;&#x770B;&#x78C1;&#x76D8;&#x5206;&#x533A;&#x4FE1;&#x606F;  </span></span><br><span class="line">fdisk /dev/sda  <span class="comment"># &#x7BA1;&#x7406;&#x7B2C;&#x4E00;&#x5757;&#x78C1;&#x76D8;&#x5305;&#x62EC;&#x67E5;&#x770B;&#xFF0C;&#x521B;&#x5EFA;&#xFF0C;&#x5220;&#x9664;&#xFF0C;&#x4FEE;&#x6539;&#x7B49;&#x5206;&#x533A;&#x5B8C;&#x6210;&#x540E;&#x9700;&#x8981;&#x683C;&#x5F0F;&#x5316;mkfs.*&#x6216;mke2fs &#x53CA;&#x6302;&#x8F7D;mount&#x540E;&#x624D;&#x80FD;&#x4F7F;&#x7528;</span></span><br></pre></td></tr></table></figure>
<h4 id="parted"><a href="#parted" class="headerlink" title="parted"></a>parted</h4><p><code>parted [option] device [command]</code><br>fdisk&#x547D;&#x4EE4;&#x65E0;&#x6CD5;&#x652F;&#x6301;GPT&#x5206;&#x533A;&#x65B9;&#x5F0F;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x80FD;&#x4F7F;&#x7528;parted&#x547D;&#x4EE4;&#x6765;&#x5B9E;&#x73B0;&#x5212;&#x5206;&#x5927;&#x4E8E;2TB&#x7684;&#x5206;&#x533A;&#xFF0C;&#x5206;&#x533A;&#x540E;&#x4F7F;&#x7528;<code>mkfs</code>&#x76F8;&#x5173;&#x547D;&#x4EE4;&#x683C;&#x5F0F;&#x5316;&#x78C1;&#x76D8;</p>
<ul>
<li>[option]</li>
</ul>
<blockquote>
<p><code>-l</code>&#xFF1A;&#x663E;&#x793A;&#x6240;&#x6709;&#x78C1;&#x76D8;&#x5206;&#x533A;&#x4FE1;&#x606F;<br><code>-m</code>&#xFF1A;<br><code>-s</code>&#xFF1A;&#x4E0D;&#x63D0;&#x793A;&#x7528;&#x6237;<br><code>-i</code>&#xFF1A;&#x5FC5;&#x8981;&#x65F6;&#x63D0;&#x793A;&#x7528;&#x6237;</p>
</blockquote>
<ul>
<li>[command]</li>
</ul>
<blockquote>
<p><code>mklabel LABEL-TYPE</code>&#xFF1A;&#x521B;&#x5EFA;&#x65B0;&#x5206;&#x533A;&#x8868;&#x7C7B;&#x578B;&#xFF0C;&#x5E38;&#x7528;&#x7C7B;&#x578B;&#x6709;<code>msdos(MBR)</code>,<code>gpt</code><br><code>mkpart PART-type [ext4|swap|xfs] start end</code>&#xFF1A;&#x521B;&#x5EFA;&#x5206;&#x533A;&#xFF0C;PART&#x5305;&#x62EC;<code>primary</code>,<code>logical</code>&#x53CA;<code>extended</code><br><code>rescue START END</code>&#xFF1A;&#x6062;&#x590D;&#x5DF2;&#x88AB;&#x5220;&#x9664;&#x7684;&#x5206;&#x533A;<br><code>rm PARTITION</code>&#xFF1A;&#x5220;&#x9664;&#x5206;&#x533A;&#xFF0C;&#x5982;&#xFF1A;<code>rm 2</code><br><code>set partition flag state</code>&#xFF1A;&#x8BBE;&#x7F6E;&#x5206;&#x533A;&#x6807;&#x8BB0;&#xFF0C;&#x5982;&#xFF1A;<code>set 2 [boot|raid|lvm] on|off</code><br><code>select DEVICE</code>&#xFF1A;&#x9009;&#x62E9;&#x78C1;&#x76D8;&#xFF0C;&#x5982;&#xFF1A;<code>select /dev/sdb</code><br><code>resize START END</code>&#xFF1A;&#x8C03;&#x6574;&#x5927;&#x5C0F;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 1. &#x547D;&#x4EE4;&#x884C;&#x65B9;&#x5F0F; </span><br><span class="line">parted -m -s /dev/sdb mklabel gpt mkpart primary 0% 100%</span><br><span class="line">parted /dev/sdb print</span><br><span class="line">parted /dev/sdb set 2 lvm on</span><br><span class="line">parted /dev/sdb rm 1</span><br><span class="line">parted /dev/sdb rescue 0 -1   # -1&#x4E3A;&#x6700;&#x540E;</span><br><span class="line"> </span><br><span class="line"># 2. &#x4EA4;&#x4E92;&#x5F0F;&#x65B9;&#x5F0F;</span><br><span class="line">parted /dev/sdb</span><br><span class="line"></span><br><span class="line">(parted) help [mklabel|mkpart...]</span><br><span class="line">(parted) print</span><br><span class="line">(parted) select /dev/sdc...</span><br><span class="line">(parted) mklabel gpt</span><br><span class="line">(parted) mkpart primary 0 -1</span><br><span class="line">(parted) quit</span><br></pre></td></tr></table></figure>
<h4 id="mkfs"><a href="#mkfs" class="headerlink" title="mkfs"></a>mkfs</h4><p><code>mkfs [OPTION]... DEVICE</code><br>&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;  </p>
<blockquote>
<p><code>-t {ext2|ext3...}</code>&#xFF1A;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#xFF0C;&#x4F5C;&#x7528;&#x540C;<code>mkfs.ext2, mkfs.ext4,mkfs.xfs</code>&#x7B49;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs -t ext4 /dev/sda4 == mkfs.ext4 /dev/sda4</span><br></pre></td></tr></table></figure>
<h4 id="mke2fs"><a href="#mke2fs" class="headerlink" title="mke2fs"></a>mke2fs</h4><p><code>mke2fs [OPTION]... DEVICE</code><br>ext&#x7CFB;&#x5217;&#x4E13;&#x7528;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;  </p>
<blockquote>
<p><code>-t {ext2|ext3|ext4}</code>&#xFF1A;&#x6307;&#x660E;&#x7C7B;&#x578B;<br><code>-b {1024|2048|4096}</code>&#xFF1A;&#x6307;&#x660E;&#x5757;&#x5927;&#x5C0F;<br><code>-L LABEL</code>&#xFF1A;&#x6307;&#x660E;&#x5377;&#x6807;&#x540D;<br><code>-j</code>&#xFF1A;&#x521B;&#x5EFA;&#x5E26;&#x6709;&#x65E5;&#x5FD7;&#x529F;&#x80FD;&#x7684;ext3<br><code>-i #</code>&#xFF1A;&#x6307;&#x660E;&#x6BCF;&#x4E2A;Inode&#x7684;&#x5927;&#x5C0F;<br><code>-N #</code>&#xFF1A;&#x6307;&#x660E;Inode&#x6570;&#x91CF;<br><code>-m #</code>&#xFF1A;&#x6307;&#x660E;&#x9884;&#x7559;&#x7A7A;&#x95F4;&#x767E;&#x5206;&#x6BD4;&#xFF0C;&#x65E0;&#x9700;&#x52A0;%<br><code>-O [^]FEATURE</code>&#xFF1A;&#x6307;&#x5B9A;&#x67D0;&#x79CD;&#x7279;&#x6027;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mke2fs -t ext3 -b 2048 -L DATA -o acl /dev/sda6   <span class="comment"># &#x521B;&#x5EFA;ext3&#x683C;&#x5F0F;&#xFF0C;&#x5757;&#x5927;&#x5C0F;&#x4E3A;2k&#xFF0C;&#x5377;&#x6807;&#x4E3A;DATA&#x5E76;&#x5F00;&#x542F;acl&#x529F;&#x80FD;</span></span><br></pre></td></tr></table></figure>
<h4 id="tune2fs"><a href="#tune2fs" class="headerlink" title="tune2fs"></a>tune2fs</h4><p><code>tune2fs [OPTION]... DEVICE</code><br>&#x67E5;&#x770B;&#x6216;&#x4FEE;&#x6539;ext&#x7CFB;&#x7EDF;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x67D0;&#x4E9B;&#x5C5E;&#x6027;&#xFF0C;&#x65E0;&#x9700;&#x683C;&#x5F0F;&#x5316;  </p>
<blockquote>
<p><code>-l</code>&#xFF1A;&#x67E5;&#x770B;&#x8D85;&#x7EA7;&#x5757;&#x5185;&#x5BB9;<br><code>-j</code>&#xFF1A;ext2&#x2013;&gt;ext3&#xFF0C;&#x65E0;&#x635F;&#x5347;&#x7EA7;<br><code>-L</code>&#xFF1A;&#x4FEE;&#x6539;&#x5377;&#x6807;<br><code>-m #</code>&#xFF1A;&#x8C03;&#x6574;&#x9884;&#x7559;&#x7A7A;&#x95F4;<br><code>-O [^]FEATURE</code>&#xFF1A;&#x5F00;&#x542F;&#x6216;&#x5173;&#x95ED;&#x67D0;&#x4E9B;&#x7279;&#x6027;<br><code>-o [^]mount_options</code>&#xFF1A;&#x5F00;&#x542F;&#x6216;&#x5173;&#x95ED;&#x67D0;&#x4E9B;&#x9ED8;&#x8BA4;&#x6302;&#x8F7D;&#x9009;&#x9879;&#xFF0C;&#x5982;acl<br><code>-i #</code>: &#x6307;&#x5B9A;&#x6302;&#x8F7D;&#x4F7F;&#x7528;#&#x5929;&#x540E;&#x81EA;&#x68C0;&#xFF0C;0&#x6216;-1&#x8868;&#x793A;&#x5173;&#x95ED;<br><code>-c #</code>: &#x6307;&#x5B9A;&#x6302;&#x8F7D;&#x6B21;&#x6570;&#x8FBE;&#x5230;#&#x6B21;&#x4E4B;&#x540E;&#x8FDB;&#x884C;&#x81EA;&#x68C0;&#xFF0C;0&#x6216;-1&#x8868;&#x5173;&#x95ED;&#x6B64;   </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tune2fs -l /dev/sda1                      <span class="comment"># &#x67E5;&#x770B;sda1&#x78C1;&#x76D8;&#x7684;&#x8D85;&#x7EA7;&#x5757;&#x4FE1;&#x606F;</span></span><br><span class="line">tune2fs -L MYDAYA -m 5 -o acl /dev/sda1   <span class="comment"># &#x4FEE;&#x6539;&#x5377;&#x6807;&#x4E3A;MYDATA&#xFF0C;&#x8C03;&#x6574;&#x9884;&#x7559;&#x7A7A;&#x95F4;&#x4E3A;5%&#x5E76;&#x5F00;&#x542F;acl&#x529F;&#x80FD;</span></span><br></pre></td></tr></table></figure>
<h4 id="dumpe2fs"><a href="#dumpe2fs" class="headerlink" title="dumpe2fs"></a>dumpe2fs</h4><p><code>dumpe2fs [-h] DEVICE</code><br>&#x67E5;&#x770B;ext&#x7CFB;&#x5217;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x5C5E;&#x6027;&#x4FE1;&#x606F;</p>
<blockquote>
<p><code>-h</code>&#xFF1A;&#x663E;&#x793A;&#x8D85;&#x7EA7;&#x5757;&#x4FE1;&#x606F;&#xFF0C;&#x4E0D;&#x52A0;&#x5219;&#x4F1A;&#x67E5;&#x770B;&#x8D85;&#x7EA7;&#x5757;&#x548C;&#x5757;&#x7EC4;&#x4FE1;&#x606F;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dumpe2fs -h /dev/sda3</span><br></pre></td></tr></table></figure>
<h4 id="blkid"><a href="#blkid" class="headerlink" title="blkid"></a>blkid</h4><p>&#x67E5;&#x770B;&#x5206;&#x533A;UUID&#x53CA;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x683C;&#x5F0F;<br><code>blkid [-LU] DEVICE</code>  </p>
<blockquote>
<p><code>-L LABEL</code>&#xFF1A;&#x6839;&#x636E;&#x6307;&#x5B9A;&#x5377;&#x6807;&#x5B9A;&#x4F4D;&#x8BBE;&#x5907;<br><code>-U UUID</code>&#xFF1A;&#x6839;&#x636E;UUID&#x5B9A;&#x4F4D;&#x8BBE;&#x5907;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blkid /dev/sda1   <span class="comment"># &#x67E5;&#x770B;</span></span><br><span class="line">blkid -L DATA     <span class="comment"># &#x67E5;&#x627E;&#x5377;&#x6807;&#x4E3A;DATA&#x7684;&#x8BBE;&#x5907;</span></span><br></pre></td></tr></table></figure>
<h4 id="lsblk"><a href="#lsblk" class="headerlink" title="lsblk"></a>lsblk</h4><p>&#x663E;&#x793A;&#x78C1;&#x76D8;&#x5757;&#x8BBE;&#x5907;&#x4FE1;&#x606F;</p>
<h4 id="free"><a href="#free" class="headerlink" title="free"></a>free</h4><p>&#x67E5;&#x770B;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x60C5;&#x51B5;<br><strong>buffer:</strong> &#x5185;&#x5B58;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x5B58;&#x653E;&#x6587;&#x4EF6;&#x5143;&#x6570;&#x6570;&#x636E;<br><strong>cached:</strong> &#x5185;&#x5B58;&#x7F13;&#x5B58;&#x533A;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x5B58;&#x653E;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x6570;&#x636E;</p>
<blockquote>
<p><code>-m</code>&#xFF1A;&#x4EE5;m&#x4E3A;&#x5355;&#x4F4D;&#x663E;&#x793A;<br><code>-h</code>&#xFF1A;&#x4EBA;&#x6027;&#x5316;&#x663E;&#x793A;</p>
</blockquote>
<h4 id="fsck"><a href="#fsck" class="headerlink" title="fsck"></a>fsck</h4><p><code>fsck [OPTION]... DEVICE</code><br>&#x7528;&#x4E8E;&#x68C0;&#x67E5;&#x5E76;&#x4E14;&#x8BD5;&#x56FE;&#x4FEE;&#x590D;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x9519;&#x8BEF;&#x3002;&#x5F53;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x56DB;&#x5316;&#xFF0C;&#x53EF;&#x7528;fsck&#x6307;&#x4EE4;&#x5C1D;&#x8BD5;&#x52A0;&#x4EE5;&#x4FEE;&#x590D;&#xFF0C;&#x6307;&#x5B9A;&#x7C7B;&#x578B;&#x65F6;&#x53EF;&#x76F4;&#x63A5;&#x4F7F;&#x7528;fsck.ext2, fsck.ext3.., fsck.xfs&#x7B49;</p>
<blockquote>
<p><code>-t {ext3|ext4...}</code>&#xFF1A;&#x4FEE;&#x590D;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7C7B;&#x578B;&#xFF0C;&#x7B49;&#x540C;<code>fsck.ext4</code>&#x7B49;<br><code>-a</code>&#xFF1A;&#x65E0;&#x987B;&#x4EA4;&#x4E92;&#x800C;&#x81EA;&#x52A8;&#x81EA;&#x52A8;&#x4FEE;&#x590D;(&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;)  </p>
</blockquote>
<h4 id="e2fsck"><a href="#e2fsck" class="headerlink" title="e2fsck"></a>e2fsck</h4><p><code>e2fsck [OPTION]... DEVICE</code><br>&#x68C0;&#x6D4B;ext&#x7CFB;&#x5217;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</p>
<blockquote>
<p><code>-y</code>&#xFF1A;&#x5BF9;&#x6240;&#x6709;&#x95EE;&#x9898;&#x81EA;&#x52A8;&#x56DE;&#x7B54;yes<br><code>-f</code>&#xFF1A;&#x5F3A;&#x5236;&#x68C0;&#x6D4B;&#xFF0C;&#x5373;&#x4F7F;&#x6587;&#x4EF6;&#x6CA1;&#x95EE;&#x9898;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e2fsck -yf /dev/sda1</span><br></pre></td></tr></table></figure>
<h4 id="mkswap"><a href="#mkswap" class="headerlink" title="mkswap"></a>mkswap</h4><p><code>mkswap [OPTION]... DEVICE</code><br>&#x521B;&#x5EFA;swap&#x8BBE;&#x5907;&#xFF0C;&#x683C;&#x5F0F;&#x5316;&#x6210;swap&#x524D;&#x9700;&#x8C03;&#x6574;&#x5206;&#x533A;ID&#x4E3A;82</p>
<blockquote>
<p><code>-L</code>&#xFF1A;&#x6307;&#x660E;&#x5377;&#x6807;<br><code>-f</code>&#xFF1A;&#x5F3A;&#x5236;  </p>
</blockquote>
<h4 id="swapon"><a href="#swapon" class="headerlink" title="swapon"></a>swapon</h4><p><code>swapon [OPT] [DEV]</code><br>&#x542F;&#x7528;&#x4EA4;&#x6362;&#x5206;&#x533A;</p>
<blockquote>
<p><code>-a</code>&#xFF1A;&#x5B9A;&#x4E49;&#x5728;/etc/fstab&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6240;&#x6709;swap&#x8BBE;&#x5907;  </p>
</blockquote>
<h4 id="swapoff"><a href="#swapoff" class="headerlink" title="swapoff"></a>swapoff</h4><p><code>swapoff DEV</code>  </p>
<h4 id="mount"><a href="#mount" class="headerlink" title="mount"></a>mount</h4><p><code>mount [-nrw] [-t vfstype] [-o options] device dir</code>  </p>
<blockquote>
<p><code>-r</code>&#xFF1A;&#x53EA;&#x8BFB;&#x6302;&#x8F7D;<br><code>-n</code>&#xFF1A;&#x9ED8;&#x8BA4;&#x6302;&#x8F7D;&#x6216;&#x5378;&#x8F7D;&#x4F1A;&#x540C;&#x6B65;&#x66F4;&#x65B0;&#x81F3;<code>/etc/mtab</code>&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x52A0;-n&#x5219;&#x4E0D;&#x540C;&#x6B65;<br><code>-L LABEL</code>&#xFF1A;&#x6307;&#x660E;&#x5377;&#x6807;&#x65B9;&#x5F0F;<br><code>-U UUID</code>&#xFF1A;&#x6307;&#x660E;UUID&#x65B9;&#x5F0F;<br><code>--bind</code>&#xFF1A;&#x5B9E;&#x73B0;&#x5C06;&#x76EE;&#x5F55;&#x7ED1;&#x5B9A;&#x5728;&#x53E6;&#x4E00;&#x76EE;&#x5F55;&#x4E0A;&#xFF0C;&#x505A;&#x4E3A;&#x4E34;&#x65F6;&#x8BBF;&#x95EE;&#x5165;&#x53E3;<br><code>-a</code>&#xFF1A;&#x53EF;&#x81EA;&#x52A8;&#x6302;&#x8F7D;&#x5B9A;&#x4E49;&#x5728;<code>/etc/fstab</code>&#x4E2D;&#x6240;&#x652F;&#x6301;&#x7684;&#x81EA;&#x52A8;&#x6302;&#x8F7D;&#x8BBE;&#x5907;<br><code>-o options</code>&#xFF1A;&#x6302;&#x8F7D;&#x9009;&#x9879;,&#x9009;&#x9879;&#x5982;&#x4E0B;    </p>
<ul>
<li>sync/async&#xFF1A;&#x540C;&#x6B65;/&#x5F02;&#x6B65;  </li>
<li>atime/noatime&#xFF1A;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x88AB;&#x8BBF;&#x95EE;&#x65F6;&#x662F;&#x5426;&#x66F4;&#x65B0;&#x5176;&#x8BBF;&#x95EE;&#x65F6;&#x95F4;  </li>
<li>remount&#xFF1A;&#x91CD;&#x65B0;&#x6302;&#x8F7D;  </li>
<li>acl&#xFF1A;&#x652F;&#x6280;&#x4F7F;&#x7528;acl&#x529F;&#x80FD;&#xFF0C;<code>tune2fs -o acl DEV</code>  </li>
<li>ro&#xFF1A;&#x53EA;&#x8BFB;  </li>
<li>rw&#xFF1A;&#x8BFB;&#x5199;  </li>
<li>dev/nodev&#xFF1A;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x521B;&#x5EFA;&#x8BBE;&#x5907;&#x6587;&#x4EF6;  </li>
<li>exec/noexec&#xFF1A;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x8FD0;&#x884C;&#x6B64;&#x8BBE;&#x5907;&#x4E0A;&#x7684;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;  </li>
<li>user/nouser&#xFF1A;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x666E;&#x901A;&#x7528;&#x6237;&#x6302;&#x8F7D;&#x6B64;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;  </li>
<li>suid/nosuid&#xFF1A;&#x662F;&#x5426;&#x652F;&#x6301;suid&#xFF0C;sgid&#x7279;&#x6B8A;&#x6743;&#x9650;  </li>
<li>usrquota/grpquota&#xFF1A;&#x662F;&#x5426;&#x542F;&#x7528;&#x914D;&#x989D;&#x7CFB;&#x7EDF;    </li>
<li>defaults&#xFF1A;&#x5305;&#x62EC;rw, suid, dev, exec, auto, nouser, async, and rela-time  </li>
<li>loop: &#x6302;&#x8F7D;&#x672C;&#x5730;&#x56DE;&#x73AF;&#x8BBE;&#x5907;&#xFF0C;&#x5982;&#x672C;&#x5730;iso&#x955C;&#x50CF;   </li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mount -L MYDATE -r /mnt/cdrom         <span class="comment"># &#x5C06;&#x5377;&#x6807;&#x4E3A;MYDATE&#x7684;&#x5206;&#x533A;&#x53EA;&#x8BFB;&#x6302;&#x8F7D;&#x5230;/mnt/cdrom&#x4E0A;</span></span><br><span class="line">mount -o remount,acl /dev/sda6 /mnt   <span class="comment"># &#x91CD;&#x65B0;&#x6302;&#x8F7D;&#x6DFB;&#x52A0;acl&#x529F;&#x80FD;  </span></span><br><span class="line">mount --<span class="built_in">bind</span> /dev /mnt                <span class="comment"># &#x5C06;/dev&#x7ED1;&#x5B9A;&#x5728;/mnt&#x4E0A;</span></span><br></pre></td></tr></table></figure>
<h4 id="umount"><a href="#umount" class="headerlink" title="umount"></a>umount</h4><p><code>umount DEV|MOUNT_POINT</code><br>&#x5378;&#x8F7D;&#x8BBE;&#x5907;  </p>
<h4 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h4><blockquote>
<p><code>-v MOUNT_POINT</code>&#xFF1A;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x6302;&#x8F7D;&#x70B9;&#x88AB;&#x54EA;&#x4E9B;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -v /mnt</span><br></pre></td></tr></table></figure>
<h4 id="fuser"><a href="#fuser" class="headerlink" title="fuser"></a>fuser</h4><blockquote>
<p><code>-u</code>&#xFF1A;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x6302;&#x8F7D;&#x70B9;&#x88AB;&#x54EA;&#x4E9B;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;<br><code>-k</code>&#xFF1A;&#x6740;&#x6B7B;&#x8BBF;&#x95EE;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x7684;&#x6240;&#x6709;&#x8FDB;&#x7A0B;<br><code>-m</code>&#xFF1A;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x88AB;&#x52A0;&#x8F7D;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6216;&#x4E00;&#x4E2A;&#x88AB;&#x52A0;&#x8F7D;&#x7684;&#x5757;&#x8BBE;&#x5907;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fuser -km /mnt</span><br></pre></td></tr></table></figure>
<h4 id="df"><a href="#df" class="headerlink" title="df"></a>df</h4><p><code>df [OPT]... [FILE]</code><br>Disk Free &#x67E5;&#x770B;&#x78C1;&#x76D8;&#x4F7F;&#x7528;&#x60C5;&#x51B5;</p>
<blockquote>
<p><code>-l</code>&#xFF1A;&#x53EA;&#x663E;&#x793A;&#x672C;&#x5730;<br><code>-h</code>&#xFF1A;&#x4EBA;&#x6027;&#x5316;&#x663E;&#x793A;<br><code>-i</code>&#xFF1A;inode&#x4F7F;&#x7528;&#x60C5;&#x51B5;<br><code>-t</code>&#xFF1A;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;<br><code>-H</code>&#xFF1A;&#x8BA1;&#x7B97;&#x4EE5;1000&#x800C;&#x975E;1024&#x500D;&#x6570;<br><code>-T</code>&#xFF1A;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x683C;&#x5F0F;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -lh  <span class="comment"># &#x663E;&#x793A;&#x672C;&#x5730;&#x78C1;&#x76D8;&#x4F7F;&#x7528;&#x60C5;&#x51B5;</span></span><br></pre></td></tr></table></figure>
<h4 id="du"><a href="#du" class="headerlink" title="du"></a>du</h4><p><code>du [OPT] [FILE]</code><br>Disk Usage &#x663E;&#x793A;&#x76EE;&#x5F55;&#x6587;&#x4EF6;&#x5927;&#x5C0F;  </p>
<blockquote>
<p><code>-s</code>&#xFF1A;&#x603B;&#x5927;&#x5C0F;<br><code>-h</code>&#xFF1A;&#x4EBA;&#x6027;&#x5316;&#x663E;&#x793A;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">du -sh /etc</span><br><span class="line">&#x67E5;&#x770B;/etc&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6587;&#x4EF6;&#x603B;&#x5927;&#x5C0F;</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[常用命令--文件目录]]></title>
      <url>http://liu2lin600.github.io/2016/05/21/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4--%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95/</url>
      <content type="html"><![CDATA[<p>&#x5305;&#x62EC;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;&#x7684;&#x67E5;&#x770B;&#x3001;&#x521B;&#x5EFA;&#x3001;&#x4FEE;&#x6539;&#x3001;&#x5220;&#x9664;&#x7B49;&#x4E00;&#x7CFB;&#x5217;&#x76F8;&#x5173;&#x64CD;&#x4F5C;&#x5185;&#x5BB9;<br><a id="more"></a></p>
<h4 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h4><p><code>ls [OPTION]... FILE...</code>  </p>
<p>List &#x663E;&#x793A;&#x76EE;&#x6807;&#x5217;&#x8868;</p>
<blockquote>
<p><code>-a</code>&#xFF1A;&#x663E;&#x793A;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x53CA;&#x76EE;&#x5F55;<br><code>-l</code>&#xFF1A;&#x957F;&#x683C;&#x5F0F;&#x663E;&#x793A;<br><code>-h</code>&#xFF1A;&#x4EBA;&#x6027;&#x5316;&#x663E;&#x793A;&#x5927;&#x5C0F;<br><code>-d</code>&#xFF1A;&#x4EC5;&#x663E;&#x793A;&#x76EE;&#x5F55;&#x540D;&#xFF0C;&#x800C;&#x4E0D;&#x663E;&#x793A;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x5185;&#x5BB9;&#x5217;&#x8868;<br><code>-A</code>&#xFF1A;&#x663E;&#x793A;&#x9664;&#x201C;.&#x201D;&#x548C;&#x2019;..&#x2019;&#x5916;&#x7684;&#x6240;&#x6709;<br><code>-i</code>&#xFF1A;&#x663E;&#x793A;inode&#x8282;&#x70B9;&#x53F7;<br><code>-R</code>&#xFF1A;&#x9012;&#x5F52;(recursive)&#x663E;&#x793A;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -ahil /root</span><br></pre></td></tr></table></figure>
<h4 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h4><p><code>pwd [OPTION]...</code><br>Print Working Directory &#x663E;&#x793A;&#x5F53;&#x524D;&#x6240;&#x5728;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;</p>
<blockquote>
<p><code>$PWD</code>&#xFF1A;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x7528;&#x6765;&#x8BB0;&#x5F55;&#x5F53;&#x524D;&#x76EE;&#x5F55;<br><code>$OLDPWD</code>&#xFF1A;&#x8BB0;&#x5F55;&#x4E0A;&#x6B21;&#x76EE;&#x5F55;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x5207;&#x6362;&#x65F6;&#x5219;&#x4E0D;&#x5B58;&#x5728;  </p>
</blockquote>
<h4 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h4><p>Change Diretory &#x5207;&#x6362;&#x76EE;&#x5F55;  </p>
<ul>
<li>cd &#xFF1A;&#x8FDB;&#x5165;&#x7528;&#x6237;&#x4E3B;&#x76EE;&#x5F55;  </li>
<li>cd ~ &#xFF1A;&#x8FDB;&#x5165;&#x7528;&#x6237;&#x4E3B;&#x76EE;&#x5F55;  </li>
<li>cd - &#xFF1A;&#x8FD4;&#x56DE;&#x8FDB;&#x5165;&#x6B64;&#x76EE;&#x5F55;&#x4E4B;&#x524D;&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;  </li>
<li>cd .. &#xFF1A;&#x8FD4;&#x56DE;&#x4E0A;&#x7EA7;&#x76EE;&#x5F55;   </li>
<li>cd ../.. &#xFF1A;&#x8FD4;&#x56DE;&#x4E0A;&#x4E24;&#x7EA7;&#x76EE;&#x5F55;  </li>
</ul>
<h4 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h4><p><code>cp [OPTION]... SRC DEST</code><br>&#x590D;&#x5236;&#x6587;&#x4EF6;</p>
<blockquote>
<p><code>-r</code>&#xFF1A;&#x9012;&#x5F52;&#x5904;&#x7406;&#xFF0C;&#x5C06;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x4E0E;&#x5B50;&#x76EE;&#x5F55;&#x4E00;&#x5E76;&#x5904;&#x7406;<br><code>-i</code>&#xFF1A;&#x8986;&#x76D6;&#x65E2;&#x6709;&#x6587;&#x4EF6;&#x4E4B;&#x524D;&#x5148;&#x8BE2;&#x95EE;&#x7528;&#x6237;<br><code>-f</code>&#xFF1A;&#x5F3A;&#x884C;&#x590D;&#x5236;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#xFF0C;&#x4E0D;&#x8BBA;&#x76EE;&#x6807;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x662F;&#x5426;&#x5DF2;&#x5B58;&#x5728;<br><code>-p</code>&#xFF1A;&#x4FDD;&#x7559;&#x6E90;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x5C5E;&#x6027;<br><code>-a</code>&#xFF1A;&#x5F52;&#x6863;&#x590D;&#x5236;&#xFF0C;&#x5E38;&#x7528;&#x4E8E;&#x5907;&#x4EFD;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x5C06;/home/liu&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#x5305;&#x62EC;&#x9690;&#x85CF;&#x6587;&#x4EF6;&#xFF0C;&#x4E00;&#x540C;&#x590D;&#x5236;&#x5230;/tmp&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x5C06; &apos;.&apos; &#x6362;&#x6210; &apos;* &apos;&#x65F6;&#x5C06;&#x4E0D;&#x590D;&#x5236;&#x9690;&#x85CF;&#x6587;&#x4EF6;  </span></span><br><span class="line">cp -rf /home/liu/. /tmp</span><br></pre></td></tr></table></figure>
<h4 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h4><p><code>mv [OPTION]... SOURCE... DIRECTORY</code><br>&#x79FB;&#x52A8;&#x6216;&#x91CD;&#x547D;&#x540D;&#x6587;&#x4EF6;&#x76EE;&#x5F55;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv /<span class="built_in">test</span>/* .       <span class="comment"># &#x79FB;&#x52A8;/test/&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x5230;&#x5F53;&#x524D;&#x76EE;&#x5F55;</span></span><br><span class="line">mv a.txt b.txt     <span class="comment"># &#x91CD;&#x547D;&#x540D;a.txt&#x4E3A;b.txt</span></span><br></pre></td></tr></table></figure>
<h4 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h4><p><code>rm [OPTION]... FILE...</code><br>&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5C06;&#x67D0;&#x4E2A;&#x76EE;&#x5F55;&#x53CA;&#x5176;&#x4E0B;&#x5C5E;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x53CA;&#x5176;&#x5B50;&#x76EE;&#x5F55;&#x5747;&#x5220;&#x9664;&#x6389;&#x3002;&#x5BF9;&#x4E8E;&#x94FE;&#x63A5;&#x6587;&#x4EF6;&#xFF0C;&#x53EA;&#x662F;&#x5220;&#x9664;&#x6574;&#x4E2A;&#x94FE;&#x63A5;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x539F;&#x6709;&#x6587;&#x4EF6;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;&#xFF0C;<code>&#x4F7F;&#x7528;&#x65F6;&#x5FC5;&#x987B;&#x5C0F;&#x5FC3;</code></p>
<blockquote>
<p><code>-f</code>&#xFF1A;&#x5F3A;&#x5236;&#x5220;&#x9664;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;<br><code>-i</code>&#xFF1A;&#x5220;&#x9664;&#x5DF2;&#x6709;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x4E4B;&#x524D;&#x5148;&#x8BE2;&#x95EE;&#x7528;&#x6237;<br><code>-r&#x6216;-R</code>&#xFF1A;&#x9012;&#x5F52;&#x5904;&#x7406;&#xFF0C;&#x5C06;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x4E0E;&#x5B50;&#x76EE;&#x5F55;&#x4E00;&#x5E76;&#x5904;&#x7406;<br><code>-d</code>&#xFF1A;&#x76F4;&#x63A5;&#x628A;&#x6B32;&#x5220;&#x9664;&#x7684;&#x76EE;&#x5F55;&#x7684;&#x786C;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5220;&#x9664;&#x6210;0&#xFF0C;&#x5220;&#x9664;&#x8BE5;&#x76EE;&#x5F55;<br><code>--preserve-root</code>&#xFF1A;&#x4E0D;&#x5BF9;&#x6839;&#x76EE;&#x5F55;&#x8FDB;&#x884C;&#x9012;&#x5F52;&#x64CD;&#x4F5C;<br><code>-v</code>&#xFF1A;&#x663E;&#x793A;&#x6307;&#x4EE4;&#x7684;&#x8BE6;&#x7EC6;&#x6267;&#x884C;&#x8FC7;&#x7A0B;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /<span class="built_in">test</span>/aa/*   <span class="comment"># &#x5220;&#x9664;/test/aa/&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#xFF0C;&#x4F46;&#x4E0D;&#x5305;&#x62EC;&#x9690;&#x85CF;&#x6587;&#x4EF6;</span></span><br></pre></td></tr></table></figure>
<h4 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h4><p><code>touch [OPTION]... FILE...</code><br>&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x65F6;&#x95F4;&#x6216;&#x8005;&#x521B;&#x5EFA;&#x6587;&#x4EF6;</p>
<blockquote>
<p><code>-a</code>&#xFF1A;&#x4FEE;&#x6539;&#x8BBF;&#x95EE;&#x65F6;&#x95F4;<br><code>-m</code>&#xFF1A;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x4FEE;&#x6539;&#x65F6;&#x95F4;<br><code>-d DTEATE</code>&#xFF1A;&#x8BBE;&#x5B9A;&#x65F6;&#x95F4;&#x4E0E;&#x65E5;&#x671F;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5404;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x683C;&#x5F0F;<br><code>-r FILE</code>&#xFF1A;&#x628A;&#x6307;&#x5B9A;&#x6587;&#x6863;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x65E5;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x7EDF;&#x7EDF;&#x8BBE;&#x6210;&#x548C;&#x53C2;&#x8003;&#x6587;&#x6863;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x76F8;&#x540C;<br><code>-t STAMP</code>&#xFF1A;&#x8BBE;&#x5B9A;&#x65F6;&#x95F4;&#x6233;&#xFF0C;&#x5305;&#x62EC;atime&#xFF0C;mtime&#xFF0C;&#x65F6;&#x95F4;&#x683C;&#x5F0F;: [[CC]YY]MMDDhhmm[.SS]&#xFF08;&#x5E74;&#x6708;&#x65E5;&#x65F6;&#x5206;&#x79D2;&#xFF09;<br><code>-c</code>&#xFF1A;&#x4E0D;&#x521B;&#x5EFA;&#x4EFB;&#x4F55;&#x6587;&#x4EF6;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">touch a.txt                     <span class="comment"># &#x521B;&#x5EFA;&#x6587;&#x4EF6;</span></span><br><span class="line">touch -t 20160521234512 a.txt   <span class="comment"># &#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x6233;  </span></span><br><span class="line">touch -r a.txt b.txt            <span class="comment"># &#x6D4B;&#x8BD5;&#x521B;&#x5EFA;</span></span><br></pre></td></tr></table></figure>
<h4 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h4><p><code>mkdir [OPTION]... DIRECTORY...</code><br>&#x521B;&#x5EFA;&#x76EE;&#x5F55;</p>
<blockquote>
<p><code>-m</code>&#xFF1A;&#x6307;&#x5B9A;&#x6743;&#x9650;<br><code>-p</code>&#xFF1A;&#x9012;&#x5F52;&#x521B;&#x5EFA;&#x591A;&#x7EA7;&#x76EE;&#x5F55;<br><code>-v</code>&#xFF1A;&#x663E;&#x793A;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B;&#x4FE1;&#x606F;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -m 755 /tmp/<span class="built_in">test</span>  </span><br><span class="line">mkdir -pv /tmp/testdir/{a,b}_{m,n}  <span class="comment"># &#x5148;&#x521B;&#x5EFA;/tmp/testdir/&#xFF0C;&#x518D;&#x5728;&#x5176;&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;a_m, a_n, b_m, b_n&#x76EE;&#x5F55;</span></span><br></pre></td></tr></table></figure>
<h4 id="mktemp"><a href="#mktemp" class="headerlink" title="mktemp"></a>mktemp</h4><p><code>mktemp [OPT] [TEMPLATE]</code><br>&#x521B;&#x5EFA;&#x4E34;&#x65F6;&#x76EE;&#x5F55;&#x6216;&#x6587;&#x4EF6;</p>
<blockquote>
<p><code>-d</code>&#xFF1A;&#x521B;&#x5EFA;&#x76EE;&#x5F55;<br><code>-u</code>&#xFF1A;&#x4E0D;&#x4EA7;&#x751F;&#x5B9E;&#x9645;&#x76EE;&#x5F55;&#x6216;&#x6587;&#x4EF6;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x6D4B;&#x8BD5;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mktemp /tmp/mytemp.XXX      <span class="comment"># X&#x81F3;&#x5C11;3&#x4E2A;&#x4EE5;&#x4E0A;&#xFF0C;&#x751F;&#x6210;&#x65F6;&#x7528;&#x968F;&#x673A;&#x5B57;&#x6BCD;&#x4EE3;&#x66FF;</span></span><br></pre></td></tr></table></figure>
<h4 id="file"><a href="#file" class="headerlink" title="file"></a>file</h4><p><code>file [OPTION]... FILE...</code><br>&#x68C0;&#x6D4B;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#xFF0C;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x4E4B;&#x95F4;&#x7528;&#x7A7A;&#x683C;</p>
<blockquote>
<p>-b&#xFF1A;&#x5217;&#x51FA;&#x7ED3;&#x679C;&#x4E0D;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x540D;  </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file /usr/bin/passwd</span><br></pre></td></tr></table></figure>
<h4 id="stat"><a href="#stat" class="headerlink" title="stat"></a>stat</h4><p><code>stat [OPTION]... FILE...</code><br>&#x663E;&#x793A;&#x6587;&#x4EF6;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x5927;&#x5C0F;&#x3001;&#x8282;&#x70B9;&#x53F7;&#x3001;&#x6743;&#x9650;&#x3001;&#x8BBF;&#x95EE;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x7B49;&#x5143;&#x6570;&#x636E;&#x5185;&#x5BB9;</p>
<blockquote>
<p><code>-t</code>&#xFF1A;&#x4EE5;&#x7B80;&#x6D01;&#x65B9;&#x5F0F;&#x8F93;&#x51FA;&#x4FE1;&#x606F;<br><code>-L</code>&#xFF1A;&#x652F;&#x6301;&#x7B26;&#x53F7;&#x8FDE;&#x63A5;<br><code>-f</code>&#xFF1A;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x72B6;&#x6001;&#x800C;&#x975E;&#x6587;&#x4EF6;&#x72B6;&#x6001;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> /etc/passwd</span><br></pre></td></tr></table></figure>
<h4 id="tree"><a href="#tree" class="headerlink" title="tree"></a>tree</h4><p><code>tree [OPTION]... Directory...</code><br>&#x4EE5;&#x6811;&#x5F62;&#x65B9;&#x5F0F;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#xFF0C;&#x5305;&#x62EC;&#x5B50;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6587;&#x4EF6;</p>
<blockquote>
<p><code>-a</code>&#xFF1A;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x4EE5;&#x76EE;&#x5F55;&#x6811;&#x7684;&#x683C;&#x5F0F;&#x663E;&#x793A;&#xFF0C;&#x9ED8;&#x8BA4;<br><code>-d</code>&#xFF1A;&#x6240;&#x6709;&#x7684;&#x76EE;&#x5F55;&#x4EE5;&#x6811;&#x72B6;&#x5F62;&#x5F0F;&#x663E;&#x793A;<br><code>-g</code>&#xFF1A;&#x5217;&#x51FA;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x6240;&#x5C5E;&#x7FA4;&#x7EC4;&#x540D;&#x79F0;&#xFF0C;&#x6CA1;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x540D;&#x79F0;&#x65F6;&#xFF0C;&#x5219;&#x663E;&#x793A;&#x7FA4;&#x7EC4;&#x8BC6;&#x522B;&#x7801;<br><code>-L NUM</code>&#xFF1A;&#x663E;&#x793A;&#x76EE;&#x5F55;&#x5C42;&#x7EA7;&#x6570;<br><code>-l</code>&#xFF1A;&#x5F53;&#x663E;&#x793A;&#x7684;&#x76EE;&#x5F55;&#x6216;&#x6587;&#x4EF6;&#x95EE;&#x94FE;&#x63A5;&#x662F;&#xFF0C;&#x5219;&#x540C;&#x65F6;&#x663E;&#x793A;&#x6E90;&#x6587;&#x4EF6;<br><code>-p</code>&#xFF1A;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x6743;&#x9650;<br><code>-s</code>&#xFF1A;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x5927;&#x5C0F;<br><code>-u</code>&#xFF1A;&#x663E;&#x793A;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#x7684;&#x6240;&#x5C5E;&#x4E3B;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tree /etc/rc.d/</span><br><span class="line">tree -agu -L 1 ~</span><br></pre></td></tr></table></figure>
<h4 id="which"><a href="#which" class="headerlink" title="which"></a>which</h4><p><code>which [options] [--] programname [...]</code><br>&#x67E5;&#x627E;&#x53EF;&#x6267;&#x884C;&#x7684;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x4E14;&#x53EA;&#x80FD;&#x5728;&#x73AF;&#x5883;&#x53D8;&#x91CF;<code>$PATH</code>&#x5B9A;&#x4E49;&#x7684;&#x76EE;&#x5F55;&#x4E2D;&#x67E5;&#x8BE2;  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> <span class="built_in">pwd</span></span><br></pre></td></tr></table></figure>
<h4 id="whereis"><a href="#whereis" class="headerlink" title="whereis"></a>whereis</h4><p>&#x67E5;&#x627E;&#x7A0B;&#x5E8F;&#x6587;&#x4EF6;&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#x3001;&#x6587;&#x4EF6;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x3001;&#x6587;&#x4EF6;&#x7684;&#x8BF4;&#x660E;&#x624B;&#x518C;  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis cat</span><br></pre></td></tr></table></figure>
<h4 id="ln"><a href="#ln" class="headerlink" title="ln"></a>ln</h4><p><code>&#x786C;&#x94FE;&#x63A5;&#xFF1A;ln  [&#x53C2;&#x6570;]  &#x6E90;&#x6587;&#x4EF6;  &#x76EE;&#x6807;&#x6587;&#x4EF6;</code><br><code>&#x8F6F;&#x94FE;&#x63A5;&#xFF1A;ln -s   [&#x6E90;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;]  [&#x76EE;&#x6807;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;]</code>  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x4E3A;log2.log&#x521B;&#x5EFA;&#x786C;&#x94FE;&#x63A5;ln2&#xFF0C;log2.log&#x4E0E;ln2&#x7684;&#x5404;&#x9879;&#x5C5E;&#x6027;&#x76F8;&#x540C;</span></span><br><span class="line">ln log2.log ln2   </span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x76EE;&#x5F55;&#x521B;&#x5EFA;&#x94FE;&#x63A5;&#x5FC5;&#x987B;&#x7528;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x521B;&#x5EFA;&#x4F1A;&#x4E0D;&#x6210;&#x529F;&#xFF0C;&#x4F1A;&#x63D0;&#x793A;&#xFF1A;&#x7B26;&#x53F7;&#x8FDE;&#x63A5;&#x7684;&#x5C42;&#x6570;&#x8FC7;&#x591A; &#x8FD9;&#x6837;&#x7684;&#x9519;&#x8BEF; &#x521B;&#x5EFA;&#x6307;&#x5411;/opt/soft/test/test3&#x7684;&#x7B26;&#x53F7;&#x94FE;&#x63A5;/opt/soft/test/test5/test3 </span></span><br><span class="line">ln -sv /opt/soft/<span class="built_in">test</span>/test3 /opt/soft/<span class="built_in">test</span>/test5</span><br></pre></td></tr></table></figure>
<h4 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h4><p><code>locate [OPTION]... PATTERN...</code><br>&#x67E5;&#x627E;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;&#xFF0C;&#x5176;&#x5B9E;&#x662F;find -name&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x5199;&#x6CD5;&#xFF0C;&#x4F46;&#x662F;&#x8981;&#x6BD4;&#x540E;&#x8005;&#x5FEB;&#x5F97;&#x591A;&#xFF0C;&#x539F;&#x56E0;&#x5728;&#x4E8E;&#x5B83;<strong>&#x4E0D;&#x641C;&#x7D22;&#x5177;&#x4F53;&#x76EE;&#x5F55;</strong>&#xFF0C;&#x800C;&#x662F;&#x641C;&#x7D22;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;<code>/var/lib/locatedb</code>&#xFF0C;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x542B;&#x6709;&#x672C;&#x5730;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x4FE1;&#x606F;&#x3002;Linux&#x7CFB;&#x7EDF;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E76;&#x4E14;&#x6BCF;&#x5929;&#x81EA;&#x52A8;&#x66F4;&#x65B0;&#x4E00;&#x6B21;&#xFF0C;&#x6240;&#x4EE5;&#x4F7F;&#x7528;locate&#x547D;&#x4EE4;&#x67E5;&#x4E0D;&#x5230;&#x6700;&#x65B0;&#x53D8;&#x52A8;&#x8FC7;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x4F7F;&#x7528;locate&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x4F7F;&#x7528;<strong>updatedb</strong>&#x547D;&#x4EE4;&#xFF0C;&#x624B;&#x52A8;&#x66F4;&#x65B0;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4F46;&#x6BD4;&#x8F83;&#x6D88;&#x8017;&#x8D44;&#x6E90;</p>
<blockquote>
<p><code>-b</code>&#xFF1A;&#x53EA;&#x5339;&#x914D;&#x57FA;&#x540D;<br><code>-c</code>&#xFF1A;&#x7EDF;&#x8BA1;&#x6570;&#x91CF;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">locate -bc issue</span><br></pre></td></tr></table></figure>
<h4 id="find"><a href="#find" class="headerlink" title="find"></a><font color="red">find</font></h4><p><code>find [OPTION] [&#x67E5;&#x627E;&#x8D77;&#x59CB;&#x8DEF;&#x5F84;] [&#x67E5;&#x627E;&#x6761;&#x4EF6;] [&#x5904;&#x7406;&#x52A8;&#x4F5C;]</code><br>&#x67E5;&#x627E;&#x8D77;&#x59CB;&#x8DEF;&#x5F84;&#xFF1A;&#x9ED8;&#x8BA4;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#xFF0C;&#x53EF;&#x4EE5;&#x591A;&#x4E2A;&#x8DEF;&#x5F84;<br>&#x5904;&#x7406;&#x52A8;&#x4F5C;&#xFF1A;&#x5982;&#x5220;&#x9664;&#x7B49;&#xFF0C;&#x9ED8;&#x8BA4;&#x8F93;&#x51FA;&#x81F3;&#x5C4F;&#x5E55;</p>
<blockquote>
<p><strong>&#x67E5;&#x627E;&#x6761;&#x4EF6;</strong><br><code>-name PATTERN</code>&#xFF1A;&#x6839;&#x636E;&#x6587;&#x4EF6;&#x540D;&#x67E5;&#x627E;&#xFF08;-iname&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#xFF09;&#xFF0C;&#x652F;&#x6301;glob&#x901A;&#x914D;&#x7B26;<br><code>-user USERNAME</code>&#xFF1A;&#x6240;&#x5C5E;&#x7528;&#x6237;&#xFF08;-nouser &#x6CA1;&#x6709;&#x6240;&#x5C5E;&#x7528;&#x6237;&#xFF09;<br><code>-group GROUP</code>&#xFF1A;&#x6240;&#x5C5E;&#x7EC4; &#xFF08;-nogroup &#x6CA1;&#x6709;&#x6240;&#x5C5E;&#x7EC4;&#x6587;&#x4EF6;&#xFF09;<br><code>-type TYPE</code>&#xFF1A;&#x7C7B;&#x578B;&#xFF08;f, d, l, b, c, p, s&#xFF09;<br><code>-size [+|-] #UNIT</code>(&#x5355;&#x4F4D;k, M, G)<br><code>-empty</code>&#xFF1A;&#x6587;&#x4EF6;&#x4E3A;&#x7A7A;&#x800C;&#x4E14;&#x662F;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x6587;&#x4EF6;&#x6216;&#x76EE;&#x5F55;<br><code>-atime [+|-] #</code>&#xFF1A;&#x8BBF;&#x95EE;&#x65F6;&#x95F4;&#xFF0C;&#x4EE5;&#x5929;&#x4E3A;&#x5355;&#x4F4D;&#xFF08;-mtime&#x4FEE;&#x6539;, -ctime&#x6539;&#x53D8;&#xFF09;<br><code>-amin [+|-] #</code>&#xFF1A;&#xFF08;-mmin, -cmin&#xFF09;&#x4EE5;&#x5206;&#x949F;&#x4E3A;&#x5355;&#x4F4D;<br><code>-executable|-readable|writable</code>&#xFF1A;&#x53EF;&#x6267;&#x884C;/&#x8BFB;/&#x5199;<br><code>-samefile FILE</code>&#xFF1A;&#x67E5;&#x627E;&#x4E0E;FILE&#x6587;&#x4EF6;&#x7684;&#x786C;&#x94FE;&#x6587;&#x4EF6;<br><code>-perm [/|-]MODE</code>&#xFF1A;&#x6309;&#x6743;&#x9650;&#x67E5;&#x627E;&#xFF0C;&#x6743;&#x9650;&#x8868;&#x793A;&#x5982;&#x4E0B;</p>
<blockquote>
<p><code>644</code>&#xFF1A;&#x6307;&#x5B9A;644&#x6743;&#x9650;<br><code>/755</code>&#xFF1A;&#x4EFB;&#x4E00;&#x7C7B;&#x7528;&#x6237;&#x4EFB;&#x4E00;&#x4F4D;(rwx)&#x5408;&#x5373;&#x53EF;==&gt;&#x201D;&#x6216;&#x201D;&#x201D;<br><code>-222</code>&#xFF1A;&#x6BCF;&#x4E00;&#x7C7B;&#x7528;&#x6237;&#x6743;&#x9650;&#x6BCF;&#x4E00;&#x4F4D;(rwx)&#x90FD;&#x540C;&#x65F6;&#x7B26;&#x5408;==&gt;&#x201D;&#x4E0E;&#x201D;<br><code>u=rw,g=r,o=r</code>&#xFF1A;&#x7B49;&#x540C;644</p>
</blockquote>
</blockquote>
<blockquote>
<p><strong>&#x5904;&#x7406;&#x52A8;&#x4F5C;</strong><br><code>-ls</code>&#xFF1A;&#x7C7B;&#x4F3C;&#x5BF9;&#x67E5;&#x627E;&#x7684;&#x7ED3;&#x679C;&#x4F7F;&#x7528;ls -l&#x547D;&#x4EE4;&#xFF08;&#x5982;&#x524D;&#x6761;&#x4EF6;&#x4E3A;&#x6216;&#x5173;&#x7CFB;&#xFF0C;&#x9700;&#x52A0;&#x62EC;&#x53F7;&#xFF09;<br><code>-fls FILE</code>&#xFF1A;ls -l&#x7684;&#x7ED3;&#x679C;&#x5199;&#x5165;&#x6587;&#x4EF6;<br><code>-delete</code>&#xFF1A;&#x5220;&#x9664;&#x627E;&#x5230;&#x7684;&#x6587;&#x4EF6;<br><code>-ok  COMMAND {} \;</code>&#xFF1A;&#x5BF9;&#x6BCF;&#x4E2A;&#x7ED3;&#x679C;&#x6267;&#x884C;&#x547D;&#x4EE4;&#xFF0C;&#x6BCF;&#x6B21;&#x9700;&#x8981;&#x786E;&#x8BA4;<br><code>-exec** COMMAND {} **\;</code>&#xFF1A;&#x5BF9;&#x6BCF;&#x4E2A;&#x7ED3;&#x679C;&#x7EDF;&#x4E00;&#x6267;&#x884C;&#x547D;&#x4EE4;&#xFF0C;&#x65E0;&#x9700;&#x786E;&#x8BA4;  </p>
<blockquote>
<p><strong>&#x8BF4;&#x660E;</strong>&#xFF1A;<code>;</code>&#x4E3A;find&#x505A;&#x6807;&#x8BB0;&#xFF0C;&#x7531;find&#x6765;&#x89E3;&#x6790;&#xFF0C;&#x786E;&#x4FDD;&#x53C2;&#x6570;&#x662F;&#x4F20;&#x9012;&#x7ED9;find&#x8FD8;&#x662F;COMMAND&#xFF0C;&#x7531;&#x4E8E;&#x5206;&#x53F7;&#x5728;bash&#x6709;&#x7279;&#x6B8A;&#x610F;&#x4E49;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x8F6C;&#x4E49;&#xFF0C;<code>{}</code>&#x8868;&#x793A;find&#x627E;&#x5230;&#x7684;&#x7ED3;&#x679C;&#xFF0C;COMMAND&#x5E38;&#x89C1;&#x6709;cp, rm&#x7B49;</p>
</blockquote>
</blockquote>
<blockquote>
<p><code>-a</code>&#xFF1A;&#x4E0E;&#xFF0C;&#x9ED8;&#x8BA4;&#x53EF;&#x7701;<br><code>-o</code>&#xFF1A;&#x6216;<br><code>-not</code>&#xFF1A;&#x975E;&#xFF0C;&#x4E5F;&#x53EF;&#x7528;<code>!</code></p>
</blockquote>
<blockquote>
<ul>
<li>&#x5927;&#x5C0F;<br>#UNIT:(#,#-1]<br>-#UNIT:[0,#-1]<br>+#UNIT:(#,+oo)  </li>
<li>&#x65F6;&#x95F4;(&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x524D;&#xFF0C;&#x6B63;&#x6574;&#x6570;)<br>#:[#,#-1)<br>-#:(#,0]<br>+#:(oo,#-1]</li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B;&#x4EE5;file&#x5F00;&#x5934;&#x540E;&#x63A5;&#x81F3;&#x5C11;&#x4E00;&#x4E2A;&#x5B57;&#x6BCD;&#x6570;&#x5B57;&#x7684;&#x6587;&#x4EF6;</span></span><br><span class="line">find . -iname <span class="string">&quot;file[[:alnum:]]&quot;</span>  </span><br><span class="line"><span class="comment"># &#x6240;&#x5C5E;&#x4E3B;&#x975E;root&#xFF0C;&#x6587;&#x4EF6;&#x540D;&#x4E0D;&#x542B;fs&#x4E14;&#x5927;&#x4E8E;15k&#x7684;&#x6587;&#x4EF6;  **&#x62EC;&#x53F7;&#x8981;&#x8F6C;&#x4E49;&#x4E14;&#x524D;&#x540E;&#x6709;&#x7A7A;&#x683C;**  </span></span><br><span class="line">find /tmp -not \\( -user root -o -not -name <span class="string">&quot;\*fs*&quot;</span> \\) -a -<span class="built_in">type</span> f -size +15k -ls  </span><br><span class="line"><span class="comment"># &#x627E;&#x5176;&#x5B83;&#x7528;&#x6237;&#x6709;&#x5199;&#x6743;&#x9650;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x5728;&#x6587;&#x4EF6;&#x540D;&#x540E;&#x52A0;.bak  </span></span><br><span class="line">find . -perm /002  -<span class="built_in">exec</span> cp {} {}.bak \;</span><br><span class="line"><span class="comment"># &#x81F3;&#x5C11;&#x4E00;&#x7C7B;&#x7528;&#x6237;&#x6CA1;&#x6709;&#x6267;&#x884C;&#x6743;&#x9650;&#x7684;&#x6587;&#x4EF6;</span></span><br><span class="line">find /tmp -not -perm -111 -<span class="built_in">type</span> -f -ls</span><br><span class="line"><span class="comment"># &#x7CFB;&#x7EDF;&#x4E0A;&#x6CA1;&#x6709;&#x5C5E;&#x4E3B;&#x6216;&#x5C5E;&#x7EC4;&#x4E14;&#x6700;&#x8FD1;1&#x5929;&#x5185;&#x66FE;&#x88AB;&#x8BBF;&#x95EE;&#x8FC7;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x5C5E;&#x4E3B;&#x5C5E;&#x7EC4;&#x5747;&#x4FEE;&#x6539;&#x4E3A;root</span></span><br><span class="line">find / \( -nouser -o -nogroup \) -a -atime -1 -<span class="built_in">exec</span> chown root:root {} \;</span><br></pre></td></tr></table></figure>
<h4 id="dd"><a href="#dd" class="headerlink" title="dd"></a>dd</h4><p>&#x8F6C;&#x6362;&#x6216;&#x590D;&#x5236;&#x6587;&#x4EF6;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x8F83;&#x4E3A;&#x5E95;&#x5C42;&#x7EA7;&#x522B;&#x7684;&#x590D;&#x5236;</p>
<blockquote>
<p><code>if=/PATH_SRC</code>&#xFF1A;&#x6E90;<br><code>of=/PATH_DEST</code>&#xFF1A;&#x76EE;&#x6807;<br><code>bs=#[MGTPEZY]</code>&#xFF1A;&#x590D;&#x5236;&#x5355;&#x5143;&#x5927;&#x5C0F;&#xFF0C;&#x4E0D;&#x52A0;&#x5355;&#x4F4D;&#x4E3A;&#x5B57;&#x8282;&#x6570;<br><code>count=#</code>&#xFF1A;&#x590D;&#x5236;&#x51E0;&#x4E2A;bs<br><code>seek=#</code>: &#x8DF3;&#x8FC7;&#x591A;&#x5C11;of&#x7684;&#x7A7A;&#x95F4;<br><code>skip=#</code>: &#x8DF3;&#x8FC7;&#x591A;&#x5C11;if&#x7684;&#x7A7A;&#x95F4;</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/dev/sda of=/dev/sdb                          <span class="comment"># &#x62F7;&#x8D1D;&#x6574;&#x4E2A;&#x78C1;&#x76D8;</span></span><br><span class="line">dd <span class="keyword">if</span>=/dev/sda of=/tmp.mbr.bak bs=512 count=1       <span class="comment"># &#x5907;&#x4EFD;MRB&#x4FE1;&#x606F;</span></span><br><span class="line">dd <span class="keyword">if</span>=/dev/zero of=/dev/sda bs=256 count=1          <span class="comment"># &#x7834;&#x574F;MBR&#x4E2D;&#x7684;Bootloader&#xFF0C;*/dev/zero &#x53EF;&#x4EE5;&#x6E90;&#x6E90;&#x4E0D;&#x65AD;&#x4EA7;&#x751F;0;/dev/null &#x6570;&#x636E;&#x9ED1;&#x6D1E;*</span></span><br><span class="line">dd <span class="keyword">if</span>=/dev/sda | gzip &gt; file.gz                     <span class="comment"># &#x590D;&#x5236;&#x5E76;&#x538B;&#x7F29;</span></span><br><span class="line">dd <span class="keyword">if</span>=/dev/sda of=/dev/sda                          <span class="comment"># &#x4FEE;&#x590D;&#x786C;&#x76D8;</span></span><br><span class="line">dd <span class="keyword">if</span>=/dev/zero of=/tmp/swapfile seek=2047 bs=1M count=2048    <span class="comment"># &#x521B;&#x5EFA;2G&#x5927;&#x5C0F;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x7528;&#x6765;&#x505A;&#x4E34;&#x65F6;swap&#x5206;&#x533A;&#x4F7F;&#x7528;(mkswap, swapon)</span></span><br></pre></td></tr></table></figure>
<h4 id="gzip"><a href="#gzip" class="headerlink" title="gzip"></a>gzip</h4><p><code>gzip file</code><br><code>gunzip file.gz</code><br><code>zcat file.gz</code><br>&#x5C06;&#x6587;&#x4EF6;&#x538B;&#x7F29;&#x4E3A;<strong>.gz</strong>&#x683C;&#x5F0F;&#xFF0C;&#x53EA;&#x80FD;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#xFF0C;&#x538B;&#x7F29;&#x540E;&#x5220;&#x9664;&#x539F;&#x6587;&#x4EF6;&#xFF0C;<code>zcat</code>&#x4E0D;&#x89E3;&#x538B;&#x67E5;&#x770B;&#x6587;&#x672C;&#x5185;&#x5BB9;</p>
<blockquote>
<p><code>-d</code>: &#x89E3;&#x538B;&#xFF0C;&#x540C;gunzip<br><code>-#</code>: 1-9&#xFF0C;&#x6307;&#x5B9A;&#x538B;&#x7F29;&#x6BD4;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;6<br><code>-c</code>: &#x5C06;&#x538B;&#x7F29;&#x7ED3;&#x679C;&#x8F93;&#x51FA;&#x81F3;&#x6807;&#x51C6;&#x8F93;&#x51FA;  </p>
</blockquote>
<h4 id="bzip2"><a href="#bzip2" class="headerlink" title="bzip2"></a>bzip2</h4><p><code>bzip file</code><br><code>bunzip file.bz2</code><br><code>bcat file.bz2</code><br>&#x5C06;&#x6587;&#x4EF6;&#x538B;&#x7F29;&#x4E3A;<strong>.bz2</strong>&#x683C;&#x5F0F;&#xFF0C;&#x538B;&#x7F29;&#x6BD4;&#x9AD8;&#x4E8E;<strong>.gz</strong>&#xFF0C;&#x53EA;&#x80FD;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x538B;&#x7F29;&#x540E;&#x5220;&#x9664;&#x539F;&#x6587;&#x4EF6;&#xFF0C;<code>bcat</code>&#x4E0D;&#x89E3;&#x538B;&#x67E5;&#x770B;&#x6587;&#x672C;&#x5185;&#x5BB9;</p>
<blockquote>
<p><code>-d</code>: &#x89E3;&#x538B;&#xFF0C;&#x540C;bunzip<br><code>-#</code>: 1-9&#xFF0C;&#x6307;&#x5B9A;&#x538B;&#x7F29;&#x6BD4;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;6<br><code>-k</code>: &#x538B;&#x7F29;&#x65F6;&#x4FDD;&#x7559;&#x539F;&#x6587;&#x4EF6; </p>
</blockquote>
<h4 id="xz"><a href="#xz" class="headerlink" title="xz"></a>xz</h4><p><code>xz file</code><br><code>unxz file.xz</code><br><code>xzcat file</code><br>&#x5C06;&#x6587;&#x4EF6;&#x538B;&#x7F29;&#x4E3A;<strong>.xz</strong>&#x683C;&#x5F0F;&#xFF0C;&#x538B;&#x7F29;&#x6BD4;&#x9AD8;&#x4E8E;<strong>.bz2</strong>&#xFF0C;&#x53EA;&#x80FD;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x538B;&#x7F29;&#x540E;&#x5220;&#x9664;&#x539F;&#x6587;&#x4EF6;&#xFF0C;<code>xzcat</code>&#x4E0D;&#x89E3;&#x538B;&#x67E5;&#x770B;&#x6587;&#x672C;&#x5185;&#x5BB9;</p>
<blockquote>
<p><code>-d</code>: &#x89E3;&#x538B;&#xFF0C;&#x540C;unxz<br><code>-#</code>: 1-9&#xFF0C;&#x6307;&#x5B9A;&#x538B;&#x7F29;&#x6BD4;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;6<br><code>-k</code>: &#x538B;&#x7F29;&#x65F6;&#x4FDD;&#x7559;&#x539F;&#x6587;&#x4EF6;</p>
</blockquote>
<h4 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h4><p><code>zip file.zip file1 file2...</code><br><code>unzip file.zip</code><br><strong>zip</strong>&#x662F;&#x79CD;&#x65E2;&#x5F52;&#x6863;&#x53C8;&#x538B;&#x7F29;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x53EF;&#x538B;&#x7F29;&#x76EE;&#x5F55;&#x6216;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x4F1A;&#x5220;&#x9664;&#x539F;&#x6587;&#x4EF6;</p>
<h4 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h4><p><code>tar [OPTION] FILE...</code><br>&#x5F52;&#x6863;&#x5DE5;&#x5177;(archive)&#xFF0C;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x538B;&#x7F29;&#x5F52;&#x6863;&#x6587;&#x4EF6;&#x4E3A;&#x6307;&#x5B9A;&#x538B;&#x7F29;&#x683C;&#x5F0F;</p>
<blockquote>
<p><code>-c</code>: &#x521B;&#x5EFA;&#x5F52;&#x6863;&#x6587;&#x4EF6;<br><code>-x</code>: &#x5C55;&#x5F00;&#x5F52;&#x6863;<br><code>-f FILE.tar</code>: &#x64CD;&#x4F5C;&#x7684;&#x5F52;&#x6863;&#x6587;&#x4EF6;<br><code>-v</code>: &#x663E;&#x793A;&#x64CD;&#x4F5C;&#x8FC7;&#x7A0B;<br><code>-t</code>: &#x4E0D;&#x5C55;&#x5F00;&#x5F52;&#x6863;&#xFF0C;&#x76F4;&#x63A5;&#x67E5;&#x770B;&#x5F52;&#x6863;&#x4E86;&#x54EA;&#x4E9B;&#x6587;&#x4EF6;<br><code>-p</code>: &#x4FDD;&#x7559;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x7684;&#x539F;&#x672C;&#x6743;&#x9650;&#x548C;&#x5C5E;&#x6027;<br><code>-r</code>: &#x5411;tar&#x5305;(&#x672A;&#x538B;&#x7F29;)&#x4E2D;&#x6DFB;&#x52A0;&#x6587;&#x4EF6;<br><code>--xattrs</code>: &#x5F52;&#x6863;&#x65F6;&#xFF0C;&#x4FDD;&#x7559;&#x6587;&#x4EF6;&#x7684;&#x6269;&#x5C55;&#x5C5E;&#x6027;&#x4FE1;&#x606F;  </p>
</blockquote>
<ul>
<li><code>-zcvf</code>: &#x5F52;&#x6863;&#x5E76;&#x8C03;&#x7528;gzip&#x538B;&#x7F29;  </li>
<li><code>-jcvf</code>: &#x5F52;&#x6863;&#x5E76;&#x8C03;&#x7528;bz2&#x538B;&#x7F29;  </li>
<li><code>-Jcvf</code>: &#x5F52;&#x6863;&#x5E76;&#x8C03;&#x7528;xz&#x538B;&#x7F29;  </li>
<li><code>-xf</code>: &#x89E3;&#x538B;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F1A;&#x81EA;&#x52A8;&#x8BC6;&#x522B;&#x5404;&#x79CD;&#x538B;&#x7F29;&#x683C;&#x5F0F;  </li>
<li><code>-C /PATH</code>: &#x6307;&#x5B9A;&#x89E3;&#x538B;&#x8DEF;&#x5F84;  </li>
</ul>
<p><strong>&#x5907;&#x6CE8;&#xFF1A;</strong>tar&#x547D;&#x4EE4;&#x7684;&#x9009;&#x9879;&#x524D;&#x7684;&#x2019;-&#x2018;&#x53EF;&#x4EE5;&#x7701;&#x7565;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar zcvf test.tar.gz file1 file2...   	<span class="comment"># &#x538B;&#x7F29;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x76EE;&#x5F55;</span></span><br><span class="line">tar xf test.tar.gz -C /tmp            	<span class="comment"># &#x89E3;&#x538B;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F1A;&#x81EA;&#x52A8;&#x8BC6;&#x522B;&#x5404;&#x79CD;&#x538B;&#x7F29;&#x683C;&#x5F0F;&#xFF0C;&#x6307;&#x5B9A;&#x8DEF;&#x5F84;</span></span><br><span class="line">tar tf test.tar.gz 						<span class="comment"># &#x53EA;&#x67E5;&#x770B;&#x4E0D;&#x89E3;&#x538B;</span></span><br><span class="line">tar rf test.tar a b 					<span class="comment"># &#x5411;tar&#x5305;&#x4E2D;&#x6DFB;&#x52A0;&#x6587;&#x4EF6;</span></span><br></pre></td></tr></table></figure>
<h4 id="rz-sz"><a href="#rz-sz" class="headerlink" title="rz/sz"></a>rz/sz</h4><p>&#x4F7F;&#x7528;SecureCRT&#x6216;&#x8005;Xshell&#x7B49;&#x5BA2;&#x6237;&#x7AEF;&#x5DE5;&#x5177;&#x8FDE;&#x63A5;Linux&#x7684;&#x4E0A;&#x4F20;&#x4E0B;&#x8F7D;&#x5DE5;&#x5177;&#xFF0C;&#x8F6F;&#x4EF6;&#x5305;&#x4E3A;<code>lrzsz</code></p>
<ol>
<li>&#x4E0A;&#x4F20; <code>rz</code>&#xFF08;&#x670D;&#x52A1;&#x5668;&#x7AEF;recieve&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x4E0A;&#x4F20;&#xFF09;</li>
<li>&#x4E0B;&#x8F7D; <code>sz</code></li>
</ol>
<h2 id="&#x5907;&#x6CE8;"><a href="#&#x5907;&#x6CE8;" class="headerlink" title="&#x5907;&#x6CE8;"></a>&#x5907;&#x6CE8;</h2><ol>
<li><code>access time</code>&#x662F;&#x6587;&#x6863;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x88AB;&#x8BFB;&#x53D6;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x56E0;&#x6B64;&#x9605;&#x8BFB;&#x4E00;&#x4E2A;&#x6587;&#x6863;&#x4F1A;&#x66F4;&#x65B0;&#x5B83;&#x7684;access&#x65F6;&#x95F4;&#xFF0C;&#x4F46;&#x5B83;&#x7684;modify&#x65F6;&#x95F4;&#x548C;change&#x65F6;&#x95F4;&#x5E76;&#x6CA1;&#x6709;&#x53D8;&#x5316;&#x3002;cat&#x3001;more &#x3001;less&#x3001;grep&#x3001;sed&#x3001;tail&#x3001;head&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#x90FD;&#x4F1A;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x7684;access&#x65F6;&#x95F4;&#x3002; </li>
<li><code>modify time</code>&#x662F;&#x6587;&#x672C;&#x672C;&#x8EAB;&#x7684;&#x5185;&#x5BB9;&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#x3002;[&#x6587;&#x6863;&#x7684;modify&#x65F6;&#x95F4;&#x4E5F;&#x53EB;&#x65F6;&#x95F4;&#x6233;(timestamp).] ls&#x547D;&#x4EE4;&#x770B;&#x5230;&#x7684;&#x662F;modify time&#x3002;&#x7528;vi&#x7B49;&#x5DE5;&#x5177;&#x7F16;&#x8F91;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x540E;&#xFF0C;modify time&#x4F1A;&#x88AB;&#x4FEE;&#x6539;&#x3002;</li>
<li><code>change time</code>&#x662F;&#x6587;&#x6863;&#x7684;&#x7D22;&#x5F15;&#x8282;&#x70B9;(inode)&#x53D1;&#x751F;&#x4E86;&#x6539;&#x53D8;(&#x6BD4;&#x5982;&#x4F4D;&#x7F6E;&#x3001;&#x7528;&#x6237;&#x5C5E;&#x6027;&#x3001;&#x7EC4;&#x5C5E;&#x6027;&#x7B49;)&#x3002;chmod, chown,create,mv&#x7B49;&#x52A8;&#x4F5C;&#x4F1A;&#x5C06;Linux&#x6587;&#x4EF6;&#x7684;change time&#x4FEE;&#x6539;&#x4E3A;&#x7CFB;&#x7EDF;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x3002;</li>
<li><code>&#x786C;&#x94FE;&#x63A5;</code>&#xFF1A;&#x901A;&#x8FC7;&#x7D22;&#x5F15;&#x8282;&#x70B9;&#x6765;&#x8FDB;&#x884C;&#x7684;&#x8FDE;&#x63A5;&#x3002;&#x5728;Linux&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x4FDD;&#x5B58;&#x5728;&#x78C1;&#x76D8;&#x5206;&#x533A;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x4E0D;&#x7BA1;&#x662F;&#x4EC0;&#x4E48;&#x7C7B;&#x578B;&#x90FD;&#x7ED9;&#x5B83;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x7F16;&#x53F7;&#xFF0C;&#x79F0;&#x4E3A;&#x7D22;&#x5F15;&#x8282;&#x70B9;&#x53F7;(InodeIndex)&#x3002;&#x5728;Linux&#x4E2D;&#xFF0C;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x540D;&#x6307;&#x5411;&#x540C;&#x4E00;&#x7D22;&#x5F15;&#x8282;&#x70B9;&#x662F;&#x5B58;&#x5728;&#x7684;&#x3002;&#x4E00;&#x822C;&#x8FD9;&#x79CD;&#x8FDE;&#x63A5;&#x5C31;&#x662F;&#x786C;&#x8FDE;&#x63A5;&#x3002;&#x786C;&#x8FDE;&#x63A5;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5141;&#x8BB8;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x62E5;&#x6709;&#x591A;&#x4E2A;&#x6709;&#x6548;&#x8DEF;&#x5F84;&#x540D;&#xFF0C;&#x8FD9;&#x6837;&#x7528;&#x6237;&#x5C31;&#x53EF;&#x4EE5;&#x5EFA;&#x7ACB;&#x786C;&#x8FDE;&#x63A5;&#x5230;&#x91CD;&#x8981;&#x6587;&#x4EF6;&#xFF0C;&#x4EE5;&#x9632;&#x6B62;&#x201C;&#x8BEF;&#x5220;&#x201D;&#x7684;&#x529F;&#x80FD;&#x3002;&#x5176;&#x539F;&#x56E0;&#x5982;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;&#x56E0;&#x4E3A;&#x5BF9;&#x5E94;&#x8BE5;&#x76EE;&#x5F55;&#x7684;&#x7D22;&#x5F15;&#x8282;&#x70B9;&#x6709;&#x4E00;&#x4E2A;&#x4EE5;&#x4E0A;&#x7684;&#x8FDE;&#x63A5;&#x3002;&#x53EA;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x5E76;&#x4E0D;&#x5F71;&#x54CD;&#x7D22;&#x5F15;&#x8282;&#x70B9;&#x672C;&#x8EAB;&#x548C;&#x5176;&#x5B83;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x53EA;&#x6709;&#x5F53;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x88AB;&#x5220;&#x9664;&#x540E;&#xFF0C;&#x6587;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x5757;&#x53CA;&#x76EE;&#x5F55;&#x7684;&#x8FDE;&#x63A5;&#x624D;&#x4F1A;&#x88AB;&#x91CA;&#x653E;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x6587;&#x4EF6;&#x624D;&#x4F1A;&#x88AB;&#x771F;&#x6B63;&#x5220;&#x9664;&#x3002;&#x4EE5;&#x6587;&#x4EF6;&#x526F;&#x672C;&#x7684;&#x5F62;&#x5F0F;&#x5B58;&#x5728;&#x3002;&#x5B83;&#x4F1A;&#x5728;&#x4F60;&#x9009;&#x5B9A;&#x7684;&#x4F4D;&#x7F6E;&#x4E0A;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x548C;&#x6E90;&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x76F8;&#x540C;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x4F46;&#x4E0D;&#x5360;&#x7528;&#x5B9E;&#x9645;&#x7A7A;&#x95F4;&#x3002;<strong>&#x4E0D;&#x5141;&#x8BB8;&#x7ED9;&#x76EE;&#x5F55;&#x521B;&#x5EFA;&#x786C;&#x94FE;&#x63A5;</strong>,<strong>&#x53EA;&#x6709;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E2D;&#x624D;&#x80FD;&#x521B;&#x5EFA;</strong>  </li>
<li><code>&#x8F6F;&#x94FE;&#x63A5;</code>&#xFF1A;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x5B83;&#x7684;&#x5185;&#x5BB9;&#x4E0D;&#x662F;&#x771F;&#x6B63;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x662F;&#x6307;&#x5411;&#x53E6;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF08;&#x94FE;&#x63A5;&#x76EE;&#x6807;&#xFF09;&#x7684;&#x8DEF;&#x5F84;&#x540D;&#x3002;&#x5728;&#x7B26;&#x53F7;&#x8FDE;&#x63A5;&#x4E2D;&#xFF0C;&#x6587;&#x4EF6;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x7684;&#x6709;&#x53E6;&#x4E00;&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#x4FE1;&#x606F;&#x3002;&#x5BF9;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x7684;&#x5927;&#x90E8;&#x5206;&#x64CD;&#x4F5C;&#xFF0C;&#x5305;&#x62EC;&#x6253;&#x5F00;&#x3001;&#x8BFB;&#x3001;&#x5199;&#x7B49;&#xFF0C;&#x90FD;&#x88AB;&#x4F20;&#x9012;&#x7ED9;&#x5176;&#x94FE;&#x63A5;&#x76EE;&#x6807;&#xFF0C;&#x64CD;&#x4F5C;&#x771F;&#x6B63;&#x4F5C;&#x7528;&#x5728;&#x94FE;&#x63A5;&#x76EE;&#x6807;&#x4E0A;&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x5982;&#x5220;&#x9664;&#x7B49;&#x5219;&#x4F5C;&#x7528;&#x5728;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x672C;&#x8EAB;&#x3002;&#x4EE5;&#x8DEF;&#x5F84;&#x7684;&#x5F62;&#x5F0F;&#x5B58;&#x5728;&#x3002;&#x7C7B;&#x4F3C;&#x4E8E;Windows&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;<strong>&#x5FEB;&#x6377;&#x65B9;&#x5F0F;</strong>&#xFF0C;<strong>&#x53EF;&#x4EE5;&#x5BF9;&#x76EE;&#x5F55;&#x8FDB;&#x884C;&#x94FE;&#x63A5;</strong>&#x3002;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;&#x8F6F;&#x94FE;&#x63A5;&#x53EF;&#x4EE5;&#x5BF9;&#x4E00;&#x4E2A;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x8FDB;&#x884C;&#x94FE;&#x63A5;&#xFF0C;<strong>&#x53EF;&#x4EE5;&#x8DE8;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</strong></li>
</ol>
]]></content>
    </entry>
    
  
  
</search>
